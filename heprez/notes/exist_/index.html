<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LOW LEVEL EXIST USAGE FUNCTIONS &mdash; Heprez Unversioned directory documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'Unversioned directory',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Heprez Unversioned directory documentation" href="../" />
    <link rel="next" title="exist" href="../exist/" />
    <link rel="prev" title="BACKUP ANT BUILD" href="../backup/part/build/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../exist/" title="exist"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../backup/part/build/" title="BACKUP ANT BUILD"
             accesskey="P">previous</a> |</li>
        <li><a href="../">Heprez Unversioned directory documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> /e </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">/h</a>   </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/"> cms01 </a> </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/downloads/"> downloads </a> </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/rezdb/db/hfagc/"> rezdb/db/hfagc/ </a> </li>
</ul>






<h3>Content Skeleton</h3>

<ul>
<li class="toctree-l1"><a class="reference internal" href="../SOP/">SOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/end_of_2011/">LOG</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../heprez/">HEPREZ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../heprez/#heprez-usage-log">HEPREZ USAGE LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rezdb/">REZDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compilation/">Compilation latex document</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../docs/math/">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hepex/hepex/">Hepex Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../future/">Future of b2c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environment/">Environment for heprez installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chiba/">Chiba</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chibatomcat/chibatomcat/">CHIBA TOMCAT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batik/">Batik</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inkscape/">Inkscape</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dvisvgm/">DVISVGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../images/">Binary Image creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backup/backup/">Partial Backup Machinery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backup/part/build/">BACKUP ANT BUILD</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">LOW LEVEL EXIST USAGE FUNCTIONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exist/">exist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macports/">macports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting/">porting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eperl/">eperl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svg/">svg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scrape/">scrape</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/exist_/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../backup/part/build/"
                        title="previous chapter">BACKUP ANT BUILD</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../exist/"
                        title="next chapter">exist</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="low-level-exist-usage-functions">
<h1>LOW LEVEL EXIST USAGE FUNCTIONS<a class="headerlink" href="#low-level-exist-usage-functions" title="Permalink to this headline">Â¶</a></h1>
<p>CAUTION other exist functions related to building exist live in env/exist.bash</p>
<dl class="docutils">
<dt><em>exist_running</em></dt>
<dd>report yes/no exist running on</dd>
<dt><em>exist_running_</em></dt>
<dd>return code</dd>
<dt><em>exist_dir</em></dt>
<dd>cd to it</dd>
</dl>
<p><em>exist_url relative/path host</em></p>
<blockquote>
<div><p>For the default host : &#8220;localhost&#8221;  the port of the
server is included in the URL, for other hosts the port
is not specified.:</p>
<div class="highlight-python"><pre>exist_url /servlet/db/                : $(exist_url /servlet/db/)
exist_url /servlet/db/ $HEPREZ_SERVER : $(exist_url /servlet/db/ $HEPREZ_SERVER)</pre>
</div>
<p>The behaviour is due to the usual configuration of directing all
remote access thru apache on :80</p>
</div></blockquote>
<dl class="docutils">
<dt><em>exist_put</em></dt>
<dd><p class="first">usage (no trailing slash):</p>
<div class="highlight-python"><pre>exist_put /tmp/dummy.xml /db/here/in/a/deeeeep/folder</pre>
</div>
<p class="last">results in the dbpath /db/here/in/a/deeeeep/folder/dummy.xml</p>
</dd>
<dt><em>exist_putt</em></dt>
<dd>similar to exist_put but with filesystem modtime diddling
expect that cannot diddle the modtime in the database, so do it in the filesystem, following the put
and then can check the timestamps prior to the put to avoid PUTing an unchanged file into db</dd>
<dt><em>exist_putt_test [force]</em></dt>
<dd>upload tmpfile to /db/test ... with &#8220;force&#8221; do filesystem touch first</dd>
<dt><em>exist_fstamp &lt;path&gt;</em></dt>
<dd>modtime        OOPS DARWINISM HERE</dd>
</dl>
<p><em>exist_rm &lt;dbp&gt; &lt;host:localhost&gt;</em></p>
<blockquote>
<div><p>delete a resource or collection from the database
CAUTION YOU CAN DELETE THE ENTIRE DB WITH THIS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">exist_rm</span> <span class="o">/</span><span class="n">db</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">hfagc</span><span class="o">/</span><span class="mi">20080401</span><span class="o">/</span><span class="n">rez</span><span class="o">-</span><span class="n">classify</span><span class="o">-</span><span class="n">key</span><span class="o">.</span><span class="n">xml</span>
<span class="n">exist_rm</span> <span class="o">/</span><span class="n">db</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">hfagc</span><span class="o">/</span><span class="mi">20080401</span><span class="o">/</span><span class="n">credits</span>
</pre></div>
</div>
<p>takes more than a minute/ages? sometimes,
suspect a timeout , but seemed to succeed,perhaps need:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">--</span><span class="n">connect</span><span class="o">-</span><span class="n">timeout</span>
<span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">time</span>
</pre></div>
</div>
</div></blockquote>
<p><em>exist_gett &lt;dbp&gt; &lt;fsdir&gt; &lt;host:localhost&gt; &lt;port:9090&gt;</em></p>
<blockquote>
<div>GETs from database with modification time alignment to that of the database</div></blockquote>
<p><em>exist_exists</em></p>
<p><em>exist_cq_ &lt;desription of query to lookup in examples.xml&gt;</em></p>
<blockquote>
<div><div class="highlight-python"><pre>exist_cq_ last modified files beneath /db/hfagc  --host=cms01.phys.ntu.edu.tw
exist_cq_ last --host=cms01.phys.ntu.edu.tw
## query with the 1st matching description is used</pre>
</div>
<p>Example output:</p>
<div class="highlight-python"><pre>{'{http://exist.sourceforge.net/NS/exist}start': '1', '{http://exist.sourceforge.net/NS/exist}count': '10', '{http://exist.sourceforge.net/NS/exist}hits': '218'}
    &lt;activity&gt;&lt;lastmod&gt;2011-11-28T13:41:00.985+08:00&lt;/lastmod&gt;&lt;name&gt;belle_psiketac.xml&lt;/name&gt;&lt;col&gt;/db/hfagc/belle/andrzej&lt;/col&gt;&lt;uri&gt;/db/hfagc/belle/andrzej/belle_psiketac.xml&lt;/uri&gt;&lt;base&gt;/db/hfagc/belle/andrzej/belle_psiketac.xml&lt;/base&gt;&lt;/activity&gt;
    &lt;activity&gt;&lt;lastmod&gt;2011-11-24T10:21:28.461+08:00&lt;/lastmod&gt;&lt;name&gt;belle_bs_jpif0.xml&lt;/name&gt;&lt;col&gt;/db/hfagc/belle/andrzej&lt;/col&gt;&lt;uri&gt;/db/hfagc/belle/andrzej/belle_bs_jpif0.xml&lt;/uri&gt;&lt;base&gt;/db/hfagc/belle/andrzej/belle_bs_jpif0.xml&lt;/base&gt;&lt;/activity&gt;
    &lt;activity&gt;&lt;lastmod&gt;2011-11-23T08:00:33.718+08:00&lt;/lastmod&gt;&lt;name&gt;belle_DS1D.xml&lt;/name&gt;&lt;col&gt;/db/hfagc/belle/andrzej&lt;/col&gt;&lt;uri&gt;/db/hfagc/belle/andrzej/belle_DS1D.xml&lt;/uri&gt;&lt;base&gt;/db/hfagc/belle/andrzej/belle_DS1D.xml&lt;/base&gt;&lt;/activity&gt;</pre>
</div>
</div></blockquote>
<p><em>exist_is_directly_accessible_</em></p>
<blockquote>
<div>Checking accessibility of eXist XMLRPC port (the backdoor) using netcat
Called by <em>exist_is_directly_accessible</em>, <em>exist_assert_directly_accessible</em></div></blockquote>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../exist/" title="exist"
             >next</a> |</li>
        <li class="right" >
          <a href="../backup/part/build/" title="BACKUP ANT BUILD"
             >previous</a> |</li>
        <li><a href="../">Heprez Unversioned directory documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>