<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>INDICES &mdash; Heprez Unversioned directory documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     'Unversioned directory',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Heprez Unversioned directory documentation" href="../../../" />
    <link rel="up" title="indices" href="../" />
    <link rel="next" title="ILLUSTRATOR MATH FONTS" href="../../fonts/fonts/" />
    <link rel="prev" title="INDICES BUILD" href="../build/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../fonts/fonts/" title="ILLUSTRATOR MATH FONTS"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../build/" title="INDICES BUILD"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../">Heprez Unversioned directory documentation</a> &raquo;</li>
          <li><a href="../../" >Binary Image creation</a> &raquo;</li>
          <li><a href="../" accesskey="U">indices</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> /e </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">/h</a>   </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/"> cms01 </a> </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/downloads/"> downloads </a> </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/rezdb/db/hfagc/"> rezdb/db/hfagc/ </a> </li>
</ul>






<h3>Content Skeleton</h3>

<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../SOP/">SOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../log/end_of_2011/">LOG</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../heprez/">HEPREZ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../heprez/#heprez-usage-log">HEPREZ USAGE LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rezdb/">REZDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../compilation/">Compilation latex document</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../docs/math/">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hepex/hepex/">Hepex Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../future/">Future of b2c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment/">Environment for heprez installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../chiba/">Chiba</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../chibatomcat/chibatomcat/">CHIBA TOMCAT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../batik/">Batik</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../inkscape/">Inkscape</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dvisvgm/">DVISVGM</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">Binary Image creation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../sandbox/">Sandbox for testing conversion Makefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tex2pdfpng/tex2pdfpng/">TEX2PDFPNG</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">indices</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../build/">INDICES BUILD</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">INDICES</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functions">FUNCTIONS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../fonts/fonts/">ILLUSTRATOR MATH FONTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pdf2svg/pdf2svg/">PDF2SVG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tex2svg/tex2svg/">TEX2SVG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tex2svgpngpdf/tex2svgpngpdf/">TEX2SVGPNGPDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../svgsmry/">svgsmry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../svg2png/svg2png/">SVG2PNG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../svg2pdf/svg2pdf/">SVG2PDF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../backup/backup/">Partial Backup Machinery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../backup/part/build/">BACKUP ANT BUILD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../exist_/">LOW LEVEL EXIST USAGE FUNCTIONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../exist/">exist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../macports/">macports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../porting/">porting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../eperl/">eperl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../svg/">svg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scrape/">scrape</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/images/indices/indices.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../build/"
                        title="previous chapter">INDICES BUILD</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../fonts/fonts/"
                        title="next chapter">ILLUSTRATOR MATH FONTS</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="indices">
<h1>INDICES<a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h1>
<p>Using indices is a crucial optimization for rather slow XQuerying.
Indices exist primarily in two places:</p>
<ol class="arabic simple">
<li>in eXist DB collection /db/hfagc_system</li>
<li>in file system directory <em>HEPREZ_DATA/images/indices/</em></li>
</ol>
<p>After <em>indices-make</em> runs XQueries to update indices within the DB
the <em>indices-compare</em> function is always called which updates
the file system counterpart indice.</p>
<p>Before updating indices the <em>indice-update</em> always
checks the status to see if source updates make the
indice stale relative, for example:</p>
<div class="highlight-python"><pre>local svgsummary=\$(heprez-xtalk svgsummary)
indices-update qtag2svgs \$svgsummary</pre>
</div>
<p>The indice in question is <em>qtag2svgs</em> with source that it depends
upon HEPREZ_DATA/images/svgsmry/svg-summary.xml</p>
<p>As additions of indices to the exist DB using the <em>exist_putt</em> command
which adjusts the file system time stamp based on the DB time stamp</p>
<div class="highlight-python"><pre>b2mc:~ heprez$ heprez-
b2mc:~ heprez$ heprez-xtalk qtag2svgs
/Users/heprez/data/data/images/indices/qtag2svgs.xml
b2mc:~ heprez$
b2mc:~ heprez$
b2mc:~ heprez$ ll /Users/heprez/data/data/images/indices/qtag2svgs.xml
ls: /Users/heprez/data/data/images/indices/qtag2svgs.xml: No such file or directory
b2mc:~ heprez$
b2mc:~ heprez$ ll /Users/heprez/data/data/images/indices/
total 440
-rw-r--r--   1 heprez  staff     107 Jun 21 18:20 qtags.xml
drwxr-xr-x   4 heprez  staff     136 Jun 21 18:20 .
-rw-r--r--   1 heprez  staff  219823 Jun 21 18:58 qtag2latex.xml
drwxr-xr-x  11 heprez  staff     374 Jun 24 13:05 ..
b2mc:~ heprez$</pre>
</div>
<div class="section" id="functions">
<h2>FUNCTIONS<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p><em>indices-update tag path</em></p>
<blockquote>
<div><p>if action provided by indices-action dictates then
proceeds to:</p>
<div class="highlight-python"><pre>indices-make tag
indices-compare tag</pre>
</div>
</div></blockquote>
<p><em>indices-action tag path</em></p>
<blockquote>
<div>invokes indices-status to determine action</div></blockquote>
<p><em>indices-make tag</em></p>
<blockquote>
<div>invokes the <strong>tag</strong>-makeindex target of images/indices/build.xml
creating the indice in the XMLDB at /db/hfagc_system/<strong>tag</strong>.xml
where tag is one of: qtag2latex qtag2svgs qtag2pngs v1qtags</div></blockquote>
<p><em>indices-compare tag</em></p>
<blockquote>
<div><p>where tag is one of : qtag2latex qtag2svgs qtag2pngs svg-summary qtags extras pdgs v1qtags
downloads the indices from /db/hfagc_system/<strong>tag</strong>.xml
into $HEPREZ_DATA/images/indices and does xml comparisons with the correponding
indices in the refbackup:</p>
<div class="highlight-python"><pre>heprez-xtalk refbackup
/Users/heprez/data/data/backup/part/localhost/refbackup</pre>
</div>
<p>tis not appropriate to compare with &#8220;last&#8221; backup as they get done as
a means of propagating data around
better to introduce reference backups with which to make comparisons
set via <em>backup-refbackup</em></p>
</div></blockquote>
<p><em>indices-status-  idxs srcs</em></p>
<blockquote>
<div>checking if indices are present in the db
and if their sources are in the filesystem,
if both then compare timestamps to see if the db
indice is stale cf the source in the file system</div></blockquote>
<p><em>indices-list</em></p>
<blockquote>
<div>hmm does not include qtags</div></blockquote>
<p><em>indices-upload</em></p>
<blockquote>
<div>used on the server only, not dev machine
exist_putt all indices in the list into /db/hfagc_system/</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../fonts/fonts/" title="ILLUSTRATOR MATH FONTS"
             >next</a> |</li>
        <li class="right" >
          <a href="../build/" title="INDICES BUILD"
             >previous</a> |</li>
        <li><a href="../../../">Heprez Unversioned directory documentation</a> &raquo;</li>
          <li><a href="../../" >Binary Image creation</a> &raquo;</li>
          <li><a href="../" >indices</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>