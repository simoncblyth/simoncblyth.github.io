<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Scrape Interation on b2mc without Illustrator &mdash; Heprez Unversioned directory documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'Unversioned directory',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Heprez Unversioned directory documentation" href="../../" />
    <link rel="up" title="porting" href="../" />
    <link rel="next" title="Broken Plot Splitting" href="../broken_plot_splitting/" />
    <link rel="prev" title="b2mc installation notes" href="../b2mc_install/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../broken_plot_splitting/" title="Broken Plot Splitting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../b2mc_install/" title="b2mc installation notes"
             accesskey="P">previous</a> |</li>
        <li><a href="../../">Heprez Unversioned directory documentation</a> &raquo;</li>
          <li><a href="../" accesskey="U">porting</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> /e </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">/h</a>   </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/"> cms01 </a> </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/downloads/"> downloads </a> </li>
	<li> <a href="http://cms01.phys.ntu.edu.tw/rezdb/db/hfagc/"> rezdb/db/hfagc/ </a> </li>
</ul>






<h3>Content Skeleton</h3>

<ul>
<li class="toctree-l1"><a class="reference internal" href="../../SOP/">SOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/end_of_2011/">LOG</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../heprez/">HEPREZ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../heprez/#heprez-usage-log">HEPREZ USAGE LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rezdb/">REZDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compilation/">Compilation latex document</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../docs/math/">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hepex/hepex/">Hepex Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../future/">Future of b2c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../environment/">Environment for heprez installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chiba/">Chiba</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chibatomcat/chibatomcat/">CHIBA TOMCAT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../batik/">Batik</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../inkscape/">Inkscape</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dvisvgm/">DVISVGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../images/">Binary Image creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../backup/backup/">Partial Backup Machinery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../backup/part/build/">BACKUP ANT BUILD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../exist_/">LOW LEVEL EXIST USAGE FUNCTIONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../exist/">exist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../macports/">macports</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">porting</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../kek/">KEK Port Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../b2mc_install/">b2mc installation notes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Scrape Interation on b2mc without Illustrator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nd-b2mc-test-heprez-update">0702 2nd b2mc test heprez-update</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fixed-cron-run-chopped-short">[FIXED] cron run chopped short</a></li>
<li class="toctree-l4"><a class="reference internal" href="#avoided-exist-log-shows-42-do-tpdflatex-pl-errors">[AVOIDED] exist.log shows 42 do-tpdflatex.pl errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-error-log-xsl-errors">[FIXED] error.log xsl errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#partial-rerun">0702 partial rerun</a></li>
<li class="toctree-l3"><a class="reference internal" href="#full-rerun">0704 full rerun</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fixed-svg-issues">[FIXED] SVG issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-pdf-issues">[FIXED] PDF issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-tex-issues">[FIXED] TEX issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-single-qty-plot-labels-off-the-plot">[FIXED] single qty plot labels off the plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-adjusting-key-offset-on-plots">[FIXED] adjusting key offset on plots</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-missing-binaries">[FIXED] missing binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-missing-plot-pdf">[FIXED] Missing plot PDF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id1">0703 + 0704 + 0705</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fixed-fuzzy-ps-converted-jpg">[FIXED] fuzzy PS converted JPG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id2">0709</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#invalid-image-map-areas-shifted-maybe-due-to-keyoffset-change">[INVALID] image map areas shifted, maybe due to keyoffset change</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-indv-pages-missing-latex-table-png-svg">[FIXED] indv pages missing latex table PNG, SVG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-six-compilation-latex-table-chapts-showing-texlog-error-dump">[FIXED] Six Compilation Latex Table chapts showing texlog error dump</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#issues">0710 issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fixed-00000-first-10-pages-only">[FIXED] 00000 first 10 pages only</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-broken-static-html-links">[FIXED] broken Static HTML links</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-curly-bracket-instead-of-f">[FIXED] curly bracket instead of f</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-note-that-the-qtags-pdf-is-not-being-regenerated">[FIXED] note that the qtags PDF is not being regenerated</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../broken_plot_splitting/">Broken Plot Splitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../empty_unit_error/">empty unit error</a></li>
<li class="toctree-l2"><a class="reference internal" href="../no_qtys_in_range/">[DEFER] No Qtys in range</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cannot_add_extra_errors/">[MAYBE FIXED] Cannot Add Extra Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../indices_compare_no_backup/">Indices Compare No Backups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/">Other issues and feature ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_migration/">Server Migration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../eperl/">eperl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svg/">svg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scrape/">scrape</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/porting/scrape_iteration.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../b2mc_install/"
                        title="previous chapter">b2mc installation notes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../broken_plot_splitting/"
                        title="next chapter">Broken Plot Splitting</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="scrape-interation-on-b2mc-without-illustrator">
<h1>Scrape Interation on b2mc without Illustrator<a class="headerlink" href="#scrape-interation-on-b2mc-without-illustrator" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#nd-b2mc-test-heprez-update" id="id3">0702 2nd b2mc test heprez-update</a><ul>
<li><a class="reference internal" href="#fixed-cron-run-chopped-short" id="id4">[FIXED] cron run chopped short</a></li>
<li><a class="reference internal" href="#avoided-exist-log-shows-42-do-tpdflatex-pl-errors" id="id5">[AVOIDED] exist.log shows 42 do-tpdflatex.pl errors</a></li>
<li><a class="reference internal" href="#fixed-error-log-xsl-errors" id="id6">[FIXED] error.log xsl errors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#partial-rerun" id="id7">0702 partial rerun</a></li>
<li><a class="reference internal" href="#full-rerun" id="id8">0704 full rerun</a><ul>
<li><a class="reference internal" href="#fixed-svg-issues" id="id9">[FIXED] SVG issues</a></li>
<li><a class="reference internal" href="#fixed-pdf-issues" id="id10">[FIXED] PDF issues</a></li>
<li><a class="reference internal" href="#fixed-tex-issues" id="id11">[FIXED] TEX issues</a></li>
<li><a class="reference internal" href="#fixed-single-qty-plot-labels-off-the-plot" id="id12">[FIXED] single qty plot labels off the plot</a></li>
<li><a class="reference internal" href="#fixed-adjusting-key-offset-on-plots" id="id13">[FIXED] adjusting key offset on plots</a></li>
<li><a class="reference internal" href="#fixed-missing-binaries" id="id14">[FIXED] missing binaries</a></li>
<li><a class="reference internal" href="#fixed-missing-plot-pdf" id="id15">[FIXED] Missing plot PDF</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1" id="id16">0703 + 0704 + 0705</a><ul>
<li><a class="reference internal" href="#fixed-fuzzy-ps-converted-jpg" id="id17">[FIXED] fuzzy PS converted JPG</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2" id="id18">0709</a><ul>
<li><a class="reference internal" href="#invalid-image-map-areas-shifted-maybe-due-to-keyoffset-change" id="id19">[INVALID] image map areas shifted, maybe due to keyoffset change</a></li>
<li><a class="reference internal" href="#fixed-indv-pages-missing-latex-table-png-svg" id="id20">[FIXED] indv pages missing latex table PNG, SVG</a></li>
<li><a class="reference internal" href="#fixed-six-compilation-latex-table-chapts-showing-texlog-error-dump" id="id21">[FIXED] Six Compilation Latex Table chapts showing texlog error dump</a></li>
</ul>
</li>
<li><a class="reference internal" href="#issues" id="id22">0710 issues</a><ul>
<li><a class="reference internal" href="#fixed-00000-first-10-pages-only" id="id23">[FIXED] 00000 first 10 pages only</a></li>
<li><a class="reference internal" href="#fixed-broken-static-html-links" id="id24">[FIXED] broken Static HTML links</a></li>
<li><a class="reference internal" href="#fixed-curly-bracket-instead-of-f" id="id25">[FIXED] curly bracket instead of f</a></li>
<li><a class="reference internal" href="#fixed-note-that-the-qtags-pdf-is-not-being-regenerated" id="id26">[FIXED] note that the qtags PDF is not being regenerated</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="nd-b2mc-test-heprez-update">
<h2><a class="toc-backref" href="#id3">0702 2nd b2mc test heprez-update</a><a class="headerlink" href="#nd-b2mc-test-heprez-update" title="Permalink to this headline">¶</a></h2>
<p>Invoked from cron with:</p>
<div class="highlight-python"><pre>b2mc:cron heprez$ crontab -l
SHELL=/bin/bash
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/opt/local/bin
NODE_TAG_OVERRIDE=K
HOME=/Users/heprez
ENV_HOME=/Users/heprez/env
HEPREZ_HOME=/Users/heprez/heprez
#
31 21 * * * (. /Users/heprez/env/env.bash ; env- ; . /Users/heprez/heprez/heprez.bash ; heprez-  ; heprez-update ) &gt; $HOME/cron/heprez-update-$(date +"\%Y\%m\%d-\%H\%M").log  2&gt;&amp;1</pre>
</div>
<div class="section" id="fixed-cron-run-chopped-short">
<h3><a class="toc-backref" href="#id4">[FIXED] cron run chopped short</a><a class="headerlink" href="#fixed-cron-run-chopped-short" title="Permalink to this headline">¶</a></h3>
<p>Comparing last two logs shows very different size:</p>
<div class="highlight-python"><pre>b2mc:cron heprez$  ll  heprez-update-20130702*
-rw-r--r--  1 heprez  staff  451635 Jul  2 20:42 heprez-update-20130702-1946.log
-rw-r--r--  1 heprez  staff  195618 Jul  2 22:16 heprez-update-20130702-2131.log</pre>
</div>
<p>Differences between the 2nd and 1st runs:</p>
<ol class="arabic simple">
<li>new scrape date</li>
<li>launchd exist for standalone running</li>
</ol>
<p>2nd run got chopped short:</p>
<div class="highlight-python"><pre>970      [exec] page type comb
971      [exec] page type comb
972      [exec] page type comb
973      [exec] cannot write to /Users/heprez/data/data/scrape/20130702/hfagc/00000/00000.log
974      [exec] Result: 13
975
976 checklog:
977      [exec] ERROR log:/Users/heprez/data/data/scrape/20130702/log.xml not existing
978      [exec] Result: 2
979
980 BUILD SUCCESSFUL
981 Total time: 24 minutes 27 seconds
982 === scrape-ant : Tue Jul 2 21:57:30 JST 2013 COMPLETED</pre>
</div>
</div>
<div class="section" id="avoided-exist-log-shows-42-do-tpdflatex-pl-errors">
<h3><a class="toc-backref" href="#id5">[AVOIDED] exist.log shows 42 do-tpdflatex.pl errors</a><a class="headerlink" href="#avoided-exist-log-shows-42-do-tpdflatex-pl-errors" title="Permalink to this headline">¶</a></h3>
<div class="sidebar">
<p class="first sidebar-title">Issue Avoided by using apache commons exec rather than JNI embedded perl</p>
<p class="last">The difference is that a separate process is spawned to perform conversions, rather than
effectively compiling java and perl together with JNI. This approach is more modular, probably
a bit slower, much more flexible, much easier to support, more susceptible to lack of env
propagation problems as it adds yet another context inside launchd daemon which needs to have a consistent env.</p>
</div>
<p>From <em>exist.log</em>  <cite>EPerlScriptAdapter exception: org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2)</cite>:</p>
<div class="highlight-python"><pre>15045 2013-07-02 21:57:28,025 [P1-4] WARN  (LogFunction.java [eval]:93) - (Line: 351) c:src-valid (/db/cache/hfagc/20130702/Deltaperp_97_94+443/table.html) NOT VALID [/db/cache/hfagc/20130702/Deltaperp_97_94+443/table.html:nocache:]
15046 2013-07-02 21:57:28,026 [P1-4] WARN  (LogFunction.java [eval]:93) - (Line: 55) present-table:present-table [ is-valid=false present-src=/db/cache/hfagc/20130702/Deltaperp_97_94+443/table.html sm-end= sm-pos=Deltaperp_97_94+443 sm-dir=/db/cache/hfagc/2      0130702/Deltaperp_97_94+443 opt=plot,head,sabel,onlycom,tex,npo,dvi apt=save:save:: is-make=false is-save=true is-scrape=false is-remake=true ]
15047 2013-07-02 21:57:28,028 [P1-4] INFO  (EPerlScriptAdapter.java [execute]:192) - calling execute5s  subname:tpdflatex urlbody:http://localhost:9090/hfagc/Deltaperp_97_94+443/table_body/tex urlshell:http://localhost:9090/hfagc/Deltaperp_97_94+443/table_/      tex workdir:/Users/heprez/data/data/scrape/20130702/hfagc/indv/Deltaperp_97_94+443 opt:plot,head,sabel,onlycom,tex,npo,dvi apt:dummy,save
15048 2013-07-02 21:57:28,059 [P1-4] ERROR (EPerlScriptAdapter.java [execute]:213) - EPerlScriptAdapter exception: org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2)
15049 2013-07-02 21:57:28,060 [P1-4] DEBUG (CatchFunction.java [eval]:87) - Calling exception handler to process org.exist.xquery.XPathException
15050 2013-07-02 21:57:28,061 [P1-4] DEBUG (NativeBroker.java [openDocument]:661) - collection /db/cache/hfagc/20130702/Deltaperp_97_94+443/Deltaperp_97_94+443 not found!</pre>
</div>
<p>And the answer is 42:</p>
<div class="highlight-python"><pre>b2mc:logs heprez$ grep ERROR exist.log
2013-07-02 21:56:07,054 [P1-4] ERROR (EPerlScriptAdapter.java [execute]:213) - EPerlScriptAdapter exception: org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2)
2013-07-02 21:56:12,222 [P1-4] ERROR (EPerlScriptAdapter.java [execute]:213) - EPerlScriptAdapter exception: org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2)
...
2013-07-02 21:57:28,059 [P1-4] ERROR (EPerlScriptAdapter.java [execute]:213) - EPerlScriptAdapter exception: org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2)
2013-07-02 21:57:29,708 [P1-4] ERROR (EPerlScriptAdapter.java [execute]:213) - EPerlScriptAdapter exception: org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2)

b2mc:logs heprez$ grep ERROR exist.log | wc -l
      42</pre>
</div>
<p>The rot starts with 00603, coincidence or something special about that ?:</p>
<div class="highlight-python"><pre>843 2013-07-02 21:56:07,024 [P1-4] INFO  (EPerlScriptAdapter.java [execute]:192) - calling execute5s  subname:tpdflatex urlbody:http://localhost:9090/hfagc/00603/table_body/tex urlshell:http://localhost:9090/hfagc/00603/table_/tex workdir:/Users/heprez/da      ta/data/scrape/20130702/hfagc/00603/00603 opt:plot,head,sabel,onlycom,tex,npo,dvi apt:dummy,save
 844 2013-07-02 21:56:07,054 [P1-4] ERROR (EPerlScriptAdapter.java [execute]:213) - EPerlScriptAdapter exception: org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2)
 845 2013-07-02 21:56:07,054 [P1-4] DEBUG (CatchFunction.java [eval]:87) - Calling exception handler to process org.exist.xquery.XPathException
 846 2013-07-02 21:56:07,055 [P1-4] DEBUG (NativeBroker.java [openDocument]:661) - collection /db/cache/hfagc/20130702/00603/00603 not found!
 847 2013-07-02 21:56:07,059 [P1-4] DEBUG (CollectionConfigurationManager.java [getConfiguration]:113) - Reading config for /db/cache/hfagc/20130702/00603</pre>
</div>
<p>Many <cite>not found</cite> over that 90s period:</p>
<div class="highlight-python"><pre>b2mc:logs heprez$ grep not\ found exist.log | head -1
2013-07-02 21:56:07,055 [P1-4] DEBUG (NativeBroker.java [openDocument]:661) - collection /db/cache/hfagc/20130702/00603/00603 not found!
b2mc:logs heprez$ grep not\ found exist.log | tail -1
2013-07-02 21:57:29,181 [P1-4] DEBUG (NativeBroker.java [openDocument]:661) - collection /db/cache/hfagc/20130702/all not found!
b2mc:logs heprez$ grep not\ found exist.log | wc -l
     897</pre>
</div>
<p>Failed to write the scrape log. It was created in previous run:</p>
<div class="highlight-python"><pre>b2mc:20130628 heprez$ stat /Users/heprez/data/data/scrape/20130628/log.xml
234881026 15243598 -rw-r--r-- 1 heprez staff 0 774871 "Jul  3 12:36:33 2013" "Jul  2 20:21:47 2013" "Jul  2 20:21:47 2013" "Jun 28 13:19:03 2013" 4096 1520 0 /Users/heprez/data/data/scrape/20130628/log.xml</pre>
</div>
</div>
<div class="section" id="fixed-error-log-xsl-errors">
<h3><a class="toc-backref" href="#id6">[FIXED] error.log xsl errors</a><a class="headerlink" href="#fixed-error-log-xsl-errors" title="Permalink to this headline">¶</a></h3>
<p>Nine stylesheet table preamble errors occurred earlier:</p>
<div class="highlight-python"><pre>b2mc:logs heprez$ grep ERROR error.log
ERROR   (2013-07-02) 21:37.28:642   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 178; Column 81;
ERROR   (2013-07-02) 21:37.28:647   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 242; Column 2;
ERROR   (2013-07-02) 21:37.28:649   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 243; Column 49;
ERROR   (2013-07-02) 21:37.28:650   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 244; Column 60;
ERROR   (2013-07-02) 21:37.28:651   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 245; Column 2;
ERROR   (2013-07-02) 21:37.28:663   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 285; Column 2;
ERROR   (2013-07-02) 21:37.28:664   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 286; Column 35;
ERROR   (2013-07-02) 21:37.28:665   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 287; Column 33;
ERROR   (2013-07-02) 21:37.28:665   [core.xslt-processor] (/hfagc/00000/table_preamble/tex) P1-7/TraxErrorHandler: Error in TraxTransformer: file:/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/hfagc/resources/simple-html-table-5-latex.xsl; Line 288; Column 2;
b2mc:logs heprez$</pre>
</div>
<p>From <em>access.log</em> can see the context of the error:</p>
<div class="highlight-python"><pre>813 INFO    (2013-07-02) 21:37.20:037   [access] (/hfagc/1204024/html) P1-9/CocoonServlet: 'hfagc/1204024/html' Processed by Apache Cocoon 2.1.7 in 720 milliseconds.
814 INFO    (2013-07-02) 21:37.20:830   [access] (/hfagc/1204003/html) P1-9/CocoonServlet: 'hfagc/1204003/html' Processed by Apache Cocoon 2.1.7 in 750 milliseconds.
815 INFO    (2013-07-02) 21:37.21:877   [access] (/hfagc/1204028/html) P1-9/CocoonServlet: 'hfagc/1204028/html' Processed by Apache Cocoon 2.1.7 in 1.014 seconds.
816 INFO    (2013-07-02) 21:37.22:697   [access] (/hfagc/1204030/html) P1-9/CocoonServlet: 'hfagc/1204030/html' Processed by Apache Cocoon 2.1.7 in 786 milliseconds.
817 INFO    (2013-07-02) 21:37.28:561   [access] (/hfagc/01101/plot/svg) P1-8/CocoonServlet: 'hfagc/01101/plot/svg' Processed by Apache Cocoon 2.1.7 in 3.347 seconds.
818 INFO    (2013-07-02) 21:37.30:833   [access] (/hfagc/00000/table_preamble/tex) P1-7/CocoonServlet: 'hfagc/00000/table_preamble/tex' Processed by Apache Cocoon 2.1.7 in 2.22 seconds.
819 INFO    (2013-07-02) 21:37.30:991   [access] (/hfagc/00000/table_symbols/tex) P1-6/CocoonServlet: 'hfagc/00000/table_symbols/tex' Processed by Apache Cocoon 2.1.7 in 149 milliseconds.
820 INFO    (2013-07-02) 21:37.31:167   [access] (/hfagc/99999/table_body/tex) P1-5/CocoonServlet: 'hfagc/99999/table_body/tex' Processed by Apache Cocoon 2.1.7 in 170 milliseconds.
821 INFO    (2013-07-02) 21:37.33:320   [access] (/hfagc/02111/plot/svg) P1-4/CocoonServlet: 'hfagc/02111/plot/svg' Processed by Apache Cocoon 2.1.7 in 1.789 seconds.</pre>
</div>
<p>These appear to be due to bare text latex comments within the stylesheet. Dress these into <em>xsl:text</em> elements in <a class="reference external" href="http://dayabay.phys.ntu.edu.tw/tracs/heprez/intertrac/r910">heprez:r910</a></p>
</div>
</div>
<div class="section" id="partial-rerun">
<h2><a class="toc-backref" href="#id7">0702 partial rerun</a><a class="headerlink" href="#partial-rerun" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>b2mc:h heprez$ scrape-
b2mc:h heprez$ scrape-ant -Dpos=00603
=== scrape-ant : Wed Jul 3 14:19:20 JST 2013 -Dpos=00603 STARTING
Buildfile: build.xml

scrape:

-scrape:
     [exec] parsing file /Users/heprez/data/data/scrape/20130702/db/cache/hfagc/20130702/sidebar-html.xml
     [exec] scrape.pl
     [exec]  sm_hfag_scrape : [/Users/heprez/data/data/scrape/20130702]
     [exec]  sm_hfag_cache_scrape [/db/cache/hfagc/20130702]
     [exec]  sm_uri : [hfagc/00000/sidebar/html]
     [exec]  pbase : [/Users/heprez/data/data/scrape/20130702/db/cache/hfagc/20130702/sidebar-html.xml]
     [exec]  papt : [save,save,save]
     [exec]  plog : [/Users/heprez/data/data/scrape/20130702/log.xml]
     [exec]   apos:[00603] upos:[00603] aopt:[] picks:[00603 ] skip:[]
     [exec] &lt;traverse path="/Users/heprez/data/data/scrape/20130702/db/cache/hfagc/20130702/sidebar-html.xml" slinks="34" &gt;

     [exec] picks 00603 1  (the chosen primary links ... select one with eg -Dpos=cdf,comb,comp,etc.. )</pre>
</div>
<p>Trace issue to mixed ownership, with exist running and root and the update running as heprez.
But after adjusting exist to run as heprez still see some errors. Maybe cached leftovers, so tidy up in DB and FS:</p>
<div class="highlight-python"><pre>b2mc:hfagc heprez$ echo rmcol /db/cache/hfagc/20130702/00603 | exist-cli
b2mc:hfagc heprez$ rm -rf /Users/heprez/data/data/scrape/20130702/hfagc/00603</pre>
</div>
<p>For clean logging:</p>
<div class="highlight-python"><pre>b2mc:hfagc heprez$ exist-logs
/Users/heprez/data/install/exist/eXist-snapshot-20051026/unpack/4/webapp/WEB-INF/logs
total 4936
-rw-r--r--  1 heprez  staff     6419 Jul  3 17:08 access.log
-rw-r--r--  1 heprez  staff      590 Jul  3 16:59 core.log
-rw-r--r--  1 heprez  staff        0 Jul  3 16:59 error.log
-rw-r--r--  1 heprez  staff  2491253 Jul  3 17:18 exist.log
-rw-r--r--  1 heprez  staff        0 Jul  3 16:59 flow.log
-rw-r--r--  1 heprez  staff        0 Jul  3 16:59 handled-errors.log
-rw-r--r--  1 heprez  staff     1654 Jul  3 17:00 profile.log
-rw-r--r--  1 heprez  staff     1534 Jul  3 17:08 sitemap.log
-rw-r--r--  1 heprez  staff    10661 Jul  3 17:08 xmldb.log
b2mc:logs heprez$ cd ..
b2mc:WEB-INF heprez$ rm -rf logs ; mkdir logs ; cd logs

b2mc:logs heprez$ exist-load
sudo launchctl load /Library/LaunchDaemons/org.heprez.exist.plist</pre>
</div>
<p>Iterating like this found a further issue, was lack of HEPREZ_HOME envvar in the launchd environment.</p>
</div>
<div class="section" id="full-rerun">
<h2><a class="toc-backref" href="#id8">0704 full rerun</a><a class="headerlink" href="#full-rerun" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fixed-svg-issues">
<h3><a class="toc-backref" href="#id9">[FIXED] SVG issues</a><a class="headerlink" href="#fixed-svg-issues" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>[FIXED] all SVG carrying now unused font info</li>
<li>[FIXED] LHCb key symbol abutts into plot zone</li>
<li>[FIXED] labels on plots are a bit high (maybe 12pt but not a fixed amount) compare with illustrator ones which are dead central</li>
<li>[FIXED] single qty plot labels, are off the plot</li>
<li>[FEATURE] <a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/1204028.html">http://130.87.106.59:8080/b2charm/end_of_2011/1204028.html</a> labels of complex qtys a bit small</li>
</ul>
</div>
<div class="section" id="fixed-pdf-issues">
<h3><a class="toc-backref" href="#id10">[FIXED] PDF issues</a><a class="headerlink" href="#fixed-pdf-issues" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/01113.pdf">http://130.87.106.59:8080/b2charm/end_of_2011/01113.pdf</a> PDF plot links are broken</p>
<blockquote>
<div><ul class="simple">
<li>(expected as no svg2pdf capability without illustrator)</li>
<li>tried cairo svg, but that does not support svg paths yet so no chance</li>
<li>turns out batik can do svg2pdf using fop</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="fixed-tex-issues">
<h3><a class="toc-backref" href="#id11">[FIXED] TEX issues</a><a class="headerlink" href="#fixed-tex-issues" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">[REMOVED] TEX links provide a useless non-flattened file</p>
<blockquote>
<div><ul class="simple">
<li><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-321+443-table.tex</cite></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">[FIXED IN 0704] PDF links are broken <a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00101-table.pdf">http://130.87.106.59:8080/b2charm/end_of_2011/00101-table.pdf</a> (not expected)</p>
</li>
<li><p class="first">[FIXED IN 0704] <a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00000.html">http://130.87.106.59:8080/b2charm/end_of_2011/00000.html</a>  empty compilation page</p>
<blockquote>
<div><ul class="simple">
<li>BUT: the jpg (converted from .ps) are fuzzy, also 50 jpg on a single page are too much,</li>
<li>could move to SVG presentation or PNG from SVG</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="fixed-single-qty-plot-labels-off-the-plot">
<h3><a class="toc-backref" href="#id12">[FIXED] single qty plot labels off the plot</a><a class="headerlink" href="#fixed-single-qty-plot-labels-off-the-plot" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-2212+443+3122.html</cite></li>
</ul>
<p>Find the dynamic url for SVG:</p>
<div class="highlight-python"><pre>b2mc:20130704 heprez$ grep BR_-521_-2212+443+3122 log.xml
&lt;/traverse&gt;&lt;get pos="BR_-521_-2212+443+3122"  status="NPPNCPUSRNSR"  err="0"  time="2.530"  size="20370"  pro-path="/Users/heprez/data/data/scrape/20130704/hfagc/indv/BR_-521_-2212+443+3122/BR_-521_-2212+443+3122.html"  &gt;
&lt;uurl&gt;&lt;![CDATA[http://localhost:9090/hfagc/BR_-521_-2212+443+3122/html?apt=save&amp;bpt=save]]&gt;&lt;/uurl&gt;
&lt;get pos="BR_-521_-2212+443+3122"  status="NPPNCPUSRNSR"  err="0"  time="0.006"  size="28283"  local-cache-path="/Users/heprez/data/data/scrape/20130704/db/cache/hfagc/20130704/BR_-521_-2212+443+3122/indv.html"  &gt;
&lt;uurl&gt;&lt;![CDATA[http://localhost:9090/servlet/db/cache/hfagc/20130704/BR_-521_-2212+443+3122/indv.html]]&gt;&lt;/uurl&gt;
&lt;traverse path="/Users/heprez/data/data/scrape/20130704/db/cache/hfagc/20130704/BR_-521_-2212+443+3122/indv.html" ulinks="10" alinks="0" &gt;&lt;get pos="BR_-521_-2212+443+3122"  status="NPPUCPNCPUSRNSR"  err="0"  time="0.306"  size="186413"  pro-path="/Users/heprez/data/data/scrape/20130704/hfagc/indv/BR_-521_-2212+443+3122/BR_-521_-2212+443+3122.svg"  &gt;
&lt;uurl&gt;&lt;![CDATA[http://localhost:9090/hfagc/BR_-521_-2212+443+3122/plot/svg?sqz=1.0&amp;vmi=-100.0&amp;vmx=100000.0&amp;uni=1&amp;opt=plot,head,sabel,tex,fvg&amp;apt=save&amp;bpt=save]]&gt;&lt;/uurl&gt;</pre>
</div>
<ul class="simple">
<li><cite>http://130.87.106.59:9090/hfagc/BR_-521_-2212+443+3122/plot/svg?sqz=1.0&amp;vmi=-100.0&amp;vmx=100000.0&amp;uni=1&amp;opt=plot,head,sabel,tex,fvg&amp;apt=save&amp;bpt=save</cite></li>
</ul>
<p>My change to the qtags2svgs.xml has fixed this too, hard against the top edge : but maybe OK.</p>
</div>
<div class="section" id="fixed-adjusting-key-offset-on-plots">
<h3><a class="toc-backref" href="#id13">[FIXED] adjusting key offset on plots</a><a class="headerlink" href="#fixed-adjusting-key-offset-on-plots" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Done in <a class="reference external" href="http://dayabay.phys.ntu.edu.tw/tracs/heprez/intertrac/r915">heprez:r915</a></li>
</ul>
<p>Organized in <em>line</em> units, where a <em>N</em> meas takes <em>N+1</em> lines</p>
<p><em>rezs.xqm</em>:</p>
<div class="highlight-python"><pre>1217     let $nlins     := rezu:line-count( $uqts , $vmi , $vmx , $unit , $ptype , $opt )   (: includes keyline when head opt  and botline always counts :)
1218
1219     let $dbgl      :=if( contains($opt,"dbg")) then  concat(" vmi:",$vmi," vmx:",$vmx," unit:",$unit," nlins:",string-join($nlins,",") ) else ""
1220     let $dims      := rezu:plot-dimensions( $nlins , $ysqueeze , $ptype )      (: applies the squeeze only for combi type 1 plots :)
1221     let $width     := $rezu:pixel-width
1222     let $height    :=  sum( $dims )         (: NB needs to be consistent with plotobj :)
1223
1224     let $hekey     :=  $ptype = 1 and     contains($opt,"head")
1225     let $inkey     :=  $ptype = 1 and not(contains($opt,"head"))
1226     let $ptkey     := if($hekey) then 1 else 0
1227
1228     let $ndims   := count($dims)
1229     let $vdims   := if($hekey) then $dims[position() &gt; 1 and position() &lt; $ndims ]
1230                     else            $dims[ position() &lt; $ndims ]
1231
1232     let $keyoff  := if($hekey) then $dims[1] else 0
1233
1234     let $yline   := ( for $rqt at $rpt in $uqts return $keyoff + sum( $vdims[ position() &lt;  $rpt  ] ) ,
1235                       $keyoff + sum( $vdims ))</pre>
</div>
<p><em>rezu.xqm</em>:</p>
<div class="highlight-python"><pre>316 declare function rezu:plot-dimensions( $nlins as xs:integer* , $ysqueeze as xs:double , $ptype as xs:integer  ) as xs:integer* {   (::)
317    let $usqueeze := if( $ptype = 1 ) then $ysqueeze else 1.0
318    let $dims     := for $nlin in $nlins return round( $nlin * $rezu:pixel-ydelta * $usqueeze  )
319    return $dims
320 };</pre>
</div>
</div>
<div class="section" id="fixed-missing-binaries">
<h3><a class="toc-backref" href="#id14">[FIXED] missing binaries</a><a class="headerlink" href="#fixed-missing-binaries" title="Permalink to this headline">¶</a></h3>
<p>None of the server created binaries are created:</p>
<div class="highlight-python"><pre>b2mc:hfagc heprez$ find . -name '*.dvi'
./00000/00000/b2charm_end_of_2011_v014.dvi
./00101/00101/00101-table_.dvi
b2mc:hfagc heprez$ find . -name '*.pdf'
./00000/00000/b2charm_end_of_2011_v014.pdf
./00101/00101/00101-table_.pdf
b2mc:hfagc heprez$ find . -name '*.ps'
./00000/00000/b2charm_end_of_2011_v014.ps
./00101/00101/00101-table_.ps</pre>
</div>
<p>Interactive running of the commands that <em>tpdflatex.pl</em> does succeeds, so probably
a launchd environment issue. Yep missed the macports PATH.</p>
</div>
<div class="section" id="fixed-missing-plot-pdf">
<h3><a class="toc-backref" href="#id15">[FIXED] Missing plot PDF</a><a class="headerlink" href="#fixed-missing-plot-pdf" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/Kozea/CairoSVG/issues/7">https://github.com/Kozea/CairoSVG/issues/7</a></p>
<blockquote>
<div><ul class="simple">
<li>cairoSVG is useless for heprez svg2pdf as it does not support <cite>svg:path</cite> but batik can do this</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">need a svg2pdf sweep following scrapes, maybe need to restrict the sweep to plot SVG ?</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id16">0703 + 0704 + 0705</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fixed-fuzzy-ps-converted-jpg">
<h3><a class="toc-backref" href="#id17">[FIXED] fuzzy PS converted JPG</a><a class="headerlink" href="#fixed-fuzzy-ps-converted-jpg" title="Permalink to this headline">¶</a></h3>
<p>Interactive convert .ps to multi .jpg:</p>
<div class="highlight-python"><pre>b2mc:00101 heprez$ jpgfmt=$name%02d.jpg
b2mc:00101 heprez$ echo $jpgfmt
00101-table_%02d.jpg
b2mc:00101 heprez$ convert -rotate 90  $name.ps $jpgfmt
b2mc:00101 heprez$ ll *.jpg
-rw-r--r--   1 heprez  staff   77317 Jul  3 20:37 00101-table_01.jpg
-rw-r--r--   1 heprez  staff   29503 Jul  3 20:37 00101-table_00.jpg
b2mc:00101 heprez$ pwd
/Users/heprez/data/data/scrape/20130703/hfagc/00101/00101</pre>
</div>
<p>Try using dvisvgm to convert dvi of latex tables into SVG:</p>
<div class="highlight-python"><pre>b2mc:00000 heprez$ pwd
/Users/heprez/data/data/scrape/20130704/hfagc/00000/00000
b2mc:00000 heprez$ latex 00000-table_
b2mc:00000 heprez$ dvisvgm --no-styles  00000-table_.dvi --page=1-60 --rotate=90 --output=%f%p.svg</pre>
</div>
<ol class="arabic simple">
<li>plucking non-contiguous pages to convert gives <cite>DVI error: undefined font number 18</cite>, presumably interdependencies between pages</li>
<li>SVG from default conversions with fonts and styles yields scrambled text in Safari</li>
<li><cite>&#8211;no-fonts</cite> is better but color issue is apparent, as if the color gets stuck and doesnt revert</li>
<li><cite>&#8211;no-styles</cite> SVG appears OK in Safari, and the batik transcoded PNG looks OK</li>
<li>bounding box shrinks around the content, thats kinda nice but its too tight,
need to expand the box somehow or add padding in the html layout</li>
</ol>
<p>Inplace edit the html:</p>
<div class="highlight-python"><pre>b2mc:00000 heprez$ perl -pi -e 's,image/jpeg,image/svg+xml,' 00000.html
b2mc:00000 heprez$ perl -pi -e 's,(\d)\.jpg,$1.svg,g' 00000.html
b2mc:00000 heprez$ pwd
/Users/heprez/data/data/scrape/20130704/hfagc/00000</pre>
</div>
<ul class="simple">
<li>presenting ~50 SVG on a single page is too heavy for compilation page, might be OK for single tables</li>
<li><a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00000-table-03.svg">http://130.87.106.59:8080/b2charm/end_of_2011/00000-table-03.svg</a></li>
</ul>
<div class="highlight-python"><pre>b2mc:00101 heprez$ cd $HFAG_SCRAPE_FOLDER/hfagc
b2mc:hfagc heprez$ code=00101
b2mc:hfagc heprez$ cd $code/$code
b2mc:00101 heprez$ latex $code-table_.tex
b2mc:00101 heprez$ dvisvgm --no-styles $code-table_.dvi  --page=1-60 --rotate=90 --output=%f%p.svg
b2mc:00101 heprez$ perl -pi -e 's,image/jpeg,image/svg+xml,' ../$code.html
b2mc:00101 heprez$ perl -pi -e 's,(\d)\.jpg,$1.svg,g' ../$code.html</pre>
</div>
<ul>
<li><p class="first">argh, jpg uses 0-based indexing, svg uses 1-based, manually fixed</p>
</li>
<li><p class="first"><a class="reference external" href="http://130.87.106.59:9090/xmldb/db/cache/hfagc/20130705/00201/00201-table.log">http://130.87.106.59:9090/xmldb/db/cache/hfagc/20130705/00201/00201-table.log</a></p>
<blockquote>
<div><ul class="simple">
<li>log of conversions features 50 jpg paths</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id18">0709</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="invalid-image-map-areas-shifted-maybe-due-to-keyoffset-change">
<h3><a class="toc-backref" href="#id19">[INVALID] image map areas shifted, maybe due to keyoffset change</a><a class="headerlink" href="#invalid-image-map-areas-shifted-maybe-due-to-keyoffset-change" title="Permalink to this headline">¶</a></h3>
<div class="sidebar">
<p class="first sidebar-title">Issue with Image map areas due to Safari glitch</p>
<p class="last">Safari was in a funny state, attempting to exit crashed it,
first restart unresponsive, 2nd restart working
OK with image map areas in correct locations</p>
</div>
<p>Image map:</p>
<div class="highlight-python"><pre>&lt;area shape="rect" coords="x1,y1,x2,y2" ... /&gt;</pre>
</div>
<p>All plots are effected, take example from <a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00102.html">http://130.87.106.59:8080/b2charm/end_of_2011/00102.html</a>
Grab PNG,SVG and underlying docbook for the html:</p>
<div class="highlight-python"><pre>simon:k blyth$ curl -sO --socks5 localhost:9090 http://130.87.106.59:9090/servlet/db/cache/hfagc/20130709/00102/01122/plot.html
simon:k blyth$ curl -sO --socks5 localhost:8080 http://130.87.106.59:8080/b2charm/end_of_2011/01122.svg
simon:k blyth$ curl -sO --socks5 localhost:8080 http://130.87.106.59:8080/b2charm/end_of_2011/01122.png</pre>
</div>
<ol class="arabic simple">
<li>confirm PNG size matches that of img element</li>
</ol>
<div class="highlight-python"><pre>36                         &lt;div&gt;
37                             &lt;para&gt;This image provides 4 links to single quantity pages&lt;/para&gt;
38                             &lt;map xmlns="http://www.w3.org/1999/xhtml" id="01122" name="01122"&gt;
39                                 &lt;area href="BR_-521_-431+421.html" alt="{\cal{B}} ( B^- \to D_s^- D^0 )" title="{\cal{B}} ( B^- \to D_s^- D^0 )" shape="rect" coords="0,144,600,198"/&gt;
40                                 &lt;area href="BR_-521_-433+421.html" alt="{\cal{B}} ( B^- \to D_s^{*-} D^0 )" title="{\cal{B}} ( B^- \to D_s^{*-} D^0 )" shape="rect" coords="0,198,600,234"/&gt;
41                                 &lt;area href="BR_-521_-431+423.html" alt="{\cal{B}} ( B^- \to D_s^- D^{*0}(2007) )" title="{\cal{B}} ( B^- \to D_s^- D^{*0}(2007) )" shape="rect" coords="0,234,600,270"/&gt;
42                                 &lt;area href="BR_-521_-433+423.html" alt="{\cal{B}} ( B^- \to D_s^{*-} D^{*0}(2007) )" title="{\cal{B}} ( B^- \to D_s^{*-} D^{*0}(2007) )" shape="rect" coords="0,270,600,306"/&gt;
43                             &lt;/map&gt;
44                             &lt;img width="600" height="360" usemap="#01122" src="01122.png"/&gt;
45                         &lt;/div&gt;</pre>
</div>
<p>Make the areas visible in svg with:</p>
<div class="highlight-python"><pre>46   &lt;g&gt;
47     &lt;path d="M 0 144 H 600 V 198 H 0 Z" fill="purple" stroke="red" /&gt;
48     &lt;path d="M 0 198 H 600 V 234 H 0 Z" fill="cyan" stroke="red" /&gt;
49     &lt;path d="M 0 234 H 600 V 270 H 0 Z" fill="magenta" stroke="red" /&gt;
50     &lt;path d="M 0 270 H 600 V 306 H 0 Z" fill="yellow" stroke="red" /&gt;
51   &lt;/g&gt;</pre>
</div>
<p>This shows the areas are in the correct place ?</p>
</div>
<div class="section" id="fixed-indv-pages-missing-latex-table-png-svg">
<h3><a class="toc-backref" href="#id20">[FIXED] indv pages missing latex table PNG, SVG</a><a class="headerlink" href="#fixed-indv-pages-missing-latex-table-png-svg" title="Permalink to this headline">¶</a></h3>
<p>For example</p>
<ul class="simple">
<li><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-321+-211+431.html</cite> msg: Problem displaying the PNG</li>
<li><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-321+-211+431-table.pdf</cite> OK</li>
<li><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-321+-211+431-table-01.svg</cite> MISSING</li>
<li><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-321+-211+431-table-01.png</cite> MISSING</li>
</ul>
<p>Binaries are there with slightly different names, maybe apache url rewrites need some additions. Or
simplifications to get rid of the rewrites.</p>
<div class="highlight-python"><pre>b2mc:~ heprez$ cd /Users/heprez/data/data/scrape/20130709/hfagc/indv/BR_-521_-321+-211+431/
b2mc:BR_-521_-321+-211+431 heprez$ ll
total 928
-rw-r--r--    1 heprez  staff    3227 Jul  9 21:17 BR_-521_-321+-211+431-table_body.tex
-rw-r--r--    1 heprez  staff    2356 Jul  9 21:17 BR_-521_-321+-211+431-table_.tex
-rw-r--r--    1 heprez  staff  225438 Jul  9 21:17 BR_-521_-321+-211+431-table_.ps
-rw-r--r--    1 heprez  staff       0 Jul  9 21:17 BR_-521_-321+-211+431-table_.out
-rw-r--r--    1 heprez  staff   13952 Jul  9 21:17 BR_-521_-321+-211+431-table_.log
-rw-r--r--    1 heprez  staff    5724 Jul  9 21:17 BR_-521_-321+-211+431-table_.dvi
-rw-r--r--    1 heprez  staff     606 Jul  9 21:17 BR_-521_-321+-211+431-table_.aux
-rw-r--r--    1 heprez  staff   60329 Jul  9 21:17 BR_-521_-321+-211+431-table_01.svg
-rw-r--r--    1 heprez  staff   24429 Jul  9 21:17 BR_-521_-321+-211+431-table_00.jpg
-rw-r--r--    1 heprez  staff   28537 Jul  9 21:17 BR_-521_-321+-211+431-table_.pdf
-rw-r--r--    1 heprez  staff   19074 Jul  9 21:17 BR_-521_-321+-211+431-table_01.png
-rw-r--r--    1 heprez  staff   14762 Jul  9 21:17 BR_-521_-321+-211+431.svg
-rw-r--r--    1 heprez  staff   21807 Jul  9 21:17 BR_-521_-321+-211+431.html
drwxr-xr-x  486 heprez  staff   16524 Jul  9 22:05 ..
-rw-r--r--    1 heprez  staff   11781 Jul  9 22:19 BR_-521_-321+-211+431.png
drwxr-xr-x   17 heprez  staff     578 Jul 10 14:03 .
-rw-r--r--    1 heprez  staff   19062 Jul 10 14:03 BR_-521_-321+-211+431.pdf
b2mc:BR_-521_-321+-211+431 heprez$
b2mc:BR_-521_-321+-211+431 heprez$ date
Wed Jul 10 14:18:55 JST 2013
b2mc:BR_-521_-321+-211+431 heprez$</pre>
</div>
<p>Maybe fixed by <a class="reference external" href="http://dayabay.phys.ntu.edu.tw/tracs/heprez/intertrac/r927">heprez:r927</a></p>
<ul class="simple">
<li>apache url rewrite order twiddles now that both plot and table are using png and svg formats.</li>
<li>formerly the issue did not happen as table binaries were distinct as only they used jpg format</li>
</ul>
</div>
<div class="section" id="fixed-six-compilation-latex-table-chapts-showing-texlog-error-dump">
<h3><a class="toc-backref" href="#id21">[FIXED] Six Compilation Latex Table chapts showing texlog error dump</a><a class="headerlink" href="#fixed-six-compilation-latex-table-chapts-showing-texlog-error-dump" title="Permalink to this headline">¶</a></h3>
<div class="sidebar">
<p class="first sidebar-title">Mostly fixed maybe</p>
<p class="last">Five are expected fixed with <a class="reference external" href="http://dayabay.phys.ntu.edu.tw/tracs/heprez/intertrac/r929">heprez:r929</a> doing latex typo fixing immediately after the GET
by tpdflatex.py</p>
</div>
<p>The tpdflatex xml log shows rc 1 at make_tex2dvi</p>
<div class="highlight-python"><pre>b2mc:hfagc heprez$ cd $HFAG_SCRAPE_FOLDER/hfagc
b2mc:hfagc heprez$ find . -name '*.html' -exec grep -l tpdflatex {} \;
./00000/00000.html
./00104/00104.html
./00105/00105.html
./00109/00109.html
./indv/BR_-521_-211+443xoBR_-521_-321+443/BR_-521_-211+443xoBR_-521_-321+443.html
./indv/BR_-521_-321+20443/BR_-521_-321+20443.html
b2mc:hfagc heprez$</pre>
</div>
<ul>
<li><p class="first"><a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00000.html">http://130.87.106.59:8080/b2charm/end_of_2011/00000.html</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00104.html">http://130.87.106.59:8080/b2charm/end_of_2011/00104.html</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00105.html">http://130.87.106.59:8080/b2charm/end_of_2011/00105.html</a></p>
</li>
<li><p class="first"><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-211+443xoBR_-521_-321+443.html</cite></p>
<blockquote>
<div><ul class="simple">
<li>source of the <cite>$B^c^+</cite> typo from <cite>/Users/heprez/data/data/scrape/20130709/hfagc/indv/BR_-521_-211+443xoBR_-521_-321+443/BR_-521_-211+443xoBR_-521_-321+443-table_.log</cite></li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_-521_-321+20443.html</cite></p>
<blockquote>
<div><ul class="simple">
<li>source of one <cite>rigtharrow</cite> typo from <cite>/Users/heprez/data/data/scrape/20130709/hfagc/indv/BR_-521_-321+20443/BR_-521_-321+20443-table_.log</cite></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>00104 and 00105 (and 00000 by composition) are latex typos in footnotes that cause the latex runs to fail.
Was put off the trail on this by the <em>compilation-fix</em> which is done later meaning that rerunning the latex
succeeds.</p>
<div class="highlight-python"><pre>115 compilation-fix(){
116     perl -pi -e 's,B\^c\^\+,B^{c+}, &amp;&amp; print '       ../../00104/03104/03104-table_body.tex
117     perl -pi -e 's,rigtharrow,rightarrow, &amp;&amp; print ' \
118         ../../00101/02101/02101-table_body.tex \
119         ../../00105/01105/01105-table_body.tex \
120         ../../00205/01205/01205-table_body.tex
121
122    # surgical removal of non-ascii in footnotes
123     local rep='Measurements of branching fractions for \$B^0 \\to D_s^{+} \\pi^{-} \$ and \$B^0 \\to D_s^{+} K^{-} \$'
124     perl -pi.bk -e "s,({ Measurements of branching fractions for B0 to Ds.*}),{ $rep  }," ../../00202/01202/01202-table_body.tex
125
126
127     diff ../../00202/01202/01202-table_body.tex.bk ../../00202/01202/01202-table_body.tex
128
129 }</pre>
</div>
<p>Tree of latex input:</p>
<div class="highlight-python"><pre>../../00104/00104/00104-table_.tex

    ../../00000/00000-table_preamble.tex
    ../../00000/00000-table_symbols.tex
    ../../00104/00104/00104-table_body.tex

           ../../00104/01104/01104-table_body.tex
           ../../00104/02104/02104-table_body.tex
           ../../00104/03104/03104-table_body.tex</pre>
</div>
<p>This tree explains why it is tough to reproduce the error, as need to re-get all the dependencies to unfix:</p>
<div class="highlight-python"><pre>b2mc:00104 heprez$ grep rigtharrow  ../../00104/0?104/0?104-table_body.tex</pre>
</div>
<p>The ones with fixes need to be done before 00000 will succeed</p>
<div class="highlight-python"><pre>tpdflatex.py -p 03104
tpdflatex.py -p 01105
tpdflatex.py -p 00000

tpdflatex.py -p BR_-521_-321+20443
tpdflatex.py -p BR_-521_-211+443xoBR_-521_-321+443</pre>
</div>
</div>
</div>
<div class="section" id="issues">
<h2><a class="toc-backref" href="#id22">0710 issues</a><a class="headerlink" href="#issues" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">[FIXED] <a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/00000.html">http://130.87.106.59:8080/b2charm/end_of_2011/00000.html</a></p>
<blockquote>
<div><ul class="simple">
<li>first 10 page SVG links and PNGs only, funny PNG overscaling</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">[FEATURE] <cite>http://130.87.106.59:8080/b2charm/end_of_2011/BR_541_-211+211+211+443xoBR_541_211+443.html</cite></p>
<blockquote>
<div><ul class="simple">
<li>single qty, no avg on plot, a feature perhaps</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">[FIXED] <a class="reference external" href="http://130.87.106.59:8080/rezdb/db/hfagc/babar/matteo/2012_BtoDDK.xml">http://130.87.106.59:8080/rezdb/db/hfagc/babar/matteo/2012_BtoDDK.xml</a></p>
<blockquote>
<div><ul class="simple">
<li>static html links from rezdb pages are broken eg <a class="reference external" href="http://130.87.106.59:8080/hfagc/1112008.html">http://130.87.106.59:8080/hfagc/1112008.html</a></li>
<li>should be of this form <a class="reference external" href="http://130.87.106.59:8080/b2charm/end_of_2011/1112006.html">http://130.87.106.59:8080/b2charm/end_of_2011/1112006.html</a></li>
<li>OR maybe <a class="reference external" href="http://130.87.106.59:8080/b2charm/1112006.html">http://130.87.106.59:8080/b2charm/1112006.html</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">[FIXED] <a class="reference external" href="http://130.87.106.59:8080/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml">http://130.87.106.59:8080/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml</a></p>
<ul class="simple">
<li>curly backet instead of f issue still there, <a class="reference external" href="http://cms01.phys.ntu.edu.tw/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml">http://cms01.phys.ntu.edu.tw/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml</a></li>
</ul>
</li>
</ul>
<div class="section" id="fixed-00000-first-10-pages-only">
<h3><a class="toc-backref" href="#id23">[FIXED] 00000 first 10 pages only</a><a class="headerlink" href="#fixed-00000-first-10-pages-only" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://130.87.106.59:9090/hfagc/00000/html?apt=save&amp;bpt=save">http://130.87.106.59:9090/hfagc/00000/html?apt=save&amp;bpt=save</a></li>
</ul>
<p>Rescrape just the compilation page:</p>
<div class="highlight-python"><pre>b2mc:logs heprez$ scrape-ant -Dpos=00000
checklog:
     [exec] gets:2
BUILD SUCCESSFUL
Total time: 2 minutes 46 seconds</pre>
</div>
</div>
<div class="section" id="fixed-broken-static-html-links">
<h3><a class="toc-backref" href="#id24">[FIXED] broken Static HTML links</a><a class="headerlink" href="#fixed-broken-static-html-links" title="Permalink to this headline">¶</a></h3>
<p><cite>hfag/mods/webapp/hfagc/stylesheets/present-instance.xsl</cite></p>
<p><cite>hfag/mods/webapp/hfagc/stylesheets/sidebar-db-sm.xsl</cite>:</p>
<div class="highlight-python"><pre>89 &lt;xsl:template name="toolbar" &gt;
90    &lt;xsl:param name="name"&gt;&lt;/xsl:param&gt;
91    &lt;xsl:param name="fold"&gt;&lt;/xsl:param&gt;
92    &lt;sidebar:toolbar  xmlns:sidebar="http://exist-db.org/NS/sidebar" &gt;
93       &lt;sidebar:oink href="html" &gt; Static HTML&lt;/sidebar:oink&gt;
94       &lt;sidebar:link href="{concat('/xmldb',$fold,$name)}" &gt; View XML &lt;/sidebar:link&gt;
95       &lt;sidebar:link href="{concat('/servlet',$fold,$name)}" &gt; Raw XML &lt;/sidebar:link&gt;
96     &lt;/sidebar:toolbar&gt;
97 &lt;/xsl:template&gt;</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://130.87.106.59:8080/rezdb/sidebar/db/hfagc/babar/matteo/2012_BtoDDK.xml">http://130.87.106.59:8080/rezdb/sidebar/db/hfagc/babar/matteo/2012_BtoDDK.xml</a></li>
</ul>
<div class="highlight-python"><pre>&lt;sidebar:toolbar&gt;
&lt;sidebar:oink href="html"&gt;Static HTML&lt;/sidebar:oink&gt;
&lt;sidebar:link href="/xmldb/db/hfagc/babar/matteo/2012_BtoDDK.xml"&gt;View XML&lt;/sidebar:link&gt;
&lt;sidebar:link href="/servlet/db/hfagc/babar/matteo/2012_BtoDDK.xml"&gt;Raw XML&lt;/sidebar:link&gt;
&lt;/sidebar:toolbar&gt;</pre>
</div>
<p>Aha, special cased in the db2html.xsl:</p>
<div class="highlight-python"><pre>b2mc:h heprez$ find . -name '*.*' -exec grep -l oink {} \;
./hfag/mods/webapp/hfagc/stylesheets/db2html-scb.xsl
./hfag/mods/webapp/hfagc/stylesheets/sidebar-db-sm.xsl</pre>
</div>
<p>Propagation and place xsl:</p>
<div class="highlight-python"><pre>541  exist-up-hfagc live
542  exist-place-xsl</pre>
</div>
</div>
<div class="section" id="fixed-curly-bracket-instead-of-f">
<h3><a class="toc-backref" href="#id25">[FIXED] curly bracket instead of f</a><a class="headerlink" href="#fixed-curly-bracket-instead-of-f" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://130.87.106.59:8080/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml">http://130.87.106.59:8080/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml</a><ul>
<li>curly backet instead of f issue still there, <a class="reference external" href="http://cms01.phys.ntu.edu.tw/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml">http://cms01.phys.ntu.edu.tw/rezdb/db/hfagc/d0/d0yasmine/d0_fall_2012_Lb2JpsiLambda.xml</a></li>
<li>qty is <cite>f_5_5122xBR_5122_443+3122</cite></li>
</ul>
</li>
</ul>
<p>The updated extras.pl not propagated into the .tex:</p>
<div class="highlight-python"><pre>b2mc:extras heprez$ ll $HEPREZ_DATA/images/extras/tex/f.tex
-rw-r--r--  1 heprez  staff  116 Jun 27 15:07 /Users/heprez/data/data/images/extras/tex/f.tex</pre>
</div>
<p>Force tex update:</p>
<div class="highlight-python"><pre>b2mc:00000 heprez$ rm  $HEPREZ_DATA/images/extras/tex/f.tex
b2mc:00000 heprez$ touch /Users/heprez/heprez/images/tex2pdfpng/extras.pl
b2mc:00000 heprez$ tex2pdfpng-extras</pre>
</div>
<p>Force full update:</p>
<div class="highlight-python"><pre>b2mc:extras heprez$ l */f.*
-rw-r--r--  1 heprez  staff   119 Jul 11 17:22 tex/f.tex
-rw-r--r--  1 heprez  staff   282 Jun 27 15:07 png/f.png
-rw-r--r--  1 heprez  staff   204 Jun 27 15:07 dvi/f.dvi
-rw-r--r--  1 heprez  staff  1301 Jun 27 15:07 svg_nofonts/f.svg
-rw-r--r--  1 heprez  staff  8312 Jun 21 18:16 pdf/f.pdf
b2mc:extras heprez$ rm */f.*
b2mc:extras heprez$ touch  /Users/heprez/heprez/images/tex2pdfpng/extras.pl
b2mc:extras heprez$ images-basis
b2mc:extras heprez$ l */f.*
-rw-r--r--  1 heprez  staff   253 Jul 11 17:30 png/f.png
-rw-r--r--  1 heprez  staff   204 Jul 11 17:30 dvi/f.dvi
-rw-r--r--  1 heprez  staff  1095 Jul 11 17:30 svg_nofonts/f.svg
-rw-r--r--  1 heprez  staff   119 Jul 11 17:30 tex/f.tex
b2mc:extras heprez$</pre>
</div>
<p>From xquery interface <a class="reference external" href="http://130.87.106.59:9090/xmldb/db/hfagc_system/">http://130.87.106.59:9090/xmldb/db/hfagc_system/</a>:</p>
<div class="highlight-python"><pre>doc("extras.xml")//glyph[@code='f']
OR
doc("extras.xml")//glyph[substring(@code,0,1)='f']</pre>
</div>
<p>Shows updated indice in in DB:</p>
<div class="highlight-python"><pre>&lt;glyph exist:id ="65" exist:source ="/db/hfagc_system/extras.xml" code ="f" latex ="{\mathrm{f}}" name ="f" group ="Extras" /&gt;</pre>
</div>
<p>Other indices not updated though:</p>
<div class="highlight-python"><pre>doc("qtag2svgs.xml")//qtag[substring(@value,0,1)='f']   # difficult to tell from raw SVG</pre>
</div>
<div class="highlight-python"><pre>b2mc:indices heprez$ pwd
/Users/heprez/data/data/images/indices
b2mc:indices heprez$ ll
total 25704
-rw-r--r--   1 heprez  staff       107 Jun 21 18:20 qtags.xml
-rw-r--r--   1 heprez  staff    118659 Jun 27 19:06 v2qtags.xml
drwxr-xr-x  13 heprez  staff       442 Jun 27 21:39 ..
-rw-r--r--   1 heprez  staff    261640 Jun 27 21:43 qtag2pngs.xml
-rw-r--r--   1 heprez  staff  12553452 Jul  4 19:16 qtag2svgs.xml
-rw-r--r--   1 heprez  staff    219826 Jul 11 17:31 qtag2latex.xml
drwxr-xr-x   7 heprez  staff       238 Jul 11 17:44 .
b2mc:indices heprez$</pre>
</div>
<p>qtags too:</p>
<div class="highlight-python"><pre>b2mc:qtags heprez$ l */*f*.*
-rw-r--r--  1 heprez  staff   1280 Jun 25 20:05 png/slf_5_5122xBR_5122_443+3122.png
-rw-r--r--  1 heprez  staff   2311 Jun 25 19:53 png/f_5_5122xBR_5122_443+3122.png
-rw-r--r--  1 heprez  staff    376 Jun 24 12:25 dvi/slf_5_5122xBR_5122_443+3122.dvi
-rw-r--r--  1 heprez  staff    476 Jun 24 12:23 dvi/f_5_5122xBR_5122_443+3122.dvi
-rw-r--r--  1 heprez  staff   7596 Jun 24 12:25 svg_nofonts/slf_5_5122xBR_5122_443+3122.svg
-rw-r--r--  1 heprez  staff  11908 Jun 24 12:23 svg_nofonts/f_5_5122xBR_5122_443+3122.svg
-rw-r--r--  1 heprez  staff  39334 Jun 21 19:44 pdf/f_5_5122xBR_5122_443+3122.pdf
-rw-r--r--  1 heprez  staff  31300 Jun 21 19:44 pdf/slf_5_5122xBR_5122_443+3122.pdf
-rw-r--r--  1 heprez  staff    195 Jun 21 19:44 tex/f_5_5122xBR_5122_443+3122.tex
-rw-r--r--  1 heprez  staff    141 Jun 21 19:44 tex/slf_5_5122xBR_5122_443+3122.tex
b2mc:qtags heprez$</pre>
</div>
<p>See <a class="reference internal" href="../../images/tex2svgpngpdf/tex2svgpngpdf/"><em>TEX2SVGPNGPDF</em></a></p>
</div>
<div class="section" id="fixed-note-that-the-qtags-pdf-is-not-being-regenerated">
<h3><a class="toc-backref" href="#id26">[FIXED] note that the qtags PDF is not being regenerated</a><a class="headerlink" href="#fixed-note-that-the-qtags-pdf-is-not-being-regenerated" title="Permalink to this headline">¶</a></h3>
<p>Change <em>tex2svgpng-</em> into <em>tex2svgpngpdf-</em> using <em>batik-</em> <strong>SaveAsPDF</strong> capabilities back at qtags level. Already
done for plots.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../broken_plot_splitting/" title="Broken Plot Splitting"
             >next</a> |</li>
        <li class="right" >
          <a href="../b2mc_install/" title="b2mc installation notes"
             >previous</a> |</li>
        <li><a href="../../">Heprez Unversioned directory documentation</a> &raquo;</li>
          <li><a href="../" >porting</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>