<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Greenfield Installation Testing &mdash; OpticksDevNotes 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpticksDevNotes 0.0.1 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">OpticksDevNotes 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Greenfield Installation Testing</a><ul>
<li><a class="reference internal" href="#opticks-t-fails">opticks-t fails</a></li>
<li><a class="reference internal" href="#greenfield-run-errors">Greenfield run errors</a></li>
<li><a class="reference internal" href="#error-report-from-axel">Error Report from Axel</a></li>
<li><a class="reference internal" href="#checking-green-field-opticks-installation">Checking Green Field Opticks Installation</a></li>
<li><a class="reference internal" href="#but-cmake-has-some-hardcoded-paths">BUT CMake has some hardcoded paths ??</a></li>
<li><a class="reference internal" href="#tests-using-optional-externals-need-detection-of-the-externals-presence">Tests using optional externals, need detection of the externals presence</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/issues/greenfield_installation_testing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="greenfield-installation-testing">
<h1>Greenfield Installation Testing<a class="headerlink" href="#greenfield-installation-testing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="opticks-t-fails">
<h2>opticks-t fails<a class="headerlink" href="#opticks-t-fails" title="Permalink to this headline">¶</a></h2>
<p>Greenfield:</p>
<div class="highlight-python"><pre>89% tests passed, 18 tests failed out of 162

Total Test time (real) =  85.76 sec

The following tests FAILED:
      4 - SysRapTest.SSysTest (Failed)
     34 - NPYTest.NOpenMeshCfgTest (OTHER_FAULT)
     35 - NPYTest.NOpenMeshFindTest (OTHER_FAULT)
     80 - GGeoTest.GPartsTest (OTHER_FAULT)
     81 - GGeoTest.GPmtTest (OTHER_FAULT)
     89 - GGeoTest.GGeoTestTest (OTHER_FAULT)
     90 - GGeoTest.GMakerTest (SEGFAULT)
     96 - GGeoTest.GPropertyTest (OTHER_FAULT)
    102 - GGeoTest.GSceneTest (OTHER_FAULT)
    136 - OptiXRapTest.OEventTest (OTHER_FAULT)
    137 - OptiXRapTest.OInterpolationTest (Failed)
    141 - OKOPTest.OpSeederTest (OTHER_FAULT)
    148 - OKTest.VizTest (OTHER_FAULT)
    150 - cfg4Test.CMaterialLibTest (OTHER_FAULT)
    151 - cfg4Test.CTestDetectorTest (OTHER_FAULT)
    154 - cfg4Test.CG4Test (OTHER_FAULT)
    159 - cfg4Test.CInterpolationTest (OTHER_FAULT)
    162 - okg4Test.OKG4Test (OTHER_FAULT)
Errors while running CTest
opticks-t- : use -V to show output</pre>
</div>
<p>Standard:</p>
<div class="highlight-python"><pre>90% tests passed, 16 tests failed out of 164

Total Test time (real) = 109.84 sec

The following tests FAILED:
      4 - SysRapTest.SSysTest (Failed)
     34 - NPYTest.NOpenMeshCfgTest (OTHER_FAULT)
     35 - NPYTest.NOpenMeshFindTest (OTHER_FAULT)
     81 - GGeoTest.GPartsTest (OTHER_FAULT)
     82 - GGeoTest.GPmtTest (OTHER_FAULT)
     90 - GGeoTest.GGeoTestTest (OTHER_FAULT)
     91 - GGeoTest.GMakerTest (SEGFAULT)
     97 - GGeoTest.GPropertyTest (OTHER_FAULT)
    103 - GGeoTest.GSceneTest (OTHER_FAULT)
    104 - AssimpRapTest.AssimpRapTest (SEGFAULT)
    138 - OptiXRapTest.OEventTest (OTHER_FAULT)
    139 - OptiXRapTest.OInterpolationTest (Failed)
    143 - OKOPTest.OpSeederTest (OTHER_FAULT)
    150 - OKTest.VizTest (OTHER_FAULT)
    152 - cfg4Test.CMaterialLibTest (OTHER_FAULT)
    153 - cfg4Test.CTestDetectorTest (OTHER_FAULT)
Errors while running CTest</pre>
</div>
</div>
<div class="section" id="greenfield-run-errors">
<h2>Greenfield run errors<a class="headerlink" href="#greenfield-run-errors" title="Permalink to this headline">¶</a></h2>
<p>Were missing a run of <cite>opticks-prepare-installcache</cite>, have added this to <cite>opticks-full</cite>.</p>
<div class="highlight-python"><pre>2017-06-12 17:43:45.714 INFO  [6775612] [Composition::setCenterExtent@991] Composition::setCenterExtent ce -16520.0000,-802110.0000,-7125.0000,7710.5625
2017-06-12 17:43:45.715 INFO  [6775612] [SLog::operator@15] OpticksViz::OpticksViz DONE
2017-06-12 17:43:46.028 INFO  [6775612] [SLog::operator@15] OScene::OScene DONE
2017-06-12 17:43:46.029 FATAL [6775612] [*OContext::addEntry@44] OContext::addEntry G
2017-06-12 17:43:46.029 INFO  [6775612] [SLog::operator@15] OEvent::OEvent DONE
cuRANDWrapper::LoadIntoHostBuffer MISSING RNG CACHE AT : /tmp/blyth/opticks20170612/installcache/RNG/cuRANDWrapper_3000000_0_0.bin
cuRANDWrapper::LoadIntoHostBuffer : CREATE CACHE WITH bash functions : cudarap-;cudarap-prepare-installcache
cuRANDWrapper::LoadIntoHostBuffer : NB cudarap-prepare-installcache SHOULD HAVE BEEN INVOKED BY opticks-prepare-installcache
Assertion failed: (0), function LoadIntoHostBuffer, file /Users/blyth/opticks/cudarap/cuRANDWrapper.cc, line 342.
Process 68932 stopped
* thread #1: tid = 0x67633c, 0x00007fff8f018866 libsystem_kernel.dylib`__pthread_kill + 10, queue = 'com.apple.main-thread', stop reason = signal SIGABRT
    frame #0: 0x00007fff8f018866 libsystem_kernel.dylib`__pthread_kill + 10
libsystem_kernel.dylib`__pthread_kill + 10:
-&gt; 0x7fff8f018866:  jae    0x7fff8f018870            ; __pthread_kill + 20
   0x7fff8f018868:  movq   %rax, %rdi
   0x7fff8f01886b:  jmp    0x7fff8f015175            ; cerror_nocancel
   0x7fff8f018870:  retq
(lldb)</pre>
</div>
</div>
<div class="section" id="error-report-from-axel">
<h2>Error Report from Axel<a class="headerlink" href="#error-report-from-axel" title="Permalink to this headline">¶</a></h2>
<p>On Jun 9, 2017,</p>
<p>Hi Simon,</p>
<p>this is the main problem i get at the moment:</p>
<blockquote>
<div><p><a class="reference external" href="mailto:axel&#37;&#52;&#48;axel-VirtualBox">axel<span>&#64;</span>axel-VirtualBox</a> ~/opticks $ opticks- ; opticks-full
=== opticks-full : START Wed Jun 7 16:42:38 CEST 2017
bash: opticks.bash: No such file or directory
=== opticks-cmake : opticks-prefix:/usr/local/opticks
=== opticks-cmake : opticks-optix-install-dir:/tmp
=== opticks-cmake : g4-cmake-dir:/usr/local/opticks/externals/lib/Geant4-10.2.1
=== opticks-cmake : xercesc-library:/usr/local/opticks/externals/lib/libxerces-c-3-1.so
=== opticks-cmake : xercesc-include-dir:/usr/local/opticks/externals/include
&#8211; The C compiler identification is GNU 5.4.0
&#8211; The CXX compiler identification is GNU 5.4.0
&#8211; Check for working C compiler: /usr/bin/cc
&#8211; Check for working C compiler: /usr/bin/cc &#8211; works
&#8211; Detecting C compiler ABI info
&#8211; Detecting C compiler ABI info - done
&#8211; Detecting C compile features
&#8211; Detecting C compile features - done
&#8211; Check for working CXX compiler: /usr/bin/c++
&#8211; Check for working CXX compiler: /usr/bin/c++ &#8211; works
&#8211; Detecting CXX compiler ABI info
&#8211; Detecting CXX compiler ABI info - done
&#8211; Detecting CXX compile features
&#8211; Detecting CXX compile features - done
&#8211; Configuring Opticks
CMAKE_BUILD_TYPE = Debug
CMAKE_CXX_FLAGS =  -W -Wall -pedantic -Wno-non-virtual-dtor -Wno-long-long -Wwrite-strings -Wpointer-arith -Woverloaded-virtual -Wno-variadic-macros -Wshadow -pipe
CMAKE_CXX_FLAGS_DEBUG = -g -DG4FPE_DEBUG
CMAKE_CXX_FLAGS_RELEASE = -O2 -DNDEBUG
CMAKE_CXX_FLAGS_RELWITHDEBINFO= -O2 -g
&#8211; Boost version: 1.58.0
&#8211; Found the following Boost libraries:
&#8211;   system
&#8211;   program_options
&#8211;   filesystem
&#8211;   regex
&#8211; Configuring SysRap
&#8211; Configuring BoostRap
&#8211; Configuring NPY
NPY.CSGBSP_INCLUDE_DIRS:/usr/local/opticks/externals/csgbsp/csgjs-cpp
&#8211; Configuring OpticksCore
&#8211; Configuring GGeo
&#8211; Configuring AssimpRap
&#8211; Configuring OpenMeshRap
&#8211; Configuring OpticksGeometry
&#8211; Configuring OGLRap
&#8211; Opticks.COMPUTE_CAPABILITY : 0 : at least 30 is required for Opticks, proceeding GPU-less
&#8211; Configuring OK
Operating without OPTIX
Opticks.Geant4_FOUND_NOT
CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
DualContouringSample_LIBRARIES</p>
<blockquote>
<div>linked by target &#8220;NPY&#8221; in directory /home/axel/opticks/opticksnpy
linked by target &#8220;NPolygonizerTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NOpenMeshFindTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NOpenMeshCfgTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NYShapeTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NYMathTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NTrisTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;HitsNPYTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NBBoxTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NCSGDeserializeTest&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NLoadCheck&#8221; in directory /home/axel/opticks/opticksnpy/tests
linked by target &#8220;NTreeToolsTest&#8221; in directory /home/axel/opticks/opticksnpy/tests</div></blockquote>
<p>...</p>
</div></blockquote>
</div>
<div class="section" id="checking-green-field-opticks-installation">
<h2>Checking Green Field Opticks Installation<a class="headerlink" href="#checking-green-field-opticks-installation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>add to ~/.bash_profile a temporary envvar, export OPTICKS_GREENFIELD_TEST=1</li>
</ul>
<p>This changes the result of opticks-prefix, so can test geenfield building
into a day stamped folder.</p>
<div class="highlight-python"><pre>simon:~ blyth$ opticks-prefix
/usr/local/opticks
simon:~ blyth$ OPTICKS_GREENFIELD_TEST= opticks-prefix
/usr/local/opticks
simon:~ blyth$ OPTICKS_GREENFIELD_TEST=1 opticks-prefix
/usr/local/opticks20170612</pre>
</div>
</div>
<div class="section" id="but-cmake-has-some-hardcoded-paths">
<h2>BUT CMake has some hardcoded paths ??<a class="headerlink" href="#but-cmake-has-some-hardcoded-paths" title="Permalink to this headline">¶</a></h2>
<p>Some opticks/cmake/Modules/ were using <cite>$ENV</cite>, for &#8220;official&#8221; opticks
externals : should not depend on environment in this way...</p>
</div>
<div class="section" id="tests-using-optional-externals-need-detection-of-the-externals-presence">
<h2>Tests using optional externals, need detection of the externals presence<a class="headerlink" href="#tests-using-optional-externals-need-detection-of-the-externals-presence" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>some currently optionals need to be moved to standard externals</li>
<li>many tests need optional inclusion</li>
</ul>
<div class="highlight-python"><pre>-- cfg4._line #define G4VERSION_NUMBER  1021 ===&gt; 1021
-- Configuring okg4
CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
ImplicitMesher_LIBRARIES
    linked by target "NPY" in directory /Users/blyth/opticks/opticksnpy
    linked by target "NPolygonizerTest" in directory /Users/blyth/opticks/opticksnpy/tests
    linked by target "NCSGBSPTest" in directory /Users/blyth/opticks/opticksnpy/tests
    linked by target "NuvTest" in directory /Users/blyth/opticks/opticksnpy/tests
    linked by target "NOpenMeshCombineTest" in directory /Users/blyth/opticks/opticksnpy/tests
    linked by target "NOpenMeshCfgTest" in directory /Users/blyth/opticks/opticksnpy/tests
    linked by target "NOpenMeshFindTest" in directory /Users/blyth/opticks/opticksnpy/tests
    linked by target "NOpenMeshTest" in directory /Users/blyth/opticks/opticksnpy/tests

-- Configuring incomplete, errors occurred!
See also "/tmp/blyth/opticks20170612/build/CMakeFiles/CMakeOutput.log".
make: *** No rule to make target `install'.  Stop.
=== opticks-full : DONE Mon Jun 12 13:41:56 CST 2017
simon:~ blyth$</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">OpticksDevNotes 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>