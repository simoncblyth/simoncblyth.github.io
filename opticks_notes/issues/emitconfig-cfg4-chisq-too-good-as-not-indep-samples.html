<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>emitconfig-cfg4-chisq-too-good-as-not-indep-samples &mdash; OpticksDevNotes 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpticksDevNotes 0.0.1 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">OpticksDevNotes 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">emitconfig-cfg4-chisq-too-good-as-not-indep-samples</a><ul>
<li><a class="reference internal" href="#issue-need-different-comparison-approach-for-emitconfig-input-photons">ISSUE  : Need different comparison approach for emitconfig input photons</a></li>
<li><a class="reference internal" href="#done-add-deviation-max-cuts-passing-result-to-rc">DONE : add deviation max cuts, passing result to RC</a></li>
<li><a class="reference internal" href="#done-final-photon-deviation-comparison">DONE : final photon deviation comparison</a><ul>
<li><a class="reference internal" href="#develop-ox-dv">develop ox_dv</a></li>
</ul>
</li>
<li><a class="reference internal" href="#br-alignment-with-reflectcheat">BR alignment with &#8211;reflectcheat</a></li>
<li><a class="reference internal" href="#approaches">APPROACHES</a></li>
<li><a class="reference internal" href="#before-any-cheating-numpy-machinery-for-aligned-comparison">BEFORE ANY CHEATING : NUMPY MACHINERY FOR ALIGNED COMPARISON</a></li>
<li><a class="reference internal" href="#implementing-reflectcheat">implementing reflectcheat</a></li>
<li><a class="reference internal" href="#thoughts-on-cheating-reflection-randomness-br-sr-u-cheat-photon-index-num-photons">THOUGHTS ON CHEATING REFLECTION RANDOMNESS BR/SR : u_cheat=photon_index/num_photons</a><ul>
<li><a class="reference internal" href="#g4">G4</a></li>
<li><a class="reference internal" href="#opticks">Opticks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#no-rng-impact-direct-photons">No RNG impact &#8220;direct photons&#8221;</a></li>
<li><a class="reference internal" href="#rng-impact">RNG impact</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/issues/emitconfig-cfg4-chisq-too-good-as-not-indep-samples.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="emitconfig-cfg4-chisq-too-good-as-not-indep-samples">
<h1>emitconfig-cfg4-chisq-too-good-as-not-indep-samples<a class="headerlink" href="#emitconfig-cfg4-chisq-too-good-as-not-indep-samples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="issue-need-different-comparison-approach-for-emitconfig-input-photons">
<h2>ISSUE  : Need different comparison approach for emitconfig input photons<a class="headerlink" href="#issue-need-different-comparison-approach-for-emitconfig-input-photons" title="Permalink to this headline">¶</a></h2>
<p>With <em>emitconfig</em> OK/G4 samples are not independant,
as the input photons are identical. BUT the chisq comparison
machinery was setup for comparing indep samples.</p>
<div class="highlight-python"><pre>simon:ana blyth$ tboolean-;tboolean-box-ip
args: /opt/local/bin/ipython -i -- /Users/blyth/opticks/ana/tboolean.py --det tboolean-box --tag 1
[2017-11-24 19:31:56,600] p33909 {/Users/blyth/opticks/ana/base.py:316} INFO - envvar OPTICKS_ANA_DEFAULTS -&gt; defaults {'src': 'torch', 'tag': '1', 'det': 'concentric'}
args: /Users/blyth/opticks/ana/tboolean.py --det tboolean-box --tag 1
ok.smry 1
[2017-11-24 19:31:56,602] p33909 {/Users/blyth/opticks/ana/tboolean.py:27} INFO - tag 1 src torch det tboolean-box c2max 2.0 ipython True
[2017-11-24 19:31:56,603] p33909 {/Users/blyth/opticks/ana/ab.py:81} INFO - AB.load START smry 1
[2017-11-24 19:31:56,774] p33909 {/Users/blyth/opticks/ana/ab.py:108} INFO - AB.load DONE
[2017-11-24 19:31:56,778] p33909 {/Users/blyth/opticks/ana/ab.py:150} INFO - AB.init_point START
[2017-11-24 19:31:56,780] p33909 {/Users/blyth/opticks/ana/ab.py:152} INFO - AB.init_point DONE
AB(1,torch,tboolean-box)  None 0
A tboolean-box/torch/  1 :  20171124-1909 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/1/fdom.npy ()
B tboolean-box/torch/ -1 :  20171124-1909 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/-1/fdom.npy (recstp)
Rock//perfectAbsorbSurface/Vacuum,Vacuum///GlassSchottF2
/tmp/blyth/opticks/tboolean-box--
.                seqhis_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             100000    100000         4.44/5 =  0.89  (pval:0.488 prob:0.512)
0000      55321     55303             0.00  TO SA
0001      39222     39231             0.00  TO BT BT SA
0002       2768      2814             0.38  TO BR SA
0003       2425      2369             0.65  TO BT BR BT SA
0004        151       142             0.28  TO BT BR BR BT SA
0005         54        74             3.12  TO SC SA
0006         13        16             0.00  TO BT BT SC SA
0007         12         8             0.00  TO BT BR BR BR BT SA</pre>
</div>
<div class="highlight-python"><pre>tboolean-;tboolean-box --okg4 --testauto


A tboolean-box/torch/  1 :  20171130-2041 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/1/fdom.npy ()
B tboolean-box/torch/ -1 :  20171130-2041 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/-1/fdom.npy (recstp)
Rock//perfectAbsorbSurface/Vacuum,Vacuum///GlassSchottF2
/tmp/blyth/opticks/tboolean-box--
.                seqhis_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             600000    600000         1.12/5 =  0.22  (pval:0.953 prob:0.047)
0000               8d    391943    391952             0.00        1.000 +- 0.002        1.000 +- 0.002  [2 ] TO SA
0001              8ad    207533    207524             0.00        1.000 +- 0.002        1.000 +- 0.002  [3 ] TO SR SA
0002              86d       368       368             0.00        1.000 +- 0.052        1.000 +- 0.052  [3 ] TO SC SA
0003             8a6d        58        64             0.30        0.906 +- 0.119        1.103 +- 0.138  [4 ] TO SC SR SA
0004             86ad        50        42             0.70        1.190 +- 0.168        0.840 +- 0.130  [4 ] TO SR SC SA
0005               4d        37        34             0.13        1.088 +- 0.179        0.919 +- 0.158  [2 ] TO AB
0006            8a6ad         6        10             0.00        0.600 +- 0.245        1.667 +- 0.527  [5 ] TO SR SC SR SA
0007              4ad         5         6             0.00        0.833 +- 0.373        1.200 +- 0.490  [3 ] TO SR AB
.                             600000    600000         1.12/5 =  0.22  (pval:0.953 prob:0.047)
.                pflags_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             600000    600000         0.14/4 =  0.04  (pval:0.998 prob:0.002)
0000             1080    391943    391952             0.00        1.000 +- 0.002        1.000 +- 0.002  [2 ] TO|SA
0001             1280    207533    207524             0.00        1.000 +- 0.002        1.000 +- 0.002  [3 ] TO|SR|SA
0002             10a0       368       368             0.00        1.000 +- 0.052        1.000 +- 0.052  [3 ] TO|SA|SC
0003             12a0       114       116             0.02        0.983 +- 0.092        1.018 +- 0.094  [4 ] TO|SR|SA|SC
0004             1008        37        34             0.13        1.088 +- 0.179        0.919 +- 0.158  [2 ] TO|AB
0005             1208         5         6             0.00        0.833 +- 0.373        1.200 +- 0.490  [3 ] TO|SR|AB
.                             600000    600000         0.14/4 =  0.04  (pval:0.998 prob:0.002)
.                seqmat_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             600000    600000         0.15/3 =  0.05  (pval:0.986 prob:0.014)
0000               12    391943    391952             0.00        1.000 +- 0.002        1.000 +- 0.002  [2 ] Vm Rk
0001              122    207901    207892             0.00        1.000 +- 0.002        1.000 +- 0.002  [3 ] Vm Vm Rk
0002             1222       108       106             0.02        1.019 +- 0.098        0.981 +- 0.095  [4 ] Vm Vm Vm Rk
0003               22        37        34             0.13        1.088 +- 0.179        0.919 +- 0.158  [2 ] Vm Vm
0004            12222         6        10             0.00        0.600 +- 0.245        1.667 +- 0.527  [5 ] Vm Vm Vm Vm Rk
0005              222         5         6             0.00        0.833 +- 0.373        1.200 +- 0.490  [3 ] Vm Vm Vm
.                             600000    600000         0.15/3 =  0.05  (pval:0.986 prob:0.014)
ab.a.metadata                  /tmp/blyth/opticks/evt/tboolean-box/torch/1 d703568ba21bd41407e8bd8b4640ec2e 97dc3fb9c883d8aed3e645dca6988f5e  600000    -1.0000 INTEROP_MODE
ab.a.metadata.csgmeta0 {u'containerscale': u'3', u'container': u'1', u'ctrl': u'0', u'verbosity': u'0', u'poly': u'IM', u'emitconfig': u'photons:100000,wavelength:380,time:0.2,posdelta:0.1,sheetmask:0x1,umin:0.25,umax:0.75,vmin:0.25,vmax:0.75', u'resolution': u'20', u'emit': -1}
rpost_dv maxdvmax:0.0137638477737 maxdv:[0.013763847773681448, 0.013763847773681448]
 0000            :                          TO SA :  391943   391952  :    391558 3132464/     26: 0.000  mx/mn/av 0.01376/     0/1.142e-07  eps:0.0002
 0001            :                       TO SR SA :  207533   207524  :    207394 2488728/     42: 0.000  mx/mn/av 0.01376/     0/2.323e-07  eps:0.0002
rpol_dv maxdvmax:2.0 maxdv:[0.0, 2.0]
 0000            :                          TO SA :  391943   391952  :    391558 2349348/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
 0001            :                       TO SR SA :  207533   207524  :    207394 1866546/1037044: 0.556  mx/mn/av      2/     0/0.6667  eps:0.0002
/Users/blyth/opticks/ana/dv.py:58: RuntimeWarning: invalid value encountered in greater
  discrep = dv[dv&gt;eps]
ox_dv maxdvmax:3.0517578125e-05 maxdv:[3.0517578125e-05, nan]
 0000            :                          TO SA :  391943   391952  :    391558 6264928/      0: 0.000  mx/mn/av 3.052e-05/     0/1.907e-06  eps:0.0002
 0001            :                       TO SR SA :  207533   207524  :    207394 3318304/      0: 0.000  mx/mn/av    nan/   nan/   nan  eps:0.0002
c2p : {'seqmat_ana': 0.048583430268376533, 'pflags_ana': 0.03611258795302956, 'seqhis_ana': 0.22355863771809009} c2pmax: 0.223558637718  CUT ok.c2max 2.0  RC:0
rmxs_ : {'rpol_dv': 2.0, 'rpost_dv': 0.013763847773681448} rmxs_max_: 2.0  CUT ok.rdvmax 0.1  RC:88
pmxs_ : {'ox_dv': 3.0517578125e-05} pmxs_max_: 3.0517578125e-05  CUT ok.pdvmax 0.001  RC:88
[2017-11-30 20:41:16,962] p42301 {/Users/blyth/opticks/ana/tboolean.py:43} INFO - early exit as non-interactive
2017-11-30 20:41:17.041 INFO  [753979] [SSys::run@46] tboolean.py --tag 1 --tagoffset 0 --det tboolean-box --src torch   rc_raw : 22528 rc : 88
2017-11-30 20:41:17.041 WARN  [753979] [SSys::run@53] SSys::run FAILED with  cmd tboolean.py --tag 1 --tagoffset 0 --det tboolean-box --src torch</pre>
</div>
<ul class="simple">
<li><a class="reference internal" href="photon-polarization-testauto-SR.html"><em>photon-polarization-testauto-SR</em></a></li>
</ul>
</div>
<div class="section" id="done-add-deviation-max-cuts-passing-result-to-rc">
<h2>DONE : add deviation max cuts, passing result to RC<a class="headerlink" href="#done-add-deviation-max-cuts-passing-result-to-rc" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>.                             100000    100000         0.02/2 =  0.01  (pval:0.988 prob:0.012)
ab.a.metadata                  /tmp/blyth/opticks/evt/tboolean-box/torch/1 7c3396a4bcfc21cba051ba98f6f0b667 781d1ab8f0adbf585c197cf43a538446  100000    -1.0000 INTEROP_MODE
ab.a.metadata.csgmeta0 {u'containerscale': u'3', u'container': u'1', u'ctrl': u'0', u'verbosity': u'0', u'poly': u'IM', u'emitconfig': u'photons:100000,wavelength:380,time:0.2,posdelta:0.1,sheetmask:0x1,umin:0.25,umax:0.75,vmin:0.25,vmax:0.75', u'resolution': u'20', u'emit': -1}
rpost_dv maxdvmax:0.0137638477737 maxdv:[0.0, 0.013763847773674343, 0.0]
 0000            :                          TO SA :   55321    55312  :     55258  442064/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
 0001            :                    TO BT BT SA :   41828    41816  :     41776  668416/      8: 0.000  mx/mn/av 0.01376/     0/1.647e-07  eps:0.0002
 0002            :                       TO BR SA :    2754     2754  :      2751   33012/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
rpol_dv maxdvmax:0.0 maxdv:[0.0, 0.0, 0.0]
 0000            :                          TO SA :   55321    55312  :     55258  331548/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
 0001            :                    TO BT BT SA :   41828    41816  :     41776  501312/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
 0002            :                       TO BR SA :    2754     2754  :      2751   24759/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
ox_dv maxdvmax:3.0517578125e-05 maxdv:[3.0517578125e-05, 5.960464477539063e-08, 1.401298464324817e-45]
 0000            :                          TO SA :   55321    55312  :     55258  884128/      0: 0.000  mx/mn/av 3.052e-05/     0/1.907e-06  eps:0.0002
 0001            :                    TO BT BT SA :   41828    41816  :     41776  668416/      0: 0.000  mx/mn/av 5.96e-08/     0/3.725e-09  eps:0.0002
 0002            :                       TO BR SA :    2754     2754  :      2751   44016/      0: 0.000  mx/mn/av 1.401e-45/     0/8.758e-47  eps:0.0002
c2p : {'seqmat_ana': 0.011978598910194116, 'pflags_ana': 0.36007827166347472, 'seqhis_ana': 0.33975348502498387} c2pmax: 0.360078271663  CUT ok.c2max 2.0  RC:0
rmxs_ : {'rpol_dv': 0.0, 'rpost_dv': 0.013763847773674343} rmxs_max_: 0.0137638477737  CUT ok.rdvmax 0.1  RC:0
pmxs_ : {'ox_dv': 3.0517578125e-05} pmxs_max_: 3.0517578125e-05  CUT ok.pdvmax 0.001  RC:0</pre>
</div>
</div>
<div class="section" id="done-final-photon-deviation-comparison">
<h2>DONE : final photon deviation comparison<a class="headerlink" href="#done-final-photon-deviation-comparison" title="Permalink to this headline">¶</a></h2>
<p>Alignment of final photon post/rpol needed too, these values
are not domain compressed so liable to see some float precision differences.</p>
<div class="highlight-python"><pre>In [20]: ab.a.ox.shape
Out[20]: (2751, 4, 4)

In [21]: ab.b.ox.shape
Out[21]: (2751, 4, 4)

In [22]: np.allclose( ab.a.ox, ab.b.ox )   # wow : well box is pretty easy
Out[22]: True

In [23]: ab.aselhis
Out[23]: 'TO BR SA'</pre>
</div>
<p>With float values, no point is comparing to zero : as all are discrepant. So add dveps.</p>
<div class="highlight-python"><pre>In [6]: ab.ox_dv.dvs
Out[6]:
[ 0000            :                          TO SA :   55321    55312  :     55258/  55258: 1.000  mx/mn/av 0.0000/0.0000/3.052e-05    ,
  0001            :                    TO BT BT SA :   41828    41816  :     41776/  83552: 2.000  mx/mn/av 0.0000/0.0000/5.96e-08    ,  ## huh how 2.0 ?
  0002            :                       TO BR SA :    2754     2754  :      2751/   2751: 1.000  mx/mn/av 0.0000/0.0000/1.401e-45    ,
 None,
 None,</pre>
</div>
<div class="highlight-python"><pre>[2017-11-30 19:11:41,578] p39106 {/Users/blyth/opticks/ana/ab.py:155} INFO - AB.init_point DONE
AB(1,torch,tboolean-box)  None 0
A tboolean-box/torch/  1 :  20171130-1806 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/1/fdom.npy ()
B tboolean-box/torch/ -1 :  20171130-1806 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/-1/fdom.npy (recstp)
Rock//perfectAbsorbSurface/Vacuum,Vacuum///GlassSchottF2
/tmp/blyth/opticks/tboolean-box--
.                seqhis_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             100000    100000         1.02/3 =  0.34  (pval:0.797 prob:0.203)
0000               8d     55321     55312             0.00        1.000 +- 0.004        1.000 +- 0.004  [2 ] TO SA
0001             8ccd     41828     41816             0.00        1.000 +- 0.005        1.000 +- 0.005  [4 ] TO BT BT SA
0002              8bd      2754      2754             0.00        1.000 +- 0.019        1.000 +- 0.019  [3 ] TO BR SA
0003              86d        54        65             1.02        0.831 +- 0.113        1.204 +- 0.149  [3 ] TO SC SA
0004            86ccd        12        11             0.00        1.091 +- 0.315        0.917 +- 0.276  [5 ] TO BT BT SC SA
0005              4cd         6         8             0.00        0.750 +- 0.306        1.333 +- 0.471  [3 ] TO BT AB
0006               4d         6         6             0.00        1.000 +- 0.408        1.000 +- 0.408  [2 ] TO AB
0007           8cbc6d         5         5             0.00        1.000 +- 0.447        1.000 +- 0.447  [6 ] TO SC BT BR BT SA
0008            8c6cd         4         5             0.00        0.800 +- 0.400        1.250 +- 0.559  [5 ] TO BT SC BT SA
0009             86bd         2         2             0.00        1.000 +- 0.707        1.000 +- 0.707  [4 ] TO BR SC SA
0010          8cbbc6d         2         0             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] TO SC BT BR BR BT SA
0011       bbbbbbb6cd         2         5             0.00        0.400 +- 0.283        2.500 +- 1.118  [10] TO BT SC BR BR BR BR BR BR BR
0012           8cb6cd         1         2             0.00        0.500 +- 0.500        2.000 +- 1.414  [6 ] TO BT SC BR BT SA
0013             8b6d         1         0             0.00        0.000 +- 0.000        0.000 +- 0.000  [4 ] TO SC BR SA
0014            8cc6d         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [5 ] TO SC BT BT SA
0015             4ccd         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [4 ] TO BT BT AB
0016          8cc6ccd         0         2             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] TO BT BT SC BT BT SA
0017         8cbc6ccd         0         1             0.00        0.000 +- 0.000        0.000 +- 0.000  [8 ] TO BT BT SC BT BR BT SA
.                             100000    100000         1.02/3 =  0.34  (pval:0.797 prob:0.203)
.                pflags_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             100000    100000         1.44/4 =  0.36  (pval:0.837 prob:0.163)
0000             1080     55321     55312             0.00        1.000 +- 0.004        1.000 +- 0.004  [2 ] TO|SA
0001             1880     41828     41816             0.00        1.000 +- 0.005        1.000 +- 0.005  [3 ] TO|BT|SA
0002             1480      2754      2754             0.00        1.000 +- 0.019        1.000 +- 0.019  [3 ] TO|BR|SA
0003             10a0        54        65             1.02        0.831 +- 0.113        1.204 +- 0.149  [3 ] TO|SA|SC
0004             18a0        17        21             0.42        0.810 +- 0.196        1.235 +- 0.270  [4 ] TO|BT|SA|SC
0005             1ca0         8         8             0.00        1.000 +- 0.354        1.000 +- 0.354  [5 ] TO|BT|BR|SA|SC
0006             1808         7        11             0.00        0.636 +- 0.241        1.571 +- 0.474  [3 ] TO|BT|AB
0007             1008         6         6             0.00        1.000 +- 0.408        1.000 +- 0.408  [2 ] TO|AB
0008             14a0         3         2             0.00        1.500 +- 0.866        0.667 +- 0.471  [4 ] TO|BR|SA|SC
0009             1c20         2         5             0.00        0.400 +- 0.283        2.500 +- 1.118  [4 ] TO|BT|BR|SC
.                             100000    100000         1.44/4 =  0.36  (pval:0.837 prob:0.163)
.                seqmat_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             100000    100000         0.02/2 =  0.01  (pval:0.988 prob:0.012)
0000               12     55321     55312             0.00        1.000 +- 0.004        1.000 +- 0.004  [2 ] Vm Rk
0001             1232     41828     41816             0.00        1.000 +- 0.005        1.000 +- 0.005  [4 ] Vm G2 Vm Rk
0002              122      2808      2819             0.02        0.996 +- 0.019        1.004 +- 0.019  [3 ] Vm Vm Rk
0003            12232        12        11             0.00        1.091 +- 0.315        0.917 +- 0.276  [5 ] Vm G2 Vm Vm Rk
0004              332         6         8             0.00        0.750 +- 0.306        1.333 +- 0.471  [3 ] Vm G2 G2
0005               22         6         6             0.00        1.000 +- 0.408        1.000 +- 0.408  [2 ] Vm Vm
0006           123322         5         5             0.00        1.000 +- 0.447        1.000 +- 0.447  [6 ] Vm Vm G2 G2 Vm Rk
0007            12332         4         5             0.00        0.800 +- 0.400        1.250 +- 0.559  [5 ] Vm G2 G2 Vm Rk
0008             1222         3         2             0.00        1.500 +- 0.866        0.667 +- 0.471  [4 ] Vm Vm Vm Rk
0009          1233322         2         0             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] Vm Vm G2 G2 G2 Vm Rk
0010       3333333332         2         5             0.00        0.400 +- 0.283        2.500 +- 1.118  [10] Vm G2 G2 G2 G2 G2 G2 G2 G2 G2
0011             2232         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [4 ] Vm G2 Vm Vm
0012            12322         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [5 ] Vm Vm G2 Vm Rk
0013           123332         1         2             0.00        0.500 +- 0.500        2.000 +- 1.414  [6 ] Vm G2 G2 G2 Vm Rk
0014          1232232         0         2             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] Vm G2 Vm Vm G2 Vm Rk
0015         12332232         0         1             0.00        0.000 +- 0.000        0.000 +- 0.000  [8 ] Vm G2 Vm Vm G2 G2 Vm Rk
.                             100000    100000         0.02/2 =  0.01  (pval:0.988 prob:0.012)
ab.a.metadata                  /tmp/blyth/opticks/evt/tboolean-box/torch/1 7c3396a4bcfc21cba051ba98f6f0b667 781d1ab8f0adbf585c197cf43a538446  100000    -1.0000 INTEROP_MODE
ab.a.metadata.csgmeta0 {u'containerscale': u'3', u'container': u'1', u'ctrl': u'0', u'verbosity': u'0', u'poly': u'IM', u'emitconfig': u'photons:100000,wavelength:380,time:0.2,posdelta:0.1,sheetmask:0x1,umin:0.25,umax:0.75,vmin:0.25,vmax:0.75', u'resolution': u'20', u'emit': -1}
rpost_dv
 0000            :                          TO SA :   55321    55312  :     55258/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
 0001            :                    TO BT BT SA :   41828    41816  :     41776/      8: 0.000  mx/mn/av 0.01376/     0/2.636e-06  eps:0.0002
 0002            :                       TO BR SA :    2754     2754  :      2751/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
rpol_dv
 0000            :                          TO SA :   55321    55312  :     55258/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
 0001            :                    TO BT BT SA :   41828    41816  :     41776/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
 0002            :                       TO BR SA :    2754     2754  :      2751/      0: 0.000  mx/mn/av      0/     0/     0  eps:0.0002
ox_dv
 0000            :                          TO SA :   55321    55312  :     55258/      0: 0.000  mx/mn/av 3.052e-05/     0/3.052e-05  eps:0.0002
 0001            :                    TO BT BT SA :   41828    41816  :     41776/      0: 0.000  mx/mn/av 5.96e-08/     0/5.96e-08  eps:0.0002
 0002            :                       TO BR SA :    2754     2754  :      2751/      0: 0.000  mx/mn/av 1.401e-45/     0/1.401e-45  eps:0.0002
c2p : {'seqmat_ana': 0.011978598910194116, 'pflags_ana': 0.36007827166347472, 'seqhis_ana': 0.33975348502498387} c2pmax: 0.360078271663  CUT ok.c2max 2.0  RC:0

In [1]:</pre>
</div>
<div class="section" id="develop-ox-dv">
<h3>develop ox_dv<a class="headerlink" href="#develop-ox-dv" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>In [11]: ab.ox_dv.dvs[0].dv.max()
Out[11]:
A()sliced
A(3.0517578125e-05, dtype=float32)

In [12]: ab.ox_dv.dvs[0].dv.min()
Out[12]:
A()sliced
A(0.0, dtype=float32)

In [13]: dv = ab.ox_dv.dvs[0].dv

In [14]: dv[dv &gt; 0]
Out[14]:
A()sliced
A([ 0.,  0.,  0., ...,  0.,  0.,  0.], dtype=float32)

In [15]: len(dv[dv &gt; 0])
Out[15]: 55258

In [19]: len(dv[dv &gt; 0.0001])
Out[19]: 0

In [20]: len(dv[dv &gt; 0.00001])
Out[20]: 55258


In [32]: np.set_printoptions(suppress=False)    ## makes sense for z to be the one

In [33]: dv
Out[33]:
A()sliced
A([[[  0.0000e+00,   0.0000e+00,   3.0518e-05,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00]],

       [[  0.0000e+00,   0.0000e+00,   3.0518e-05,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00]],

       [[  0.0000e+00,   0.0000e+00,   3.0518e-05,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00]],

       ...,
       [[  0.0000e+00,   0.0000e+00,   3.0518e-05,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00]],

       [[  0.0000e+00,   0.0000e+00,   3.0518e-05,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00]],

       [[  0.0000e+00,   0.0000e+00,   3.0518e-05,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00],
        [  0.0000e+00,   0.0000e+00,   0.0000e+00,   0.0000e+00]]], dtype=float32)

In [37]: np.set_printoptions(precision=12)

In [38]: bv
Out[38]:
A()sliced
A([[[  5.645697021484e+01,  -1.732254638672e+02,   4.500000000000e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989614440e-36,   5.919084713308e-42]],

       [[ -2.028214569092e+02,   4.907992553711e+01,   4.500000000000e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989793806e-36,   5.919084713308e-42]],

       [[  1.424543457031e+02,  -1.786883544922e+02,   4.500000000000e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989614440e-36,   5.919084713308e-42]],

       ...,
       [[ -1.586696777344e+02,  -1.387337951660e+02,   4.500000000000e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989435073e-36,   5.919084713308e-42]],

       [[ -1.627680358887e+02,   4.040850830078e+01,   4.500000000000e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989793806e-36,   5.919084713308e-42]],

       [[ -1.686271972656e+02,  -4.127987670898e+01,   4.500000000000e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989435073e-36,   5.919084713308e-42]]], dtype=float32)

In [39]: av
Out[39]:
A()sliced
A([[[  5.645697021484e+01,  -1.732254638672e+02,   4.500000305176e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989614440e-36,   5.919084713308e-42]],

       [[ -2.028214569092e+02,   4.907992553711e+01,   4.500000305176e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989793806e-36,   5.919084713308e-42]],

       [[  1.424543457031e+02,  -1.786883544922e+02,   4.500000305176e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989614440e-36,   5.919084713308e-42]],

       ...,
       [[ -1.586696777344e+02,  -1.387337951660e+02,   4.500000305176e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989435073e-36,   5.919084713308e-42]],

       [[ -1.627680358887e+02,   4.040850830078e+01,   4.500000305176e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989793806e-36,   5.919084713308e-42]],

       [[ -1.686271972656e+02,  -4.127987670898e+01,   4.500000305176e+02,   3.201743364334e+00],
        [ -0.000000000000e+00,  -0.000000000000e+00,   1.000000000000e+00,   1.000000000000e+00],
        [  0.000000000000e+00,  -1.000000000000e+00,   0.000000000000e+00,   3.800000000000e+02],
        [  1.401298464325e-45,   0.000000000000e+00,   1.539989435073e-36,   5.919084713308e-42]]], dtype=float32)

In [40]: dv.shape
Out[40]: (55258, 4, 4)</pre>
</div>
</div>
</div>
<div class="section" id="br-alignment-with-reflectcheat">
<h2>BR alignment with &#8211;reflectcheat<a class="headerlink" href="#br-alignment-with-reflectcheat" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>succeeds to point-by-point align &#8220;TO BR SA&#8221;</li>
</ul>
<div class="highlight-python"><pre>tboolean-;tboolean-box --okg4 --reflectcheat

tboolean-;tboolean-box-ip</pre>
</div>
<div class="highlight-python"><pre>In [1]: ab.aselhis = "TO BR SA"

In [2]: ab.a.rpost()
Out[2]:
A()sliced
A([[[  10.3091,   23.4398, -449.8989,    0.2002],
        [  10.3091,   23.4398,  -99.9944,    1.3672],
        [  10.3091,   23.4398, -449.9952,    2.5349]],

       [[  54.4635,  -65.0479, -449.8989,    0.2002],
        [  54.4635,  -65.0479,  -99.9944,    1.3672],
        [  54.4635,  -65.0479, -449.9952,    2.5349]],

       [[  57.7944,  -69.4248, -449.8989,    0.2002],
        [  57.7944,  -69.4248,  -99.9944,    1.3672],
        [  57.7944,  -69.4248, -449.9952,    2.5349]],

       ...,
       [[ -20.6182,   16.8469, -449.8989,    0.2002],
        [ -20.6182,   16.8469,  -99.9944,    1.3672],
        [ -20.6182,   16.8469, -449.9952,    2.5349]],

       [[-112.0515,   -6.8682, -449.8989,    0.2002],
        [-112.0515,   -6.8682,  -99.9944,    1.3672],
        [-112.0515,   -6.8682, -449.9952,    2.5349]],

       [[  -9.4558,   -7.2673, -449.8989,    0.2002],
        [  -9.4558,   -7.2673,  -99.9944,    1.3672],
        [  -9.4558,   -7.2673, -449.9952,    2.5349]]])

In [3]: ab.b.rpost()
Out[3]:
A()sliced
A([[[  10.3091,   23.4398, -449.8989,    0.2002],
        [  10.3091,   23.4398,  -99.9944,    1.3672],
        [  10.3091,   23.4398, -449.9952,    2.5349]],

       [[  54.4635,  -65.0479, -449.8989,    0.2002],
        [  54.4635,  -65.0479,  -99.9944,    1.3672],
        [  54.4635,  -65.0479, -449.9952,    2.5349]],

       [[  57.7944,  -69.4248, -449.8989,    0.2002],
        [  57.7944,  -69.4248,  -99.9944,    1.3672],
        [  57.7944,  -69.4248, -449.9952,    2.5349]],

       ...,
       [[ -20.6182,   16.8469, -449.8989,    0.2002],
        [ -20.6182,   16.8469,  -99.9944,    1.3672],
        [ -20.6182,   16.8469, -449.9952,    2.5349]],

       [[-112.0515,   -6.8682, -449.8989,    0.2002],
        [-112.0515,   -6.8682,  -99.9944,    1.3672],
        [-112.0515,   -6.8682, -449.9952,    2.5349]],

       [[  -9.4558,   -7.2673, -449.8989,    0.2002],
        [  -9.4558,   -7.2673,  -99.9944,    1.3672],
        [  -9.4558,   -7.2673, -449.9952,    2.5349]]])

In [4]: np.allclose( ab.a.rpost(), ab.b.rpost() )
Out[4]: True</pre>
</div>
<div class="highlight-python"><pre>[2017-11-30 18:06:48,337] p36797 {/Users/blyth/opticks/ana/ab.py:154} INFO - AB.init_point DONE
AB(1,torch,tboolean-box)  None 0
A tboolean-box/torch/  1 :  20171130-1806 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/1/fdom.npy ()
B tboolean-box/torch/ -1 :  20171130-1806 maxbounce:9 maxrec:10 maxrng:3000000 /tmp/blyth/opticks/evt/tboolean-box/torch/-1/fdom.npy (recstp)
Rock//perfectAbsorbSurface/Vacuum,Vacuum///GlassSchottF2
/tmp/blyth/opticks/tboolean-box--
.                seqhis_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             100000    100000         1.02/3 =  0.34  (pval:0.797 prob:0.203)
0000               8d     55321     55312             0.00        1.000 +- 0.004        1.000 +- 0.004  [2 ] TO SA
0001             8ccd     41828     41816             0.00        1.000 +- 0.005        1.000 +- 0.005  [4 ] TO BT BT SA
0002              8bd      2754      2754             0.00        1.000 +- 0.019        1.000 +- 0.019  [3 ] TO BR SA
0003              86d        54        65             1.02        0.831 +- 0.113        1.204 +- 0.149  [3 ] TO SC SA
0004            86ccd        12        11             0.00        1.091 +- 0.315        0.917 +- 0.276  [5 ] TO BT BT SC SA
0005              4cd         6         8             0.00        0.750 +- 0.306        1.333 +- 0.471  [3 ] TO BT AB
0006               4d         6         6             0.00        1.000 +- 0.408        1.000 +- 0.408  [2 ] TO AB
0007           8cbc6d         5         5             0.00        1.000 +- 0.447        1.000 +- 0.447  [6 ] TO SC BT BR BT SA
0008            8c6cd         4         5             0.00        0.800 +- 0.400        1.250 +- 0.559  [5 ] TO BT SC BT SA
0009             86bd         2         2             0.00        1.000 +- 0.707        1.000 +- 0.707  [4 ] TO BR SC SA
0010          8cbbc6d         2         0             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] TO SC BT BR BR BT SA
0011       bbbbbbb6cd         2         5             0.00        0.400 +- 0.283        2.500 +- 1.118  [10] TO BT SC BR BR BR BR BR BR BR
0012           8cb6cd         1         2             0.00        0.500 +- 0.500        2.000 +- 1.414  [6 ] TO BT SC BR BT SA
0013             8b6d         1         0             0.00        0.000 +- 0.000        0.000 +- 0.000  [4 ] TO SC BR SA
0014            8cc6d         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [5 ] TO SC BT BT SA
0015             4ccd         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [4 ] TO BT BT AB
0016          8cc6ccd         0         2             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] TO BT BT SC BT BT SA
0017         8cbc6ccd         0         1             0.00        0.000 +- 0.000        0.000 +- 0.000  [8 ] TO BT BT SC BT BR BT SA
.                             100000    100000         1.02/3 =  0.34  (pval:0.797 prob:0.203)
.                pflags_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             100000    100000         1.44/4 =  0.36  (pval:0.837 prob:0.163)
0000             1080     55321     55312             0.00        1.000 +- 0.004        1.000 +- 0.004  [2 ] TO|SA
0001             1880     41828     41816             0.00        1.000 +- 0.005        1.000 +- 0.005  [3 ] TO|BT|SA
0002             1480      2754      2754             0.00        1.000 +- 0.019        1.000 +- 0.019  [3 ] TO|BR|SA
0003             10a0        54        65             1.02        0.831 +- 0.113        1.204 +- 0.149  [3 ] TO|SA|SC
0004             18a0        17        21             0.42        0.810 +- 0.196        1.235 +- 0.270  [4 ] TO|BT|SA|SC
0005             1ca0         8         8             0.00        1.000 +- 0.354        1.000 +- 0.354  [5 ] TO|BT|BR|SA|SC
0006             1808         7        11             0.00        0.636 +- 0.241        1.571 +- 0.474  [3 ] TO|BT|AB
0007             1008         6         6             0.00        1.000 +- 0.408        1.000 +- 0.408  [2 ] TO|AB
0008             14a0         3         2             0.00        1.500 +- 0.866        0.667 +- 0.471  [4 ] TO|BR|SA|SC
0009             1c20         2         5             0.00        0.400 +- 0.283        2.500 +- 1.118  [4 ] TO|BT|BR|SC
.                             100000    100000         1.44/4 =  0.36  (pval:0.837 prob:0.163)
.                seqmat_ana  1:tboolean-box   -1:tboolean-box        c2        ab        ba
.                             100000    100000         0.02/2 =  0.01  (pval:0.988 prob:0.012)
0000               12     55321     55312             0.00        1.000 +- 0.004        1.000 +- 0.004  [2 ] Vm Rk
0001             1232     41828     41816             0.00        1.000 +- 0.005        1.000 +- 0.005  [4 ] Vm F2 Vm Rk
0002              122      2808      2819             0.02        0.996 +- 0.019        1.004 +- 0.019  [3 ] Vm Vm Rk
0003            12232        12        11             0.00        1.091 +- 0.315        0.917 +- 0.276  [5 ] Vm F2 Vm Vm Rk
0004               22         6         6             0.00        1.000 +- 0.408        1.000 +- 0.408  [2 ] Vm Vm
0005              332         6         8             0.00        0.750 +- 0.306        1.333 +- 0.471  [3 ] Vm F2 F2
0006           123322         5         5             0.00        1.000 +- 0.447        1.000 +- 0.447  [6 ] Vm Vm F2 F2 Vm Rk
0007            12332         4         5             0.00        0.800 +- 0.400        1.250 +- 0.559  [5 ] Vm F2 F2 Vm Rk
0008             1222         3         2             0.00        1.500 +- 0.866        0.667 +- 0.471  [4 ] Vm Vm Vm Rk
0009          1233322         2         0             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] Vm Vm F2 F2 F2 Vm Rk
0010       3333333332         2         5             0.00        0.400 +- 0.283        2.500 +- 1.118  [10] Vm F2 F2 F2 F2 F2 F2 F2 F2 F2
0011             2232         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [4 ] Vm F2 Vm Vm
0012           123332         1         2             0.00        0.500 +- 0.500        2.000 +- 1.414  [6 ] Vm F2 F2 F2 Vm Rk
0013            12322         1         3             0.00        0.333 +- 0.333        3.000 +- 1.732  [5 ] Vm Vm F2 Vm Rk
0014         12332232         0         1             0.00        0.000 +- 0.000        0.000 +- 0.000  [8 ] Vm F2 Vm Vm F2 F2 Vm Rk
0015          1232232         0         2             0.00        0.000 +- 0.000        0.000 +- 0.000  [7 ] Vm F2 Vm Vm F2 Vm Rk
.                             100000    100000         0.02/2 =  0.01  (pval:0.988 prob:0.012)
ab.a.metadata                  /tmp/blyth/opticks/evt/tboolean-box/torch/1 7c3396a4bcfc21cba051ba98f6f0b667 781d1ab8f0adbf585c197cf43a538446  100000    -1.0000 INTEROP_MODE
ab.a.metadata.csgmeta0 {u'containerscale': u'3', u'container': u'1', u'ctrl': u'0', u'verbosity': u'0', u'poly': u'IM', u'emitconfig': u'photons:100000,wavelength:380,time:0.2,posdelta:0.1,sheetmask:0x1,umin:0.25,umax:0.75,vmin:0.25,vmax:0.75', u'resolution': u'20', u'emit': -1}
c2p : {'seqmat_ana': 0.011978598910194116, 'pflags_ana': 0.36007827166347472, 'seqhis_ana': 0.33975348502498387} c2pmax: 0.360078271663  CUT ok.c2max 2.0  RC:0
[2017-11-30 18:06:48,345] p36797 {/Users/blyth/opticks/ana/tboolean.py:38} INFO - early exit as non-interactive
2017-11-30 18:06:48.381 INFO  [707800] [SSys::run@46] tboolean.py --tag 1 --tagoffset 0 --det tboolean-box --src torch --nosmry   rc_raw : 0 rc : 0


rpost_dv
 0000            :                          TO SA :   55321    55312  :     55258/      0: 0.000  mx/mn/av 0.0000/0.0000/     0
 0001            :                    TO BT BT SA :   41828    41816  :     41776/      8: 0.000  mx/mn/av 0.0138/0.0000/2.636e-06
 0002            :                       TO BR SA :    2754     2754  :      2751/      0: 0.000  mx/mn/av 0.0000/0.0000/     0
rpol_dv
 0000            :                          TO SA :   55321    55312  :     55258/      0: 0.000  mx/mn/av 0.0000/0.0000/     0
 0001            :                    TO BT BT SA :   41828    41816  :     41776/      0: 0.000  mx/mn/av 0.0000/0.0000/     0
 0002            :                       TO BR SA :    2754     2754  :      2751/      0: 0.000  mx/mn/av 0.0000/0.0000/     0
c2p : {'seqmat_ana': 0.011978598910194116, 'pflags_ana': 0.36007827166347472, 'seqhis_ana': 0.33975348502498387} c2pmax: 0.360078271663  CUT ok.c2max 2.0  RC:0
[2017-11-30 18:10:53,190] p37096 {/Users/blyth/opticks/ana/tboolean.py:42} INFO - early exit as non-interactive</pre>
</div>
</div>
<div class="section" id="approaches">
<h2>APPROACHES<a class="headerlink" href="#approaches" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>avoid issue using indep samples (devise some seeding convention)
then the existing chisq comparisons would be valid</li>
<li>direct photons need step-by-step value-to-value comparison,<ul>
<li>check avg deviations, see <strong>ana/dv.py</strong> used by ab.rpost_dv and ab.rpol_dv</li>
<li>investigate outliers, not automated</li>
<li>perhaps expand direct to include SR/BR with u_cheat ?</li>
</ul>
</li>
<li>Q: non-direct photons, is chisq history comparison valid for them, despite identical birth ?<ul>
<li>probably not, anyhow once BR/SR can be cheated there are not so many of them,
so any comparisons would need very high stats</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="before-any-cheating-numpy-machinery-for-aligned-comparison">
<h2>BEFORE ANY CHEATING : NUMPY MACHINERY FOR ALIGNED COMPARISON<a class="headerlink" href="#before-any-cheating-numpy-machinery-for-aligned-comparison" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="emitconfig-aligned-comparison.html"><em>Emitconfig aligned comparison</em></a></li>
</ul>
</div>
<div class="section" id="implementing-reflectcheat">
<h2>implementing reflectcheat<a class="headerlink" href="#implementing-reflectcheat" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:opticks blyth$ opticks-find reflectcheat
./optixrap/cu/generate.cu:    s.ureflectcheat = 0.f ;
./optixrap/cu/generate.cu:        s.ureflectcheat = debug_control.w &gt; 0u ? float(photon_id)/float(num_photon) : -1.f ;
./cfg4/DsG4OpBoundaryProcess.cc:             m_reflectcheat(m_ok-&gt;isReflectCheat()),
./cfg4/DsG4OpBoundaryProcess.cc:          // --reflectcheat
./optickscore/Opticks.cc:bool Opticks::isReflectCheat() const  // reflectcheat
./optickscore/Opticks.cc:   return m_cfg-&gt;hasOpt("reflectcheat");
./optickscore/OpticksCfg.cc:       ("reflectcheat",
./optixrap/OPropagator.cc:    unsigned reflectcheat = m_ok-&gt;isReflectCheat() ? 1 : 0 ;
./optixrap/OPropagator.cc:    if(reflectcheat &gt; 0 )
./optixrap/OPropagator.cc:        LOG(error) &lt;&lt;  "OPropagator::initParameters --reflectcheat ENABLED "  ;
./optixrap/OPropagator.cc:    optix::uint4 debugControl = optix::make_uint4(m_ocontext-&gt;getDebugPhoton(),0,0, reflectcheat);
./cfg4/CG4Ctx.hh:    float _record_fraction ; // used with --reflectcheat
./cfg4/DsG4OpBoundaryProcess.h:    bool          m_reflectcheat ;
./optixrap/cu/propagate.h:    const float u = s.ureflectcheat &gt;= 0.f ? s.ureflectcheat : curand_uniform(&amp;rng) ;
./optixrap/cu/state.h:   float ureflectcheat ;
simon:opticks blyth$</pre>
</div>
</div>
<div class="section" id="thoughts-on-cheating-reflection-randomness-br-sr-u-cheat-photon-index-num-photons">
<h2>THOUGHTS ON CHEATING REFLECTION RANDOMNESS BR/SR : u_cheat=photon_index/num_photons<a class="headerlink" href="#thoughts-on-cheating-reflection-randomness-br-sr-u-cheat-photon-index-num-photons" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>very tempting to cheat the single random throw deciding to reflect or not (BR or SR)
using <em>u_cheat=photon_index/num_photons</em> instead of <em>curand_uniform(&amp;rng)</em>
easy enough for Opticks, but what about G4 ?</li>
<li>needs to be done in a manner indep of order (so parallel Opticks and G4 do same),
ie absolute external photon_index and num_photons</li>
<li>would greatly enlarge the &#8220;direct non-random photons&#8221; category</li>
<li>would keep both simulations doing exactly the same thing for all non AB/RE/SC categories,
and those can all be switched off (&#8211;noab/&#8211;nore/&#8211;nosc) to make purely non-random samples</li>
<li>what about photons, with more that one BR/SR ? What to use to keep the same seqhis fractions ?</li>
</ul>
<div class="section" id="g4">
<h3>G4<a class="headerlink" href="#g4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>custom DsG4OpBoundaryProcess already in use, just need to add a cheat flag and arrange that
<em>u_cheat</em> is set for each photon</li>
</ul>
<p>cfg4/OpNovicePhysicsList.cc:</p>
<div class="highlight-python"><pre>171 void OpNovicePhysicsList::ConstructProcess()
172 {
173   setupEmVerbosity(0);
174
175   //AddTransportation();
176   addTransportation();
177
178
179   ConstructDecay();
180   ConstructEM();
181
182   ConstructOpDYB();
183
184   dump("OpNovicePhysicsList::ConstructProcess");
185 }


221 void OpNovicePhysicsList::ConstructOpDYB()
222 {</pre>
</div>
<div class="highlight-python"><pre>(lldb) b OpNovicePhysicsList::ConstructOpDYB


(lldb) c
Process 41096 resuming
2017-11-24 20:47:04.444 INFO  [7043277] [OpNovicePhysicsList::ConstructOpDYB@225] Using customized DsG4Cerenkov.
2017-11-24 20:47:04.444 INFO  [7043277] [OpNovicePhysicsList::ConstructOpDYB@265] Using customized DsG4Scintillation.
2017-11-24 20:47:04.444 INFO  [7043277] [DsG4OpBoundaryProcess::DsG4OpBoundaryProcess@124] DsG4OpBoundaryProcess::DsG4OpBoundaryProcess processName OpBoundary
Process 41096 stopped
* thread #1: tid = 0x6b78cd, 0x00000001043582fb libcfg4.dylib`OpNovicePhysicsList::ConstructOpDYB(this=0x000000011283ce40) + 2235 at OpNovicePhysicsList.cc:329, queue = 'com.apple.main-thread', stop reason = breakpoint 2.1
    frame #0: 0x00000001043582fb libcfg4.dylib`OpNovicePhysicsList::ConstructOpDYB(this=0x000000011283ce40) + 2235 at OpNovicePhysicsList.cc:329
   326
   327      //G4OpBoundaryProcess* boundproc = new G4OpBoundaryProcess();
   328      DsG4OpBoundaryProcess* boundproc = new DsG4OpBoundaryProcess(m_g4);
-&gt; 329      boundproc-&gt;SetModel(unified);
   330
   331      //G4FastSimulationManagerProcess* fast_sim_man = new G4FastSimulationManagerProcess("fast_sim_man");
   332
(lldb) p boundproc
(DsG4OpBoundaryProcess *) $0 = 0x0000000112902390
(lldb)</pre>
</div>
<p>g4op-;g4op-vi:</p>
<div class="highlight-python"><pre> 393      983               G4double E2_total = E2_perp*E2_perp + E2_parl*E2_parl;         // square up s and p amplitudes to get overall intensity
 394      984               G4double s2 = Rindex2*cost2*E2_total;   //  is this the planar angle term    (24)
 395      985
 396      986               G4double TransCoeff;
 397      987
 398      988               if (theTransmittance &gt; 0) TransCoeff = theTransmittance;
 399      989               else if (cost1 != 0.0) TransCoeff = s2/s1;     //  transmission probability  "Transmittance = 1 - Reflectance"
 400      990               else TransCoeff = 0.0;
 401
 402      ///   fresnel-eoe.pdf
 403      ///       ...the intensity is calculated per unit of the wavefront area, and the wavefronts of the incident
 404      ///       and transmitted wave are tilted with respect to the interface at different angles theta_i and theta_t, respectively.
 405      ///       Therefore, the intensity transmissivity is given by (24)
 406      ///
 407      ///
 408      ///                         n2 cost2 |Et|^2        n2 cost2
 409      ///                   T = ------------------- =   ---------- |t|^2
 410      ///                         n1 cost1 |Ei|^2        n1 cost1
 411      ///
 412      ...
 413      992           G4double E2_abs, C_parl, C_perp;
 414      993
 415      994           if ( !G4BooleanRand(TransCoeff) ) {   // not transmission, so reflection
 416      998                  if (Swap) Swap = !Swap;
 417     1000                  theStatus = FresnelReflection;
 418     1002                  if ( theModel == unified &amp;&amp; theFinish != polished )
 419     1003                                 ChooseReflection();
 420     1004
 421     1005                  if ( theStatus == LambertianReflection ) {
 422     1006                      DoReflection();
 423     1007                  }




simon:optixrap blyth$ g4-cc G4BooleanRand
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/src/G4OpBoundaryProcess.cc:                   if ( !G4BooleanRand(theReflectivity) ) {
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/src/G4OpBoundaryProcess.cc:              } while ( !G4BooleanRand(AngularDistributionValue) );
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/src/G4OpBoundaryProcess.cc:        if ( !G4BooleanRand(theTransmittance) ) { // Not transmitted, so reflect
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/src/G4OpBoundaryProcess.cc:                                     G4BooleanRand(SurfaceRoughnessCriterion);
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/src/G4OpBoundaryProcess.cc:         if ( !G4BooleanRand(TransCoeff) ) {
simon:optixrap blyth$
simon:optixrap blyth$
simon:optixrap blyth$ g4-hh G4BooleanRand
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/include/G4OpBoundaryProcess.hh:   G4bool G4BooleanRand(const G4double prob) const;
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/include/G4OpBoundaryProcess.hh:G4bool G4OpBoundaryProcess::G4BooleanRand(const G4double prob) const
/usr/local/opticks/externals/g4/geant4_10_02_p01/source/processes/optical/include/G4OpBoundaryProcess.hh:              if ( G4BooleanRand(theEfficiency) ) {
simon:optixrap blyth$</pre>
</div>
<p>G4BooleanRand tis private method and used for other things like absorption:</p>
<div class="highlight-python"><pre>178 private:
179
180     G4bool G4BooleanRand(const G4double prob) const;
181
...
260 ////////////////////
261 // Inline methods
262 ////////////////////
263
264 inline
265 G4bool G4OpBoundaryProcess::G4BooleanRand(const G4double prob) const
266 {
267   /* Returns a random boolean variable with the specified probability */
268
269   return (G4UniformRand() &lt; prob);
270 }</pre>
</div>
</div>
<div class="section" id="opticks">
<h3>Opticks<a class="headerlink" href="#opticks" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>243
244 __device__ void propagate_at_boundary_geant4_style( Photon&amp; p, State&amp; s, curandState &amp;rng)
245 {
246     // see g4op-/G4OpBoundaryProcess.cc annotations to follow this
...
283     const float E2_perp_r = E2_perp_t - E1_perp;           // Fresnel S-pol reflectance
284     const float E2_parl_r = (n2*E2_parl_t/n1) - E1_parl ;  // Fresnel P-pol reflectance
285
286     const float2 E2_t = make_float2( E2_perp_t, E2_parl_t ) ;
287     const float2 E2_r = make_float2( E2_perp_r, E2_parl_r ) ;
288
289     const float  E2_total_t = dot(E2_t,E2_t) ;
290
291     const float2 T = normalize(E2_t) ;
292     const float2 R = normalize(E2_r) ;
293
294     const float TransCoeff =  tir ? 0.0f : n2c2*E2_total_t/n1c1 ;
295     //  above 0.0f was until 2016/3/4 incorrectly a 1.0f
296     //  resulting in TIR yielding BT where BR is expected
297
298     bool reflect = curand_uniform(&amp;rng) &gt; TransCoeff  ;
299
300     p.direction = reflect
301                     ?
302                        p.direction + 2.0f*c1*s.surface_normal
303                     :
304                        eta*p.direction + (eta_c1 - c2)*s.surface_normal
305                     ;
306
307     const float3 A_paral = normalize(cross(p.direction, A_trans));
308
309     p.polarization = reflect ?
310                                 ( tir ?
311                                         -p.polarization + 2.f*EdotN*s.surface_normal
312                                       :
313                                         R.x*A_trans + R.y*A_paral
314                                 )
315                              :
316                                 T.x*A_trans + T.y*A_paral
317                              ;</pre>
</div>
<div class="highlight-python"><pre>517 __device__ int
518 propagate_at_surface(Photon &amp;p, State &amp;s, curandState &amp;rng)
519 {
520
521     float u = curand_uniform(&amp;rng);
522
523     if( u &lt; s.surface.y )   // absorb
524     {
525         s.flag = SURFACE_ABSORB ;
526         s.index.x = s.index.y ;   // kludge to get m2 into seqmat for BREAKERs
527         return BREAK ;
528     }
529     else if ( u &lt; s.surface.y + s.surface.x )  // absorb + detect
530     {
531         s.flag = SURFACE_DETECT ;
532         s.index.x = s.index.y ;   // kludge to get m2 into seqmat for BREAKERs
533         return BREAK ;
534     }
535     else if (u  &lt; s.surface.y + s.surface.x + s.surface.w )  // absorb + detect + reflect_diffuse
536     {
537         s.flag = SURFACE_DREFLECT ;
538         propagate_at_diffuse_reflector_geant4_style(p, s, rng);
539         return CONTINUE;
540     }
541     else
542     {
543         s.flag = SURFACE_SREFLECT ;
544         propagate_at_specular_reflector(p, s, rng );
545         return CONTINUE;
546     }
547 }</pre>
</div>
</div>
</div>
<div class="section" id="no-rng-impact-direct-photons">
<h2>No RNG impact &#8220;direct photons&#8221;<a class="headerlink" href="#no-rng-impact-direct-photons" title="Permalink to this headline">¶</a></h2>
<p>Directly absorbed and straight thru photons, are not effected by RNG
so should have identical values at every step.
Domain compression is identical between branches ?</p>
<ul class="simple">
<li>TO SA</li>
<li>TO BT BT SA</li>
</ul>
<p>Same positions, pol, wavelength, times
they can be step-by-step one-to-one compared
and average deviation distances/times formed.</p>
<div class="highlight-python"><pre>In [1]: ab.sel = "TO BT BT SA"   # straight thru, is same in both simulations

In [2]: ab.a.rpost_(slice(0,4))     # but some presence differences
Out[2]:
A()sliced
A([[[-133.4405,   -1.4177, -449.8989,    0.2002],
        [-133.4405,   -1.4177,  -99.9944,    1.3672],
        [-133.4405,   -1.4177,   99.9944,    2.5788],
        [-133.4405,   -1.4177,  449.9952,    3.7465]],

       [[ -44.4022, -116.7312, -449.8989,    0.2002],
        [ -44.4022, -116.7312,  -99.9944,    1.3672],
        [ -44.4022, -116.7312,   99.9944,    2.5788],
        [ -44.4022, -116.7312,  449.9952,    3.7465]],

       [[ -93.6355,  105.1833, -449.8989,    0.2002],
        [ -93.6355,  105.1833,  -99.9944,    1.3672],
        [ -93.6355,  105.1833,   99.9944,    2.5788],
        [ -93.6355,  105.1833,  449.9952,    3.7465]],

       ...,
       [[ -20.6182,   16.8469, -449.8989,    0.2002],
        [ -20.6182,   16.8469,  -99.9944,    1.3672],
        [ -20.6182,   16.8469,   99.9944,    2.5788],
        [ -20.6182,   16.8469,  449.9952,    3.7465]],

       [[-112.0515,   -6.8682, -449.8989,    0.2002],
        [-112.0515,   -6.8682,  -99.9944,    1.3672],
        [-112.0515,   -6.8682,   99.9944,    2.5788],
        [-112.0515,   -6.8682,  449.9952,    3.7465]],

       [[  -9.4558,   -7.2673, -449.8989,    0.2002],
        [  -9.4558,   -7.2673,  -99.9944,    1.3672],
        [  -9.4558,   -7.2673,   99.9944,    2.5788],
        [  -9.4558,   -7.2673,  449.9952,    3.7465]]])

In [3]: ab.b.rpost_(slice(0,4))
Out[3]:
A()sliced
A([[[-133.4405,   -1.4177, -449.8989,    0.2002],
        [-133.4405,   -1.4177,  -99.9944,    1.3672],
        [-133.4405,   -1.4177,   99.9944,    2.5788],
        [-133.4405,   -1.4177,  449.9952,    3.7465]],

       [[ -44.4022, -116.7312, -449.8989,    0.2002],
        [ -44.4022, -116.7312,  -99.9944,    1.3672],
        [ -44.4022, -116.7312,   99.9944,    2.5788],
        [ -44.4022, -116.7312,  449.9952,    3.7465]],

      ## some diffs
       [[  24.3758,  139.9646, -449.8989,    0.2002],
        [  24.3758,  139.9646,  -99.9944,    1.3672],
        [  24.3758,  139.9646,   99.9944,    2.5788],
        [  24.3758,  139.9646,  449.9952,    3.7465]],


       ...,
       [[ -20.6182,   16.8469, -449.8989,    0.2002],
        [ -20.6182,   16.8469,  -99.9944,    1.3672],
        [ -20.6182,   16.8469,   99.9944,    2.5788],
        [ -20.6182,   16.8469,  449.9952,    3.7465]],

       [[-112.0515,   -6.8682, -449.8989,    0.2002],
        [-112.0515,   -6.8682,  -99.9944,    1.3672],
        [-112.0515,   -6.8682,   99.9944,    2.5788],
        [-112.0515,   -6.8682,  449.9952,    3.7465]],

       [[  -9.4558,   -7.2673, -449.8989,    0.2002],
        [  -9.4558,   -7.2673,  -99.9944,    1.3672],
        [  -9.4558,   -7.2673,   99.9944,    2.5788],
        [  -9.4558,   -7.2673,  449.9952,    3.7465]]])

In [4]:</pre>
</div>
</div>
<div class="section" id="rng-impact">
<h2>RNG impact<a class="headerlink" href="#rng-impact" title="Permalink to this headline">¶</a></h2>
<p>With RNG effect:</p>
<ul class="simple">
<li>BR (which photons get reflected depend on RNG throw)</li>
<li>AB (which photons get absorbed and the position depend on RNG)</li>
<li>SC/RE (which photons scatter/reemit, the position and param afterwards depend on RNG)</li>
</ul>
<p>But reflection brings in RNG, its random which photons get reflected:</p>
<div class="highlight-python"><pre>In [28]: ab.sel = "TO BR SA"

In [29]: ab.a.rpost_(slice(0,3))
Out[29]:
A()sliced
A([[[ -43.5763, -147.5347, -449.8989,    0.2002],
        [ -43.5763, -147.5347,  -99.9944,    1.3672],
        [ -43.5763, -147.5347, -449.9952,    2.5349]],

       [[  24.3758,  139.9646, -449.8989,    0.2002],
        [  24.3758,  139.9646,  -99.9944,    1.3672],
        [  24.3758,  139.9646, -449.9952,    2.5349]],

       [[ -11.135 ,  -82.762 , -449.8989,    0.2002],
        [ -11.135 ,  -82.762 ,  -99.9944,    1.3672],
        [ -11.135 ,  -82.762 , -449.9952,    2.5349]],

       ...,
       [[  46.5631,  117.8874, -449.8989,    0.2002],
        [  46.5631,  117.8874,  -99.9944,    1.3672],
        [  46.5631,  117.8874, -449.9952,    2.5349]],

       [[-106.2156,  101.1643, -449.8989,    0.2002],
        [-106.2156,  101.1643,  -99.9944,    1.3672],
        [-106.2156,  101.1643, -449.9952,    2.5349]],

       [[ -70.2094, -142.2218, -449.8989,    0.2002],
        [ -70.2094, -142.2218,  -99.9944,    1.3672],
        [ -70.2094, -142.2218, -449.9952,    2.5349]]])

In [30]: ab.b.rpost_(slice(0,3))
Out[30]:
A()sliced
A([[[-149.5993, -110.5099, -449.8989,    0.2002],
        [-149.5993, -110.5099,  -99.9944,    1.3672],
        [-149.5993, -110.5099, -449.9952,    2.5349]],

       [[ 120.2547,   24.7749, -449.8989,    0.2002],
        [ 120.2547,   24.7749,  -99.9944,    1.3672],
        [ 120.2547,   24.7749, -449.9952,    2.5349]],

       [[-111.2945,  140.2261, -449.8989,    0.2002],
        [-111.2945,  140.2261,  -99.9944,    1.3672],
        [-111.2945,  140.2261, -449.9952,    2.5349]],

       ...,
       [[  88.4602,  102.3755, -449.8989,    0.2002],
        [  88.4602,  102.3755,  -99.9944,    1.3672],
        [  88.4602,  102.3755, -449.9952,    2.5349]],

       [[ 123.2553,  -67.8282, -449.8989,    0.2002],
        [ 123.2553,  -67.8282,  -99.9944,    1.3672],
        [ 123.2553,  -67.8282, -449.9952,    2.5349]],

       [[ -13.9978,  -80.6424, -449.8989,    0.2002],
        [ -13.9978,  -80.6424,  -99.9944,    1.3672],
        [ -13.9978,  -80.6424, -449.9952,    2.5349]]])

In [31]:</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">OpticksDevNotes 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>