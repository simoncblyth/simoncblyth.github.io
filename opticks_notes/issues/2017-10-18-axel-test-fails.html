<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Test Fails &mdash; OpticksDevNotes 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpticksDevNotes 0.0.1 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">OpticksDevNotes 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Test Fails</a><ul>
<li><a class="reference internal" href="#fixed-ointerpolationtest-old-chestnut-python-analysis-level-missing-file-gitemlist-gbndlib-txt">FIXED : OInterpolationTest : old chestnut, python analysis level missing file GItemList/GBndLib.txt</a></li>
<li><a class="reference internal" href="#fixed-opseedertest-viztest-both-assert-opticksevent-setbuffercontrol-fatal-buffer-lacks-spec">FIXED : OpSeederTest VizTest both assert : OpticksEvent::setBufferControl FATAL: BUFFER LACKS SPEC</a></li>
<li><a class="reference internal" href="#fixed-optest-failed-rtcontextcompile-from-missing-genstep-buffer">FIXED OpTest : failed rtContextCompile from missing genstep_buffer</a></li>
<li><a class="reference internal" href="#ctestdetectortest-gsurlib-assert">CTestDetectorTest : GSurLib assert</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/issues/2017-10-18-axel-test-fails.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="test-fails">
<h1>Test Fails<a class="headerlink" href="#test-fails" title="Permalink to this headline">¶</a></h1>
<p>Hi Simon,</p>
<p>the installation worked. My final problem concerned xercesx. It was not
installed via the opticks&#8211; . Via xercesx- and and xercesc-make I could install
it but still got the error massage, that
/usr/local/opticks/externals/lib/libxerces-c-3-1.so was not found. The problem
was, that it was not named correctly(libxerces-c-3.1.so). Renaming it solved it
and the installation could be completed.</p>
<div class="highlight-python"><pre>94% tests passed, 14 tests failed out of 254

Total Test time (real) = 120.58 sec

The following tests FAILED:
     30 - BoostRapTest.BOpticksResourceTest (OTHER_FAULT)       # FIXED : handle lack of IDPATH envvar
    133 - OpticksCoreTest.OpticksCfgTest (SEGFAULT)             # FIXED : uninitialized m_snap_config
    169 - GGeoTest.GPartsTest (OTHER_FAULT)                     # FIXED : GParts requires associated GBndLib to be able to save
    180 - GGeoTest.GMergedMeshTest (OTHER_FAULT)                # FIXED : add protection for zero face mesh (index 1, a skipped mesh?)
    226 - OptiXRapTest.OInterpolationTest (Failed)              # FIXED : with GBndLib::saveAllOverride to save dynamic GBndLib inside TMP, and analysis script path overhaul
    234 - OKOPTest.OpTest (OTHER_FAULT)                         # FIXED : avoid rtContextCompilation FAIL from lack of genstep buffer via argforced --tracer mode
    231 - OKOPTest.OpSeederTest (OTHER_FAULT)                   # FIXED : missing spec on fabricated gensteps
    239 - OKTest.VizTest (OTHER_FAULT)                          # FIXED : missing spec on fabricated gensteps

    242 - cfg4Test.CTestDetectorTest (OTHER_FAULT)              # STILL FAILING

     85 - NPYTest.NNodeDumpTest (SEGFAULT)
    179 - GGeoTest.GMakerTest (SEGFAULT)
    227 - OptiXRapTest.ORayleighTest (OTHER_FAULT)
    236 - OKTest.OKTest (OTHER_FAULT)
    254 - okg4Test.OKG4Test (OTHER_FAULT)                       # THESE WORK FOR ME

Errors while running CTest</pre>
</div>
<p>Darwin, now:</p>
<div class="highlight-python"><pre>99% tests passed, 1 tests failed out of 254

Total Test time (real) = 127.12 sec

The following tests FAILED:
    242 - cfg4Test.CTestDetectorTest (OTHER_FAULT)
Errors while running CTest
opticks-t- : use -V to show output
simon:opticks blyth$</pre>
</div>
<p>Darwin, this morning:</p>
<div class="highlight-python"><pre>97% tests passed, 7 tests failed out of 254

Total Test time (real) = 130.72 sec

The following tests FAILED:
    169 - GGeoTest.GPartsTest (OTHER_FAULT)
    180 - GGeoTest.GMergedMeshTest (OTHER_FAULT)
    226 - OptiXRapTest.OInterpolationTest (Failed)
    231 - OKOPTest.OpSeederTest (OTHER_FAULT)
    239 - OKTest.VizTest (OTHER_FAULT)
    234 - OKOPTest.OpTest (OTHER_FAULT)
    242 - cfg4Test.CTestDetectorTest (OTHER_FAULT)

Errors while running CTest
opticks-t- : use -V to show output</pre>
</div>
<div class="section" id="fixed-ointerpolationtest-old-chestnut-python-analysis-level-missing-file-gitemlist-gbndlib-txt">
<h2>FIXED : OInterpolationTest : old chestnut, python analysis level missing file GItemList/GBndLib.txt<a class="headerlink" href="#fixed-ointerpolationtest-old-chestnut-python-analysis-level-missing-file-gitemlist-gbndlib-txt" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="OInterpolationTest_Missing_GBndLib_txt.html"><em>oxrap OInterpolationTest asserts at python level for lack of IDPATH GBndLib.txt</em></a></li>
</ul>
</div>
<div class="section" id="fixed-opseedertest-viztest-both-assert-opticksevent-setbuffercontrol-fatal-buffer-lacks-spec">
<h2>FIXED : OpSeederTest VizTest both assert : OpticksEvent::setBufferControl FATAL: BUFFER LACKS SPEC<a class="headerlink" href="#fixed-opseedertest-viztest-both-assert-opticksevent-setbuffercontrol-fatal-buffer-lacks-spec" title="Permalink to this headline">¶</a></h2>
<p>FIXED with:</p>
<div class="highlight-python"><pre>gs-&gt;setBufferSpec(OpticksEvent::GenstepSpec(compute));</pre>
</div>
<div class="highlight-python"><pre>2017-10-18 17:53:32.763 INFO  [179839] [SLog::operator@15] OPropagator::OPropagator DONE
2017-10-18 17:53:32.763 FATAL [179839] [OpticksEvent::setBufferControl@773] OpticksEvent::setBufferControl SKIPPED FOR (null) AS NO spec
OpticksEvent::setBufferControl FATAL: BUFFER LACKS SPEC
Assertion failed: (0), function setBufferControl, file /Users/blyth/opticks/optickscore/OpticksEvent.cc, line 781.
Abort trap: 6
simon:opticks blyth$


  17          __dd__Geometry__RPC__lvRPCGasgap140xbf98ae0         ce-11611.265 -799018.375 707.900 1434.939
  18             __dd__Geometry__RPC__lvRPCStrip0xc2213c0         ce-11124.670 -799787.375 707.900 948.345
  19             __dd__Geometry__RPC__lvRPCStrip0xc2213c0         ce-11263.697 -799567.625 707.900 948.345
2017-10-18 17:57:29.903 INFO  [181287] [Composition::setCenterExtent@1000] Composition::setCenterExtent ce -16520.0000,-802110.0000,-7125.0000,7710.5625
2017-10-18 17:57:29.903 INFO  [181287] [SLog::operator@15] OpticksViz::OpticksViz DONE
2017-10-18 17:57:29.904 INFO  [181287] [OpticksEvent::addBufferControl@756] OpticksEvent::addBufferControl name seed adding VERBOSE_MODE result: : OPTIX_NON_INTEROP OPTIX_INPUT_ONLY INTEROP_MODE VERBOSE_MODE
2017-10-18 17:57:29.904 INFO  [181287] [OpticksEvent::addBufferControl@756] OpticksEvent::addBufferControl name photon adding VERBOSE_MODE result: : OPTIX_OUTPUT_ONLY INTEROP_PTR_FROM_OPENGL INTEROP_MODE VERBOSE_MODE
2017-10-18 17:57:29.904 FATAL [181287] [OpticksEvent::setBufferControl@773] OpticksEvent::setBufferControl SKIPPED FOR (null) AS NO spec
OpticksEvent::setBufferControl FATAL: BUFFER LACKS SPEC
Assertion failed: (0), function setBufferControl, file /Users/blyth/opticks/optickscore/OpticksEvent.cc, line 781.
Abort trap: 6
simon:opticks blyth$</pre>
</div>
<div class="highlight-python"><pre>765 void OpticksEvent::setBufferControl(NPYBase* data)
766 {
767     NPYSpec* spec = data-&gt;getBufferSpec();
768     const char* name = data-&gt;getBufferName();
769
770     if(!spec)
771     {
772
773         LOG(fatal) &lt;&lt; "OpticksEvent::setBufferControl"
774                      &lt;&lt; " SKIPPED FOR " &lt;&lt; name
775                      &lt;&lt; " AS NO spec "
776                      ;
777
778         NParameters* param = data-&gt;getParameters();
779         if(param)
780             param-&gt;dump("OpticksEvent::setBufferControl FATAL: BUFFER LACKS SPEC");
781         assert(0);
782         return ;
783     }
784
785
786     OpticksBufferControl ctrl(data-&gt;getBufferControlPtr());
787     ctrl.add(spec-&gt;getCtrl());
788</pre>
</div>
<div class="highlight-python"><pre>simon:optickscore blyth$ opticks-find setBufferSpec
./okop/OpMgr.cc:            embedded_gensteps-&gt;setBufferSpec(OpticksEvent::GenstepSpec(compute));
./optickscore/OpticksEvent.cc:    npy-&gt;setBufferSpec(spec);
./optickscore/OpticksEvent.cc:    recsel1-&gt;setBufferSpec(m_recsel_spec);
./optickscore/OpticksRun.cc:    gs-&gt;setBufferSpec(OpticksEvent::GenstepSpec(m_ok-&gt;isCompute()));
./opticksgeo/OpticksGen.cc:        gs-&gt;setBufferSpec(OpticksEvent::GenstepSpec(m_ok-&gt;isCompute()));
./opticksnpy/NPY.cpp:    npy-&gt;setBufferSpec(argspec);  // also sets BufferName
./opticksnpy/NPYBase.cpp:    dst-&gt;setBufferSpec(spec ? spec-&gt;clone() : NULL);
./opticksnpy/NPYBase.cpp:void NPYBase::setBufferSpec(NPYSpec* spec)
./opticksnpy/NPYBase.hpp:       void         setBufferSpec(NPYSpec* spec);
simon:opticks blyth$</pre>
</div>
</div>
<div class="section" id="fixed-optest-failed-rtcontextcompile-from-missing-genstep-buffer">
<h2>FIXED OpTest : failed rtContextCompile from missing genstep_buffer<a class="headerlink" href="#fixed-optest-failed-rtcontextcompile-from-missing-genstep-buffer" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>avoid rtContextCompilation FAIL from lack of genstep buffer via argforced &#8211;tracer mode</li>
</ul>
<div class="highlight-python"><pre>18             __dd__Geometry__RPC__lvRPCStrip0xc2213c0         ce-11124.670 -799787.375 707.900 948.345
19             __dd__Geometry__RPC__lvRPCStrip0xc2213c0         ce-11263.697 -799567.625 707.900 948.345
libc++abi.dylib: terminating with uncaught exception of type optix::Exception:
Invalid value (Details: Function "RTresult _rtContextCompile(RTcontext)" caught exception: Initalization of non-primitive type genstep_buffer:  Buffer object, [1769674])
Abort trap: 6
simon:opticks blyth$</pre>
</div>
</div>
<div class="section" id="ctestdetectortest-gsurlib-assert">
<h2>CTestDetectorTest : GSurLib assert<a class="headerlink" href="#ctestdetectortest-gsurlib-assert" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="failing-cfg4-CTestDetectorTest-uses-ancient-PMTInBox-geometry.html"><em>failing-cfg4-CTestDetectorTest-uses-ancient-PMTInBox-geometry</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">OpticksDevNotes 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>