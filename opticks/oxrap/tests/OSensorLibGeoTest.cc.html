
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>OSensorLibGeoTest &#8212; Opticks 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Opticks 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/oxrap/tests/OSensorLibGeoTest.cc.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="osensorlibgeotest">
<h1>OSensorLibGeoTest<a class="headerlink" href="#osensorlibgeotest" title="Permalink to this headline">Â¶</a></h1>
<p>Creates a geometry of many spheres arranged at positions on a large sphere
and oriented to point the local z-directions of the small spheres at the center
of the large one. Renders of the geometry are shaded using the sensor efficiency which
is obtained using OSensorLib_sensor_efficiency using the local theta-phi positions
of intersects and the sensor category.</p>
<a class="reference internal image-reference" href="../../_images/OSensorLibGeoTest_half.png"><img alt="//env/presentation/optixrap/OSensorLibGeoTest_half.png" src="../../_images/OSensorLibGeoTest_half.png" style="width: 1024px;" /></a>
<p>Global frame intersect positions and intersected geometry identities are recorded
into the posi.npy array. The posi.npy array is used by OSensorLibGeoTest.py
together with the inverse of the saved transforms to obtain local frame intersect
positions which are checked to correspond to the known sphere radius.</p>
<p>This test was used to develop OSensorLib, it operates using the SensorLib
persisted to $TMP/opticksgeo/tests/MockSensorLibTest by MockSensorLibTest.</p>
<p>Normal running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MockSensorLibTest</span>     <span class="c1"># creates SensorLib arrays with default number of angular efficiency categories</span>
<span class="n">OSensorLibGeoTest</span>     <span class="c1"># loads, converts to GPU and tests texture access making a snapshot shaded by efficiency</span>
</pre></div>
</div>
<p>Check operation when there is no angular efficiency:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MockSensorLibTest</span> <span class="mi">0</span>   <span class="c1"># argv[1] is the number of angular categories, 0 when no angular efficiency</span>
<span class="n">OSensorLibGeoTest</span>     <span class="c1"># the snapshot should be uniform grey across the spheres</span>
</pre></div>
</div>
<p>To check error handling with no persisted SensorLib:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rm -rf $TMP/opticksgeo/tests/MockSensorLibTest
OSensorLibGeoTest    ## should exit with FATAL message
</pre></div>
</div>
<p>See: <code class="docutils literal notranslate"><span class="pre">optickscore/tests/MockSensorLibTest.cc</span></code></p>
<ul class="simple">
<li><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks/src/master/optickscore/tests/MockSensorLibTest.cc">https://bitbucket.org/simoncblyth/opticks/src/master/optickscore/tests/MockSensorLibTest.cc</a></li>
<li><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks/src/master/optixrap/tests/OSensorLibGeoTest.cc">https://bitbucket.org/simoncblyth/opticks/src/master/optixrap/tests/OSensorLibGeoTest.cc</a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Opticks 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>