<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tools : bash, python, numpy, ipython, matplotlib &mdash; Opticks 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Opticks 0.0.1 documentation" href="../index.html" />
    <link rel="next" title="Opticks Launch Scripts" href="../bin/index.html" />
    <link rel="prev" title="Geometry Cache" href="../docs/geocache.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../bin/index.html" title="Opticks Launch Scripts"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../docs/geocache.html" title="Geometry Cache"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Opticks 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tools : bash, python, numpy, ipython, matplotlib</a><ul>
<li><a class="reference internal" href="#ipython-install-on-a-mac-with-pip">IPython Install on a mac with pip</a></li>
<li><a class="reference internal" href="#working-with-bash-functions">Working with bash functions</a></li>
<li><a class="reference internal" href="#ipython-interactive-python-example">IPython : interactive python example</a><ul>
<li><a class="reference internal" href="#ipython-tab-completion">IPython Tab Completion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy">NumPy</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../docs/geocache.html"
                        title="previous chapter">Geometry Cache</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../bin/index.html"
                        title="next chapter">Opticks Launch Scripts</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/ana/tools.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tools-bash-python-numpy-ipython-matplotlib">
<h1>Tools : bash, python, numpy, ipython, matplotlib<a class="headerlink" href="#tools-bash-python-numpy-ipython-matplotlib" title="Permalink to this headline">¶</a></h1>
<p>Opticks uses bash functions extensively and
analysis and debugging relies on:</p>
<ul class="simple">
<li>Python</li>
<li>IPython</li>
<li>NumPy <a class="reference external" href="http://www.numpy.org">http://www.numpy.org</a></li>
<li>MatPlotLib</li>
</ul>
<p>In general the best way to install common software such as
these tools is with your systems package manager. For example:</p>
<ul class="simple">
<li>Linux: yum, apt-get</li>
<li>macOS: <a class="reference external" href="https://www.macports.org">https://www.macports.org</a> or homebrew</li>
<li>Windows: <a class="reference external" href="https://chocolatey.org">https://chocolatey.org</a></li>
</ul>
<p>However there are other ways to install packages such as
using <strong>pip</strong> for python packages.</p>
<div class="section" id="ipython-install-on-a-mac-with-pip">
<h2>IPython Install on a mac with pip<a class="headerlink" href="#ipython-install-on-a-mac-with-pip" title="Permalink to this headline">¶</a></h2>
<p>Installing ipython on a mac if you do not use macports.</p>
<div class="highlight-python"><pre>delta:tests blyth$ sudo pip install ipython==1.2.1
Password:
Downloading/unpacking ipython==1.2.1
  Downloading ipython-1.2.1.tar.gz (8.7MB): 8.7MB downloaded
  Running setup.py (path:/private/tmp/pip_build_root/ipython/setup.py) egg_info for package ipython
    running egg_info

Installing collected packages: ipython
  Running setup.py install for ipython
    running install

    Installing iplogger script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
    Installing iptest script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
    Installing ipcluster script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
    Installing ipython script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
    Installing pycolor script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
    Installing ipcontroller script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
    Installing irunner script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
    Installing ipengine script to /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin
Successfully installed ipython
Cleaning up...
delta:tests blyth$
delta:tests blyth$ which ipython
/opt/local/bin/ipython
delta:tests blyth$ ipython
Python 2.7.11 (default, Dec  5 2015, 23:51:51)
Type "copyright", "credits" or "license" for more information.

IPython 1.2.1 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython's features.
%quickref -&gt; Quick reference.
help      -&gt; Python's own help system.
object?   -&gt; Details about 'object', use 'object??' for extra details.

In [1]: import numpy as np

In [2]: np.__version__
Out[2]: '1.9.2'

In [3]: import matplotlib

In [4]: import matplotlib.pyplot as plt

In [5]: matplotlib.__version__
Out[5]: '1.3.1'</pre>
</div>
</div>
<div class="section" id="working-with-bash-functions">
<h2>Working with bash functions<a class="headerlink" href="#working-with-bash-functions" title="Permalink to this headline">¶</a></h2>
<p>Bash functions make you into a power user of the shell, by
allowing you to operate at a higher level than individual commands
without having to write separate scripts for everything.</p>
<div class="highlight-sh"><div class="highlight"><pre>delta:tests blyth<span class="nv">$ </span><span class="nb">alias </span><span class="nv">t</span><span class="o">=</span><span class="s2">&quot;typeset -f&quot;</span>    <span class="c"># enables introspection of bash functions</span>
delta:tests blyth<span class="nv">$ </span>t opticks-
opticks- <span class="o">()</span>
<span class="o">{</span>
    <span class="nb">source</span> <span class="k">$(</span>opticks-source<span class="k">)</span> <span class="o">&amp;&amp;</span> opticks-env <span class="nv">$*</span>
<span class="o">}</span>
delta:tests blyth<span class="nv">$ </span>t tprism-
tprism- <span class="o">()</span>
<span class="o">{</span>
    . <span class="k">$(</span>opticks-home<span class="k">)</span>/tests/tprism.bash <span class="o">&amp;&amp;</span> tprism-env <span class="nv">$*</span>
<span class="o">}</span>
delta:tests blyth<span class="nv">$ </span>t tprism--     <span class="c"># not defined yet</span>
delta:tests blyth<span class="nv">$ </span>tprism-        <span class="c"># running precursor defines functions including tprism-- tprism-usage and tprism-vi</span>
delta:tests blyth<span class="nv">$ </span>t tprism--
tprism-- <span class="o">()</span>
<span class="o">{</span>
    <span class="nb">local </span><span class="nv">msg</span><span class="o">=</span><span class="s2">&quot;=== $FUNCNAME :&quot;</span>;
    <span class="nb">local </span><span class="nv">cmdline</span><span class="o">=</span><span class="nv">$*</span>;
    <span class="nb">local </span><span class="nv">pol</span><span class="o">=</span><span class="k">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">s</span><span class="k">}</span>;
    <span class="nb">shift</span>;
    <span class="nb">local </span><span class="nv">tag</span><span class="o">=</span><span class="k">$(</span>tprism-tag <span class="nv">$pol</span><span class="k">)</span>;
    <span class="nb">echo</span> <span class="nv">$msg</span> pol <span class="nv">$pol</span> tag <span class="nv">$tag</span>;
    <span class="nb">local </span><span class="nv">phifrac0</span><span class="o">=</span>0.1667;
    <span class="nb">local </span><span class="nv">phifrac1</span><span class="o">=</span>0.4167;
    <span class="nb">local </span><span class="nv">phifrac2</span><span class="o">=</span>0.6667;
    <span class="nb">local </span><span class="nv">quadrant</span><span class="o">=</span><span class="nv">$phifrac1</span>,<span class="nv">$phifrac2</span>;
    <span class="nb">local </span><span class="nv">critical</span><span class="o">=</span>0.4854,0.4855;
    <span class="nb">local </span><span class="nv">material</span><span class="o">=</span>GlassSchottF2;
    <span class="nb">local </span><span class="nv">azimuth</span><span class="o">=</span><span class="nv">$quadrant</span>;
    <span class="nb">local </span><span class="nv">surfaceNormal</span><span class="o">=</span>0,1,0;
    <span class="nb">local </span><span class="nv">torch_config</span><span class="o">=(</span><span class="nb">type</span><span class="o">=</span>invcylinder <span class="nv">photons</span><span class="o">=</span>500000 <span class="nv">mode</span><span class="o">=</span><span class="k">${</span><span class="nv">pol</span><span class="k">}</span>pol,wavelengthComb <span class="nv">polarization</span><span class="o">=</span><span class="nv">$surfaceNormal</span> <span class="nv">frame</span><span class="o">=</span>-1 <span class="nv">transform</span><span class="o">=</span>0.500,0.866,0.000,0.000,-0.866,0.500,0.000,0.000,0.000,0.000,1.000,0.000,-86.603,0.000,0.000,1.000 <span class="nv">target</span><span class="o">=</span>0,-500,0 <span class="nb">source</span><span class="o">=</span>0,0,0 <span class="nv">radius</span><span class="o">=</span>300 <span class="nv">distance</span><span class="o">=</span>25 <span class="nv">zenithazimuth</span><span class="o">=</span>0,1,<span class="nv">$azimuth</span> <span class="nv">material</span><span class="o">=</span>Vacuum <span class="nv">wavelength</span><span class="o">=</span>0<span class="o">)</span>;
    <span class="nb">local </span><span class="nv">test_config</span><span class="o">=(</span><span class="nv">mode</span><span class="o">=</span>BoxInBox <span class="nv">analytic</span><span class="o">=</span>1 <span class="nv">shape</span><span class="o">=</span>box <span class="nv">parameters</span><span class="o">=</span>-1,1,0,700 <span class="nv">boundary</span><span class="o">=</span>Rock//perfectAbsorbSurface/Vacuum <span class="nv">shape</span><span class="o">=</span>prism <span class="nv">parameters</span><span class="o">=</span>60,300,300,200 <span class="nv">boundary</span><span class="o">=</span>Vacuum///<span class="nv">$material</span><span class="o">)</span>;
    op.sh <span class="nv">$*</span> --animtimemax 7 --timemax 7 --geocenter --eye 0,0,1 --test --testconfig <span class="s2">&quot;$(join _ ${test_config[@]})&quot;</span> --torch --torchconfig <span class="s2">&quot;$(join _ ${torch_config[@]})&quot;</span> --torchdbg --save --tag <span class="nv">$tag</span> --cat <span class="k">$(</span>tprism-det<span class="k">)</span>
<span class="o">}</span>

delta:tests blyth<span class="nv">$ </span>tprism-  <span class="c"># pressing [tab] shows available functions beginning tprism-</span>
tprism-        tprism-args    tprism-det     tprism-env     tprism-py      tprism-src     tprism-test    tprism-vi
tprism--       tprism-cd      tprism-dir     tprism-pol     tprism-source  tprism-tag     tprism-usage
delta:tests blyth<span class="nv">$ </span>tprism-
</pre></div>
</div>
<p>A powerful way to rapidly develop bash functions is to use
two terminal sessions, in the first edit the functions:</p>
<div class="highlight-sh"><div class="highlight"><pre>tprism-vi
</pre></div>
</div>
<p>In the second test the <strong>tprism-foo</strong> you are developing:</p>
<div class="highlight-sh"><div class="highlight"><pre>tprism-;tprism-foo    <span class="c"># tprism- updates function definitions and the tprism-foo runs it</span>
</pre></div>
</div>
</div>
<div class="section" id="ipython-interactive-python-example">
<h2>IPython : interactive python example<a class="headerlink" href="#ipython-interactive-python-example" title="Permalink to this headline">¶</a></h2>
<p>IPython enables you to inspect live python objects, so you can
learn by discovery.  In order to see the plots created by Opticks analysis
scripts you will need to use IPython.</p>
<div class="highlight-py"><pre>delta:ana blyth$ ipython
Python 2.7.11 (default, Dec  5 2015, 23:51:51)
Type "copyright", "credits" or "license" for more information.

IPython 1.2.1 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython's features.
%quickref -&gt; Quick reference.
help      -&gt; Python's own help system.
object?   -&gt; Details about 'object', use 'object??' for extra details.

IPython profile: g4opticks

In [1]: run tprism.py --tag 1
tprism.py --tag 1
INFO:__main__:sel prism/torch/  1 : TO BT BT SA 20160716-1941 /tmp/blyth/opticks/evt/prism/fdomtorch/1.npy
INFO:__main__:prism Prism(array([  60.,  300.,  300.,    0.]),Boundary Vacuum///GlassSchottF2 ) alpha 60.0
...</pre>
</div>
<div class="section" id="ipython-tab-completion">
<h3>IPython Tab Completion<a class="headerlink" href="#ipython-tab-completion" title="Permalink to this headline">¶</a></h3>
<p>Discover available methods of an object by interactive exploration:</p>
<div class="highlight-py"><div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">evt</span><span class="o">.</span>  <span class="c"># press [tab] to see the possibilities</span>
<span class="n">evt</span><span class="o">.</span><span class="n">RPOL</span>                <span class="n">evt</span><span class="o">.</span><span class="n">desc</span>                <span class="n">evt</span><span class="o">.</span><span class="n">histype</span>             <span class="n">evt</span><span class="o">.</span><span class="n">material_table</span>      <span class="n">evt</span><span class="o">.</span><span class="n">ph</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">rflgs_</span>              <span class="n">evt</span><span class="o">.</span><span class="n">seqhis</span>              <span class="n">evt</span><span class="o">.</span><span class="n">td</span>
<span class="n">evt</span><span class="o">.</span><span class="n">RPOST</span>               <span class="n">evt</span><span class="o">.</span><span class="n">description</span>         <span class="n">evt</span><span class="o">.</span><span class="n">idom</span>                <span class="n">evt</span><span class="o">.</span><span class="n">mattype</span>             <span class="n">evt</span><span class="o">.</span><span class="n">polw</span>                <span class="n">evt</span><span class="o">.</span><span class="n">rpol_</span>               <span class="n">evt</span><span class="o">.</span><span class="n">seqhis_or_not</span>       <span class="n">evt</span><span class="o">.</span><span class="n">tdii</span>
<span class="n">evt</span><span class="o">.</span><span class="n">RQWN_BINSCALE</span>       <span class="n">evt</span><span class="o">.</span><span class="n">det</span>                 <span class="n">evt</span><span class="o">.</span><span class="n">incident_angle</span>      <span class="n">evt</span><span class="o">.</span><span class="n">msize</span>               <span class="n">evt</span><span class="o">.</span><span class="n">post</span>                <span class="n">evt</span><span class="o">.</span><span class="n">rpol_bins</span>           <span class="n">evt</span><span class="o">.</span><span class="n">seqmat</span>              <span class="n">evt</span><span class="o">.</span><span class="n">unique_wavelength</span>
<span class="n">evt</span><span class="o">.</span><span class="n">a_deviation_angle</span>   <span class="n">evt</span><span class="o">.</span><span class="n">deviation_angle</span>     <span class="n">evt</span><span class="o">.</span><span class="n">init_index</span>          <span class="n">evt</span><span class="o">.</span><span class="n">nrec</span>                <span class="n">evt</span><span class="o">.</span><span class="n">post_center_extent</span>  <span class="n">evt</span><span class="o">.</span><span class="n">rpost_</span>              <span class="n">evt</span><span class="o">.</span><span class="n">seqs</span>                <span class="n">evt</span><span class="o">.</span><span class="n">valid</span>
<span class="n">evt</span><span class="o">.</span><span class="n">a_recside</span>           <span class="n">evt</span><span class="o">.</span><span class="n">dirw</span>                <span class="n">evt</span><span class="o">.</span><span class="n">init_metadata</span>       <span class="n">evt</span><span class="o">.</span><span class="n">ox</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">ps</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">rs</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">src</span>                 <span class="n">evt</span><span class="o">.</span><span class="n">wl</span>
<span class="n">evt</span><span class="o">.</span><span class="n">a_side</span>              <span class="n">evt</span><span class="o">.</span><span class="n">fdom</span>                <span class="n">evt</span><span class="o">.</span><span class="n">init_photons</span>        <span class="n">evt</span><span class="o">.</span><span class="n">p0</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">py</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">rsmry_</span>              <span class="n">evt</span><span class="o">.</span><span class="n">stamp</span>               <span class="n">evt</span><span class="o">.</span><span class="n">x</span>
<span class="n">evt</span><span class="o">.</span><span class="n">all_history</span>         <span class="n">evt</span><span class="o">.</span><span class="n">flags</span>               <span class="n">evt</span><span class="o">.</span><span class="n">init_records</span>        <span class="n">evt</span><span class="o">.</span><span class="n">p_out</span>               <span class="n">evt</span><span class="o">.</span><span class="n">pyc</span>                 <span class="n">evt</span><span class="o">.</span><span class="n">rsr</span>                 <span class="n">evt</span><span class="o">.</span><span class="n">summary</span>             <span class="n">evt</span><span class="o">.</span><span class="n">y</span>
<span class="n">evt</span><span class="o">.</span><span class="n">all_material</span>        <span class="n">evt</span><span class="o">.</span><span class="n">flags_table</span>         <span class="n">evt</span><span class="o">.</span><span class="n">init_selection</span>      <span class="n">evt</span><span class="o">.</span><span class="n">path</span>                <span class="n">evt</span><span class="o">.</span><span class="n">rec</span>                 <span class="n">evt</span><span class="o">.</span><span class="n">rx</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">t</span>                   <span class="n">evt</span><span class="o">.</span><span class="n">z</span>
<span class="n">evt</span><span class="o">.</span><span class="n">brief</span>               <span class="n">evt</span><span class="o">.</span><span class="n">history</span>             <span class="n">evt</span><span class="o">.</span><span class="n">label</span>               <span class="n">evt</span><span class="o">.</span><span class="n">paths</span>               <span class="n">evt</span><span class="o">.</span><span class="n">recflags</span>            <span class="n">evt</span><span class="o">.</span><span class="n">rx_raw</span>              <span class="n">evt</span><span class="o">.</span><span class="n">tag</span>                 <span class="n">evt</span><span class="o">.</span><span class="n">zrt_profile</span>
<span class="n">evt</span><span class="o">.</span><span class="n">c4</span>                  <span class="n">evt</span><span class="o">.</span><span class="n">history_table</span>       <span class="n">evt</span><span class="o">.</span><span class="n">material</span>            <span class="n">evt</span><span class="o">.</span><span class="n">pbins</span>               <span class="n">evt</span><span class="o">.</span><span class="n">recwavelength</span>       <span class="n">evt</span><span class="o">.</span><span class="n">selection</span>           <span class="n">evt</span><span class="o">.</span><span class="n">tbins</span>
</pre></div>
</div>
<p>One question mark gives the documentation:</p>
<div class="highlight-py"><pre>In [2]: evt.deviation_angle?
Type:       instancemethod
File:       /Users/blyth/opticks/ana/evt.py
Definition: evt.deviation_angle(self, side=None, incident=None)
Docstring:
Deviation angle for parallel squadrons of incident photons
without assuming a bounce count</pre>
</div>
<p>Two question marks gives the implementation:</p>
<div class="highlight-py"><pre>In [4]: evt.zrt_profile??

Type:       instancemethod
File:       /Users/blyth/opticks/ana/evt.py
Definition: evt.zrt_profile(self, n, pol=True)
Source:
    def zrt_profile(self, n, pol=True):
        """
        :param n: number of bounce steps
        :return: min, max, mid triplets for z, r and t  at n bounce steps

        ::

            In [7]: a_zrt
            Out[7]:
            array([[ 300.    ,  300.    ,  300.    ,    1.1748,   97.0913,   49.133 ,    0.1001,    0.1001,    0.1001],
                   [  74.2698,  130.9977,  102.6337,    1.1748,   97.0913,   49.133 ,    0.9357,    1.2165,    1.0761],
                   [  56.0045,  127.9946,   91.9996,    1.1748,   98.1444,   49.6596,    0.9503,    1.3053,    1.1278]])


        """
        slab = "z r t"
        if pol:
            slab += " lx ly lz"

        labs = slab.split()
        nqwn = 3
        zrt = np.zeros((n,len(labs)*nqwn))
        tfmt = "%10.3f " * nqwn
        fmt = " ".join(["%s: %s " % (lab, tfmt) for lab in labs])

        for i in range(n):
            p = self.rpost_(i)
            l = self.rpol_(i)
            lx = l[:,0]
            ly = l[:,1]
            lz = l[:,2]</pre>
</div>
</div>
</div>
<div class="section" id="numpy">
<h2>NumPy<a class="headerlink" href="#numpy" title="Permalink to this headline">¶</a></h2>
<p>Opticks although mostly implemented in C++ uses the NPY serialization format
for all geometry and event buffers allowing debugging and analysis
to be done from the IPython using NumPy.</p>
<p>NPY serialized files used extension <strong>.npy</strong>, find some:</p>
<div class="highlight-sh"><div class="highlight"><pre>delta:~ blyth<span class="nv">$ </span>find /tmp/blyth/opticks/evt/lens -name 1.npy
/tmp/blyth/opticks/evt/lens/fdomtorch/1.npy
/tmp/blyth/opticks/evt/lens/idomtorch/1.npy
/tmp/blyth/opticks/evt/lens/notorch/1.npy
/tmp/blyth/opticks/evt/lens/oxtorch/1.npy
/tmp/blyth/opticks/evt/lens/phtorch/1.npy
/tmp/blyth/opticks/evt/lens/pstorch/1.npy
/tmp/blyth/opticks/evt/lens/rstorch/1.npy
/tmp/blyth/opticks/evt/lens/rxtorch/1.npy
</pre></div>
</div>
<p>Determine maximum photon time <strong>in one line</strong>:</p>
<div class="highlight-sh"><div class="highlight"><pre>delta:~ blyth<span class="nv">$ </span>python -c <span class="s2">&quot;import numpy as np ; print np.load(&#39;/tmp/blyth/opticks/evt/lens/oxtorch/1.npy&#39;)[:,0,3].max() &quot;</span>
11.2614
</pre></div>
</div>
<p>Do that more sedately with ipython:</p>
<div class="highlight-py"><pre>delta:~ blyth$ ipython
Python 2.7.11 (default, Dec  5 2015, 23:51:51)
Type "copyright", "credits" or "license" for more information.

IPython 1.2.1 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython's features.
%quickref -&gt; Quick reference.
help      -&gt; Python's own help system.
object?   -&gt; Details about 'object', use 'object??' for extra details.

IPython profile: g4opticks

In [1]: ox = np.load("/tmp/blyth/opticks/evt/lens/oxtorch/1.npy")

In [2]: ox
Out[2]:
array([[[   1.884,    0.202,  700.   ,    4.569],
        [   0.098,    0.011,    0.995,    1.   ],
        [  -0.107,    0.994,    0.   ,  630.652],
        [   0.   ,    0.   ,    0.   ,    0.   ]],

       [[   0.745,   -1.288,  700.   ,    4.568],
        [   0.05 ,   -0.087,    0.995,    1.   ],
        [   0.866,    0.501,    0.   ,  753.122],
        [   0.   ,    0.   ,    0.   ,    0.   ]],

       [[ 290.308, -500.146, -700.   ,    6.057],
        [   0.21 ,   -0.433,   -0.877,    1.   ],
        [   0.501,    0.818,   -0.283,  425.268],
        [   0.   ,    0.   ,    0.   ,    0.   ]],

       ...,
       [[   2.217,    0.106,  700.   ,    4.572],
        [   0.078,    0.004,    0.997,    1.   ],
        [  -0.048,    0.999,    0.   ,  472.495],
        [   0.   ,    0.   ,    0.   ,    0.   ]],

       [[  -1.872,   -0.614,  700.   ,    4.574],
        [  -0.055,   -0.018,    0.998,    1.   ],
        [   0.312,   -0.95 ,    0.   ,  405.361],
        [   0.   ,    0.   ,    0.   ,    0.   ]],

       [[   2.042,   -3.525,  700.   ,    4.571],
        [   0.067,   -0.116,    0.991,    1.   ],
        [   0.865,    0.501,    0.   ,  589.317],
        [   0.   ,    0.   ,    0.   ,    0.   ]]], dtype=float32)

In [3]: ox.shape
Out[3]: (500000, 4, 4)    # 0.5M photons with (4,4) floats each

In [4]: ox[0]             # 1st photon
Out[4]:
array([[   1.884,    0.202,  700.   ,    4.569],
       [   0.098,    0.011,    0.995,    1.   ],
       [  -0.107,    0.994,    0.   ,  630.652],
       [   0.   ,    0.   ,    0.   ,    0.   ]], dtype=float32)

In [5]: ox[-1]           # last photon
Out[5]:
array([[   2.042,   -3.525,  700.   ,    4.571],
       [   0.067,   -0.116,    0.991,    1.   ],
       [   0.865,    0.501,    0.   ,  589.317],
       [   0.   ,    0.   ,    0.   ,    0.   ]], dtype=float32)

In [6]: ox[:,0,3]        # "wildcard" first dimension with ":" and pick the other two, giving end times of the photons
Out[6]: array([ 4.569,  4.568,  6.057, ...,  4.572,  4.574,  4.571], dtype=float32)

In [7]: ox[:,0,3].min()  # earliest time
Out[7]: 0.15406403

In [8]: ox[:,0,3].max()  # latest time
Out[8]: 11.261424</pre>
</div>
<p>See <tt class="xref doc docutils literal"><span class="pre">../ana/evt</span></tt> for a higher level way of loading event buffers.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../bin/index.html" title="Opticks Launch Scripts"
             >next</a> |</li>
        <li class="right" >
          <a href="../docs/geocache.html" title="Geometry Cache"
             >previous</a> |</li>
        <li><a href="../index.html">Opticks 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>