
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>cfg4 : Comparing Opticks and Geant4 Simulations &#8212; Opticks 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Opticks 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">cfg4 : Comparing Opticks and Geant4 Simulations</a><ul>
<li><a class="reference internal" href="#package-infrastructure">Package Infrastructure</a></li>
<li><a class="reference internal" href="#low-level-geant4-utilities">Low level Geant4 Utilities</a></li>
<li><a class="reference internal" href="#random-control">Random Control</a></li>
<li><a class="reference internal" href="#geant4-physics-and-process">Geant4 Physics and Process</a></li>
<li><a class="reference internal" href="#high-level-managers">High level managers</a></li>
<li><a class="reference internal" href="#geant4-actions">Geant4 Actions</a></li>
<li><a class="reference internal" href="#collectors">Collectors</a></li>
<li><a class="reference internal" href="#sources">Sources</a></li>
<li><a class="reference internal" href="#misc">Misc</a></li>
<li><a class="reference internal" href="#gdml-utilities">GDML Utilities</a></li>
<li><a class="reference internal" href="#geometry-material-surface-classes">Geometry/Material/Surface Classes</a></li>
<li><a class="reference internal" href="#id1">Misc</a></li>
<li><a class="reference internal" href="#recording-machinery-classes">Recording Machinery Classes</a><ul>
<li><a class="reference internal" href="#crecorder-posttrackwritesteps">CRecorder::postTrackWriteSteps</a></li>
<li><a class="reference internal" href="#crecorder-writesteppoint">CRecorder::WriteStepPoint</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-details">Class Details</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/cfg4/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cfg4-comparing-opticks-and-geant4-simulations">
<h1>cfg4 : Comparing Opticks and Geant4 Simulations<a class="headerlink" href="#cfg4-comparing-opticks-and-geant4-simulations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="package-infrastructure">
<h2>Package Infrastructure<a class="headerlink" href="#package-infrastructure" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CFG4_API_EXPORT</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CFG4_BODY</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CFG4_HEAD</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CFG4_LOG</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CFG4_POP</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CFG4_PUSH</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CFG4_TAIL</span><span class="o">.</span><span class="n">hh</span>
</pre></div>
</div>
</div>
<div class="section" id="low-level-geant4-utilities">
<h2>Low level Geant4 Utilities<a class="headerlink" href="#low-level-geant4-utilities" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CVec</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">ctor</span><span class="p">:</span> <span class="n">G4PhysicsOrderedFreeVector</span><span class="o">*</span> <span class="n">vec</span>

<span class="n">CVis</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">static</span> <span class="n">G4VisAttributes</span> <span class="n">methods</span>

<span class="n">Format</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">static</span> <span class="n">formatters</span> <span class="k">for</span> <span class="n">G4Track</span><span class="p">,</span> <span class="n">G4Step</span><span class="p">,</span> <span class="o">..</span>

<span class="n">CTrack</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">simple</span> <span class="n">G4Track</span> <span class="n">wrapper</span> <span class="n">providing</span> <span class="n">getTrackStatusString</span>

<span class="n">CDump</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">Dumps</span> <span class="n">Geant4</span> <span class="n">materials</span> <span class="ow">and</span> <span class="n">surfaces</span>
</pre></div>
</div>
</div>
<div class="section" id="random-control">
<h2>Random Control<a class="headerlink" href="#random-control" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CAlignEngine</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">predecessor</span> <span class="n">of</span> <span class="n">CRandomEngine</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CRandomListener</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">pure</span> <span class="n">virtual</span> <span class="n">protocol</span> <span class="n">base</span> <span class="p">:</span> <span class="n">preTrack</span><span class="p">,</span> <span class="n">postTrack</span><span class="p">,</span> <span class="n">postStep</span><span class="p">,</span> <span class="n">postpropagate</span><span class="p">,</span> <span class="n">flat_instrumented</span>

<span class="n">CRandomEngine</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">isa</span> <span class="n">CRandomListener</span><span class="p">,</span> <span class="n">CLHEP</span><span class="p">::</span><span class="n">HepRandomEngine</span>
    <span class="n">works</span> <span class="k">with</span> <span class="n">TCURAND</span>

<span class="n">CMixMaxRng</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">isa</span> <span class="n">CRandomListener</span><span class="p">,</span> <span class="n">CLHEP</span><span class="p">::</span><span class="n">MixMaxRng</span>
</pre></div>
</div>
</div>
<div class="section" id="geant4-physics-and-process">
<h2>Geant4 Physics and Process<a class="headerlink" href="#geant4-physics-and-process" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OpNovicePhysicsList</span><span class="o">.</span><span class="n">hh</span>
<span class="n">OpNovicePhysicsListMessenger</span><span class="o">.</span><span class="n">hh</span>
<span class="n">PhysicsList</span><span class="o">.</span><span class="n">hh</span>

<span class="n">Cerenkov</span><span class="o">.</span><span class="n">hh</span>
<span class="n">G4Cerenkov1042</span><span class="o">.</span><span class="n">hh</span>

<span class="n">OpRayleigh</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">isa</span> <span class="n">G4VDiscreteProcess</span> <span class="p">:</span> <span class="n">old</span> <span class="n">Geant4</span> <span class="n">process</span>

<span class="n">Scintillation</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CCerenkov</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">trying</span> <span class="n">to</span> <span class="n">hide</span> <span class="n">different</span> <span class="n">Cerenkov</span> <span class="n">process</span> <span class="n">implementations</span> <span class="n">inside</span> <span class="n">this</span> <span class="n">wrapper</span> <span class="k">class</span>

<span class="nc">CCerenkovGenerator</span><span class="o">.</span><span class="n">hh</span>


<span class="n">C4Cerenkov1042</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CParticleDefinition</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CPhysics</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CPhysicsList</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CProcess</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CProcessManager</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CProcessSwitches</span><span class="o">.</span><span class="n">hh</span>
</pre></div>
</div>
</div>
<div class="section" id="high-level-managers">
<h2>High level managers<a class="headerlink" href="#high-level-managers" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CDetector</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4VUserDetectorConstruction</span>
   <span class="ow">is</span> <span class="n">the</span> <span class="n">base</span> <span class="k">class</span> <span class="nc">of</span> <span class="o">*</span><span class="n">CGDMLDetector</span><span class="o">*</span> <span class="ow">and</span> <span class="o">*</span><span class="n">CTestDetector</span><span class="o">*</span>

<span class="n">CTestDetector</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">CDetector</span>
   <span class="n">constructs</span> <span class="n">simple</span> <span class="n">Geant4</span> <span class="n">detector</span> <span class="n">test</span> <span class="n">geometries</span> <span class="n">based</span> <span class="n">on</span> <span class="n">commandline</span> <span class="n">specifications</span>

<span class="n">CGDMLDetector</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">CDetector</span>


<span class="n">CG4</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">OpticksHub</span>
   <span class="n">holder</span> <span class="n">of</span> <span class="n">the</span> <span class="n">actions</span> <span class="ow">and</span> <span class="n">instrumentation</span> <span class="n">classes</span> <span class="n">like</span> <span class="n">CRecorder</span> <span class="ow">and</span> <span class="n">CStepRec</span>

<span class="n">CGenerator</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="kn">from</span> <span class="nn">OpticksGen</span> <span class="ow">and</span> <span class="n">CG4</span>
</pre></div>
</div>
</div>
<div class="section" id="geant4-actions">
<h2>Geant4 Actions<a class="headerlink" href="#geant4-actions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CPrimaryGeneratorAction</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4VUserPrimaryGeneratorAction</span>
   <span class="n">ctor</span> <span class="n">CSource</span>

<span class="n">CRunAction</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4UserRunAction</span><span class="p">,</span> <span class="n">ctor</span> <span class="n">OpticksHub</span>

<span class="n">CEventAction</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4UserEventAction</span> <span class="p">:</span> <span class="n">BeginOfEventAction</span><span class="p">,</span> <span class="n">EndOfEventAction</span>
   <span class="n">ctor</span> <span class="n">CG4</span>

<span class="n">CEventInfo</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4VUserEventInformation</span>
   <span class="n">holds</span> <span class="n">gencode</span>

<span class="n">CTrackingAction</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4UserTrackingAction</span>
</pre></div>
</div>
</div>
<div class="section" id="collectors">
<h2>Collectors<a class="headerlink" href="#collectors" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C4PhotonCollector</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CPrimaryCollector</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CPhotonCollector</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CGenstepCollector</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">used</span> <span class="n">by</span> <span class="n">G4Opticks</span>

<span class="n">CHit</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4VHit</span>
</pre></div>
</div>
</div>
<div class="section" id="sources">
<h2>Sources<a class="headerlink" href="#sources" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSource</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4VPrimaryGenerator</span>
   <span class="n">ctor</span> <span class="n">Opticks</span>
   <span class="n">holds</span> <span class="n">CRecorder</span>

<span class="n">CGenstepSource</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">CSource</span><span class="p">,</span> <span class="n">ctor</span> <span class="n">Opticks</span>

<span class="n">CGunSource</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">CSource</span><span class="p">,</span> <span class="n">ctor</span> <span class="n">Opticks</span>

<span class="n">CInputPhotonSource</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">CSource</span><span class="p">,</span> <span class="n">ctor</span> <span class="n">Opticks</span>

<span class="n">CPrimarySource</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">CSource</span><span class="p">,</span> <span class="n">ctor</span> <span class="n">Opticks</span>

<span class="n">CTorchSource</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">CSource</span><span class="p">,</span> <span class="n">ctor</span> <span class="n">Opticks</span><span class="p">,</span> <span class="n">TorchStepNPY</span>
</pre></div>
</div>
</div>
<div class="section" id="misc">
<h2>Misc<a class="headerlink" href="#misc" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ActionInitialization</span><span class="o">.</span><span class="n">hh</span>
<span class="n">C4FPEDetection</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CRayTracer</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">CG4</span>
</pre></div>
</div>
</div>
<div class="section" id="gdml-utilities">
<h2>GDML Utilities<a class="headerlink" href="#gdml-utilities" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CGDML</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">higher</span> <span class="n">level</span> <span class="n">GDML</span> <span class="n">Parse</span> <span class="ow">and</span> <span class="n">Export</span>


<span class="n">CGDMLKludge</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CGDMLKludgeErrorHandler</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CGDMLKludgeRead</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CGDMLKludgeWrite</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">xerces</span><span class="o">-</span><span class="n">c</span> <span class="n">level</span> <span class="n">tools</span> <span class="n">to</span> <span class="n">fix</span> <span class="n">broken</span> <span class="n">GDML</span>
</pre></div>
</div>
</div>
<div class="section" id="geometry-material-surface-classes">
<h2>Geometry/Material/Surface Classes<a class="headerlink" href="#geometry-material-surface-classes" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CGeometry</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">OpticksHub</span><span class="p">,</span> <span class="n">CSensitiveDetector</span>
   <span class="n">hookup</span> <span class="n">CG4</span>

<span class="n">CMath</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">just</span> <span class="n">make_affineTransform</span>

<span class="n">CMaker</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">static</span> <span class="n">methods</span> <span class="n">creating</span> <span class="n">G4VSolid</span> <span class="kn">from</span> <span class="nn">nnode</span> <span class="ow">and</span> <span class="n">NCSG</span>

<span class="n">CMPT</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">works</span> <span class="k">with</span> <span class="n">G4MaterialPropertiesTable</span>

<span class="n">CMaterial</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CMaterialBridge</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CMaterialLib</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CMaterialSort</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CMaterialTable</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CPropLib</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CSensitiveDetector</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CSkinSurfaceTable</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CSolid</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">G4VSolid</span><span class="p">,</span> <span class="n">holder</span>

<span class="n">COptical</span><span class="o">.</span><span class="n">hh</span>
     <span class="n">Model</span> <span class="n">Finish</span> <span class="n">Type</span> <span class="n">statics</span>

<span class="n">COpticalSurface</span><span class="o">.</span><span class="n">hh</span>


<span class="n">CSurfaceBridge</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CSurfaceLib</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CSurfaceTable</span><span class="o">.</span><span class="n">hh</span>

<span class="n">CBndLib</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">ctor</span> <span class="n">OpticksHub</span>

<span class="n">CBorderSurfaceTable</span><span class="o">.</span><span class="n">hh</span>
<span class="n">CBoundaryProcess</span><span class="o">.</span><span class="n">hh</span>


<span class="n">CCheck</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">Geant4</span> <span class="n">volume</span> <span class="n">tree</span> <span class="n">traversal</span> <span class="n">checking</span> <span class="n">G4LogicalBorderSurface</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h2>Misc<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CTrackInfo</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">isa</span> <span class="n">G4VUserTrackInformation</span>
    <span class="n">holding</span> <span class="n">photon_record_id</span>
    <span class="n">HMM</span> <span class="p">:</span> <span class="n">appears</span> <span class="ow">not</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span>

<span class="n">CTraverser</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">ctor</span><span class="p">:</span> <span class="n">Opticks</span><span class="o">*</span> <span class="n">ok</span><span class="p">,</span> <span class="n">G4VPhysicalVolume</span><span class="o">*</span> <span class="n">top</span><span class="p">,</span> <span class="n">NBoundingBox</span><span class="o">*</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">OpticksQuery</span><span class="o">*</span> <span class="n">query</span>


<span class="n">DebugG4Transportation</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">isa</span><span class="p">:</span> <span class="n">G4Transportation</span>
    <span class="n">ctor</span><span class="p">:</span> <span class="n">CG4</span><span class="o">*</span> <span class="n">g4</span>

<span class="n">SteppingVerbose</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span><span class="p">:</span> <span class="n">G4SteppingVerbose</span>



<span class="n">OpStatus</span><span class="o">.</span><span class="n">hh</span>
</pre></div>
</div>
</div>
<div class="section" id="recording-machinery-classes">
<h2>Recording Machinery Classes<a class="headerlink" href="#recording-machinery-classes" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CRecorderLive</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">CG4</span><span class="p">,</span> <span class="n">CGeometry</span>

<span class="n">CPoi</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">holds</span> <span class="n">G4StepPoint</span>

<span class="n">CStp</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">holds</span> <span class="n">G4Step</span>

<span class="n">CRec</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">CG4</span><span class="p">,</span> <span class="n">CRecState</span>
   <span class="n">holds</span> <span class="n">vectors</span> <span class="n">of</span> <span class="n">CStp</span> <span class="ow">and</span> <span class="n">CPoi</span>

<span class="n">CRecorder</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">CG4</span><span class="p">,</span> <span class="n">CGeometry</span>
   <span class="n">holds</span> <span class="n">CRec</span>

   <span class="n">CRecorder</span><span class="p">::</span><span class="n">initEvent</span> <span class="n">invoked</span> <span class="n">by</span> <span class="n">CG4</span><span class="p">::</span><span class="n">initEvent</span>
   <span class="n">CRecorder</span><span class="p">::</span><span class="n">postTrackWritePoints</span>

<span class="n">CG4Ctx</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">context</span> <span class="n">struct</span> <span class="n">shared</span> <span class="n">between</span> <span class="n">the</span> <span class="n">CEventAction</span><span class="p">,</span> <span class="n">CTrackingAction</span><span class="p">,</span> <span class="n">CSteppingAction</span>

   <span class="n">via</span> <span class="n">calls</span><span class="p">:</span> <span class="n">setEvent</span><span class="p">,</span> <span class="n">setTrack</span><span class="p">,</span> <span class="n">setStep</span> <span class="n">this</span> <span class="n">acts</span> <span class="k">as</span> <span class="n">interface</span> <span class="n">between</span> <span class="n">the</span> <span class="n">Geant4</span>
   <span class="n">world</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">recording</span> <span class="n">into</span> <span class="n">OpticksEvent</span>

<span class="n">CAction</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">enum</span><span class="p">:</span>  <span class="n">PRE_SAVE</span><span class="p">,</span> <span class="n">POST_SAVE</span><span class="p">,</span> <span class="o">...</span> <span class="n">HARD_TRUNCATE</span><span class="p">,</span> <span class="n">TOPSLOT_REWRITE</span><span class="p">,</span> <span class="n">POST_SKIP</span> <span class="ow">and</span> <span class="n">labels</span>
   <span class="n">used</span> <span class="n">by</span><span class="p">:</span> <span class="n">CRecState</span> <span class="n">CPhoton</span> <span class="n">CRec</span> <span class="n">CRecorder</span> <span class="n">CStp</span>

<span class="n">CStage</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">enum</span><span class="p">:</span> <span class="n">UNKNOWN</span><span class="p">,</span> <span class="n">START</span><span class="p">,</span> <span class="n">COLLECT</span><span class="p">,</span> <span class="n">REJOIN</span><span class="p">,</span> <span class="n">RECOLL</span> <span class="ow">and</span> <span class="n">labels</span>
   <span class="n">used</span> <span class="n">by</span><span class="p">:</span> <span class="n">CSteppingAction</span> <span class="n">CDebug</span> <span class="n">CG4Ctx</span> <span class="n">CPoi</span> <span class="n">CRec</span> <span class="n">CStp</span> <span class="n">OpStatus</span> <span class="n">State</span>

<span class="n">CRecState</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span><span class="p">:</span> <span class="n">const</span> <span class="n">CG4Ctx</span><span class="o">&amp;</span> <span class="n">ctx</span>
   <span class="n">slot</span><span class="o">/</span><span class="n">truncation</span><span class="o">/</span><span class="n">topslot</span><span class="o">-</span><span class="n">rewrite</span> <span class="p">(</span><span class="k">for</span> <span class="n">reemission</span><span class="p">)</span>

<span class="n">CDebug</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">looks</span> <span class="n">like</span> <span class="n">it</span> <span class="n">might</span> <span class="n">be</span> <span class="n">trying</span> <span class="n">to</span> <span class="n">debug</span> <span class="n">recording</span> <span class="n">machinery</span> <span class="ow">in</span> <span class="n">an</span> <span class="n">expensive</span> <span class="n">way</span><span class="p">,</span>
   <span class="n">checking</span> <span class="n">what</span> <span class="n">CPhoton</span> <span class="n">does</span> <span class="n">cheaply</span>

<span class="n">State</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">holds</span> <span class="n">G4Step</span><span class="p">,</span> <span class="n">G4OpBoundaryProcessStatus</span><span class="p">,</span> <span class="n">premat</span><span class="p">,</span> <span class="n">postmat</span><span class="p">,</span> <span class="n">CStage</span><span class="p">::</span><span class="n">CStage_t</span>
   <span class="n">used</span> <span class="n">by</span><span class="p">:</span> <span class="n">CPhoton</span><span class="o">.</span><span class="n">cc</span> <span class="n">CRec</span><span class="o">.</span><span class="n">cc</span> <span class="n">CRecState</span><span class="o">.</span><span class="n">cc</span> <span class="n">CSteppingState</span><span class="o">.</span><span class="n">cc</span>

<span class="n">CPhoton</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span><span class="p">:</span> <span class="n">const</span> <span class="n">CG4Ctx</span><span class="o">&amp;</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">CRecState</span><span class="o">&amp;</span> <span class="n">state</span>
   <span class="n">struct</span> <span class="n">that</span> <span class="n">builds</span> <span class="n">seqhis</span> <span class="ow">and</span> <span class="n">seqmat</span> <span class="n">step</span> <span class="n">by</span> <span class="n">step</span>

<span class="n">CWriter</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">CG4</span><span class="p">,</span> <span class="n">CPhoton</span>
   <span class="n">canonical</span> <span class="n">m_writer</span> <span class="n">instance</span> <span class="ow">is</span> <span class="n">resident</span> <span class="n">of</span> <span class="n">CRecorder</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">instanciated</span> <span class="k">with</span> <span class="n">it</span>

<span class="n">CStep</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">ctor</span> <span class="n">copies</span> <span class="n">G4Step</span> <span class="k">with</span> <span class="n">step_id</span>
   <span class="n">used</span> <span class="n">by</span><span class="p">:</span> <span class="n">CMaterialBridge</span><span class="o">.</span><span class="n">cc</span> <span class="n">CPhoton</span><span class="o">.</span><span class="n">cc</span> <span class="n">CRecorder</span><span class="o">.</span><span class="n">cc</span> <span class="n">CStep</span><span class="o">.</span><span class="n">cc</span> <span class="n">CStepRec</span><span class="o">.</span><span class="n">cc</span> <span class="n">Format</span><span class="o">.</span><span class="n">cc</span>

<span class="n">CStepRec</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">records</span> <span class="n">non</span><span class="o">-</span><span class="n">optical</span> <span class="n">particle</span> <span class="n">step</span> <span class="n">points</span> <span class="n">into</span> <span class="n">nopstep</span> <span class="n">array</span><span class="p">,</span> <span class="n">using</span> <span class="n">vector</span> <span class="n">of</span> <span class="n">CStep</span> <span class="n">pointers</span>


<span class="n">CSteppingAction</span><span class="o">.</span><span class="n">hh</span>
   <span class="n">isa</span> <span class="n">G4UserSteppingAction</span>
   <span class="n">ctor</span> <span class="n">CG4</span>
   <span class="n">holds</span> <span class="n">CRecorder</span><span class="p">,</span> <span class="n">CStepRec</span><span class="p">,</span> <span class="n">CMaterialBridge</span><span class="p">,</span> <span class="n">CGeometry</span><span class="p">,</span> <span class="n">CRandomEngine</span>


<span class="n">CSteppingState</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">struct</span> <span class="n">fCurrentProcess</span><span class="p">,</span> <span class="n">fPostStepGetPhysIntVector</span><span class="p">,</span> <span class="n">MAXofPostStepLoops</span><span class="p">,</span> <span class="n">fStepStatus</span>

<span class="n">CStepping</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">interrogate</span> <span class="n">G4SteppingManager</span> <span class="n">providing</span> <span class="n">CSteppingState</span>

<span class="n">CStepStatus</span><span class="o">.</span><span class="n">hh</span>
    <span class="n">G4StepStatus</span> <span class="n">enum</span> <span class="n">labels</span>
</pre></div>
</div>
<div class="section" id="crecorder-posttrackwritesteps">
<h3>CRecorder::postTrackWriteSteps<a class="headerlink" href="#crecorder-posttrackwritesteps" title="Permalink to this headline">¶</a></h3>
<p>CRecorder::postTrackWriteSteps is invoked from CRecorder::postTrack in –recstp mode (not –recpoi),
once for the primary photon track and then for 0 or more reemtracks
via the record_id (which survives reemission) the info is written
onto the correct place in the photon record buffer</p>
<p>The steps recorded into m_crec(CRec) are used to determine
flags and the m_state(CRecState) is updated enabling
appropriate step points are to be saved with WriteStepPoint.</p>
</div>
<div class="section" id="crecorder-writesteppoint">
<h3>CRecorder::WriteStepPoint<a class="headerlink" href="#crecorder-writesteppoint" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In –recpoi mode is invoked from CRecorder::postTrackWritePoints very simply.</li>
<li>In –recstp mode is invoked several times from CRecorder::postTrackWriteSteps.</li>
</ul>
<p>NB the last argumnent is only relevant to –recpoi mode</p>
</div>
</div>
<div class="section" id="class-details">
<h2>Class Details<a class="headerlink" href="#class-details" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="CTraverser.html">CTraverser</a></li>
<li class="toctree-l1"><a class="reference internal" href="CDetector.html">CDetector</a></li>
<li class="toctree-l1"><a class="reference internal" href="CGDMLDetector.html">CGDMLDetector</a></li>
<li class="toctree-l1"><a class="reference internal" href="CTestDetector.html">CTestDetector</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Opticks 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>