<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Geometry Cache &mdash; Opticks 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Opticks 0.0.1 documentation" href="../index.html" />
    <link rel="next" title="Tools : bash, python, numpy, ipython, matplotlib" href="../ana/tools.html" />
    <link rel="prev" title="Opticks Overview" href="overview.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../ana/tools.html" title="Tools : bash, python, numpy, ipython, matplotlib"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Opticks Overview"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Opticks 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Geometry Cache</a><ul>
<li><a class="reference internal" href="#setting-idpath">Setting IDPATH</a></li>
<li><a class="reference internal" href="#structure-of-the-geocache">Structure of the geocache</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">Opticks Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../ana/tools.html"
                        title="next chapter">Tools : bash, python, numpy, ipython, matplotlib</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/docs/geocache.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="geometry-cache">
<h1>Geometry Cache<a class="headerlink" href="#geometry-cache" title="Permalink to this headline">¶</a></h1>
<p>Parsing large XML geometry files can be timeconsuming.  In order to avoid this
repeatedly paying this expense all geometry data is serialized into NPY and txt files
within the geocache.
These buffers can subsequently be loaded from file and directly copied to the GPU.</p>
<div class="section" id="setting-idpath">
<h2>Setting IDPATH<a class="headerlink" href="#setting-idpath" title="Permalink to this headline">¶</a></h2>
<p>Each detector geometry or selection applied to a detector geometry has a
separate geocache stored within the <strong>IDPATH</strong> directory.
Opticks launches end by outputting messages like the below:</p>
<div class="highlight-python"><pre># geocache directory corresponding to OPTICKS_ARGS --dpib --tracer
export IDPATH=/usr/local/opticks/opticksdata/export/dpib/cfg4.d41d8cd98f00b204e9800998ecf8427e.dae

# geocache directory corresponding to OPTICKS_ARGS --jpmt --tracer
export IDPATH=/usr/local/opticks/opticksdata/export/juno/test3.fcc8b4dc9474af8826b29bf172452160.dae

# geocache directory corresponding to OPTICKS_ARGS --dyb --tracer
export IDPATH=/usr/local/opticks/opticksdata/export/DayaBay_VGDX_20140414-1300/g4_00.96ff965744a2f6b78c24e33c80d3a4cd.dae</pre>
</div>
<p>The IDPATH identifies the geocache directory corresponding to the geometry selected by the
arguments. Opticks python analysis scripts require the IDPATH to be set in order
to access geometry data.</p>
<p>Copy/paste the export lines into your .bash_profile prior to using python
analysis scripts.</p>
<p><a class="reference internal" href="../ana/proplib.html"><em>PropLib : Geocache Access</em></a> is a simple example of a python script accessing the geocache.</p>
</div>
<div class="section" id="structure-of-the-geocache">
<h2>Structure of the geocache<a class="headerlink" href="#structure-of-the-geocache" title="Permalink to this headline">¶</a></h2>
<p>All geometry data including material and surface properties
is serialized in the geocache:</p>
<div class="highlight-python"><pre>simon:~ blyth$ cd /usr/local/opticks/opticksdata/export/juno/test3.fcc8b4dc9474af8826b29bf172452160.dae
simon:test3.fcc8b4dc9474af8826b29bf172452160.dae blyth$ find .
./GBndLib
./GBndLib/GBndLibIndex.npy
./GItemList
./GItemList/GMaterialLib.txt
./GItemList/GScintillatorLib.txt
./GItemList/GSourceLib.txt
./GItemList/GSurfaceLib.txt
./GMaterialLib
./GMaterialLib/GMaterialLib.npy
./GMergedMesh
./GMergedMesh/0
./GMergedMesh/0/aiidentity.npy
./GMergedMesh/0/bbox.npy
./GMergedMesh/0/boundaries.npy
./GMergedMesh/0/center_extent.npy
./GMergedMesh/0/colors.npy
./GMergedMesh/0/identity.npy
./GMergedMesh/0/iidentity.npy
./GMergedMesh/0/indices.npy
./GMergedMesh/0/itransforms.npy
./GMergedMesh/0/meshes.npy
./GMergedMesh/0/nodeinfo.npy
./GMergedMesh/0/nodes.npy
./GMergedMesh/0/normals.npy
./GMergedMesh/0/sensors.npy
./GMergedMesh/0/transforms.npy
./GMergedMesh/0/vertices.npy
...
./GScintillatorLib
./GScintillatorLib/GScintillatorLib.npy
./GScintillatorLib/LS
./GScintillatorLib/LS/ABSLENGTH.npy
./GScintillatorLib/LS/AlphaFASTTIMECONSTANT.npy
./GScintillatorLib/LS/AlphaSLOWTIMECONSTANT.npy
./GScintillatorLib/LS/AlphaYIELDRATIO.npy
./GScintillatorLib/LS/FASTCOMPONENT.npy
./GScintillatorLib/LS/GammaFASTTIMECONSTANT.npy
./GScintillatorLib/LS/GammaSLOWTIMECONSTANT.npy
./GScintillatorLib/LS/GammaYIELDRATIO.npy
./GScintillatorLib/LS/NeutronFASTTIMECONSTANT.npy
./GScintillatorLib/LS/NeutronSLOWTIMECONSTANT.npy
./GScintillatorLib/LS/NeutronYIELDRATIO.npy
./GScintillatorLib/LS/RAYLEIGH.npy
./GScintillatorLib/LS/ReemissionFASTTIMECONSTANT.npy
./GScintillatorLib/LS/REEMISSIONPROB.npy
./GScintillatorLib/LS/ReemissionSLOWTIMECONSTANT.npy
./GScintillatorLib/LS/ReemissionYIELDRATIO.npy
./GScintillatorLib/LS/RESOLUTIONSCALE.npy
./GScintillatorLib/LS/RINDEX.npy
./GScintillatorLib/LS/SCINTILLATIONYIELD.npy
./GScintillatorLib/LS/SLOWCOMPONENT.npy
./GSourceLib
./GSourceLib/GSourceLib.npy
./GSurfaceLib
./GSurfaceLib/GSurfaceLib.npy
./GSurfaceLib/GSurfaceLibOptical.npy
./GTreePresent.txt
./MeshIndexLocal.json
./MeshIndexSource.json</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../ana/tools.html" title="Tools : bash, python, numpy, ipython, matplotlib"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Opticks Overview"
             >previous</a> |</li>
        <li><a href="../index.html">Opticks 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2017, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>