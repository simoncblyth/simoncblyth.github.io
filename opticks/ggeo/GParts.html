
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>GParts &#8212; Opticks 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Opticks 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">GParts</a><ul>
<li><a class="reference internal" href="#todo-compare-with-old-gparts-buffers">TODO : compare with old GParts buffers</a></li>
<li><a class="reference internal" href="#structure-of-multi-complete-tree-buffers">Structure of multi-complete tree buffers</a></li>
<li><a class="reference internal" href="#single-primitive">Single Primitive</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/ggeo/GParts.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="gparts">
<h1>GParts<a class="headerlink" href="#gparts" title="Permalink to this headline">¶</a></h1>
<p>The structure of persisted GParts buffers in the geocache foe DayaBay geometry
is below examined.</p>
<div class="section" id="todo-compare-with-old-gparts-buffers">
<h2>TODO : compare with old GParts buffers<a class="headerlink" href="#todo-compare-with-old-gparts-buffers" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>epsilon:GPartsAnalytic blyth$ l
total 0
drwxr-xr-x  7 blyth  staff  - 238 Nov 29  2017 0
drwxr-xr-x  6 blyth  staff  - 204 Nov 29  2017 2
drwxr-xr-x  6 blyth  staff  - 204 Nov 29  2017 3
drwxr-xr-x  6 blyth  staff  - 204 Nov 29  2017 4
drwxr-xr-x  6 blyth  staff  - 204 Nov 29  2017 5
epsilon:GPartsAnalytic blyth$ np.py
/Volumes/Delta/usr/local/opticks/geocache/DayaBay_VGDX_20140414-1300/g4_00.dae/96ff965744a2f6b78c24e33c80d3a4cd/1/GPartsAnalytic
      ./0/GParts.txt : 11984
  ./0/partBuffer.npy : (11984, 4, 4)
  ./0/planBuffer.npy : (672, 4)
  ./0/primBuffer.npy : (3116, 4)
  ./0/tranBuffer.npy : (5344, 3, 4, 4)
      ./2/GParts.txt : 1
  ./2/partBuffer.npy : (1, 4, 4)
  ./2/primBuffer.npy : (1, 4)
  ./2/tranBuffer.npy : (1, 3, 4, 4)
      ./3/GParts.txt : 1
  ./3/partBuffer.npy : (1, 4, 4)
  ./3/primBuffer.npy : (1, 4)
  ./3/tranBuffer.npy : (1, 3, 4, 4)
      ./4/GParts.txt : 1
  ./4/partBuffer.npy : (1, 4, 4)
  ./4/primBuffer.npy : (1, 4)
  ./4/tranBuffer.npy : (1, 3, 4, 4)
      ./5/GParts.txt : 41
  ./5/partBuffer.npy : (41, 4, 4)
  ./5/primBuffer.npy : (5, 4)
  ./5/tranBuffer.npy : (12, 3, 4, 4)
epsilon:GPartsAnalytic blyth$ l 0/
total 4464
-rw-r--r--  1 blyth  staff  -  419982 Nov 29  2017 GParts.txt
-rw-r--r--  1 blyth  staff  -  767056 Nov 29  2017 partBuffer.npy
-rw-r--r--  1 blyth  staff  -   10832 Nov 29  2017 planBuffer.npy
-rw-r--r--  1 blyth  staff  -   49936 Nov 29  2017 primBuffer.npy
-rw-r--r--  1 blyth  staff  - 1026128 Nov 29  2017 tranBuffer.npy
epsilon:GPartsAnalytic blyth$
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>epsilon:0 blyth$ np.py primBuffer.npy
(3116, 4)
...
u32
[[    0     1     0     0]
 [    1     1     1     0]
 [    2     1     2     0]
 ...
 [11981     1  5341   672]
 [11982     1  5342   672]
 [11983     1  5343   672]]    # lots of transforms, quite a few planes
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">a</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
<span class="n">array</span><span class="p">([[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mi">2</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mi">3</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">10</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>   <span class="mi">5</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">17</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">24</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>   <span class="mi">9</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">31</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>  <span class="mi">11</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">38</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>  <span class="mi">14</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">41</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>  <span class="mi">15</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">44</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>  <span class="mi">16</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">47</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>  <span class="mi">17</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">48</span><span class="p">,</span>   <span class="mi">7</span><span class="p">,</span>  <span class="mi">18</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">55</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>  <span class="mi">20</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">a</span><span class="p">[:</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span>
<span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
       <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">a</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="mi">31</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">a</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">10</span><span class="p">]:</span>
<span class="p">(</span><span class="n">array</span><span class="p">([</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">31</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">),</span>
 <span class="n">array</span><span class="p">([</span> <span class="mi">638</span><span class="p">,</span> <span class="mi">2140</span><span class="p">,</span>  <span class="mi">190</span><span class="p">,</span>   <span class="mi">62</span><span class="p">,</span>   <span class="mi">86</span><span class="p">]))</span>


<span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;tranBuffer.npy&quot;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">t</span><span class="o">.</span><span class="n">shape</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="p">(</span><span class="mi">5344</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">t</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
<span class="n">array</span><span class="p">([[[[</span>      <span class="mf">0.5432</span><span class="p">,</span>      <span class="o">-</span><span class="mf">0.8396</span><span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">],</span>
         <span class="p">[</span>      <span class="mf">0.8396</span><span class="p">,</span>       <span class="mf">0.5432</span><span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">],</span>
         <span class="p">[</span>      <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">1.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">],</span>
         <span class="p">[</span> <span class="o">-</span><span class="mf">18079.453</span> <span class="p">,</span> <span class="o">-</span><span class="mf">799699.44</span>  <span class="p">,</span>   <span class="o">-</span><span class="mf">6605.</span>    <span class="p">,</span>       <span class="mf">1.</span>    <span class="p">]],</span>

        <span class="p">[[</span>      <span class="mf">0.5432</span><span class="p">,</span>       <span class="mf">0.8396</span><span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">],</span>
         <span class="p">[</span>     <span class="o">-</span><span class="mf">0.8396</span><span class="p">,</span>       <span class="mf">0.5432</span><span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">],</span>
         <span class="p">[</span>      <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">1.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">],</span>
         <span class="p">[</span><span class="o">-</span><span class="mf">661623.25</span>  <span class="p">,</span>  <span class="mf">449556.2</span>   <span class="p">,</span>    <span class="mf">6605.</span>    <span class="p">,</span>       <span class="mf">1.</span>    <span class="p">]],</span>

        <span class="p">[[</span>      <span class="mf">0.5432</span><span class="p">,</span>      <span class="o">-</span><span class="mf">0.8396</span><span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span> <span class="o">-</span><span class="mf">661623.25</span>  <span class="p">],</span>
         <span class="p">[</span>      <span class="mf">0.8396</span><span class="p">,</span>       <span class="mf">0.5432</span><span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>  <span class="mf">449556.2</span>   <span class="p">],</span>
         <span class="p">[</span>      <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">1.</span>    <span class="p">,</span>    <span class="mf">6605.</span>    <span class="p">],</span>
         <span class="p">[</span>      <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">0.</span>    <span class="p">,</span>       <span class="mf">1.</span>    <span class="p">]]],</span>
</pre></div>
</div>
</div>
<div class="section" id="structure-of-multi-complete-tree-buffers">
<h2>Structure of multi-complete tree buffers<a class="headerlink" href="#structure-of-multi-complete-tree-buffers" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>slot zero corresponds to the non-instanced global geometry</li>
<li>note the primBuffer.npy has starting part index and complete binary tree size</li>
<li>binary tree sizes are always power of two minus 1</li>
<li>note some big complete binary trees in need of balancing</li>
</ul>
<p>/usr/local/opticks/geocache/CX4GDMLTest_World0xc15cfc0_PV_g4live/g4ok_gltf/828722902b5e94dab05ac248329ffebe/1/GParts/0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>total 6168
-rw-r--r--  1 blyth  staff  -  692248 Jun 26 13:18 GParts.txt
-rw-r--r--  1 blyth  staff  -    5104 Jun 26 13:18 primBuffer.npy
-rw-r--r--  1 blyth  staff  - 2452944 Jun 26 13:18 partBuffer.npy

epsilon:0 blyth$ wc -l GParts.txt
   38326 GParts.txt

In [1]: a = np.load(&quot;primBuffer.npy&quot;)   ## start part and complete binary tree size, note some big ones in need of balancing

In [2]: a.shape
Out[2]: (314, 4)

In [8]: a[:100]
Out[8]:
array([[    0,     1,     0,     0],
       [    1,     1,     0,     0],
       [    2,     1,     0,     0],
       [    3,     7,     0,     0],
       [   10,     7,     0,     0],
       [   17,     7,     0,     0],
       [   24,     7,     0,     0],
       [   31,     7,     0,     0],
       [   38,     3,     0,     0],
       [   41,     1,     0,     0],
       [   42,     1,     0,     0],
       [   43,     3,     0,     0],
       [   46,     1,     0,     0],
       [   47,     1,     0,     0],
       [   48,     3,     0,     0],
       [   51,     1,     0,     0],
       [   52,     1,     0,     0],
       [   53,     3,     0,     0],
       [   56,     1,     0,     0],
       [   57,     1,     0,     0],
       [   58,     3,     0,     0],
       [   61,     1,     0,     0],
       [   62,     1,     0,     0],
       [   63,     3,     0,     0],
       [   66,     1,     0,     0],
       [   67,     1,     0,     0],
       [   68,    63,     0,     0],
       [  131,    63,     0,     0],
       [  194,    63,     0,     0],
       [  257,    63,     0,     0],
       [  320,     1,     0,     0],
       [  321,     1,     0,     0],
       [  322,     3,     0,     0],
       [  325,     3,     0,     0],
       [  328,     3,     0,     0],
       [  331,     3,     0,     0],
       [  334,     3,     0,     0],
       [  337,     1,     0,     0],
       [  338,     1,     0,     0],
       [  339,     1,     0,     0],
       [  340,  2047,     0,     0],
       [ 2387,     7,     0,     0],
       [ 2394,     7,     0,     0],
       [ 2401,     7,     0,     0],
       [ 2408,  2047,     0,     0],
       [ 4455,     7,     0,     0],
       [ 4462,     1,     0,     0],

In [17]: a[-5:]
Out[17]:
array([[38311,     3,     0,     0],
       [38314,     3,     0,     0],
       [38317,     3,     0,     0],
       [38320,     3,     0,     0],
       [38323,     3,     0,     0]], dtype=int32)


In [3]: b = np.load(&quot;partBuffer.npy&quot;)

In [4]: b.shape
Out[4]: (38326, 4, 4)


In [12]: a[:,0].min(), a[:,0].max()
Out[12]: (0, 38323)

In [14]: b = np.load(&quot;partBuffer.npy&quot;)

In [15]: b.shape
Out[15]: (38326, 4, 4)
</pre></div>
</div>
<p>z,w are tran and plan offsets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>03 #include &quot;quad.h&quot;
 4
 5 struct Prim
 6 {
 7     __device__ int partOffset() const { return  q0.i.x ; }
 8     __device__ int numParts()   const { return  q0.i.y &lt; 0 ? -q0.i.y : q0.i.y ; }
 9     __device__ int tranOffset() const { return  q0.i.z ; }
10     __device__ int planOffset() const { return  q0.i.w ; }
11     __device__ int primFlag()   const { return  q0.i.y &lt; 0 ? CSG_FLAGPARTLIST : CSG_FLAGNODETREE ; }
12
13     quad q0 ;
14
15 };
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#/usr/local/opticks/geocache/CX4GDMLTest_World0xc15cfc0_PV_g4live/g4ok_gltf/828722902b5e94dab05ac248329ffebe/1/GParts/2

-rw-r--r--  1 blyth  staff  -  724 Jun 26 13:18 GParts.txt
-rw-r--r--  1 blyth  staff  -  160 Jun 26 13:18 primBuffer.npy
-rw-r--r--  1 blyth  staff  - 2704 Jun 26 13:18 partBuffer.npy

epsilon:2 blyth$ wc -l GParts.txt
      41 GParts.txt

epsilon:2 blyth$ np.py primBuffer.npy  ## primBuffer is &quot;index&quot; into the multiple complete binary trees in the partBuffer
(5, 4)
f32
[[0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]]
u32
[[ 0 15  0  0]
 [15 15  0  0]
 [30  7  0  0]
 [37  3  0  0]
 [40  1  0  0]]

epsilon:2 blyth$ np.py partBuffer.npy
(41, 4, 4)
f32
</pre></div>
</div>
<p>Size of the partBuffer for the global merge seems a bit alarming initially,
but on reflection it is not such a big deal as the intersect CUDA programs
have a primIdx argument that always focusses on a single one of those
complete binary trees.</p>
<ul class="simple">
<li>The alarming thing is the size of some of the binary trees.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">249</span> <span class="n">RT_PROGRAM</span> <span class="n">void</span> <span class="n">intersect</span><span class="p">(</span><span class="nb">int</span> <span class="n">primIdx</span><span class="p">)</span>
<span class="mi">250</span> <span class="p">{</span>
<span class="mi">251</span>     <span class="n">const</span> <span class="n">Prim</span><span class="o">&amp;</span> <span class="n">prim</span>    <span class="o">=</span> <span class="n">primBuffer</span><span class="p">[</span><span class="n">primIdx</span><span class="p">];</span>
<span class="mi">252</span>
<span class="mi">253</span>     <span class="n">unsigned</span> <span class="n">partOffset</span>  <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">partOffset</span><span class="p">()</span> <span class="p">;</span>
<span class="mi">254</span>     <span class="n">unsigned</span> <span class="n">numParts</span>    <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">numParts</span><span class="p">()</span> <span class="p">;</span>
<span class="mi">255</span>     <span class="n">unsigned</span> <span class="n">primFlag</span>    <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">primFlag</span><span class="p">()</span> <span class="p">;</span>
<span class="mi">256</span>
<span class="mi">257</span>     <span class="n">uint4</span> <span class="n">identity</span> <span class="o">=</span> <span class="n">identityBuffer</span><span class="p">[</span><span class="n">instance_index</span><span class="p">]</span> <span class="p">;</span>
<span class="mi">258</span>
<span class="mi">259</span>     <span class="k">if</span><span class="p">(</span><span class="n">primFlag</span> <span class="o">==</span> <span class="n">CSG_FLAGNODETREE</span><span class="p">)</span>
<span class="mi">260</span>     <span class="p">{</span>
<span class="mi">261</span>         <span class="n">Part</span> <span class="n">pt0</span> <span class="o">=</span> <span class="n">partBuffer</span><span class="p">[</span><span class="n">partOffset</span> <span class="o">+</span> <span class="mi">0</span><span class="p">]</span> <span class="p">;</span>
<span class="mi">262</span>
<span class="mi">263</span>         <span class="n">identity</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">pt0</span><span class="o">.</span><span class="n">boundary</span><span class="p">()</span> <span class="p">;</span>        <span class="o">//</span> <span class="n">replace</span> <span class="n">placeholder</span> <span class="n">zero</span> <span class="k">with</span> <span class="n">test</span> <span class="n">analytic</span> <span class="n">geometry</span> <span class="n">root</span> <span class="n">node</span> <span class="n">boundary</span>
<span class="mi">264</span>
<span class="mi">265</span>         <span class="n">evaluative_csg</span><span class="p">(</span> <span class="n">prim</span><span class="p">,</span> <span class="n">identity</span> <span class="p">);</span>
<span class="mi">266</span>         <span class="o">//</span><span class="n">intersect_csg</span><span class="p">(</span> <span class="n">prim</span><span class="p">,</span> <span class="n">identity</span> <span class="p">);</span>
<span class="mi">267</span>
<span class="mi">268</span>     <span class="p">}</span>
<span class="mi">269</span>     <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">primFlag</span> <span class="o">==</span> <span class="n">CSG_FLAGINVISIBLE</span><span class="p">)</span>
<span class="mi">270</span>     <span class="p">{</span>
<span class="mi">271</span>         <span class="o">//</span> <span class="n">do</span> <span class="n">nothing</span> <span class="p">:</span> <span class="n">report</span> <span class="n">no</span> <span class="n">intersections</span> <span class="k">for</span> <span class="n">primitives</span> <span class="n">marked</span> <span class="k">with</span> <span class="n">primFlag</span> <span class="n">CSG_FLAGINVISIBLE</span>
<span class="mi">272</span>     <span class="p">}</span>
</pre></div>
</div>
<p>Current limit is height 7 corresponding to 255 nodes, which some
of the prims exceed (probably the cause of missing geometry in the X4 ?):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">544</span> <span class="n">static</span> <span class="n">__device__</span>
<span class="mi">545</span> <span class="n">void</span> <span class="n">evaluative_csg</span><span class="p">(</span> <span class="n">const</span> <span class="n">Prim</span><span class="o">&amp;</span> <span class="n">prim</span><span class="p">,</span> <span class="n">const</span> <span class="n">uint4</span><span class="o">&amp;</span> <span class="n">identity</span> <span class="p">)</span>
<span class="mi">546</span> <span class="p">{</span>
<span class="mi">547</span>     <span class="n">unsigned</span> <span class="n">partOffset</span> <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">partOffset</span><span class="p">()</span> <span class="p">;</span>
<span class="mi">548</span>     <span class="n">unsigned</span> <span class="n">numParts</span>   <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">numParts</span><span class="p">()</span> <span class="p">;</span>
<span class="mi">549</span>     <span class="n">unsigned</span> <span class="n">tranOffset</span> <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">tranOffset</span><span class="p">()</span> <span class="p">;</span>
<span class="mi">550</span>
<span class="mi">551</span>     <span class="n">unsigned</span> <span class="n">height</span> <span class="o">=</span> <span class="n">TREE_HEIGHT</span><span class="p">(</span><span class="n">numParts</span><span class="p">)</span> <span class="p">;</span> <span class="o">//</span> <span class="mi">1</span><span class="o">-&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="o">-&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="o">-&gt;</span><span class="mi">2</span><span class="p">,</span> <span class="mi">15</span><span class="o">-&gt;</span><span class="mi">3</span><span class="p">,</span> <span class="mi">31</span><span class="o">-&gt;</span><span class="mi">4</span>
<span class="mi">552</span>
<span class="mi">553</span> <span class="c1">#ifdef USE_TWIDDLE_POSTORDER</span>
<span class="mi">554</span>     <span class="o">//</span> <span class="n">bit</span><span class="o">-</span><span class="n">twiddle</span> <span class="n">postorder</span> <span class="n">limited</span> <span class="n">to</span> <span class="n">height</span> <span class="mi">7</span><span class="p">,</span> <span class="n">ie</span> <span class="n">maximum</span> <span class="n">of</span> <span class="mh">0xff</span> <span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">nodes</span>
<span class="mi">555</span>     <span class="o">//</span> <span class="p">(</span><span class="n">using</span> <span class="mi">2</span><span class="o">-</span><span class="nb">bytes</span> <span class="k">with</span> <span class="n">PACK2</span> <span class="n">would</span> <span class="n">bump</span> <span class="n">that</span> <span class="n">to</span> <span class="mh">0xffff</span> <span class="p">(</span><span class="mi">65535</span><span class="p">)</span> <span class="n">nodes</span><span class="p">)</span>
<span class="mi">556</span>     <span class="o">//</span> <span class="n">In</span> <span class="nb">any</span> <span class="n">case</span> <span class="mh">0xff</span> <span class="n">nodes</span> <span class="n">are</span> <span class="n">far</span> <span class="n">more</span> <span class="n">than</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">with</span>
<span class="mi">557</span>     <span class="o">//</span>
<span class="mi">558</span>     <span class="k">if</span><span class="p">(</span><span class="n">height</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span>
<span class="mi">559</span>     <span class="p">{</span>
<span class="mi">560</span>         <span class="n">rtPrintf</span><span class="p">(</span><span class="s2">&quot;evaluative_csg tranOffset </span><span class="si">%u</span><span class="s2"> numParts </span><span class="si">%u</span><span class="s2"> perfect tree height </span><span class="si">%u</span><span class="s2"> exceeds current limit</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">tranOffset</span><span class="p">,</span> <span class="n">numParts</span><span class="p">,</span> <span class="n">height</span> <span class="p">)</span> <span class="p">;</span>
<span class="mi">561</span>         <span class="k">return</span> <span class="p">;</span>
<span class="mi">562</span>     <span class="p">}</span>
<span class="mi">563</span> <span class="c1">#else</span>
<span class="mi">564</span>     <span class="o">//</span> <span class="n">pre</span><span class="o">-</span><span class="n">baked</span> <span class="n">postorder</span> <span class="n">limited</span> <span class="n">to</span> <span class="n">height</span> <span class="mi">3</span> <span class="n">tree</span><span class="p">,</span>  <span class="n">ie</span> <span class="n">maximum</span> <span class="n">of</span> <span class="mh">0xf</span> <span class="n">nodes</span>
<span class="mi">565</span>     <span class="o">//</span> <span class="n">by</span> <span class="n">needing</span> <span class="n">to</span> <span class="n">stuff</span> <span class="n">the</span> <span class="n">postorder</span> <span class="n">sequence</span> <span class="mh">0x137fe6dc25ba498</span><span class="n">ull</span> <span class="n">into</span> <span class="mi">64</span> <span class="n">bits</span>
<span class="mi">566</span>     <span class="k">if</span><span class="p">(</span><span class="n">height</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">567</span>     <span class="p">{</span>
<span class="mi">568</span>         <span class="n">rtPrintf</span><span class="p">(</span><span class="s2">&quot;evaluative_csg tranOffset </span><span class="si">%u</span><span class="s2"> numParts </span><span class="si">%u</span><span class="s2"> perfect tree height </span><span class="si">%u</span><span class="s2"> exceeds current limit</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">tranOffset</span><span class="p">,</span> <span class="n">numParts</span><span class="p">,</span> <span class="n">height</span> <span class="p">)</span> <span class="p">;</span>
<span class="mi">569</span>         <span class="k">return</span> <span class="p">;</span>
<span class="mi">570</span>     <span class="p">}</span>
<span class="mi">571</span>     <span class="n">const</span> <span class="n">unsigned</span> <span class="n">long</span> <span class="n">long</span> <span class="n">postorder_sequence</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x1</span><span class="n">ull</span><span class="p">,</span> <span class="mh">0x132</span><span class="n">ull</span><span class="p">,</span> <span class="mh">0x1376254</span><span class="n">ull</span><span class="p">,</span> <span class="mh">0x137fe6dc25ba498</span><span class="n">ull</span> <span class="p">}</span> <span class="p">;</span>
<span class="mi">572</span>     <span class="n">unsigned</span> <span class="n">long</span> <span class="n">long</span> <span class="n">postorder</span> <span class="o">=</span> <span class="n">postorder_sequence</span><span class="p">[</span><span class="n">height</span><span class="p">]</span> <span class="p">;</span>
<span class="mi">573</span> <span class="c1">#endif</span>
</pre></div>
</div>
</div>
<div class="section" id="single-primitive">
<h2>Single Primitive<a class="headerlink" href="#single-primitive" title="Permalink to this headline">¶</a></h2>
<p>A single primitive part is shaped (4,4) containing
float parameters, integer codes and bounding box info</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">makeSolidBuffer</span><span class="nd">@328</span><span class="p">]</span> <span class="n">GParts</span><span class="p">::</span><span class="n">solidify</span> <span class="n">i</span>   <span class="mi">0</span> <span class="n">nodeIndex</span>   <span class="mi">0</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">makeSolidBuffer</span><span class="nd">@328</span><span class="p">]</span> <span class="n">GParts</span><span class="p">::</span><span class="n">solidify</span> <span class="n">i</span>   <span class="mi">1</span> <span class="n">nodeIndex</span>   <span class="mi">1</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">makeSolidBuffer</span><span class="nd">@328</span><span class="p">]</span> <span class="n">GParts</span><span class="p">::</span><span class="n">solidify</span> <span class="n">i</span>   <span class="mi">2</span> <span class="n">nodeIndex</span>   <span class="mi">2</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">dump</span><span class="nd">@569</span><span class="p">]</span> <span class="n">GParts</span><span class="p">::</span><span class="n">dump</span> <span class="n">OGeo</span><span class="p">::</span><span class="n">makeAnalyticGeometry</span> <span class="n">pts</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">dumpSolidInfo</span><span class="nd">@385</span><span class="p">]</span> <span class="n">OGeo</span><span class="p">::</span><span class="n">makeAnalyticGeometry</span> <span class="n">pts</span> <span class="p">(</span><span class="n">part_offset</span><span class="p">,</span> <span class="n">parts_for_solid</span><span class="p">,</span> <span class="n">solid_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="n">numSolids</span><span class="p">:</span><span class="mi">3</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">dumpSolidInfo</span><span class="nd">@390</span><span class="p">]</span>  <span class="p">(</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">)</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">dumpSolidInfo</span><span class="nd">@390</span><span class="p">]</span>  <span class="p">(</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">)</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">dumpSolidInfo</span><span class="nd">@390</span><span class="p">]</span>  <span class="p">(</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">)</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.698</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">GParts</span><span class="p">::</span><span class="n">dump</span><span class="nd">@581</span><span class="p">]</span> <span class="n">GParts</span><span class="p">::</span><span class="n">dump</span> <span class="n">ni</span> <span class="mi">3</span>
     <span class="mf">0.0000</span>      <span class="mf">0.0000</span>      <span class="mf">0.0000</span>   <span class="mf">1200.0000</span>
     <span class="mf">0.0000</span>       <span class="mi">0</span> <span class="nb">id</span>       <span class="mi">123</span> <span class="n">bnd</span>        <span class="mi">0</span> <span class="n">flg</span>   <span class="n">bn</span> <span class="n">Rock</span><span class="o">//</span><span class="n">perfectAbsorbSurface</span><span class="o">/</span><span class="n">Vacuum</span>
 <span class="o">-</span><span class="mf">1200.0100</span>  <span class="o">-</span><span class="mf">1200.0100</span>  <span class="o">-</span><span class="mf">1200.0100</span>           <span class="mi">3</span> <span class="p">(</span><span class="n">Box</span><span class="p">)</span>
  <span class="mf">1200.0100</span>   <span class="mf">1200.0100</span>   <span class="mf">1200.0100</span>           <span class="mi">0</span> <span class="p">(</span><span class="n">nodeIndex</span><span class="p">)</span>

     <span class="mf">0.0000</span>      <span class="mf">0.0000</span>   <span class="o">-</span><span class="mf">600.0000</span>    <span class="mf">641.2000</span>
     <span class="mf">0.0000</span>       <span class="mi">1</span> <span class="nb">id</span>       <span class="mi">124</span> <span class="n">bnd</span>        <span class="mi">0</span> <span class="n">flg</span>   <span class="n">bn</span> <span class="n">Vacuum</span><span class="o">///</span><span class="n">MainH2OHale</span>
  <span class="o">-</span><span class="mf">226.1460</span>   <span class="o">-</span><span class="mf">226.1460</span>     <span class="o">-</span><span class="mf">0.0100</span>           <span class="mi">1</span> <span class="p">(</span><span class="n">Sphere</span><span class="p">)</span>
   <span class="mf">226.1460</span>    <span class="mf">226.1460</span>     <span class="mf">41.2100</span>           <span class="mi">1</span> <span class="p">(</span><span class="n">nodeIndex</span><span class="p">)</span>

     <span class="mf">0.0000</span>      <span class="mf">0.0000</span>    <span class="mf">600.0000</span>    <span class="mf">641.2000</span>
     <span class="mf">0.0000</span>       <span class="mi">2</span> <span class="nb">id</span>       <span class="mi">124</span> <span class="n">bnd</span>        <span class="mi">0</span> <span class="n">flg</span>   <span class="n">bn</span> <span class="n">Vacuum</span><span class="o">///</span><span class="n">MainH2OHale</span>
  <span class="o">-</span><span class="mf">226.1460</span>   <span class="o">-</span><span class="mf">226.1460</span>    <span class="o">-</span><span class="mf">41.2100</span>           <span class="mi">1</span> <span class="p">(</span><span class="n">Sphere</span><span class="p">)</span>
   <span class="mf">226.1460</span>    <span class="mf">226.1460</span>      <span class="mf">0.0100</span>           <span class="mi">2</span> <span class="p">(</span><span class="n">nodeIndex</span><span class="p">)</span>

<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.699</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="n">NPY</span><span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span><span class="p">::</span><span class="n">dump</span><span class="nd">@1088</span><span class="p">]</span> <span class="n">OGeo</span><span class="p">::</span><span class="n">makeAnalyticGeometry</span> <span class="n">partBuf</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="p">(</span>  <span class="mi">0</span><span class="p">)</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>    <span class="mf">1200.000</span>
<span class="p">(</span>  <span class="mi">0</span><span class="p">)</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">0</span><span class="p">)</span>   <span class="o">-</span><span class="mf">1200.010</span>   <span class="o">-</span><span class="mf">1200.010</span>   <span class="o">-</span><span class="mf">1200.010</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">0</span><span class="p">)</span>    <span class="mf">1200.010</span>    <span class="mf">1200.010</span>    <span class="mf">1200.010</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">1</span><span class="p">)</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>    <span class="o">-</span><span class="mf">600.000</span>     <span class="mf">641.200</span>
<span class="p">(</span>  <span class="mi">1</span><span class="p">)</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">1</span><span class="p">)</span>    <span class="o">-</span><span class="mf">226.146</span>    <span class="o">-</span><span class="mf">226.146</span>      <span class="o">-</span><span class="mf">0.010</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">1</span><span class="p">)</span>     <span class="mf">226.146</span>     <span class="mf">226.146</span>      <span class="mf">41.210</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">2</span><span class="p">)</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>     <span class="mf">600.000</span>     <span class="mf">641.200</span>
<span class="p">(</span>  <span class="mi">2</span><span class="p">)</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">2</span><span class="p">)</span>    <span class="o">-</span><span class="mf">226.146</span>    <span class="o">-</span><span class="mf">226.146</span>     <span class="o">-</span><span class="mf">41.210</span>       <span class="mf">0.000</span>
<span class="p">(</span>  <span class="mi">2</span><span class="p">)</span>     <span class="mf">226.146</span>     <span class="mf">226.146</span>       <span class="mf">0.010</span>       <span class="mf">0.000</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">05</span> <span class="mi">20</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">00.699</span> <span class="n">INFO</span>  <span class="p">[</span><span class="mi">748507</span><span class="p">]</span> <span class="p">[</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">::</span><span class="n">dump</span><span class="nd">@1088</span><span class="p">]</span> <span class="n">OGeo</span><span class="p">::</span><span class="n">makeAnalyticGeometry</span> <span class="n">solidBuf</span> <span class="n">partOffset</span><span class="o">/</span><span class="n">numParts</span><span class="o">/</span><span class="n">solidIndex</span><span class="o">/</span><span class="mi">0</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="p">(</span>  <span class="mi">0</span><span class="p">)</span>           <span class="mi">0</span>           <span class="mi">1</span>           <span class="mi">0</span>           <span class="mi">0</span>
<span class="p">(</span>  <span class="mi">1</span><span class="p">)</span>           <span class="mi">1</span>           <span class="mi">1</span>           <span class="mi">1</span>           <span class="mi">0</span>
<span class="p">(</span>  <span class="mi">2</span><span class="p">)</span>           <span class="mi">2</span>           <span class="mi">1</span>           <span class="mi">2</span>           <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Opticks 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>