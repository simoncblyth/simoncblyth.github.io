<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>Optical Photon Simulation Progress</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7614 2013-02-21 15:55:51Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="visible" />
<!-- style sheet links -->
<script src="ui/my-small-white/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/my-small-white/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/my-small-white/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/my-small-white/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/my-small-white/opera.css"
      type="text/css" media="projection" id="operaFix" />
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>Optical Photon Simulation Progress</h1>

</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">Optical Photon Simulation Progress</h1>

<!-- comment -->
<style type="text/css">
    span.alarm { color: red; }
    span.warn { color: orange; }
    span.ok { color: green; }
    span.i { display: none; }
    pre.sliteral { class:"literal-block small"; }
    pre.mypre {
         display: block;
         font-family: monospace;
         font-size: 20px;
         white-space: pre;
         margin: 1em 0;
    }

</style><!-- Definitions of interpreted text roles (classes) for S5/HTML data. -->
<!-- This data file has been placed in the public domain. -->
<!-- Colours
======= -->
<!-- Text Sizes
========== -->
<!-- Display in Slides (Presentation Mode) Only
========================================== -->
<!-- Display in Outline Mode Only
============================ -->
<!-- Display in Print Only
===================== -->
<!-- Display in Handout Mode Only
============================ -->
<!-- Incremental Display
=================== -->

       <style type="text/css">

          div.slide { 
             background-clip: border-box;
             background-repeat: no-repeat;
             height: 100%;
          }
          div.slide#slide0{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20140419-170713.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#g4daeview-py-fast-opengl-3d-viewer-for-g4dae-files{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20140419-170713.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#cerenkov-photons-simulation-top-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-115923.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#cerenkov-photons-simulation-side-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-115935.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#scintillation-photons-simulation-top-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-121444.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#scintillation-photons-simulation-side-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-121435.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#standard-geant4-workflow{
             background-image: url(/env/keynotefigs/G4DAEChroma/G4DAEChroma.001.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#external-photon-simulation-workflow{
             background-image: url(/env/keynotefigs/G4DAEChroma/G4DAEChroma.002.png);
             background-size: auto auto;
             background-position: 0px 0px;
          }
          div.slide#ggeoview{
             background-image: url(/env/graphics/ggeoview/ggeoview-cerenkov-001.png);
             background-size: 1047px 795px;
             background-position: 0px 0px;
          }
          div.slide#ggeoview-m1-points{
             background-image: url(/env/graphics/ggeoview/ggeoview-scintillation-points-mat1.png);
             background-size: 1435px 848px;
             background-position: 0px 0px;
          }
          div.slide#ggeoview-flag-selection{
             background-image: url(/env/graphics/ggeoview/ggeoview-scintillation-flag-seq-select.png);
             background-size: 1436px 842px;
             background-position: 0px 0px;
          }
          div.slide#ggeoview-cerenkov-geom-m1{
             background-image: url(/env/graphics/ggeoview/ggeoview-cerenkov-m1-geom.png);
             background-size: 1416px 845px;
             background-position: 0px 0px;
          } 

       </style>
    <!-- comment

GGeoView image is 2094x1590 1047x795

GGeoView M1 Points is 2870x1696  1435x848

GGeoView Flag Selection 2872x1684 1436x842

GGeoView Cerenkov Geom M1 2832x1690 1416x845


Generated Scintillation Photons GPU cf Geant4
/env/g4dae/generated_scintillation_time_wavelength.png

G4/DetSim Generated Cerenkov Wavelength
/env/g4dae/g4_cerenkov_wavelength.png -->
<!-- comment

Last 6 weeks

implemented optical physics in OptiX infrastructure
squeeze photon record into 128 bit
record viz
photon history/material indexing -->
<p class="small"><a class="reference external" href="http://simoncblyth.bitbucket.org/env/presentation/optical_photon_simulation_progress.html">http://simoncblyth.bitbucket.org/env/presentation/optical_photon_simulation_progress.html</a> (October 2015)
<a class="reference external" href="http://simoncblyth.bitbucket.org/env/presentation/optical_photon_simulation_with_nvidia_optix.html">http://simoncblyth.bitbucket.org/env/presentation/optical_photon_simulation_with_nvidia_optix.html</a> (July 2015)
<a class="reference external" href="http://simoncblyth.bitbucket.org/env/presentation/gpu_accelerated_geant4_simulation.html">http://simoncblyth.bitbucket.org/env/presentation/gpu_accelerated_geant4_simulation.html</a> (Jan 2015)</p>
<p class="small"><strong>Executive Summary</strong></p>
<ul class="small simple">
<li>several large geometry issues solved</li>
<li>extreme speed objective looks inevitable</li>
<li>matching Geant4 : <span class="blue">still unclear how long to achieve</span></li>
</ul>
<p class="small"><strong>Contents</strong></p>
<ul class="small simple">
<li>Handling JUNO geometry</li>
<li>800x less memory with instancing</li>
<li>Analytic PMT geometry : avoiding <em>disco ball</em></li>
<li>IAV, OAV mesh fixing with OpenMesh surgery</li>
<li>Photon Torpedo testing</li>
<li>Optical Photons GPU resident</li>
<li>Progress Overview</li>
</ul>
<div class="small line-block">
<div class="line">Simon C Blyth, National Taiwan University</div>
<div class="line"><strong>October 2015</strong></div>
</div>

</div>
<div class="slide" id="handling-juno-geometry">
<h1><span class="small">Handling JUNO Geometry</span></h1>
<p class="small">Implemented OpenGL and OptiX instancing, to allow loading the full JUNO geometry.</p>
<img alt="/env/graphics/ggeoview/ggeoview-cerenkov-jpmt.png" class="align-center" src="/env/graphics/ggeoview/ggeoview-cerenkov-jpmt.png" style="width: 900px;" />
<table class="tiny docutils footnote" frame="void" id="hw" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>MacBook Pro (2013), NVIDIA GeForce GT 750M 2048 MB (384 cores);
Workstation GPU performance expected to scale by core count</td></tr>
</tbody>
</table>
</div>
<div class="slide" id="x-less-memory-due-to-instancing">
<h1><span class="small">800x less memory due to instancing</span></h1>
<p class="small">~90M triangles, vertex data alone too big for GPU memory,
mandatory instancing reduces to 0.1M</p>
<p class="small"><em>GTreeCheck</em> algorithm finds repeated geometry, splitting into:</p>
<ul class="small simple">
<li>one non-instanced mesh</li>
<li>4 instanced meshes corresponding
to 20-inch and 3-inch PMTs and support geometry.</li>
</ul>
<p class="small">Vertex, face, solid (<em>transforms</em>) and instance counts (<em>itransforms</em>):</p>
<pre class="mypre">

 mm  0 : vertices   47864 faces   95436 transforms  289733 itransforms       0
 mm  1 : vertices     277 faces     540 transforms       4 itransforms   36572
 mm  2 : vertices    1759 faces    3502 transforms       4 itransforms   19452
 mm  3 : vertices     914 faces    1856 transforms       1 itransforms     480
 mm  4 : vertices    4168 faces    6252 transforms     521 itransforms     124

   totVertices     54982  totFaces    107586

  vtotVertices  45349928 vtotFaces  89631348 (virtual: scaling by transforms)

  vfacVertices   824.814 vfacFaces   833.113 (virtual to total ratio)

</pre></div>
<div class="slide" id="analytic-pmt-geometry">
<h1><span class="small">Analytic PMT geometry</span></h1>
<ul class="small simple">
<li>triangulated PMT <em>disco ball</em> too unrealistic</li>
<li>parse detdesc XML to give CSG tree of primitives (boolean intersections, unions)</li>
<li>partition 5 CSG solids of PMT into 14 <strong>single primitive</strong> parts
at the geometrical intersections
(avoids implementing general CSG boolean handling on GPU)</li>
</ul>
<img alt="/env/nuwa/detdesc/pmt/hemi-pmt-solids.png" class="align-center" src="/env/nuwa/detdesc/pmt/hemi-pmt-solids.png" style="width: 900px;" />
</div>
<div class="slide" id="analytic-pmt-in-14-parts-instead-of-2928-triangles">
<h1><span class="small">Analytic PMT in 14 parts instead of 2928 triangles</span></h1>
<p class="small">Implemented OptiX PMT intersection based on sphere/cylinder part
intersection: solve quadratic, handle cases</p>
<img alt="/env/nuwa/detdesc/pmt/hemi-pmt-parts.png" class="align-center" src="/env/nuwa/detdesc/pmt/hemi-pmt-parts.png" style="width: 900px;" />
<p class="tiny">Sphere intersection only 2 cases, Cylinder 10 cases (axial, walls, endcap, outside/inside)</p>
</div>
<div class="slide" id="optix-ray-traced-analytic-pmt-geometry">
<h1><span class="small">OptiX Ray Traced Analytic PMT geometry</span></h1>
<p class="small">Analytic geometry: more realistic, faster, less memory, BUT a lot more effort than triangulated.</p>
<img alt="/env/nuwa/detdesc/pmt/hemi-pmt-analytic-near-clipped.png" class="align-center" src="/env/nuwa/detdesc/pmt/hemi-pmt-analytic-near-clipped.png" style="width: 900px;" />
<p class="tiny">Near clipped, orthographic projection.</p>
</div>
<div class="slide" id="analytic-pmts-together-with-triangulated-geometry">
<h1><span class="small">Analytic PMTs together with triangulated geometry</span></h1>
<p class="small">PMTs analytic, the rest triangulated</p>
<img alt="/env/nuwa/detdesc/pmt/analytic-pmt-optix-geometry.png" class="align-center" src="/env/nuwa/detdesc/pmt/analytic-pmt-optix-geometry.png" style="width: 900px;" />
</div>
<div class="slide" id="iav-oav-mesh-fixing-with-openmesh-surgery">
<h1><span class="small">IAV, OAV mesh fixing with OpenMesh surgery</span></h1>
<p class="small">Photon material provided by intersection boundary, all top lid photons Acrylic(yellow), not GdLS(red)</p>
<p class="small">Issue: some CSG unions split into multiple meshes with close parallel faces</p>
<ul class="small simple">
<li>~25 out of 250 meshes have issues eg Eulers Characteristic <tt class="docutils literal">V - E + F != 2</tt></li>
<li>fixed two critical ones: IAV, OAV.</li>
<li>close parallel faces causes flickering OpenGL render</li>
</ul>
<img alt="/env/graphics/ggeoview/mesh-fix-iav-oav.png" class="align-center" src="/env/graphics/ggeoview/mesh-fix-iav-oav.png" style="width: 900px;" />
</div>
<div class="slide" id="openmeshrap-package">
<h1><span class="small">OpenMeshRap package</span></h1>
<div class="sidebar">
<p class="first sidebar-title">Exploded Z across the mend</p>
<img alt="/env/graphics/ggeoview/openmeshrap-fix.png" class="last align-center" src="/env/graphics/ggeoview/openmeshrap-fix.png" style="width: 500px;" />
</div>
<p class="small">Created package <em>OpenMeshRap</em> to develop fix</p>
<ul class="small simple">
<li>based on open source project: <strong>OpenMesh</strong></li>
<li>extracts real topological meshes</li>
<li>finds close parallel faces between the meshes</li>
<li>deletes the extra faces</li>
<li>stitches the split mesh together with added triangles</li>
</ul>
</div>
<div class="slide" id="photon-torpedo-0">
<h1><span class="small">Photon Torpedo 0</span></h1>
<pre class="mypre">
ggv.sh --analyticmesh 1 \
      --torchconfig "frame=3199;radius=150;zenith_azimuth=1,0,1,0;source=0,0,1000;target=0,0,0"
</pre><img alt="/env/graphics/ggeoview/photon-torpedo-3199-0.png" class="align-center" src="/env/graphics/ggeoview/photon-torpedo-3199-0.png" style="width: 900px;" />
</div>
<div class="slide" id="photon-torpedo-1">
<h1><span class="small">Photon Torpedo 1</span></h1>
<p class="small">Full geometry too complicated. Working on dynamic test box for checking PMTs and optical physics simulation.</p>
<img alt="/env/graphics/ggeoview/photon-torpedo-3199-1.png" class="align-center" src="/env/graphics/ggeoview/photon-torpedo-3199-1.png" style="width: 900px;" />
</div>
<div class="slide" id="photon-torpedo-2">
<h1><span class="small">Photon Torpedo 2</span></h1>
<p class="small">Select photons according to their history, here just detected ones.</p>
<img alt="/env/graphics/ggeoview/photon-torpedo-3199-2.png" class="align-center" src="/env/graphics/ggeoview/photon-torpedo-3199-2.png" style="width: 900px;" />
</div>
<div class="slide" id="photon-torpedo-splashback">
<h1><span class="small">Photon Torpedo Splashback</span></h1>
<p class="small">Here with no geometry represented, just 0.5M <em>torch</em> photons</p>
<img alt="/env/graphics/ggeoview/photon-torpedo-3199-splashback.png" class="align-center" src="/env/graphics/ggeoview/photon-torpedo-3199-splashback.png" style="width: 900px;" />
</div>
<div class="slide" id="optical-photons-now-fully-gpu-resident">
<h1><span class="small">Optical Photons now fully GPU resident</span></h1>
<p class="small">All photon operations now done on GPU:</p>
<ul class="small simple">
<li>seeded (assigned gensteps)</li>
<li>generated</li>
<li>propagated</li>
<li>indexing material/interaction histories</li>
</ul>
<p class="small">Only PMT hits are copied back to CPU</p>
<p class="tiny">Thrust/CUDA/OptiX interop used to implement</p>
</div>
<div class="slide" id="prism-s-polarized">
<h1><span class="small">Prism S-Polarized</span></h1>
<p class="small">Quadrant of cylindrically directed S-polarized photons at 10 wavelengths (from 100 to 800 nm)
incident from left.</p>
<p class="tiny">S-polarization: perpendicular to incident plane</p>
<img alt="/env/numerics/npy/prism-spol-ripple.png" class="align-center" src="/env/numerics/npy/prism-spol-ripple.png" style="width: 900px;" />
</div>
<div class="slide" id="prism-p-polarized">
<h1><span class="small">Prism P-Polarized</span></h1>
<p class="small">Gap in reflection at Brewsters angle is apparent where
the P-polarized photons can only be transmitted.</p>
<p class="tiny">P-polarization: not perpendicular to incident plane</p>
<img alt="/env/numerics/npy/prism-ppol-ripple.png" class="align-center" src="/env/numerics/npy/prism-ppol-ripple.png" style="width: 900px;" />
</div>
<div class="slide" id="monochromatic-expected-vs-simulated-reflection">
<h1><span class="small">Monochromatic : expected vs simulated reflection</span></h1>
<p class="small">Comparison of simulated absolute reflection of S and P polarized single events against
expectation from Fresnel formula. Using uniform planar incident cyclindrically directed light.</p>
<img alt="/env/numerics/npy/reflection.png" class="align-center" src="/env/numerics/npy/reflection.png" style="width: 900px;" />
</div>
<div class="slide" id="prism-deviation-vs-incident-angles-for-10-wavelengths">
<h1><span class="small">Prism Deviation vs Incident angles for 10 wavelengths</span></h1>
<p class="small">Prism geometry and Snell's law at two refractions allows deviation
angle vs incident angle to be predicted.  Comparison of simulation
results with expectations for 10 wavelengths
using refractive index of Schott F2 Flint Glass.</p>
<img alt="/env/numerics/npy/prism-deviation.png" class="align-center" src="/env/numerics/npy/prism-deviation.png" style="width: 900px;" />
</div>
<div class="slide" id="lens-focussing">
<h1><span class="small">Lens focussing</span></h1>
<p class="small">Lens constructed from intersection of two spheres.
Disc parallel beam incident from left.
Color represents polarization direction.  2nd reflections
are apparent.</p>
<img alt="/env/graphics/ggeoview/lens-polcolor.png" class="align-center" src="/env/graphics/ggeoview/lens-polcolor.png" style="width: 900px;" />
</div>
<div class="slide" id="progress-overview">
<h1><span class="small">Progress Overview</span></h1>
<p class="small"><strong>Resolved several large obvious geometry problems</strong></p>
<ul class="small simple">
<li>squeezing JUNO geometry onto GPU with instancing</li>
<li>fixing bad triangulations using OpenMesh surgery</li>
<li>replace triangulated PMTs with more realistic analytic ones</li>
</ul>
<p class="small"><strong>Optical physics problems expected next</strong></p>
<ul class="small simple">
<li>need Geant4 comparison to find the next issue</li>
<li>will start validations using simple test geometries</li>
</ul>
<p class="small"><strong>Refactoring Material/Surface/Boundary code</strong></p>
<ul class="small simple">
<li>enable dynamic simple test geometries,<ul>
<li>spheres of each material, surface</li>
<li>PMT test black boxes</li>
</ul>
</li>
</ul>
</div>
</div>
</body>
</html>
