<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>JUNO Opticks/Geant4 Optical Photon Simulation Matching</title>
<meta content="Navigate the HTML slides by entering a page number and pressing return" name="note" />
<meta content="JUNO Geant4/Opticks Optical Simulation Matching" name="title" />
<meta content="(Jul 2021)" name="description" />
<meta content="https://simoncblyth.bitbucket.io/env/presentation/juno_opticks_20210712.html" name="url" />
<meta content="12 July 2021" name="date" />
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="ui/my-small-white/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/my-small-white/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/my-small-white/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/my-small-white/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/my-small-white/opera.css"
      type="text/css" media="projection" id="operaFix" />
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>JUNO Opticks/Geant4 Optical Photon Simulation Matching</h1>

</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">JUNO Opticks/Geant4 Optical Photon Simulation Matching</h1>

<!-- comment

https://docutils.sourceforge.io/docutils/parsers/rst/include/

https://docutils.sourceforge.io/docutils/parsers/rst/include/isogrk1.txt

.. raw:: html

   <span>&nbsp;</span>

.. raw:: html

   <hr/>

.. class:: small


    +- - - - - - - - - - - -+- - - - - - - - - - - -+- - - - - - - - - - -+
    | Header 1     Header 2     Header 3  |
    +- - - - - - - - - - - -+- - - - - - - - - - - -+- - - - - - - - - - -+
    | Header 1   | Header 2   | Header 3  |
    +============+============+===========+
    | body row 1 | column 2   | column 3  |
    +- - - - - - - - - - - -+- - - - - - - - - - - -+- - - - - - - - - - -+
    | body row 2 | Cells may span columns.|
    +- - - - - - - - - - - -+- - - - - - - - - - - -+- - - - - - - - - - -+
    | body row 3 | Cells may  | - Cells   |
    +- - - - - - - - - - - -+ span rows. | - contain |
    | body row 4 |            | - blocks. |
    +- - - - - - - - - - - -+- - - - - - - - - - - -+- - - - - - - - - - -+ -->
<!-- Definitions of interpreted text roles (classes) for S5/HTML data. -->
<!-- This data file has been placed in the public domain. -->
<!-- Colours
======= -->
<!-- Text Sizes
========== -->
<!-- Display in Slides (Presentation Mode) Only
========================================== -->
<!-- Display in Outline Mode Only
============================ -->
<!-- Display in Print Only
===================== -->
<!-- Display in Handout Mode Only
============================ -->
<!-- Incremental Display
=================== -->
<!-- This data file has been placed in the public domain. -->
<!-- Derived from the Unicode character mappings available from
<http://www.w3.org/2003/entities/xml/>.
Processed by unicode2rstsubs.py, part of Docutils:
<http://docutils.sourceforge.net>. -->
<!-- This data file has been placed in the public domain. -->
<!-- Derived from the Unicode character mappings available from
<http://www.w3.org/2003/entities/xml/>.
Processed by unicode2rstsubs.py, part of Docutils:
<http://docutils.sourceforge.net>. -->
<!-- This data file has been placed in the public domain. -->
<!-- Derived from the Unicode character mappings available from
<http://www.w3.org/2003/entities/xml/>.
Processed by unicode2rstsubs.py, part of Docutils:
<http://docutils.sourceforge.net>. -->

       <style type="text/css">

          div.slide { 
             background-clip: border-box;
             background-repeat: no-repeat;
             height: 100%;
          }
          div.slide#slide0-disabled{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#detector-geometry-in-opticks{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-benefits{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#visualizing-an-optical-photon-simulation{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 640px 360px;
             background-position: 600px 100px;
             
          }
          div.slide#overview{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#g4daeview-py-fast-opengl-3d-viewer-for-g4dae-files{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20140419-170713.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#cerenkov-photons-simulation-top-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-115923.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#cerenkov-photons-simulation-side-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-115935.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#scintillation-photons-simulation-top-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-121444.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#scintillation-photons-simulation-side-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-121435.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#standard-geant4-workflow{
             background-image: url(/env/keynotefigs/G4DAEChroma/G4DAEChroma.001.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#external-photon-simulation-workflow{
             background-image: url(/env/keynotefigs/G4DAEChroma/G4DAEChroma.002.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#geant4opticksworkflow{
             background-image: url(/env/Documents/Geant4OpticksWorkflow/Geant4OpticksWorkflow.001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#geant4opticksworkflow-2{
             background-image: url(/env/Documents/Geant4OpticksWorkflow/Geant4OpticksWorkflow.001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview{
             background-image: url(/env/graphics/ggeoview/ggeoview-cerenkov-001.png);
             background-size: 1047px 795px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview-m1-points{
             background-image: url(/env/graphics/ggeoview/ggeoview-scintillation-points-mat1.png);
             background-size: 1435px 848px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview-flag-selection{
             background-image: url(/env/graphics/ggeoview/ggeoview-scintillation-flag-seq-select.png);
             background-size: 1436px 842px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview-cerenkov-geom-m1{
             background-image: url(/env/graphics/ggeoview/ggeoview-cerenkov-m1-geom.png);
             background-size: 1416px 845px;
             background-position: 0px 0px;
             
          }
          div.slide#detecting-neutrinos-via-optical-photons-1{
             background-image: url(/env/presentation/dayabay-principal_half.png);
             background-size: 1417px 830px;
             background-position: 0px 0px;
             
          }
          div.slide#detecting-neutrinos-via-optical-photons-2{
             background-image: url(/env/presentation/dayabay-principal_half.png);
             background-size: 1417px 830px;
             background-position: 0px 0px;
             
          }
          div.slide#opengl-instancing{
             background-image: url(/env/presentation/dayabay-principal_half.png);
             background-size: 1417px 830px;
             background-position: 0px 0px;
             
          }
          div.slide#opengl-instancing-2{
             background-image: url(/env/presentation/dayabay-principal_half.png);
             background-size: 1417px 830px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-inside-wide{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_half.png);
             background-size: 1432px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-wide{
             background-image: url(/env/graphics/ggeoview/jpmt-wide_half.png);
             background-size: 1409px 836px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-headview{
             background-image: url(/env/graphics/ggeoview/jpmt-headview_half.png);
             background-size: 1308px 783px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-backview{
             background-image: url(/env/graphics/ggeoview/jpmt-backview_half.png);
             background-size: 1149px 794px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-approach{
             background-image: url(/env/graphics/ggeoview/jpmt-approach_half.png);
             background-size: 1431px 839px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-arrival{
             background-image: url(/env/graphics/ggeoview/jpmt-arrival_half.png);
             background-size: 1427px 841px;
             background-position: 0px 0px;
             
          }
          div.slide#optical-photon-simulation-problem{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-optical-photon-simulation-problem{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-before-contact{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-before-contact-2{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-before-contact-3{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-after-contact{
             background-image: url(/env/graphics/ggeoview/jpmt-after-contact_half.png);
             background-size: 1425px 840px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-inside-outside{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-outside_half.png);
             background-size: 1401px 842px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-in-action{
             background-image: url(/env/presentation/optix-in-action_half.png);
             background-size: 966px 646px;
             background-position: 100px 50px;
             
          }
          div.slide#pmtinbox-approach-1{
             background-image: url(/env/graphics/ggeoview/PmtInBox-approach.png);
             background-size: 1069px 769px;
             background-position: 0px 0px;
             
          }
          div.slide#pmtinbox-approach-2{
             background-image: url(/env/graphics/ggeoview/PmtInBox-approach.png);
             background-size: 1069px 769px;
             background-position: 0px 0px;
             
          }
          div.slide#pmtinbox-after-1{
             background-image: url(/env/graphics/ggeoview/PmtInBox-after.png);
             background-size: 1057px 760px;
             background-position: 0px 0px;
             
          }
          div.slide#pmtinbox-after-2{
             background-image: url(/env/graphics/ggeoview/PmtInBox-after.png);
             background-size: 1057px 760px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-pmt-wall-photo-1{
             background-image: url(/env/presentation/gtc2016/dyb-pmt-wall-photo.png);
             background-size: 1329px 798px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-pmt-wall-photo-2{
             background-image: url(/env/presentation/gtc2016/dyb-pmt-wall-photo.png);
             background-size: 1329px 798px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-not-16-9{
             background-image: url(/env/presentation/gtc2016/sk-PH20-water-withboat-apr23-wm.png);
             background-size: 1181px 771px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-1{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-2{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-3{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-4{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#kamiokande-ii-1{
             background-image: url(/env/presentation/1987a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#kamiokande-ii-2{
             background-image: url(/env/presentation/1987a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#kamiokande-ii-3{
             background-image: url(/env/presentation/1987a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#fast-optical-photon-simulation{
             background-image: url(/env/presentation/newtons-opticks.png);
             background-size: 374px 684px;
             background-position: 800px 0px;
             
          }
          div.slide#photomultiplier-tubes-pmts{
             background-image: url(/env/presentation/hamamatsu-pmt-16x9.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#photomultiplier-tube-operation{
             background-image: url(/env/presentation/hamamatsu-pmt-16x9.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#old-hamamatsu-photomultiplier-tubes-pmts{
             background-image: url(/env/presentation/hamamatsu-pmt.png);
             background-size: 1099px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#old-photomultiplier-tube-operation{
             background-image: url(/env/presentation/hamamatsu-pmt.png);
             background-size: 1099px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#jiangmen-underground-neutrino-observatory-juno{
             background-image: url(/env/presentation/juno-schematic-5.png);
             background-size: 1391px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#jiangmen-underground-neutrino-observatory-goals{
             background-image: url(/env/presentation/juno-schematic-5.png);
             background-size: 1391px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#dayabay-reactor-neutrino-expt-far-site{
             background-image: url(/env/presentation/DybFar_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-far-site-2{
             background-image: url(/env/presentation/DybFar_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-far-site-3{
             background-image: url(/env/presentation/DybFar_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#geant4-monte-carlo-simulation-toolkit{
             background-image: url(/env/presentation/g4-hep.png);
             background-size: 1025px 621px;
             background-position: 100px 100px;
             
          }
          div.slide#geant4-monte-carlo-simulation-toolkit-generality{
             background-image: url(/env/presentation/g4-hep.png);
             background-size: 1025px 621px;
             background-position: 100px 100px;
             
          }
          div.slide#seeing-neutrinos-via-scintillation-cherenkov-light{
             background-image: url(/env/presentation/cherenkov.png);
             background-size: 316px 203px;
             background-position: 850px 400px;
             
          }
          div.slide#opticks-auto-instancing{
             background-image: url(/env/graphics/ggeoview/ggv-juno-instancing.png);
             background-size: 852px 592px;
             background-position: 450px 80px;
             
          }
          div.slide#nvidia-optix-1{
             background-image: url(/env/presentation/NVIDIAOptiXWebsite_Oct2016.png);
             background-size: 1280px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-2{
             background-image: url(/env/presentation/NVIDIAOptiXWebsite_Oct2016.png);
             background-size: 1280px;
             background-position: 0px 0px;
             
          }
          div.slide#opticksdocs{
             background-image: url(/env/presentation/OpticksDocs.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-antineutrino-detection-via-inverse-beta-decay-1{
             background-image: url(/env/presentation/AntineutrinoDetectionViaIBDJetterSept2014.png);
             background-size: 809px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-antineutrino-detection-via-inverse-beta-decay-2{
             background-image: url(/env/presentation/AntineutrinoDetectionViaIBDJetterSept2014.png);
             background-size: 809px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-1{
             background-image: url(/env/presentation/ZheTaupDetectorResponseModel.png);
             background-size: 968px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-2{
             background-image: url(/env/presentation/ZheTaupDetectorResponseModel.png);
             background-size: 968px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-fit-to-calibration-data-1{
             background-image: url(/env/presentation/EnergyResponseModel.png);
             background-size: 693px 504px;
             background-position: 0px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-fit-to-calibration-data-2{
             background-image: url(/env/presentation/ConstrainingNonLinearity.png);
             background-size: 761px 553px;
             background-position: 0px 80px;
             
          }
          div.slide#daya-bay-ngd-analysis-most-precise-theta13{
             background-image: url(/env/presentation/DYBZheTaup2015Theta13OscillationAnalysis.png);
             background-size: 1057px 625px;
             background-position: 100px 60px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-3{
             background-image: url(/env/presentation/op_full_raytrace_3.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-1{
             background-image: url(/env/presentation/op_full_raytrace_1.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-0{
             background-image: url(/env/presentation/op_full_raytrace_0.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-2{
             background-image: url(/env/presentation/op_full_raytrace_2.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-juno-chimney-gpu-raytrace-0{
             background-image: url(/env/presentation/j1707_chimney_analytic_raytrace.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-juno-pmt-snap-gpu-raytrace-1{
             background-image: url(/env/presentation/j1707-okop-snap.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#gpu-instance-culling-with-level-of-detail{
             background-image: url(/env/presentation/j1707_lod_oglrap_instcull.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-export-of-g4-geometry-to-gltf-2-0{
             background-image: url(/env/yoctoglrap/dyb_near_venice_half.png);
             background-size: 1020px 737px;
             background-position: 0px 0px;
             
          }
          div.slide#what-are-numpy-arrays{
             background-image: url(/env/presentation/what_are_numpy_arrays.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#what-are-numpy-arrays-2{
             background-image: url(/env/presentation/what_are_numpy_arrays.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bvh{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_029.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#spatial-index-acceleration-structure{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_029.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#rendering-five-decades-of-research-1{
             background-image: url(/env/presentation/nvidia/rendering_five_decades_of_research.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#rendering-five-decades-of-research-2{
             background-image: url(/env/presentation/nvidia/rendering_five_decades_of_research.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#path-tracing-in-production-1{
             background-image: url(/env/presentation/sigraph/PathTracingInProduction_001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#path-tracing-in-production-2{
             background-image: url(/env/presentation/sigraph/PathTracingInProduction_001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bvh-pascal{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_030.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bvh-turing{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_031.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#hardware-traversal-of-bvh-spatial-index{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_031.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#siggraph-2018-announcing-worlds-first-ray-tracing-gpu{
             background-image: url(/env/presentation/nvidia/SIGGRAPH_2018_Announcing_Worlds_First_Ray_Tracing_GPU_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#siggraph-2019-eric-enderton-rt-cores{
             background-image: url(/env/presentation/nvidia/SIGGRAPH_2019_Eric_Enderton_RT_Cores.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-ai-denoiser-1{
             background-image: url(/env/presentation/nvidia_demo/nvidia_optix_ai_denoiser.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-ai-denoiser-2{
             background-image: url(/env/presentation/nvidia_demo/nvidia_optix_ai_denoiser.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#samples-per-pixel-1{
             background-image: url(/env/presentation/nvidia/NVIDIA_samples_per_pixel_MDL_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#samples-per-pixel-2{
             background-image: url(/env/presentation/nvidia/NVIDIA_samples_per_pixel_MDL_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#photon-mapping-1{
             background-image: url(/env/presentation/photon_mapping/PhotonMapping_001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#photon-mapping-2{
             background-image: url(/env/presentation/photon_mapping/PhotonMapping_002.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#eric-haines-nvidia-ray-tracing-essentials-part-6-the-rendering-equation{
             background-image: url(/env/presentation/nvidia/NVIDIA_Eric_Haines_Ray_Tracing_Essentials_Part_6_The_Rendering_Equation.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#physically-based-rendering-book-www-pbr-book-org{
             background-image: url(/env/presentation/pbr/Physically_Based_Rendering_Book_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#the-rendering-equation-1{
             background-image: url(/env/presentation/rendering_equation/TheRenderingEquation_001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#the-rendering-equation-2{
             background-image: url(/env/presentation/rendering_equation/TheRenderingEquation_002.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#project-sol{
             background-image: url(/env/presentation/nvidia_demo/project_sol_jacob_norris_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-turing-gpu-72-sm-4608-cuda-cores{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_009.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-turing-gpu-72-sm-4608-cuda-cores-spec{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_009.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#raytrace-vs-raster{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_132.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ray-tracing-vs-rasterization{
             background-image: url(/env/presentation/nvidia/black.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#raytrace-diagram{
             background-image: url(/env/presentation/graphics/1024px-ray_trace_diagram.svg.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#j1808-top-ogl{
             background-image: url(/env/presentation/j1808/j1808_top_ogl.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#j1808-top-rtx{
             background-image: url(/env/presentation/j1808/j1808_top_rtx.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#j1808-escapes{
             background-image: url(/env/presentation/j1808/j1808_escapes.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#geocache-360{
             background-image: url(/env/presentation/geocache_360.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#geocache-360-2{
             background-image: url(/env/presentation/geocache_360.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-360-benchmark-with-optix-6-0-0-rtx-mode{
             background-image: url(/env/presentation/geocache_360.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#optix-instancing{
             background-image: url(/env/presentation/geocache_360.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#optix-instancing-2{
             background-image: url(/env/presentation/geocache_360.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#absmry-1m{
             background-image: url(/env/presentation/ana/absmry_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#absmry-1m-2{
             background-image: url(/env/presentation/ana/absmry_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ta34-1m{
             background-image: url(/env/presentation/ana/ta34_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ta34-1m-2{
             background-image: url(/env/presentation/ana/ta34_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv34-1m-a{
             background-image: url(/env/presentation/ana/tv34_1M_a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv34-1m-b{
             background-image: url(/env/presentation/ana/tv34_1M_b.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv21-1m-a{
             background-image: url(/env/presentation/ana/tv21_1M_a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv21-1m-a-2{
             background-image: url(/env/presentation/ana/tv21_1M_a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv21-1m-c{
             background-image: url(/env/presentation/ana/tv21_1M_c.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#rtx-speedup{
             background-image: url(/env/presentation/ana/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#overheads{
             background-image: url(/env/presentation/ana/Overheads.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-speedup{
             background-image: url(/env/presentation/ana/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-vs-geant4{
             background-image: url(/env/presentation/ana/Opticks_vs_Geant4.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-vs-geant4-2{
             background-image: url(/env/presentation/ana/Opticks_vs_Geant4.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nhit{
             background-image: url(/env/presentation/ana/NHit.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#interval-over-launch{
             background-image: url(/env/presentation/ana/Interval_over_Launch.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#titan-rtx-72-raytrace-dedicated-rt-cores-4608-cuda-cores-24gb-vram-2500-usd{
             background-image: url(/env/presentation/nvidia/TITAN_RTX.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-143808{
             background-image: url(/env/presentation/ana/bench_20190526_143808.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-143808-2{
             background-image: url(/env/presentation/ana/bench_20190526_143808.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-202537{
             background-image: url(/env/presentation/ana/bench_20190526_202537.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-202537-2{
             background-image: url(/env/presentation/ana/bench_20190526_202537.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#tv16-fastener{
             background-image: url(/env/presentation/tv/tv16_Fastener.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#tv20-polycone-neck{
             background-image: url(/env/presentation/tv/tv20_polycone_neck.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#tubs-torus-polycone-pmt20inch-polycone-neck{
             background-image: url(/env/presentation/tv/tv20_polycone_neck.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#inch-pmt-neck-cylinder-torus-polycone{
             background-image: url(/env/presentation/tv/tv20_polycone_neck.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#genstep-interface{
             background-image: url(/env/presentation/simulation/genstep_interface.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#introducing-optix-7{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#where-next-for-opticks{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 640px 360px;
             background-position: 670px 300px;
             
          }
          div.slide#opticks-experience-problems-with-using-nvidia-optix{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 640px 360px;
             background-position: 670px 300px;
             
          }
          div.slide#nvidia-optix-7-entirely-new-thin-api{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 640px 360px;
             background-position: 670px 300px;
             
          }
          div.slide#nvidia-optix-7-entirely-new-thin-api-introduced-aug-2019{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 640px 360px;
             background-position: 600px 300px;
             
          }
          div.slide#nvidia-optix-7-entirely-new-thin-api-opticks-migration-in-progress{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 640px 360px;
             background-position: 670px 300px;
             
          }
          div.slide#turing-built-for-rtx{
             background-image: url(/env/presentation/nvidia/TURING_Built_for_RTX_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#turing-built-for-rtx-2{
             background-image: url(/env/presentation/nvidia/TURING_Built_for_RTX_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-rtx-metro-exodus{
             background-image: url(/env/presentation/nvidia/NVIDIA_RTX_Metro_Exodus_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#modern-gpu-ray-tracing{
             background-image: url(/env/presentation/nvidia/Modern_GPU_RAY_Tracing.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-programming-model-analogous-to-rasterization-apis-opengl-shaders{
             background-image: url(/env/presentation/nvidia/Modern_GPU_RAY_Tracing.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-quadro-rtx-8000-48g{
             background-image: url(/env/presentation/nvidia/NVIDIA_Quadro_RTX.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#siggraph-2010-optix-a-general-purpose-ray-tracing-engine{
             background-image: url(/env/presentation/nvidia/SIGGRAPH_2010_OptiX_A_General_Purpose_Ray_Tracing_Engine.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#useful-speedup-1500x-but-why-not-giga-rays-s-1-photon-10-rays{
             background-image: url(/env/presentation/nvidia/dhart/dhart_siggraph_2019_RTX_traversal_custom_primitives.png);
             background-size: 720px 405px;
             background-position: 10px 210px;
             
          }
          div.slide#juno-intro-1{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-2{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.002.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-3{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.003.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-4{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.004.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-5{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.005.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-6{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.006.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-7{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.007.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-8{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.008.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-9{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.009.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-10{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.010.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-multipurpose-pedro-nufact-2019{
             background-image: url(/env/presentation/juno/JUNO_Multipurpose_Pedro_NuFact_2019.png);
             background-size: 960px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#dhart-siggraph-2019-optix-5-traversal{
             background-image: url(/env/presentation/nvidia/dhart_siggraph_2019_OptiX_5_traversal.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#dhart-siggraph-2019-optix-5-traversal{
             background-image: url(/env/presentation/nvidia/dhart_siggraph_2019_OptiX_5_traversal.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-check-gui-to-bt5-sd{
             background-image: url(/env/presentation/ana/scan-pf-1/scan-pf-check-GUI-TO-BT5-SD.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-check-gui-to-sc-bt5-sd{
             background-image: url(/env/presentation/ana/scan-pf-1/scan-pf-check-GUI-TO-SC-BT5-SD.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-interval-over-launch{
             background-image: url(/env/presentation/ana/scan-pf-0/Interval_over_Launch.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-nhit{
             background-image: url(/env/presentation/ana/scan-pf-0/NHit.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-opticks-speedup{
             background-image: url(/env/presentation/ana/scan-pf-0/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-opticks-vs-geant4{
             background-image: url(/env/presentation/ana/scan-pf-0/Opticks_vs_Geant4.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-overheads{
             background-image: url(/env/presentation/ana/scan-pf-0/Overheads.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-rtx-speedup{
             background-image: url(/env/presentation/ana/scan-pf-0/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-rtx-speedup-2{
             background-image: url(/env/presentation/ana/scan-pf-0/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-interval-over-launch{
             background-image: url(/env/presentation/ana/scan-pf-1/Interval_over_Launch.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-nhit{
             background-image: url(/env/presentation/ana/scan-pf-1/NHit.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-speedup{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-speedup-2{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-vs-geant4{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_vs_Geant4.png);
             background-size: 1280px 720pxS;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-vs-geant4-2{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_vs_Geant4.png);
             background-size: 1280px 720pxS;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-vs-geant4-with-html-table{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_vs_Geant4_with_HTML_Table.png);
             background-size: 1280px 720pxS;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-overheads{
             background-image: url(/env/presentation/ana/scan-pf-1/Overheads.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-rtx-speedup{
             background-image: url(/env/presentation/ana/scan-pf-1/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-translates-g4-geometry-to-gpu-without-approximation{
             background-image: url(/env/presentation/face_view_PMTs.png);
             background-size: 640px 360px;
             background-position: 20px 340px;
             
          }
          div.slide#cupy-numpy-api-some-of-scipy-accelerated-by-nvidia-cuda-curand-cublas-cusolver-cusparse-thrust-nccl{
             background-image: url(/env/presentation/cupy/cupy_is2.png);
             background-size: 1016px 377px;
             background-position: 150px 150px;
             
          }
          div.slide#cupy-easy-interface-to-nvidia-cuda-stack{
             background-image: url(/env/presentation/cupy/cupy_stack.png);
             background-size: 1075px 429px;
             background-position: 100px 100px;
             
          }
          div.slide#c-union-trick-common-with-cuda-mixed-type-arrays-simpler-faster{
             background-image: url(/env/presentation/cuda/float_as_int.png);
             background-size: 600px 89px;
             background-position: 40px 570px;
             
          }
          div.slide#neutrino-understanding{
             background-image: url(/env/presentation/neutrino/understanding_universe_planet_sun.png);
             background-size: 1111px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-hamamatsur12860lmaskvirtual-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_HamamatsuR12860lMaskVirtual_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-hamamatsur12860lmaskvirtual-subplotsfig-zoom{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_HamamatsuR12860lMaskVirtual_SubPlotsFig_Zoom.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-hamamatsur12860lmaskvirtual-combizoom-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_HamamatsuR12860lMaskVirtual_combiZoom_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-nnvtmcppmtlmaskvirtual-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_NNVTMCPPMTlMaskVirtual_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-nnvtmcppmtlmaskvirtual-subplotsfig-zoom{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_NNVTMCPPMTlMaskVirtual_SubPlotsFig_Zoom.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-nnvtmcppmtlmaskvirtual-combizoom-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_NNVTMCPPMTlMaskVirtual_combiZoom_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#g4optickstest-demonstrates-geant4-opticks-hybrid-workflow{
             background-image: url(/env/presentation/fermilab_geant4_team/hans_nov2020_lar_tpc_p1_half.png),url(/env/presentation/fermilab_geant4_team/hans_nov2020_lar_tpc_p13_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#geant4-bug-2305{
             background-image: url(/env/presentation/fermilab_geant4_team/geant4_bugzilla_2305_half.png);
             background-size: 1180px 310px;
             background-position: 50px 10px;
             
          }
          div.slide#geant4-bug-2311{
             background-image: url(/env/presentation/fermilab_geant4_team/geant4_bugzilla_2311_half.png);
             background-size: 1180px 310px;
             background-position: 50px 10px;
             
          }
          div.slide#lhcb-rich-ring-imaging-cherenkov-with-opticks-sajan-easo{
             background-image: url(/env/presentation/lhcb_rich_sajan_easo/sajan_easo_prospects_june_2020_p3_half.png),url(/env/presentation/lhcb_rich_sajan_easo/sajan_easo_prospects_june_2020_p8_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#groups-io-1{
             background-image: url(/env/presentation/groups_io/groups_io_jan_2021_25_members_33_topics_half.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#groups-io-2{
             background-image: url(/env/presentation/groups_io/groups_io_jan_2021_message_history_table_half.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-corsika8-for-next-generation-neutrino-telescope-optimization{
             background-image: url(/env/presentation/sjtu_fan_hu_oceanic/fan_hu_pod_strings_geometry_half.png);
             background-size: 640px 360px;
             background-position: 640px 360px;
             
          }
          div.slide#uk-swift-hep-grant-software-infrastructure-and-technology-for-hep{
             background-image: url(/env/presentation/ben_morgan_SwiftHEP_jan_2021/detector_simulation_swiftHEP_p1_half.png),url(/env/presentation/ben_morgan_SwiftHEP_jan_2021/detector_simulation_swiftHEP_p19_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#lz-opticks-history-2018-2021-contacts-with-5-lz-people{
             background-image: url(/env/presentation/nersc_creaner/optical_sims_using_gpus_half.png),url(/env/presentation/nersc_creaner/lz_motivation_to_gpus_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#lz-opticks-simulation-on-perlmutter-6000-nvidia-a100{
             background-image: url(/env/presentation/nersc_creaner/perlmutter_half.png);
             background-size: 640px 360px;
             background-position: 640px 360px;
             
          }
          div.slide#opticks-juno-progress-efficiency-hit-culling-on-gpu{
             background-image: url(/env/presentation/optixrap/OSensorLibGeoTest_half.png),url(/env/presentation/nvidia/thrust_logo.png);
             background-size: 640px 360px,215px 91px;
             background-position: 640px 360px,390px 210px;
              
          }
          div.slide#nvidia-marbles-at-night-rtx-demo{
             background-image: url(/env/presentation/nvidia/nvidia_marbles_at_night_rtx_demo_1080p_capture_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-marbles-at-night-rtx-demo-2{
             background-image: url(/env/presentation/nvidia/nvidia_marbles_at_night_rtx_demo_1080p_capture_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-rtx-dlss-deep-learning-super-sampling{
             background-image: url(/env/presentation/nvidia/dlss_20_deep_learning_super_sampling_rtx30series_launch_event_1434_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-rtx-dlss-deep-learning-super-sampling-2{
             background-image: url(/env/presentation/nvidia/dlss_20_deep_learning_super_sampling_rtx30series_launch_event_1434_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ampere-2nd-generation-rtx{
             background-image: url(/env/presentation/nvidia/nvidia_ampere_architecture_half.png),url(/env/presentation/nvidia/2nd_generation_rtx_half.png),url(/env/presentation/nvidia/2nd_generation_rt_core_half.png);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 0px 360px,640px 0px,640px 360px;
               
          }
          div.slide#csg-examples{
             background-image: url(/env/presentation/csg/dyb-radial-shield.png),url(/env/presentation/csg/dyb_space_station_complement.png),url(/env/presentation/csg/dyb-cylinder-union-coincidence-speckle.png),url(/env/presentation/csg/dyb-esr-deep-tree-holes.png);
             background-size: 640px 360px,640px 360px,640px 360px,640px 360px;
             background-position: 640px 360px,0px 360px,0px 0px,640px 0px;
                
          }
          div.slide#csg-parade-grid-1{
             background-image: url(/env/presentation/OptiXTest/parade_grid_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#csg-parade-grid-2{
             background-image: url(/env/presentation/OptiXTest/parade_zsphere_grid_half.png),url(/env/presentation/OptiXTest/parade_hyperboloid_grid_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 640px 360px,0px 360px;
              
          }
          div.slide#csg-working{
             background-image: url(/env/presentation/OptiXTest/csg_ubsp_half.png),url(/env/presentation/OptiXTest/csg_dbsp_half.png),url(/env/presentation/OptiXTest/csg_ibsp_half.png);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 360px,0px 360px,640px 0px;
               
          }
          div.slide#csg-boolean-parade-grid{
             background-image: url(/env/presentation/OptiXTest/boolean_parade_grid_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-5-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__5,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-7-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__7,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-9-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__9,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-4-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__4,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-6-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__6,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-3-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__3,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-1-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__1,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-2-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__2,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-1-2-3-4-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__1,2,3,4__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-0-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__0,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t8-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t8,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-8-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__8,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t0-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t0,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t5-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t5,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t6-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t6,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t7-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t7,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t4-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t4,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-all-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys_all_00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t3-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t3,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t9-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t9,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t2-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t2,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#llowerchimney-phys-t1-00000{
             background-image: url(/env/presentation/snap/lLowerChimney_phys/lLowerChimney_phys__t1,__00000.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#double-greek-temple{
             background-image: url(/env/presentation/flight/double_greek_temple_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-optix-7-foundry-geometry-scan{
             background-image: url(/env/presentation/cxr/cxr_overview/cxr_i0_4,_-1.jpg),url(/env/presentation/cxr/cxr_overview/cxr_i0_2,_-1.jpg),url(/env/presentation/cxr/cxr_overview/cxr_i0_1,2,3,4_-1.jpg),url(/env/presentation/cxr/cxr_overview/cxr_i0_0,_-1.jpg);
             background-size: 640px 360px,640px 360px,640px 360px,640px 360px;
             background-position: 0px 360px,640px 0px,0px 0px,640px 360px;
                
          }
          div.slide#cxr-i0-2-1-only-nnvt-pmts{
             background-image: url(/env/presentation/cxr/cxr_overview/cxr_i0_2,_-1.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#cxr-i0-1-2-3-4-1-all-pmts{
             background-image: url(/env/presentation/cxr/cxr_overview/cxr_i0_1,2,3,4_-1.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-all-pmts-2m-ray-traced-pixels-in-0-0097-s-nvidia-titan-rtx-nvidia-optix-7-0-0-opticks{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_overview/cam_0_tmin_0.4/cxr_overview_emm_1,2,3,4_moi_-1.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#cxr-i0-0-1-only-global-remainder{
             background-image: url(/env/presentation/cxr/cxr_overview/cxr_i0_0,_-1.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#cxr-i0-t8-1-exclude-slowest{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_overview/cam_0_tmin_0.4/cxr_overview_emm_t8,_moi_-1.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#cxr-i0-t8-1-exclude-slowest-1{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_overview/cam_0_tmin_0.4/cxr_overview_emm_t8,_moi_-1.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#cxr-i0-t8-1-exclude-slowest-2{
             background-image: url(/env/presentation/cxr/cxr_overview/cxr_i0_t8,_-1.jpg);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#cxr-view{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_t8,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px;
             background-position: 640px 360px;
             
          }
          div.slide#cxr-view-0{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_0,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_0,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_0,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-view-1{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_1,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_1,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_1,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r1p{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r1p_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r1p_.jpg);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#cxr-view-2{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_2,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_2,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_2,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r2p{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r2p_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r2p_.jpg);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#cxr-view-3{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_3,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_3,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_3,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r3p{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r3p_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r3p_.jpg);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#cxr-view-4{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_4,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_4,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_4,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r4p{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r4p_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r4p_.jpg);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#cxr-view-5{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_5,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_5,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_5,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-view-6{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_6,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_6,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_6,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-view-7{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_7,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_7,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_7,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-view-8{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_8,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_8,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_8,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-view-9{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_view/cam_0_9,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_view/cam_0_9,/cxr_view_sWaterTube.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_view/cam_0_9,/cxr_view_sWaterTube.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r0{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r0@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r0@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r0@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r1{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r1@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r1@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r1@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r2{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r2@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r2@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r2@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r3{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r3@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r3@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r3@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r4{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r4@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r4@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r4@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r5{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r5@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r5@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r5@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r6{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r6@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r6@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r6@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r7{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r7@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r7@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r7@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r8{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r8@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r8@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r8@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#cxr-solid-r9{
             background-image: url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd0/50001/cxr_solid/cam_1/cxr_solid_r9@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/60500/cxr_solid/cam_1/cxr_solid_r9@_.jpg),url(/env/presentation/CSGOptiXRender/CSG_GGeo/cvd1/70000/cxr_solid/cam_1/cxr_solid_r9@_.jpg);
             background-size: 640px 360px,640px 360px,640px 360px;
             background-position: 640px 0px,0px 360px,640px 360px;
               
          }
          div.slide#acknowledgement-opticks-hackathon-series-for-nvidia-optix-6-7{
             background-image: url(/env/presentation/logos/Oisin_future_of_LZ_optical_simulations_half.png),url(/env/presentation/logos/nvidia.png);
             background-size: 640px 360px,235px 215px;
             background-position: 640px 360px,800px 100px;
              
          }
          div.slide#lz-with-opticks-images-from-sam-eriksen-university-of-bristol{
             background-image: url(/env/presentation/lz/LZ_Opticks_OpenGL.png),url(/env/presentation/lz/LZ_Opticks_Composite.png);
             background-size: 508px 572px,580px 551px;
             background-position: 100px 100px,640px 100px;
              
          }
          div.slide#gpmt-hamamatsu-jun28{
             background-image: url(/env/presentation/ana/gpmt/PolyconeNeckSplitFig_origin_CGDMLKludge_jun28_HamamatsuR12860_.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#gpmt-nnvt-jun28{
             background-image: url(/env/presentation/ana/gpmt/PolyconeNeckSplitFig_origin_CGDMLKludge_jun28_NNVTMCPPMT_.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ls-wavelength{
             background-image: url(/env/presentation/ana/ls/LS_wavelength.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#m-wavelength-sample-comparison-hd0{
             background-image: url(/env/presentation/ana/wavelength_cfplot/DsG4Scintillator_G4OpticksAnaMgr_Opticks_QCtxTest_hd0.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#m-wavelength-sample-comparison-hd0-no-interpolation{
             background-image: url(/env/presentation/ana/wavelength_cfplot/DsG4Scintillator_G4OpticksAnaMgr_Opticks_QCtxTest_hd0_cudaFilterModePoint.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#m-wavelength-sample-comparison-hd20{
             background-image: url(/env/presentation/ana/wavelength_cfplot/DsG4Scintillator_G4OpticksAnaMgr_Opticks_QCtxTest_hd20.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#m-wavelength-sample-comparison-hd20-no-interpolation{
             background-image: url(/env/presentation/ana/wavelength_cfplot/DsG4Scintillator_G4OpticksAnaMgr_Opticks_QCtxTest_hd20_cudaFilterModePoint.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#gscintillatorlib-icdf{
             background-image: url(/env/presentation/ana/GScintillatorLib/icdf.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#g4cerenkov-modifiedtest-asis{
             background-image: url(/env/presentation/G4Cerenkov_modifiedTest/BetaInverse_1.500_step_length_100000.000_ASIS/pngs/BetaInverse_1p5.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#g4cerenkov-modifiedtest-skip-continue{
             background-image: url(/env/presentation/G4Cerenkov_modifiedTest/BetaInverse_1.500_step_length_100000.000_SKIP_CONTINUE/pngs/BetaInverse_1p5.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#gplt-laddition-uni-acrylic3{
             background-image: url(/env/presentation/ana/gplt/lAddition_uni_acrylic3.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#quicktime-laddition-uni-acrylic3{
             background-image: url(/env/presentation/ana/gplt/lAddition_quicktime_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#quicktime-2-laddition-uni-acrylic3{
             background-image: url(/env/presentation/ana/gplt/lAddition_quicktime_2_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          } 

       </style>
    <!-- comment

1280px_720px
640px_360px

NVIDIA
                    Memory    Bandwidth     CUDA(RT) Cores
TITAN V             12 GB       651 GB/s    5120(0)
Tesla V100          32 GB       900 GB/s    5120(0)
TITAN RTX           24 GB       672 GB/s    4608(72)
Quadro RTX 8000     48 GB       672 GB/s    4608(72)

SM*64 gives cores

https://www.techpowerup.com/gpu-specs/titan-v.c3051
https://www.techpowerup.com/gpu-specs/titan-rtx.c3311
https://www.techpowerup.com/gpu-specs/quadro-rtx-8000.c3306 -->
<style type="text/css">

    .strike { text-decoration: line-through; }
    .center {text-align: center;}

    span.redbold { color: red; font-weight:bold ; }
    span.bluebold { color: blue; font-weight:bold ; }
    span.greenbold { color: green; font-weight:bold ; }

    span.r { color: red; font-weight:bold ; }
    span.b { color: blue; font-weight:bold ; }
    span.g { color: green; font-weight:bold ; }

    span.alarm { color: red; }
    span.blue { color: blue; }
    span.warn { color: orange; }
    span.ok { color: green; }
    span.i { display: none; }
    pre.sliteral { class:"literal-block small"; }
    pre.mypre {
         display: block;
         font-family: monospace;
         font-size: 20px;
         white-space: pre;
         margin: 1em 0;
    }

    pre.mypretiny {
         display: block;
         font-family: monospace;
         font-size: 15px;
         white-space: pre;
         margin: 1em 0;
    }

    pre.myfoot {
         display: block;
         font-family: monospace;
         font-size: 18px;
         white-space: pre;
         color: white;
         position: absolute; top:86%; left:4%; width:50%; height:10% ;
    }

    a.mylink {
         display: block;
         font-family: monospace;
         font-size: 18px;
         white-space: pre;
         color: black;
         position: absolute; top:86%; left:4%; width:50%; height:10% ;
    }


    div.mytitle {
         font-size: 20px;
         color: black;
         position: absolute; top:0%; left:5%; width:90%; height:10% ;
    }

    div.mytitle2 {
         font-size: 20px;
         color: black;
         position: absolute; top:5%; left:5%; width:90%; height:10% ;
    }



    div.mycredit {
         font-size: 20px;
         color: black;
         position: absolute; top:90%; left:5%; width:80%; height:10% ;
    }

    div.mysidebar {
        margin: 0 0 0.5em 1em;
        border: medium outset;
        padding: 1em;
        background-color: #ffffee;
        width: 20%;
        float: right;
        clear: right;
    }

    table.mytable th {
         background-color: #ede;
    }
    table.mytable tr:nth-child(even) {
        background-color: #F3F3FF;
    }
    table.mytable tr:nth-child(odd) {
        background-color: #FFFFEE;
    }


</style><!-- comment

Day 1 (Monday, July 12, 2021, 8:3012:50 CEST/14:3018:50 Beijing time): Simulation review

30+10 min

IDEAS

* reemission wavelength cfplot with chi2 lower panel
* reemission wavelength distrib on same plot at abslen, scatlen, reemprob
* comparison of RE/SC/AB/BT fractions as a function of wavelength for diameter photons -->
<!--  -->
<blockquote>
<p><em>Opticks</em> replaces <em>Geant4</em> optical photon simulation with an <strong>equivalent implementation</strong>
that benefits from state-of-the-art GPU ray tracing from NVIDIA OptiX.
All optically relevant aspects of <em>Geant4</em> context must be translated+copied to GPU:</p>
<ul class="simple">
<li>geometry : solids, structure, material+surface properties</li>
<li>generation : Cerenkov + Scintillation (using <strong>Gensteps</strong> from <em>Geant4</em>)</li>
<li>propagation : Rayleigh scattering, absorption, reemission, boundary</li>
</ul>
<p>Achieving+maintaining <strong>equivalence</strong> is time consuming, BUT:</p>
<ul class="simple">
<li><span class="r">transformative performance benefits &gt;1000x Geant4</span></li>
</ul>
</blockquote>
<div class="small line-block">
<div class="line">Simon C Blyth,  July 12, 2021</div>
</div>

        <!--  s5talk  -->
        <br/>
    
</div>
<div class="slide" id="geant4opticksworkflow">
<h1><span class="i">Geant4OpticksWorkflow</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="feb-2021-review-more-manpower-to-opticks">
<h1>Feb 2021 Review : &quot;More manpower to Opticks&quot;</h1>
<ul class="simple">
<li><span class="b">Simon Blyth</span>, two &quot;branches&quot; of development throughout this year:<ol class="arabic">
<li>JUNO-Opticks simulation matching, <strong>the focus of this presentation</strong></li>
<li>Opticks with all new : NVIDIA OptiX 7 API<ul>
<li>demands reimplementation of all GPU code + GPU/CPU shared geometry model</li>
</ul>
</li>
</ol>
</li>
</ul>
<pre></pre><ul class="simple">
<li><span class="b">Yuxiang Hu</span>, brave first JUNO-Opticks user<ul>
<li>installed JUNO-Offline + Opticks onto new NVIDIA Quadro 8000 GPU workstation</li>
<li>helped with finding rough edges in installation and usage</li>
<li>finding hit discrepancies motivated work on simulation matching</li>
</ul>
</li>
</ul>
<pre></pre><ul class="simple">
<li><span class="b">Wang Zike</span>,  non-JUNO : applying Opticks to huge Cerenkov water detectors<ul>
<li>found Geant4/Opticks discrepancy in Cerenkov wavelength range  (RINDEX vs standard)</li>
</ul>
</li>
</ul>
<pre></pre><p>Helpful addition of active users, BUT: <span class="r">JUNO-Opticks still needs many more active users</span></p>
<ul class="simple">
<li><span class="b">early adopter payback : drastically faster optical simulation</span></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="outline-1-matching-machinery-fixes">
<h1>Outline 1 : Matching Machinery + Fixes</h1>
<img alt="/env/presentation/newtons-opticks.png" class="align-right" src="/env/presentation/newtons-opticks.png" style="width: 299px; height: 547px;" />
<div class="small"><span>&nbsp;</span></div><ul class="small simple">
<li>Simulation Matching Machinery<ul>
<li>p6: JUNO-Offline : Tools for Optical Photon Simulation Matching</li>
<li>p7: Opticks : Tools for Optical Matching, Reemission Bookkeeping</li>
<li>p8: G4OpticksRecorder : full details of Geant4 simulation passed to Opticks</li>
<li>p9: JUNO Offline DsG4Scintillation : Reemission Bookkeeping</li>
<li>p10: Comparing Opticks/Geant4 photon history counts : &quot;tut_detsim.py gun&quot; event</li>
</ul>
</li>
</ul>
<div class="small"><span>&nbsp;</span></div><ul class="small simple">
<li>Examples of recently fixed issues<ul>
<li>p11: Overview of JUNO-Opticks issues and fixes</li>
<li>p12: Photons not stopping at Tyvek, FIXED by adding explicit surfaces</li>
<li>p13: Prepare an input photon that misses PMTs for checking the Water</li>
<li>p14,15,18: Opticks : excess AB, lack SA in innerWater (FIX: remove degenerates)</li>
<li>p16,17: PMT Volume GDML plots showing degenerates</li>
<li>p19: Less scattering with 100k input photons in Water, FIX: X4MaterialWater</li>
</ul>
</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="outline-2-scintillation-cerenkov-geometry">
<h1>Outline 2 : Scintillation + Cerenkov + Geometry</h1>
<img alt="/env/presentation/newtons-opticks.png" class="align-right" src="/env/presentation/newtons-opticks.png" style="width: 299px; height: 547px;" />
<div class="small"><span>&nbsp;</span></div><ul class="small simple">
<li>Scintillation Wavelength Matching<ul>
<li>p20: Compare Geant4 and Opticks implementations</li>
<li>p21: Explanations of following plots</li>
<li>p22,23,24,25: wavelength comparison plots</li>
<li>p26: Inverse Cumulative Distribution Function (ICDF)</li>
<li>p27: &quot;Multi-resolution&quot; GPU texture (3,4096,1) : 20x Resolution for 3x bins</li>
</ul>
</li>
</ul>
<div class="small"><span>&nbsp;</span></div><ul class="small simple">
<li>Cerenkov Wavelength Matching<ul>
<li>p28: JUNO Offline G4Cerenkov_modified BUG FIX</li>
<li>p29: Cerenkov Cone Angle + Beta Requirements reminder</li>
<li>p30,31: Cerenkov distributions ASIS and SKIP_CONTINUE</li>
</ul>
</li>
</ul>
<div class="small"><span>&nbsp;</span></div><ul class="small simple">
<li>Remaining JUNO-Opticks Issues + Summary<ul>
<li>p32: Remaining JUNO-Opticks Issues, TODO List</li>
<li>p33-39: Look into slow geometry</li>
<li>p40: Back to OK/G4 photon history counts : small LS absorption excess ?</li>
<li>p41: LS properties as function of wavelength</li>
<li>p42: Summary and Links</li>
</ul>
</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="outline-3-extras-on-opticks-nvidia-optix-7-future">
<h1>Outline 3 : Extras on Opticks NVIDIA OptiX 7 future</h1>
<img alt="/env/presentation/newtons-opticks.png" class="align-right" src="/env/presentation/newtons-opticks.png" style="width: 299px; height: 547px;" />
<div class="small"><span>&nbsp;</span></div><ul class="small simple">
<li>Extras on Opticks future<ul>
<li>NVIDIA OptiX 7 : Entirely new thin API (Introduced Aug 2019)</li>
<li>New &quot;Foundry&quot; Model : Sharef CPU/GPU Geometry Context</li>
<li>1st JUNO Opticks OptiX 7 Ray-trace</li>
<li>Current JUNO Geometry : Auto-Factorized by &quot;progeny digest&quot;</li>
<li>Vary Geom. Compare Render Times</li>
<li>JUNO Geometry : OptiX 7 Ray Trace Times ~2M pixels : TITAN RTX</li>
<li>JUNO ALL PMTs : 2M ray traced pixels in 0.0097 s : NVIDIA TITAN RTX, NVIDIA OptiX 7.0.0, Opticks</li>
<li>LS properties as function of wavelenth</li>
</ul>
</li>
</ul>
<div class="small"><hr/></div>
        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-offline-tools-for-optical-photon-simulation-matching">
<h1><span class="small">JUNO Offline : Tools for Optical Photon Simulation Matching</span></h1>
<p class="small"><tt class="docutils literal">tut_detsim.py</tt> options:</p>
<ul class="small simple">
<li><tt class="docutils literal"><span class="pre">--opticks-mode</span> 1</tt> : Opticks optical simulation only</li>
<li><tt class="docutils literal"><span class="pre">--opticks-mode</span> 2</tt> : Geant4 optical simulation only</li>
<li><tt class="docutils literal"><span class="pre">--opticks-mode</span> 3</tt> : both OK+G4 -&gt; writes paired <em>OpticksEvent</em>, OK:1,2,.. G4:-1,-2,..</li>
<li><tt class="docutils literal"><span class="pre">--opticks-anamgr</span></tt> : pass all <em>G4Track</em> <em>G4Step</em> to <tt class="docutils literal">G4OpticksRecorder</tt></li>
</ul>
<p class="small">Using <strong>GtOpticksTool</strong> GenTool to run from input photons : NumPy arrays (num_photons,4,4):</p>
<pre class="small literal-block">
tut_detsim.py ...
   --opticks-mode 3 ... opticks
   --input-photon-path /path/to/input_photons.npy
   --input-photon-repeat 10000                         ## repeat photons
   --input-photon-wavelength 360,380,400,420,440,460   ## override
</pre>
<ul class="small simple">
<li>create photon arrays : <tt class="docutils literal">~/opticks/ana/input_photons.py,parallel_input_photons.py</tt></li>
<li><span class="red">focus on an issue by repeating a single photon</span></li>
<li><span class="red">create parallel beam of offset photons to probe problem geometry</span></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="opticks-tools-for-optical-photon-simulation-matching">
<h1><span class="small">Opticks : Tools for Optical Photon Simulation Matching</span></h1>
<p class="small"><tt class="docutils literal">G4OpticksRecorder/CManager/CRecorder/CWriter</tt></p>
<ul class="small simple">
<li>records Geant4 propagations into <em>OpticksEvent</em> data structures</li>
<li><em>OpticksEvent</em> are persisted to <em>NumPy</em> <tt class="docutils literal">.npy</tt> files</li>
</ul>
<p class="small"><tt class="docutils literal">~/opticks/ana/evt.py ab.py ...</tt>  <em>NumPy</em> based analysis machinery</p>
<ul class="small simple">
<li><tt class="docutils literal">ab.py</tt> : load and compare paired events<ul>
<li><tt class="docutils literal">a:OK <span class="pre">tags:1,2,3,..</span></tt></li>
<li><tt class="docutils literal">b:G4 <span class="pre">tags:-1,-2,-3,...</span></tt></li>
</ul>
</li>
</ul>
<p class="small"><strong>C+S Gensteps : Geant4 -&gt; Opticks</strong></p>
<ul class="small simple">
<li>number of photons to generate, line segment to generate them along, any other parameters needed</li>
<li>-&gt; number of photons <strong>always equal</strong> in OK and G4</li>
<li><em>Opticks</em> bookkeeping treats reemission as &quot;rebirth&quot; of a fraction of the absorbed<ul>
<li><strong>not treated as separate photons</strong></li>
</ul>
</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="g4opticksrecorder-full-details-of-geant4-simulation-passed-to-opticks">
<h1><span class="small">G4OpticksRecorder : full details of Geant4 simulation passed to Opticks</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Interface to Opticks CFG4 Package</span></p>
<p class="small"><strong>G4OpticksRecorder/CManager/CRecorder/CWriter</strong></p>
<ul class="small simple">
<li>every G4Track+G4Step -&gt; <em>OpticksEvent</em><ul>
<li>emulates GPU recording</li>
</ul>
</li>
<li>CPhotonInfo : G4VUserTrackInformation<ul>
<li><strong>photon_id</strong> retained across reemission generations</li>
</ul>
</li>
</ul>
<dl class="small last docutils">
<dt><tt class="docutils literal">tut_detsim.py <span class="pre">--opticks-mode</span> 3</tt></dt>
<dd>Do both GPU and CPU optical generation+propagations</dd>
</dl>
</div>
<pre class="mypretiny">

 34 struct G4OK_API G4OpticksRecorder
 35 {
 ...
 47     G4OpticksRecorder();
 48     virtual ~G4OpticksRecorder();
 49
 50     void setGeometry(const GGeo* ggeo);
 51
 52     virtual void BeginOfRunAction(const G4Run*);
 53     virtual void EndOfRunAction(const G4Run*);
 54
 55     virtual void BeginOfEventAction(const G4Event*);
 56     virtual void EndOfEventAction(const G4Event*);
 57
 58     virtual void PreUserTrackingAction(const G4Track*);
 59     virtual void PostUserTrackingAction(const G4Track*);
 60
 61     virtual void UserSteppingAction(const G4Step*);
 62
 63     void ProcessHits( const G4Step* step, bool efficiency_collect );
 64
 65     static G4OpticksRecorder*  fInstance;
 66
 67 private:
 68     void TerminateEvent();
 69
 70 };

</pre>
        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-offline-dsg4scintillation-reemission-bookkeeping">
<h1><span class="small">JUNO Offline DsG4Scintillation : Reemission Bookkeeping</span></h1>
<ul class="small simple">
<li>Both simulations using same <strong>REEMISSIONPROB</strong> but different mechanics</li>
</ul>
<pre class="mypretiny">
 200 G4VParticleChange*
 201 DsG4Scintillation::PostStepDoIt(const G4Track& aTrack, const G4Step& aStep)
 ...
 235             flagReemission= doReemission
 236                 && aTrack.GetTrackStatus() == fStopAndKill
 237                 && aStep.GetPostStepPoint()->GetStepStatus() != fGeomBoundary;
</pre><ul class="small simple">
<li><em>Geant4</em> : bulk absorbed <em>G4Track</em> yield 0/1 reemission photon as <strong>secondary G4Track</strong></li>
<li><em>Opticks</em> : fraction of BULK_ABSORB (AB) photons <strong>reborn</strong> in the same CUDA thread, no &quot;secondary&quot; to handle</li>
</ul>
<p class="small"><strong>Geant4 WITH_G4OPTICKS photon_id</strong></p>
<ul class="small simple">
<li><tt class="docutils literal">photon_id</tt> assigned at first S + C generation (attached to G4Track with G4VUserTrackInformation)</li>
<li><tt class="docutils literal">photon_id</tt> retained thru reemission generations</li>
</ul>
<p class="small"><strong>CRecorder/CWriter : REJOIN reemission secondary tracks with ancestors</strong></p>
<ul class="small simple">
<li>continue writing reemission secondary G4Track steps to original <tt class="docutils literal">photon_id</tt> record</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="comparing-ok-g4-photon-history-counts-for-tut-detsim-py-gun-event">
<h1><span class="small">Comparing OK/G4 photon history counts for &quot;tut_detsim.py gun&quot; event</span></h1>
 <pre class="mypretiny">
 epsilon:ana blyth$ tds3gun.sh 1    ## <b>seqhis: 64bit uint : 16x4bit step flags for each photon</b>
 In [1]: ab.his[:20]   ##  OK:1    G4:-1     OK-G4   "c2" deviation

 .  n           seqhis        a        b      a-b     (a-b)^2/(a+b)   label                ## optickscore/OpticksPhoton.h enum
           ## hexstring
 0000               42     1822     1721      101            2.88     SI AB                ## <b>AB : BULK_ABSORB </b>
 0001            7ccc2     1446     1406       40            0.56     SI BT BT BT SD       ## <b>SD : SURFACE_DETECT </b>
 0002           7ccc62      672      666        6            0.03     SI SC BT BT BT SD    ## <b>SC : BULK_SCATTER </b>
 0003            8ccc2      649      597       52            2.17     SI BT BT BT SA       ## <b>BT : BOUNDARY_TRANSMIT </b>
 0004             8cc2      606      615       -9            0.07     SI BT BT SA          ## <b>SI : SCINTILLATION </b>
 0005              452      538      536        2            0.00     SI RE AB             ## <b>RE : BULK_REEMIT </b>
 0006           7ccc52      433      438       -5            0.03     SI RE BT BT BT SD
 0007              462      397      405       -8            0.08     SI SC AB
 0008           8ccc62      269      262        7            0.09     SI SC BT BT BT SA
 0009          7ccc662      242      222       20            0.86     SI SC SC BT BT BT SD
 0010            8cc62      217      212        5            0.06     SI SC BT BT SA
 0011          7ccc652      211      205        6            0.09     SI RE SC BT BT BT SD
 0012           8ccc52      200      201       -1            0.00     SI RE BT BT BT SA
 0013            8cc52      158      192      -34            3.30     SI RE BT BT SA
 0014             4552      181      165       16            0.74     SI RE RE AB
 0015               41      164      145       19            1.17     CK AB                ## <b>CK : CERENKOV</b>
 0016          7ccc552      135      160      -25            2.12     SI RE RE BT BT BT SD
 0017             4cc2      130      115       15            0.92     SI BT BT AB
 0018             4652      120      117        3            0.04     SI RE SC AB

 .             TOTALS:    11684    11684                    52.92     52.92/63 =  0.84   pvalue:P[C2>]:0.814  1-pvalue:P[C2<]:0.186

 In [2]: ab.his.ss[ab.his.c2 > 2.7]       ## <b><span class="alarm">largest chi-squared contributors -> next issue to look into  <span></b>
 Out[2]:
 array(['0000               42     1822     1721      101            2.88     SI AB',
        '0013            8cc52      158      192      -34            3.30     SI RE BT BT SA',
        '0020          8ccc662       75      108      -33            5.95     SI SC SC BT BT BT SA',
        '0027           8cc552       49       70      -21            3.71     SI RE RE BT BT SA',
        '0029             4562       39       66      -27            6.94     SI SC RE AB'],
</pre>
        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="overview-of-fixed-juno-opticks-material-property-geometry-issues">
<h1><span class="small">Overview of fixed JUNO-Opticks material property/geometry issues</span></h1>
<ul class="normal simple">
<li>photons not stopping at Tyvek<ul>
<li>FIX: add explicit surfaces for GPU corresponding to implicit RINDEX-NoRINDEX</li>
</ul>
</li>
</ul>
<pre></pre><ul class="normal simple">
<li>excess BULK_ABSORB (AB), lack SURFACE_ABSORB (SA) in inner Water<ul>
<li>FIX: skip near degenerate(-0.001 mm) pointless Pyrex///Pyrex PMT solids for GPU</li>
<li><span class="b">must avoid degeneracy as Opticks material/surface properties are boundary based</span></li>
</ul>
</li>
</ul>
<pre></pre><ul class="normal simple">
<li>much less scattering in the Water<ul>
<li>FIX: get Geant4 <span class="r">calculated</span> <strong>RAYLEIGH</strong> property for &quot;Water&quot; to GPU</li>
<li><span class="b">Geant4 special casing of &quot;Water&quot; now matched with Opticks</span></li>
</ul>
</li>
</ul>
<pre></pre><ul class="normal simple">
<li>poor scintillation wavelength chi2 match in tails<ul>
<li>FIX: adopt &quot;multi-resolution&quot; GPU texture to 20x resolution for tails</li>
<li><span class="b">Actually was non-issue : but the fix technique is useful anyhow</span></li>
</ul>
</li>
</ul>
<pre></pre><ul class="normal simple">
<li>matching <strong>G4Cerenkov_modified</strong> deferred as found/investigated/reported Offline bug<ul>
<li><span class="b">Tao : bug fixed in &quot;Pre1&quot; already</span></li>
</ul>
</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="photons-not-stopping-at-tyvek-fixed-by-adding-explicit-surfaces">
<h1><span class="small">Photons not stopping at Tyvek, FIXED by adding explicit surfaces</span></h1>
<ul class="small simple">
<li>Major problems -&gt; huge chi2, from zeros in history table</li>
<li>G4: implicit RINDEX-NoRINDEX surface at Tyvek///Water boundary</li>
<li>OK: FIX with explicit surface <strong>Tyvek//Implicit_RINDEX_NoRINDEX_pInnerWater_pCentralDetector/Water</strong></li>
</ul>
<pre class="mypretiny">
In [7]: ab.a.seqhis_ana.table.compare(ab.b.seqhis_ana.table, ordering="sum")
Out[7]:
.                   cfo:sum  1:g4live:tds3gun   -1:g4live:tds3gun
.                         11278     11278                  <span class="r">1766.28/69 = 25.60</span>  (pval:0.000 prob:1.000)
0000               42      1653      1665    -12             0.04    [2 ] SI AB
0001            7ccc2      1292      1230     62             1.52    [5 ] SI BT BT BT SD
0002            8ccc2       590       674    -84             5.58    [5 ] SI BT BT BT SA
0003           7ccc62       581       552     29             0.74    [6 ] SI SC BT BT BT SD
0004              452       422       534   -112            13.12    [3 ] SI RE AB
0005           7ccc52       380       397    -17             0.37    [6 ] SI RE BT BT BT SD
0006              462       392       367     25             0.82    [3 ] SI SC AB
0007           8ccc62       251       267    -16             0.49    [6 ] SI SC BT BT BT SA
<b><span class="redbold">0008             8cc2         0       464   -464           464.00    [4 ] SI BT BT SA  ## LS->Acrylic->Water->SURFACE_ABSORB on Tyvek </span></b>
0009          7ccc662       219       213      6             0.08    [7 ] SI SC SC BT BT BT SD
0010             4cc2       278       127    151            56.30    [4 ] SI BT BT AB
0011           8ccc52       154       188    -34             3.38    [6 ] SI RE BT BT BT SA
0012          7ccc652       157       159     -2             0.01    [7 ] SI RE SC BT BT BT SD
0013               41       142       144     -2             0.01    [2 ] CK AB
0014            4cc62       197        71    126            59.24    [5 ] SI SC BT BT AB
0015             4552       124       142    -18             1.22    [4 ] SI RE RE AB
0016             4662       137       121     16             0.99    [4 ] SI SC SC AB
0017             4652       121       112      9             0.35    [4 ] SI RE SC AB
0018          7ccc552       102       124    -22             2.14    [7 ] SI RE RE BT BT BT SD
0019           7cccc2        53       154   -101            49.28    [6 ] SI BT BT BT BT SD
<b><span class="redbold">0020            8cc62         0       186   -186           186.00    [5 ] SI SC BT BT SA</span></b>
0021          8ccc662        69       107    -38             8.20    [7 ] SI SC SC BT BT BT SA
</pre>
        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="prepare-an-input-photon-that-misses-pmts-for-checking-the-water">
<h1><span class="small">Prepare an input photon that misses PMTs for checking the Water</span></h1>
<pre class="mypretiny">
epsilon:ana blyth$ tds3gun.sh 1      <span class="b"># IPython session using Opticks NumPy based analysis machinery  </span>

In [1]: b.sel = "SI BT BT SA"    <b># selecting G4 photons that go direct to Tyvek</b>

In [2]: b.ox.shape               <b># ox : final photons array honours the selection</b>
Out[2]: (464, 4, 4)

In [3]: p = b.ox[0:1] ; p        <b># first photon</b>
Out[3]:
A([[[ 14210.083 ,   5228.8896, -13142.859 ,    110.41  ],        <b># position, time</b>
    [     0.7191,      0.2595,     -0.6447,      1.    ],        <b># direction, weight</b>
    [    -0.4468,     -0.538 ,     -0.7148,    415.3976],        <b># polarization, wavelength </b>
    [     0.    ,      0.    ,      0.    ,      0.    ]]],      <b># uint flags: not visible as float</b>
    dtype=float32)

In [4]: p[0,0,:3] -= p[0,1,:3]*2220.   <b># back up the photon by 2220mm to position 10mm into the water</b>

In [5]: np.save("/tmp/check_innerwater.npy", p )   <b># save photon array with 1 photon to .npy file </b>
</pre><p class="small"><strong>Perform both Geant4 and Opticks simulations with 100k repeats of the input photon</strong></p>
<pre class="literal-block">
tut_detsim.py ...
    --opticks-mode 3     # enable Geant4 + Opticks simulations
    --opticks-anamgr     # G4Track, G4Step --&gt; G4OpticksRecorder
    opticks              # GtOpticksTool input photon &quot;GenTool&quot;
    --input-photon-path /tmp/check_innerwater.npy
    --input-photon-repeat 100000
</pre>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="opticks-excess-ab-lack-sa-in-innerwater-fix-remove-degenerates">
<h1><span class="small">Opticks : excess AB, lack SA in innerWater (FIX: remove degenerates)</span></h1>
<pre class="mypretiny">
In [2]: ab.his          <b># repr of opticks.ana.seq:SeqTable object </b>
Out[2]:
ab.his
.       seqhis_ana  cfo:sum  1:g4live:tds3gun   -1:g4live:tds3gun        c2        ab        ba
.                         11142     11142                  616.50/66 =  9.34
   n             iseq         a         b    a-b               c2    [ns] label
0000               42      1666      1621     45             0.62    [2 ] SI AB
0001            7ccc2      1264      1258      6             0.01    [5 ] SI BT BT BT SD
<b><span class="redbold">0002            8ccc2       581       766   -185            25.41    [5 ] SI BT BT BT SA</span></b>
0003           7ccc62       579       543     36             1.16    [6 ] SI SC BT BT BT SD
0004             8cc2       570       496     74             5.14    [4 ] SI BT BT SA
0005              452       408       495    -87             8.38    [3 ] SI RE AB
0006              462       399       351     48             3.07    [3 ] SI SC AB
0007           7ccc52       360       385    -25             0.84    [6 ] SI RE BT BT BT SD
0008           8ccc62       239       258    -19             0.73    [6 ] SI SC BT BT BT SA
0009          7ccc662       218       195     23             1.28    [7 ] SI SC SC BT BT BT SD
0010            8cc62       195       180     15             0.60    [5 ] SI SC BT BT SA
<b><span class="redbold">0011             4cc2       268       104    164            72.30    [4 ] SI BT BT AB</span></b>
0012           8ccc52       160       191    -31             2.74    [6 ] SI RE BT BT BT SA
0013          7ccc652       163       165     -2             0.01    [7 ] SI RE SC BT BT BT SD
0014               41       156       160     -4             0.05    [2 ] CK AB
0015             4552       118       152    -34             4.28    [4 ] SI RE RE AB
0016            8cc52       136       133      3             0.03    [5 ] SI RE BT BT SA
0017             4662       125       114     11             0.51    [4 ] SI SC SC AB
<b><span class="redbold">0018            4cc62       189        40    149            96.95    [5 ] SI SC BT BT AB</span></b>
.                         11142     11142                  616.50/66 =  9.34
</pre><dl class="small docutils">
<dt><span class="bluebold">SI BT BT AB</span></dt>
<dd>photons that (BT) BOUNDARY_TRANSMIT from : <em>LS -&gt; Acrylic -&gt; Water</em> where they are (AB) BULK_ABSORB-ed</dd>
<dt><span class="bluebold">SI BT BT BT SA</span></dt>
<dd><em>LS -&gt; Acrylic -&gt; Water -&gt; Pyrex</em> where they are (SA) SURFACE_ABSORB-ed on Pyrex/Vacuum boundary</dd>
</dl>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="id1">
<h1><span class="small">Opticks : excess AB, lack SA in innerWater (FIX: remove degenerates)</span></h1>
<ul class="small simple">
<li><span class="r">wrong boundary means Opticks using Pyrex properties, not Water, for a fraction of photons (5%)</span></li>
</ul>
<pre class="mypretiny">
In [3]: a.sel = "SI BT BT BT SA"      <span class="bluebold">## select photons with this history</span>
In [15]: a.bn.reshape(-1,4).view(np.int8)[:20]     <b>## signed boundary at up to 16 steps of the photon </b>
Out[15]:
A([[ 18,  17, -23, -25,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
   [ 18,  17, -23, -27,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
   ...
   [ 18,  17, -23, -27,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
   [ 18,  17, <span class="redbold">-24</span>, -25,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0]], dtype=int8)

In [17]: print(a.blib.format(a.bn.reshape(-1,4).view(np.int8)[0]))   ## 16*char(int8) packed into uint4 4*32bit

 18 : Acrylic///LS            <span class="bluebold">##  boundary : outer-material/outer-surface/inner-surface/inner-material  </span>
 17 : Water///Acrylic         <span class="bluebold">## +ve boundary : photon direction is with the normal, exiting the shape  </span>
-23 : Water///Pyrex           <span class="bluebold">## -ve boundary : photon direction against the normal, entering the shape </span>
-25 : Pyrex/NNVTMCPPMT_photocathode_logsurf2/NNVTMCPPMT_photocathode_logsurf1/Vacuum

In [18]: print(a.blib.format(a.bn.reshape(-1,4).view(np.int8)[1]))
 18 : Acrylic///LS
 17 : Water///Acrylic
-23 : Water///Pyrex
-27 : Pyrex/HamamatsuR12860_photocathode_logsurf2/HamamatsuR12860_photocathode_logsurf1/Vacuum

In [19]: print(a.blib.format(a.bn.reshape(-1,4).view(np.int8)[19]))
 18 : Acrylic///LS
 17 : Water///Acrylic
<span class="redbold">-24 : Pyrex///Pyrex   ## expect Water///Pyrex --> GEOMETRY PROBLEM </span>
-25 : Pyrex/NNVTMCPPMT_photocathode_logsurf2/NNVTMCPPMT_photocathode_logsurf1/Vacuum
</pre><ul class="small simple">
<li><span class="b">All LPMTs : near degenerate Water///Pyrex and &quot;pointless&quot; same material Pyrex///Pyrex borders offset: 0.001mm</span></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="gpmt-hamamatsu-jun28">
<h1><span class="i">gpmt Hamamatsu jun28</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="gpmt-nnvt-jun28">
<h1><span class="i">gpmt NNVT jun28</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="id2">
<h1><span class="small">Opticks : excess AB, lack SA in innerWater : FIX remove degenerates</span></h1>
<blockquote class="small">
<p>Possible approaches to handle degenerate geometry:</p>
<ol class="arabic simple">
<li>fix source geometry removing the pointless Pyrex///Pyrex -0.001mm boundary<ul>
<li>seems to cause no problem for Geant4 : get &quot;microStep&quot; of ~0.001-0.002mm<ul>
<li>eg <tt class="docutils literal"><span class="pre">--dbgseqhis</span> 0x7ccccd</tt> dumps Geant4 details for photons in category</li>
</ul>
</li>
<li>experience shows is time consuming to get agreement on geometry change</li>
</ul>
</li>
<li>runtime workaround trying to notice inconsistency by maintaining state of which material are in<ul>
<li>need very strong reasons to add complexity to GPU code, so disqualify this</li>
</ul>
</li>
<li><span class="bluebold">skip the near degenerate inner Pyrex solids in the translated GPU geometry</span><ul>
<li>easy, causing no problems because are removing a pointless Pyrex///Pyrex border</li>
<li>BUT: requires suppression of Geant4 &quot;microSteps&quot; in <em>CRecorder</em> to facilitate history comparison</li>
</ul>
</li>
</ol>
<p><strong>Currently using 3, with Opticks commandline option:</strong></p>
</blockquote>
<pre class="small literal-block">
--skipsolidname
    NNVTMCPPMT_body_solid,
    HamamatsuR12860_body_solid_1_9,
    PMT_20inch_veto_body_solid_1_2
</pre>
<!-- comment

notes/issues/ok_less_SA_more_AB.rst -->

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="less-scattering-with-100k-input-photons-in-water-fix-x4materialwater">
<h1><span class="small">Less scattering with 100k input photons in Water, FIX: X4MaterialWater</span></h1>
<pre class="mypretiny">
epsilon:ana blyth$ tds3ip.sh 1
In [1]: ab.his[:15]
Out[1]:
ab.his
.       seqhis_ana  cfo:sum  1:g4live:tds3ip   -1:g4live:tds3ip
.                        100000    100000                  739.41/9 = 82.16  (pval:0.000 prob:1.000)
0000               8d     93766     92777    989             5.24   [2 ] TO SA
0001               4d      6031      5918    113             1.07   [2 ] TO AB
<b><span class="redbold">0002             7c6d        38       311   -273           213.55   [4 ] TO SC BT SD
0003              86d        33       236   -203           153.19   [3 ] TO SC SA
0004            4cc6d        10       212   -202           183.80   [5 ] TO SC BT BT AB
0005             8c6d        13        80    -67            48.27   [4 ] TO SC BT SA
0006              46d        20        63    -43            22.28   [3 ] TO SC AB
0007          8ccac6d         0        72    -72            72.00   [7 ] TO SC BT SR BT BT SA
0008           46cc6d         1        39    -38            36.10   [6 ] TO SC BT BT SC AB
0009             4c6d        10        21    -11             3.90   [4 ] TO SC BT AB
0010            7cc6d         2        27    -25             0.00   [5 ] TO SC BT BT SD
0011       ccacccac6d         0        26    -26             0.00   [10] TO SC BT SR BT BT BT SR BT BT
0012           4ccc6d         0        19    -19             0.00   [6 ] TO SC BT BT BT AB</span></b>
0013         7ccccc6d         9         9      0             0.00   [8 ] TO SC BT BT BT BT BT SD
0014          466cc6d         1        17    -16             0.00   [7 ] TO SC BT BT SC SC AB
.                        100000    100000                  739.41/9 = 82.16  (pval:0.000 prob:1.000)
</pre><ul class="small simple">
<li>JUNO &quot;Water&quot; material has no <strong>RAYLEIGH</strong> scattering length property</li>
<li><em>G4OpRayleigh</em> calculates <strong>RAYLEIGH</strong> for materials named &quot;Water&quot; with <strong>RINDEX</strong> and no <strong>RAYLEIGH</strong><ul>
<li>BUT: <em>G4Material</em> is unchanged, only <tt class="docutils literal"><span class="pre">G4OpRayleigh::thePhysicsTable</span></tt></li>
<li><em>Opticks</em> converts materials, not process physics tables</li>
<li><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks/src/master/extg4/X4MaterialWater.cc">https://bitbucket.org/simoncblyth/opticks/src/master/extg4/X4MaterialWater.cc</a><ul>
<li>use G4OpRayleigh to calculate <strong>RAYLEIGH</strong> and add it to the <em>G4Material</em> so <em>Opticks</em> sees it</li>
</ul>
</li>
</ul>
</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="scintillation-wavelength-compare-geant4-and-opticks-implementations">
<h1><span class="small">Scintillation Wavelength : Compare Geant4 and Opticks implementations</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Opticks GPU equivalent</span></p>
<div class="last"><pre class="mypretiny">
// optixrap/cu/scintillationstep.h
185 __device__ void
186 generate_scintillation_photon(Photon& p,
        ScintillationStep& ss, curandState& rng)
187 {
...
199   p.wavelength =
         reemission_lookup(curand_uniform(&rng));
200

// optixrap/cu/reemission_lookup.h
025 static __device__ __inline__
    float reemission_lookup(float u)
 26 {
 27     float ui = u/reemission_domain.z + 0.5f ;
 28     return tex2D(reemission_texture, ui, 0.5f );
 29 }
</pre></div></div>
<pre class="mypretiny">
 200 G4VParticleChange*
 201 DsG4Scintillation::PostStepDoIt(
        const G4Track& aTrack, const G4Step& aStep)
 208 {
 ...
 540     G4PhysicsOrderedFreeVector* ScintillationIntegral = NULL;
 543     ScintillationIntegral =
 544       (G4PhysicsOrderedFreeVector*)
               ((*theFastIntegralTable)(materialIndex));
 ...
 579    for(G4int i = 0 ; i < NumPhoton ; i++) {
 ...
 <span class="bluebold">583    G4double sampledEnergy;
 586       G4double CIIvalue = G4UniformRand()*
 587          ScintillationIntegral->GetMaxValue();
 588       sampledEnergy=
 589          ScintillationIntegral->GetEnergy(CIIvalue);  </span>

 096 G4double G4PhysicsOrderedFreeVector::GetEnergy(G4double aValue)
  97 {
  98         G4double e;
 ...
 104           size_t closestBin = FindValueBinLocation(aValue);
 105           e = LinearInterpolationOfEnergy(aValue, closestBin);
 107         return e;
 108 }
 <span class="redbold">110 size_t G4PhysicsOrderedFreeVector::FindValueBinLocation(G4double aValue)
 111 {
 112         size_t bin = std::lower_bound(dataVector.begin(), dataVector.end(), aValue)
 113                    - dataVector.begin() - 1;
 114         bin = std::min(bin, numberOfNodes-2);
 115         return bin;
 116 } </span>
</pre><ul class="small simple">
<li>Geant4 : find ICDF bin then interpolate,   Opticks : direct linear interpolation on HD GPU texture : <strong>4096 bins</strong></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="scintillation-wavelength-matching-explanations-of-following-plots">
<h1><span class="small">Scintillation Wavelength Matching : Explanations of following plots</span></h1>
<ul class="simple">
<li>hd0 : simple 4096 bins</li>
<li>hd20 : 4096 bins with 20x bins for u &lt; 0.05 and u &gt; 0.95</li>
<li>cudaFilterModePoint : linear interpolation disabled</li>
</ul>
<table border="1" class="small docutils">
<colgroup>
<col width="40%" />
<col width="22%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">DsG4Scintillator compared with</th>
<th class="head">chi2</th>
<th class="head">note</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>hd0_cudaFilterModePoint</td>
<td>13.79</td>
<td>&quot;artifact&quot; issue in tails, terrible chi2</td>
</tr>
<tr><td>hd0</td>
<td>1.00</td>
<td>interpolation enabled, fixes chi2</td>
</tr>
<tr><td>hd20</td>
<td>0.88</td>
<td>effectively x20 bins, improves chi2</td>
</tr>
<tr><td>hd20_cudaFilterModePoint</td>
<td>1.29</td>
<td>XHD &quot;HD20&quot; even OK without interpolation</td>
</tr>
</tbody>
</table>
<ul class="small simple">
<li>GPU textures can reproduce very precisely inverse cumulative distribution functions by using high definition</li>
<li>&quot;hd20&quot; multi-resolution technique can effect variable resolution suited to scintillator inverse-CDF</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="m-wavelength-sample-comparison-hd0-no-interpolation">
<h1><span class="i">1M Wavelength Sample comparison hd0 no interpolation</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="m-wavelength-sample-comparison-hd0">
<h1><span class="i">1M Wavelength Sample comparison hd0</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="m-wavelength-sample-comparison-hd20">
<h1><span class="i">1M Wavelength Sample comparison hd20</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="m-wavelength-sample-comparison-hd20-no-interpolation">
<h1><span class="i">1M Wavelength Sample comparison hd20 no interpolation</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="gscintillatorlib-icdf">
<h1><span class="i">GScintillatorLib ICDF</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="multi-resolution-gpu-texture-3-4096-1-20x-resolution-for-3x-bins">
<h1><span class="small">&quot;Multi-resolution&quot; GPU texture (3,4096,1) : 20x Resolution for 3x bins</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">GPU texture lookup</span></p>
<div class="last"><pre class="mypretiny">
float scint_wavelength_hd20(curandStateXORWOW& rng)
{
    float u0 = curand_uniform(&rng);
    float wl ;

    constexpr float y0 = 0.5f/3.f ;
    constexpr float y1 = 1.5f/3.f ;
    constexpr float y2 = 2.5f/3.f ;

    if( u0 < 0.05f )
    {
        wl = tex2D<float>(scint_tex, u0*20.f , y1 );
    }
    else if ( u0 > 0.95f )
    {
        wl = tex2D<float>(scint_tex, (u0 - 0.95f)*20.f , y2 );
    }
    else
    {
        wl = tex2D<float>(scint_tex, u0,  y0 );
    }
    return wl ;
}
</pre></div></div>
<pre class="mypretiny">
156 NPY&lt;double&gt;* X4Scintillation::CreateGeant4InterpolatedInverseCDF(
157        const G4PhysicsOrderedFreeVector* ScintillatorIntegral,
158        unsigned num_bins, unsigned hd_factor, ..
161 )
164     double mx = ScintillatorIntegral->GetMaxValue() ;
166     NPY&lt;double&gt;* icdf = NPY&lt;double&gt;::make(3, num_bins, 1 );
170     int nj = icdf->getShape(1);
180     double edge = 1./double(hd_factor) ;
...
202     for(int j=0 ; j < nj ; j++)
203     {
204     double u_all = double(j)/double(nj) ;
205     double u_lhs = double(j)/double(hd_factor*nj) ;
206     double u_rhs = 1. - edge + double(j)/double(hd_factor*nj) ;
207
208     double energy_all = ScintillatorIntegral->GetEnergy( u_all*mx );
209     double energy_lhs = ScintillatorIntegral->GetEnergy( u_lhs*mx );
210     double energy_rhs = ScintillatorIntegral->GetEnergy( u_rhs*mx );
211
212     double wavelength_all = h_Planck*c_light/energy_all/nm ;
213     double wavelength_lhs = h_Planck*c_light/energy_lhs/nm ;
214     double wavelength_rhs = h_Planck*c_light/energy_rhs/nm ;
215
217     icdf->setValue(0, j, 0, 0,  wavelength_all );
218     icdf->setValue(1, j, 0, 0,  wavelength_lhs );
219     icdf->setValue(2, j, 0, 0,  wavelength_rhs );
220     }
221     return icdf ;
222 }
</pre><p class="small"><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks/src/master/extg4/X4Scintillation.cc">https://bitbucket.org/simoncblyth/opticks/src/master/extg4/X4Scintillation.cc</a></p>
<p class="small"><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks/src/master/qudarap/qctx.h">https://bitbucket.org/simoncblyth/opticks/src/master/qudarap/qctx.h</a></p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-offline-trunk-g4cerenkov-modified-bug-fixed-in-pre1">
<h1><span class="small">JUNO Offline trunk G4Cerenkov_modified : BUG FIXED in &quot;Pre1&quot;</span></h1>
<div class="sidebar">
<p class="first sidebar-title"> <span class="small">photon gen.</span> : <span class="small">Spot the bug</span></p>
<p class="small"><strong>continue</strong>-ing a <strong>do-while</strong> loop jumps to condition.</p>
<ul class="small simple">
<li>-&gt; <span class="r">stale or undefined sin2Theta used</span></li>
<li>repeated stale Cerenkov cone angle</li>
<li>Cerenkov photons at disallowed wavelength</li>
</ul>
<p class="small"><tt class="docutils literal">sampleRI &lt; BetaInverse</tt> :</p>
<ul class="small simple">
<li><tt class="docutils literal">cosTheta &gt; 1.</tt>  (too slow for )</li>
<li><tt class="docutils literal">sin2Theta &lt; 0.</tt></li>
</ul>
<p class="small"><strong>do-while looping continues</strong> naturally as always:</p>
<p class="small last"><tt class="docutils literal">rand*maxSin2 &gt; sin2Theta</tt></p>
</div>
<pre class="mypretiny">
168 G4VParticleChange*
169 G4Cerenkov_modified::PostStepDoIt(
      const G4Track& aTrack, const G4Step& aStep)
...
252   G4double Pmin = Rindex->GetMinLowEdgeEnergy();
253   G4double Pmax = Rindex->GetMaxLowEdgeEnergy();
254   G4double dp = Pmax - Pmin;
...
268   G4double maxCos = BetaInverse / nMax;
270   G4double maxSin2 = (1.0 - maxCos) * (1.0 + maxCos);
...
315   for (G4int i = 0; i < fNumPhotons; i++) {
317
318       G4double rand;
319       G4double sampledEnergy, sampledRI;
320       G4double cosTheta, sin2Theta;
...
324       do {
325          rand = G4UniformRand();
326          sampledEnergy = Pmin + rand * dp;
327          sampledRI = Rindex->Value(sampledEnergy);
328
<span class="redbold">329          // check if n(E) > 1/beta
330          if (sampledRI < BetaInverse) {
331              continue;
332          }</span>
333
<span class="bluebold">334          cosTheta = BetaInverse / sampledRI;
341
342          sin2Theta = (1.0 - cosTheta)*(1.0 + cosTheta);
343          rand = G4UniformRand();</span>
344
346       } while (rand*maxSin2 > sin2Theta);
</pre><p class="small"><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks/src/master/examples/Geant4/CerenkovStandalone/G4Cerenkov_modifiedTest.cc">https://bitbucket.org/simoncblyth/opticks/src/master/examples/Geant4/CerenkovStandalone/G4Cerenkov_modifiedTest.cc</a></p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="cerenkov-cone-angle-beta-requirements-reminder">
<h1><span class="small">Cerenkov Cone Angle + Beta requirements reminder</span></h1>
<pre class="mypretiny">

              \    B    /
          \    .   |   .    /                            AC     ct / n          1         i       BetaInverse
      \    C       |       C    /             cos th =  ---- =  --------   =  ------ =   ---  =  -------------
  \    .    \      |      /    .     /                   AB       bct           b n       n        sampledRI
   .         \    bct    /          .
              \    |    /                                  BetaInverse
               \   |   /  ct                  maxCos  =  -----------------
                \  |th/  ----                                nMax
                 \ | /    n
                  \|/
                   A

Particle travels AB, light travels AC,  ACB is right angle


 Only get Cerenkov radiation when

        cos th <= 1 ,

        beta >= beta_min = 1/n        BetaInverse <= BetaInverse_max = n


 At the small beta threshold AB = AC,   beta = beta_min = 1/n     eg for n = 1.333, beta_min = 0.75

        cos th = 1,  th = 0         light is in direction of the particle


 For ultra relativistic particle beta = 1, there is a maximum angle

        th = arccos( 1/n )

</pre>
        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="g4cerenkov-modifiedtest-asis">
<h1><span class="i">G4Cerenkov_modifiedTest_ASIS</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="g4cerenkov-modifiedtest-skip-continue">
<h1><span class="i">G4Cerenkov_modifiedTest_SKIP_CONTINUE</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="remaining-juno-opticks-issues-todo-list">
<h1><span class="small">Remaining JUNO-Opticks Issues, TODO List</span></h1>
<p class="small"><strong>Expected Straightforward Updates</strong></p>
<ul class="small simple">
<li>currently using <strong>LocalG4Cerenkov1042</strong> not <strong>G4Cerenkov_modified</strong><ul>
<li>add Opticks genstep collection to <strong>G4Cerenkov_modified</strong></li>
</ul>
</li>
<li>recent changes to <strong>PMTParamSvc</strong> <strong>PMTSimParamSvc</strong><ul>
<li>-&gt; reimplementation of Opticks sensor efficiency collection</li>
</ul>
</li>
</ul>
<p class="small"><strong>Uncertain Difficulty : JUNO Geometry Issues</strong></p>
<ul class="small simple">
<li>slow &quot;Double Greek Temple&quot; geometry issue from &quot;fasteners&quot;</li>
<li>implement standalone test to understand leading causes of slow geometry:<ol class="arabic">
<li>complex CSG tree</li>
<li>CSG subtraction of huge acrylic sphere (huge bounding box)</li>
</ol>
</li>
<li>separately instanced siblings : 590x <tt class="docutils literal">sStrutBallhead, uni1, base_steel, uni_acrylic3</tt><ul>
<li>unrelated volumes positioned together not being instanced together</li>
<li>simpler to change Opticks geometry translation than change source geometry</li>
</ul>
</li>
</ul>
<p class="small">Currently skipping <tt class="docutils literal"><span class="pre">LSExpDetectorConstruction::setupCD_Sticks</span></tt> to allow fair comparisons.</p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="llowerchimney-phys-all-00000">
<h1><span class="i">[17]lLowerChimney_phys_all_00000</span></h1>
<ul class="normal simple">
<li><tt class="docutils literal">compare render times varying geometry included from same viewpoint</tt></li>
<li><tt class="docutils literal">render time is good indicator for simulation time</tt></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="llowerchimney-phys-8-00000">
<h1><span class="i">[11]lLowerChimney_phys__8,__00000</span></h1>
<p class="normal"><tt class="docutils literal">590 &quot;uni_acrylic3&quot; Fasteners : cost 65x more than all 45.6k PMTs</tt></p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="llowerchimney-phys-6-00000">
<h1><span class="i">[4]lLowerChimney_phys__6,__00000</span></h1>
<ul class="normal simple">
<li><tt class="docutils literal">590 of these &quot;uni1&quot; render quickly</tt></li>
<li><tt class="docutils literal">BUT : this shape is subtracted from &quot;uni_acrylic3&quot;</tt></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="quicktime-laddition-uni-acrylic3">
<h1><span class="i">quicktime lAddition_uni_acrylic3</span></h1>
<ul class="simple">
<li><tt class="docutils literal">LV : lAddition,&nbsp; Solid : uni_acrylic3</tt></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="quicktime-2-laddition-uni-acrylic3">
<h1><span class="i">quicktime 2 lAddition_uni_acrylic3</span></h1>
<div class="sidebar">
<p class="first sidebar-title">uni_acrylic3</p>
<ul class="small last simple">
<li>Dark columns : &quot;inner&quot; surface from subtraction</li>
<li>&quot;Double Greek Temple&quot; : complex CSG tree</li>
</ul>
</div>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="gplt-laddition-uni-acrylic3">
<h1><span class="i">gplt lAddition_uni_acrylic3</span></h1>
<ul class="normal simple">
<li>LV : lAddition,  Solid : <strong>uni_acrylic3</strong>, Class : AdditionAcrylicConstruction</li>
</ul>
<pre>
</pre><ul class="normal simple">
<li><span class="redbold">Suspect : subtracting spherical segment, sagitta 5.68mm, is performance killer.</span></li>
<li>also complicated interior of Fastener irrelevant to optical photons</li>
</ul>
<pre>











</pre><ul class="normal simple">
<li>dotted line is tangent to acrylic sphere circle touching at (0,0) in <strong>uni_acrylic3</strong> frame</li>
<li>sagitta : 17820. - np.sqrt( np.power(17820.,2) - np.power(450.,2)) = 5.68 mm</li>
</ul>
<ul class="tiny simple">
<li>2d GDML matplotlib.pyplot with : opticks/ana/gplt.py opticks/analytic/GDML.py parser</li>
</ul>
<!-- comment

https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.32.3562&rep=rep1&type=pdf

ana/sagitta.py -->

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="possible-cause-of-slow-geometry-subtracting-17-82-m-sphere">
<h1><span class="small">Possible cause of slow geometry : Subtracting 17.82 m sphere</span></h1>
<pre class="mypretiny">
092 AdditionAcrylicConstruction::makeAdditionLogical(){
...
108         double ZNodes3[3];
109         double RminNodes3[3];
110         double RmaxNodes3[3];
111         ZNodes3[0] = 5.7*mm; RminNodes3[0] = 0*mm; RmaxNodes3[0] = 450.*mm;
112         ZNodes3[1] = 0.0*mm; RminNodes3[1] = 0*mm; RmaxNodes3[1] = 450.*mm;
113         ZNodes3[2] = -140.0*mm; RminNodes3[2] = 0*mm; RmaxNodes3[2] = 200.*mm;
114
115         solidAddition_down = new G4Polycone("solidAddition_down",0.0*deg,360.0*deg,3,ZNodes3,RminNodes3,RmaxNodes3);
...
<span class="redbold">122     solidAddition_up = new G4Sphere("solidAddition_up",0*mm,17820*mm,0.0*deg,360.0*deg,0.0*deg,180.*deg); </span>
123
124     <span class="r">uni_acrylic1</span> = new G4SubtractionSolid("uni_acrylic1",solidAddition_down,<span class="r">solidAddition_up</span>,0,G4ThreeVector(0*mm,0*mm,+17820.0*mm));
125
126     solidAddition_up1 = new G4Tubs("solidAddition_up1",120*mm,208*mm,15.2*mm,0.0*deg,360.0*deg);
127     <span class="r">uni_acrylic2</span> = new G4SubtractionSolid("uni_acrylic2",<span class="r">uni_acrylic1</span>,solidAddition_up1,0,G4ThreeVector(0.*mm,0.*mm,-20*mm));
128     solidAddition_up2 = new G4Tubs("solidAddition_up2",0,14*mm,52.5*mm,0.0*deg,360.0*deg);
129
130     for(int i=0;i<8;i++)
131     {
132     uni_acrylic3 = new G4SubtractionSolid("uni_acrylic3",<span class="r">uni_acrylic2</span>,solidAddition_up2,0,G4ThreeVector(164.*cos(i*pi/4)*mm,164.*sin(i*pi/4)*mm,-87.5));
133     uni_acrylic2 = uni_acrylic3;
134
135     }
136
137
</pre><p class="small">Subtraction of huge sphere from small polycone</p>
<ul class="small simple">
<li>huge combined bounding box (bbox) for this boolean solid (repeated x590)</li>
<li>terrible CSG performance on GPU</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="back-to-ok-g4-photon-history-counts-small-ls-absorption-excess">
<h1><span class="small">Back to OK/G4 photon history counts : small LS absorption excess ?</span></h1>
 <pre class="mypretiny">
 epsilon:ana blyth$ tds3gun.sh 1    ## <b>seqhis: 64bit uint : 16x4bit step flags for each photon</b>
 In [1]: ab.his[:20]   ##  OK:1    G4:-1     OK-G4   "c2" deviation

 .  n           seqhis        a        b      a-b     (a-b)^2/(a+b)   label                ## optickscore/OpticksPhoton.h enum
           ## hexstring
 0000               42     <span class="r">1822     1721      101            2.88     SI AB</span>                ## <b>AB : BULK_ABSORB </b>
 0001            7ccc2     1446     1406       40            0.56     SI BT BT BT SD       ## <b>SD : SURFACE_DETECT </b>
 0002           7ccc62      672      666        6            0.03     SI SC BT BT BT SD    ## <b>SC : BULK_SCATTER </b>
 0003            8ccc2      649      597       52            2.17     SI BT BT BT SA       ## <b>BT : BOUNDARY_TRANSMIT </b>
 0004             8cc2      606      615       -9            0.07     SI BT BT SA          ## <b>SI : SCINTILLATION </b>
 0005              452      538      536        2            0.00     SI RE AB             ## <b>RE : BULK_REEMIT </b>
 0006           7ccc52      433      438       -5            0.03     SI RE BT BT BT SD
 0007              462      397      405       -8            0.08     SI SC AB
 0008           8ccc62      269      262        7            0.09     SI SC BT BT BT SA
 0009          7ccc662      242      222       20            0.86     SI SC SC BT BT BT SD
 0010            8cc62      217      212        5            0.06     SI SC BT BT SA
 0011          7ccc652      211      205        6            0.09     SI RE SC BT BT BT SD
 0012           8ccc52      200      201       -1            0.00     SI RE BT BT BT SA
 0013            8cc52      158      192      -34            3.30     SI RE BT BT SA
 0014             4552      181      165       16            0.74     SI RE RE AB
 0015               41      164      145       19            1.17     CK AB                ## <b>CK : CERENKOV</b>
 0016          7ccc552      135      160      -25            2.12     SI RE RE BT BT BT SD
 0017             4cc2      130      115       15            0.92     SI BT BT AB
 0018             4652      120      117        3            0.04     SI RE SC AB

 .             TOTALS:    11684    11684                    52.92     52.92/63 =  0.84   pvalue:P[C2>]:0.814  1-pvalue:P[C2<]:0.186
</pre><ul class="small simple">
<li><span class="b">Opticks using 1nm step domain for all properties, populated by Geant4 interpolation</span></li>
<li>perhaps not fine enough for fast moving LS absorption across peak region 410-&gt;430 nm</li>
<li>(but first increase statistics as excess not very significant)</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="ls-wavelength">
<h1><span class="i">LS Wavelength</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">LS absorption length (red)</span></p>
<ul class="small last simple">
<li>varies quickly across wavelength peak</li>
<li>Opticks : 1nm domain bins (G4 interpolated)</li>
<li>linearly interpolated via GPU texture lookups</li>
</ul>
</div>
<!-- comment

ana/wavelength_plt.py -->

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="summary-and-links">
<h1><span class="small">Summary and Links</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Next Steps</span></p>
<ul class="small last simple">
<li>find solution for slow &quot;Fasteners&quot;</li>
<li>high statistics muon matching</li>
<li>performance measurements</li>
<li>integrate OptiX 7 API work (unify &quot;branches&quot;)</li>
</ul>
</div>
<img alt="/env/presentation/1px.png" src="/env/presentation/1px.png" style="width: 500px; height: 20px;" />
<!--  -->
<blockquote>
<p><em>Opticks</em> : state-of-the-art GPU ray traced optical simulation
integrated with <em>Geant4</em>. <span class="red">Match with JUNO-Geant4 is converging.</span>
<strong>More pioneer users welcome</strong></p>
<img alt="/env/presentation/1px.png" src="/env/presentation/1px.png" style="width: 1000px; height: 1px;" />
<ul class="simple">
<li><span class="blue">More JUNO-Opticks users essential to bring into production</span></li>
</ul>
</blockquote>
<table border="1" class="docutils align-center">
<colgroup>
<col width="55%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr><td><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks">https://bitbucket.org/simoncblyth/opticks</a></td>
<td>code repository</td>
</tr>
<tr><td><a class="reference external" href="https://github.com/simoncblyth/opticks/releases">https://github.com/simoncblyth/opticks/releases</a></td>
<td>.zip .tar.gz  archives</td>
</tr>
<tr><td><a class="reference external" href="https://simoncblyth.bitbucket.io">https://simoncblyth.bitbucket.io</a></td>
<td>presentations and videos</td>
</tr>
<tr><td><a class="reference external" href="https://groups.io/g/opticks">https://groups.io/g/opticks</a></td>
<td>forum/mailing list archive</td>
</tr>
<tr><td>email:opticks+subscribe&#64;groups.io</td>
<td>subscribe to mailing list</td>
</tr>
</tbody>
</table>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="extra-slides-follow">
<h1>&quot;Extra&quot; Slides Follow</h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="nvidia-optix-7-entirely-new-thin-api-introduced-aug-2019">
<h1><span class="small">NVIDIA OptiX 7 : Entirely new thin API (Introduced Aug 2019)</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">GPU Ray Tracing APIs Converged</span></p>
<ul class="small last simple">
<li>3 APIs (DXR,VKRay,OptiX7) over RTX</li>
<li>Driver updates <span class="r">independent of application</span></li>
<li>Support new GPUs, performance improvements</li>
</ul>
</div>
<p class="small"><strong>NVIDIA OptiX 6-&gt;7</strong> : <span class="b">drastically slimmed down</span></p>
<ul class="small simple">
<li>headers only (no library, just Driver)</li>
<li>low-level CUDA-centric thin API (Vulkan-ized)</li>
<li>Minimal host state,  <span class="red">All host functions are thread-safe</span></li>
<li>GPU launches : explicit, asynchronous (CUDA streams)</li>
<li><span class="strike">near perfect scaling to 4 GPUs, for free</span></li>
<li><span class="strike">Shared CPU/GPU geometry context</span></li>
<li><span class="strike">GPU memory management</span></li>
<li><span class="strike">Multi-GPU support</span></li>
</ul>
<dl class="small docutils">
<dt><strong>Advantages</strong></dt>
<dd><p class="first">More control/flexibility over everything.</p>
<ul class="last simple">
<li>Fully benefit from future GPUs</li>
<li><span class="b">Keep pace with state-of-the-art GPU ray tracing</span></li>
</ul>
</dd>
<dt><strong>Disadvantages</strong></dt>
<dd><p class="first">Demands much more developer effort than OptiX 6</p>
<ul class="last simple">
<li><span class="r">Major re-implementation of Opticks required</span></li>
</ul>
</dd>
</dl>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="new-foundry-model-shared-cpu-gpu-geometry-context">
<h1><span class="small">New &quot;Foundry&quot; Model : Shared CPU/GPU Geometry Context</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">IAS &lt; Inst &lt; Solid &lt; Prim &lt; Node</span></p>
<ul class="small simple">
<li><strong>Inst</strong> : 4x4 tran. + <strong>Solid</strong> ref. ( <strong>Inst</strong> -&gt; 1 <strong>IAS</strong> )</li>
<li><strong>Solid</strong> : 1 or more <strong>Prim</strong>  : ( <strong>Solid</strong> -&gt; <strong>GAS</strong> )</li>
<li><strong>Prim</strong> : 1,3,7,15,31,... <strong>Node</strong>  : (<strong>Prim</strong> ~ <em>G4VSolid</em>)</li>
</ul>
<pre class="mypretiny">
struct CSGFoundry
{
   void upload(); <span class="redbold">// to GPU </span>
...
   std::vector&lt;CSGSolid&gt;  solid ; // compounds (eg PMT)
   std::vector&lt;CSGPrim&gt;   prim ;
   std::vector&lt;CSGNode&gt;   node ; // shapes, operators

   std::vector&lt;float4&gt; plan ; // planes
   std::vector&lt;qat4&gt;   tran ; // CSG transforms
   std::vector&lt;qat4&gt;   itra ; // inverse CSG transforms
   std::vector&lt;qat4&gt;   inst ; // instance transforms

   <span class="redbold">// entire geometry in four GPU allocations</span>
   CSGPrim*    d_prim ;
   CSGNode*    d_node ;
   float4*     d_plan ;
   qat4*       d_itra ;
 };
</pre><p class="small last"><span class="bluebold">referencing by offset, count</span></p>
</div>
<ul class="small simple">
<li><span class="r">replaces geometry context dropped in OptiX 6-&gt;7</span></li>
<li>array-based -&gt; simple, inherent serialization + persisting</li>
<li>entire geometry in 4 GPU allocations</li>
</ul>
<p class="small"><strong>Simple intersect headers, common CPU/GPU types</strong></p>
<ul class="small simple">
<li>use with : pre-7, 7 + testing on CPU</li>
</ul>
<pre>
</pre><dl class="small docutils">
<dt><span class="bluebold">https://github.com/simoncblyth/CSG</span> &quot;Foundry&quot; model</dt>
<dd><dl class="first last docutils">
<dt><strong>csg_intersect_tree.h/csg_intersect_node.h/...</strong></dt>
<dd><span class="redbold">simple headers common to pre-7/7/CPU-testing</span></dd>
</dl>
</dd>
<dt><span class="bluebold">https://github.com/simoncblyth/CSG_GGeo</span></dt>
<dd>Convert <em>Opticks/GGeo</em> -&gt; <em>CSGFoundry</em></dd>
<dt><span class="bluebold">https://github.com/simoncblyth/CSGOptiX</span></dt>
<dd>OptiX 7 + pre-7 rendering</dd>
</dl>
<pre>

</pre><p class="tiny"><strong>GAS</strong> : Geometry Acceleration Structure</p>
<p class="tiny"><strong>IAS</strong> : Instance Acceleration Structure</p>
<p class="tiny"><strong>CSG</strong> : Constructive Solid Geometry</p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="cxr-i0-t8-1-exclude-slowest">
<h1><span class="i">[9]cxr_i0_t8,_-1 : EXCLUDE SLOWEST</span></h1>
<pre>



</pre><div class="sidebar">
<p class="first sidebar-title"><span class="small">1st JUNO Opticks OptiX 7 Ray-trace</span></p>
<p class="small">Very New CSG &quot;Foundry&quot; CPU/GPU Geometry</p>
<ul class="small last simple">
<li><span class="redbold">purely analytic CSG, no triangles</span></li>
<li>everything at default, no optimization</li>
</ul>
</div>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="current-juno-geometry-auto-factorized-by-progeny-digest">
<h1><span class="small">Current JUNO Geometry : Auto-Factorized by &quot;progeny digest&quot;</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Factorize ~300,000 vol -&gt; 10 comp</span></p>
<ul class="small simple">
<li><strong>ridx</strong>: repeat index</li>
<li><strong>plc</strong>: number of placements of the instance</li>
<li><strong>prim</strong>: number of Prim/volumes in the instance</li>
<li><strong>component</strong>: numPrim:outerPrimName</li>
</ul>
<p class="small last"><span class="r">&quot;progeny digest&quot;</span> characterizes subtree of every volume-node</p>
</div>
<table border="1" class="tiny docutils">
<colgroup>
<col width="5%" />
<col width="7%" />
<col width="6%" />
<col width="51%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">ridx</th>
<th class="head">plc</th>
<th class="head">prim</th>
<th class="head">component</th>
<th class="head">note</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>1</td>
<td>3084</td>
<td>3084:sWorld</td>
<td>non-repeated remainder</td>
</tr>
<tr><td>1</td>
<td>25600</td>
<td>5</td>
<td>5:PMT_3inch_pmt_solid</td>
<td rowspan="4">4 types of PMT</td>
</tr>
<tr><td>2</td>
<td>12612</td>
<td>5</td>
<td>5:NNVTMCPPMTsMask</td>
</tr>
<tr><td>3</td>
<td>5000</td>
<td>5</td>
<td>5:HamamatsuR12860sMask</td>
</tr>
<tr><td>4</td>
<td>2400</td>
<td>5</td>
<td>5:mask_PMT_20inch_vetosMask</td>
</tr>
<tr><td>5</td>
<td>590</td>
<td>1</td>
<td>1:sStrutBallhead</td>
<td rowspan="4">4 parts of same
assembly, BUT not
grouped as siblings
(not parent-child)</td>
</tr>
<tr><td>6</td>
<td>590</td>
<td>1</td>
<td>1:uni1</td>
</tr>
<tr><td>7</td>
<td>590</td>
<td>1</td>
<td>1:base_steel</td>
</tr>
<tr><td>8</td>
<td>590</td>
<td>1</td>
<td>1:uni_acrylic3</td>
</tr>
<tr><td>9</td>
<td>504</td>
<td>130</td>
<td>130:sPanel</td>
<td>repeated parts of TT</td>
</tr>
</tbody>
</table>
<ul class="small simple">
<li><strong>ridx:0</strong> &quot;remainder&quot; Prim<ul>
<li>Prim that did not pass instancing criteria, on number of repeats + complexity</li>
<li>TODO: tune criteria to instance more, reducing remainder Prim (Expect: 3084-&gt;~ 84)</li>
</ul>
</li>
<li><strong>ridx:1,2,3,4</strong><ul>
<li>four types of PMT, all with 5 Prim</li>
</ul>
</li>
<li><strong>ridx:5,6,7,8</strong><ul>
<li>same 590x assembly <span class="redbold">but not grouped together</span> : as siblings (not parent-child like PMTs)</li>
<li>TODO: implement instancing of siblings, combining 4 -&gt; 1</li>
</ul>
</li>
</ul>
<p class="small"><span class="redbold">Increasing instancing : reduces memory for geometry -&gt; improved performance</span></p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-optix-7-foundry-geometry-scan">
<h1><span class="i">JUNO OptiX 7 : &quot;Foundry&quot; Geometry Scan</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Vary Geom. Compare Render Times</span></p>
<p class="small last">Fast render -&gt; Fast simulation</p>
</div>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-geometry-optix-7-ray-trace-times-2m-pixels-titan-rtx">
<h1><span class="small">JUNO Geometry : OptiX 7 Ray Trace Times ~2M pixels : TITAN RTX</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Same viewpoint, vary GPU geometry</span></p>
<ul class="small simple">
<li><strong>-e</strong> : controls components : &quot;t&quot; means ~ (NOT)</li>
<li><strong>time(s)</strong> : GPU ray trace CUDA launch time</li>
<li><strong>relative</strong> : compares to &quot;ONLY PMT&quot; baseline</li>
</ul>
<p class="small">Very large range of times 1:600</p>
<p class="small"><span class="r">Table identifies slow geometry to fix :</span></p>
<ul class="small simple">
<li><strong>3084:sWorld</strong> (too many non-instanced Prim)</li>
<li><strong>1:uni_acrylic</strong> (CSG sub. 35m diam. sphere)</li>
</ul>
<p class="small">Good performance for <span class="b">ONLY PMTs</span> :</p>
<ul class="small last simple">
<li><span class="b">45,612 PMT instances handled without issue</span></li>
</ul>
</div>
<table border="1" class="tiny docutils">
<colgroup>
<col width="2%" />
<col width="9%" />
<col width="14%" />
<col width="14%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">idx</th>
<th class="head">-e</th>
<th class="head">time(s)</th>
<th class="head">relative</th>
<th class="head">enabled geometry description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>9,</td>
<td>0.0017</td>
<td>0.1702</td>
<td>ONLY: 130:sPanel</td>
</tr>
<tr><td>1</td>
<td>7,</td>
<td>0.0017</td>
<td>0.1714</td>
<td>ONLY: 1:base_steel</td>
</tr>
<tr><td>2</td>
<td>6,</td>
<td>0.0019</td>
<td>0.1923</td>
<td>ONLY: 1:uni1</td>
</tr>
<tr><td>3</td>
<td>5,</td>
<td>0.0027</td>
<td>0.2780</td>
<td>ONLY: 1:sStrutBallhead</td>
</tr>
<tr><td>4</td>
<td>4,</td>
<td>0.0032</td>
<td>0.3268</td>
<td>ONLY: 5:mask_PMT_20inch_vetosMask</td>
</tr>
<tr><td>5</td>
<td>1,</td>
<td>0.0032</td>
<td>0.3287</td>
<td>ONLY: 5:PMT_3inch_pmt_solid</td>
</tr>
<tr><td>6</td>
<td>2,</td>
<td>0.0055</td>
<td>0.5669</td>
<td>ONLY: 5:NNVTMCPPMTsMask</td>
</tr>
<tr><td>7</td>
<td>3,</td>
<td>0.0074</td>
<td>0.7582</td>
<td>ONLY: 5:HamamatsuR12860sMask</td>
</tr>
<tr><td>8</td>
<td><span class="b">1,2,3,4</span></td>
<td><span class="b">0.0097</span></td>
<td><span class="b">1.0000</span></td>
<td><span class="b">ONLY PMT</span></td>
</tr>
<tr><td>9</td>
<td>t8,0</td>
<td>0.0099</td>
<td>1.0179</td>
<td>EXCL: 1:uni_acrylic3 3084:sWorld</td>
</tr>
<tr><td>10</td>
<td><span class="r">0,</span></td>
<td><span class="r">0.1171</span></td>
<td><span class="r">12.0293</span></td>
<td><span class="r">ONLY: 3084:sWorld</span></td>
</tr>
<tr><td>11</td>
<td><span class="r">t8,</span></td>
<td><span class="r">0.1186</span></td>
<td><span class="r">12.1769</span></td>
<td><span class="r">EXCL: 1:uni_acrylic3</span></td>
</tr>
<tr><td>12</td>
<td><span class="r">t0,</span></td>
<td><span class="r">0.5278</span></td>
<td><span class="r">54.2066</span></td>
<td><span class="r">EXCL: 3084:sWorld</span></td>
</tr>
<tr><td>13</td>
<td><span class="r">8,</span></td>
<td><span class="r">0.5310</span></td>
<td><span class="r">54.5298</span></td>
<td><span class="r">ONLY: 1:uni_acrylic3</span></td>
</tr>
<tr><td>14</td>
<td>t3,</td>
<td>0.6017</td>
<td>61.7954</td>
<td>EXCL: 5:HamamatsuR12860sMask</td>
</tr>
<tr><td>15</td>
<td>t2,</td>
<td>0.6043</td>
<td>62.0620</td>
<td>EXCL: 5:NNVTMCPPMTsMask</td>
</tr>
<tr><td>16</td>
<td>t5,</td>
<td>0.6171</td>
<td>63.3787</td>
<td>EXCL: 1:sStrutBallhead</td>
</tr>
<tr><td>17</td>
<td>t6,</td>
<td>0.6196</td>
<td>63.6301</td>
<td>EXCL: 1:uni1</td>
</tr>
<tr><td>18</td>
<td>t7,</td>
<td>0.6226</td>
<td>63.9458</td>
<td>EXCL: 1:base_steel</td>
</tr>
<tr><td>19</td>
<td>t0</td>
<td>0.6240</td>
<td>64.0879</td>
<td>3084:sWorld</td>
</tr>
<tr><td>20</td>
<td>t4,</td>
<td>0.6243</td>
<td>64.1169</td>
<td>EXCL: 5:mask_PMT_20inch_vetosMask</td>
</tr>
<tr><td>21</td>
<td>t9,</td>
<td>0.6335</td>
<td>65.0636</td>
<td>EXCL: 130:sPanel</td>
</tr>
<tr><td>22</td>
<td>t1,</td>
<td>0.6391</td>
<td>65.6384</td>
<td>EXCL: 5:PMT_3inch_pmt_solid</td>
</tr>
</tbody>
</table>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-all-pmts-2m-ray-traced-pixels-in-0-0097-s-nvidia-titan-rtx-nvidia-optix-7-0-0-opticks">
<h1><span class="white">JUNO ALL PMTs : 2M ray traced pixels in 0.0097 s : NVIDIA TITAN RTX, NVIDIA OptiX 7.0.0, Opticks</span></h1>

        <!--  s5talk  -->
        <br/>
    <!-- comment

:white:`[8]cxr_i0_1,2,3,4_-1 : ALL PMTS`
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

.. s5_talk::

   8 : ALL PMTS -->
</div>
</div>
</body>
</html>
