<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>Review Opticks + JUNO</title>
<meta content="Navigate the HTML slides by entering a page number and pressing return" name="note" />
<meta content="Review JUNO + Opticks : GPU Optical Photon Simulation with NVIDIA OptiX" name="title" />
<meta content="Polycone Neck Implemented, Project Integration" name="description" />
<meta content="JUNO Collaboration Meeting, IHEP Virtual" name="event" />
<meta content="1 Feb 2021" name="date" />
<meta content="15 minutes" name="length" />
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="ui/my-small-white/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/my-small-white/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/my-small-white/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/my-small-white/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/my-small-white/opera.css"
      type="text/css" media="projection" id="operaFix" />
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1><span class="i">Review Opticks + JUNO</span></h1>

</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title"><span class="i">Review Opticks + JUNO</span></h1>

<!-- Definitions of interpreted text roles (classes) for S5/HTML data. -->
<!-- This data file has been placed in the public domain. -->
<!-- Colours
======= -->
<!-- Text Sizes
========== -->
<!-- Display in Slides (Presentation Mode) Only
========================================== -->
<!-- Display in Outline Mode Only
============================ -->
<!-- Display in Print Only
===================== -->
<!-- Display in Handout Mode Only
============================ -->
<!-- Incremental Display
=================== -->
<style type="text/css">

    .strike { text-decoration: line-through; }
    .center {text-align: center;}

    span.alarm { color: red; }
    span.blue { color: blue; }
    span.warn { color: orange; }
    span.ok { color: green; }
    span.i { display: none; }
    pre.sliteral { class:"literal-block small"; }
    pre.mypre {
         display: block;
         font-family: monospace;
         font-size: 20px;
         white-space: pre;
         margin: 1em 0;
    }

    pre.mypretiny {
         display: block;
         font-family: monospace;
         font-size: 15px;
         white-space: pre;
         margin: 1em 0;
    }

    pre.myfoot {
         display: block;
         font-family: monospace;
         font-size: 18px;
         white-space: pre;
         color: white;
         position: absolute; top:86%; left:4%; width:50%; height:10% ;
    }

    a.mylink {
         display: block;
         font-family: monospace;
         font-size: 18px;
         white-space: pre;
         color: black;
         position: absolute; top:86%; left:4%; width:50%; height:10% ;
    }


    div.mytitle {
         font-size: 20px;
         color: black;
         position: absolute; top:0%; left:5%; width:90%; height:10% ;
    }

    div.mytitle2 {
         font-size: 20px;
         color: black;
         position: absolute; top:5%; left:5%; width:90%; height:10% ;
    }



    div.mycredit {
         font-size: 20px;
         color: black;
         position: absolute; top:90%; left:5%; width:80%; height:10% ;
    }

    div.mysidebar {
        margin: 0 0 0.5em 1em;
        border: medium outset;
        padding: 1em;
        background-color: #ffffee;
        width: 20%;
        float: right;
        clear: right;
    }

    table.mytable th {
         background-color: #ede;
    }
    table.mytable tr:nth-child(even) {
        background-color: #F3F3FF;
    }
    table.mytable tr:nth-child(odd) {
        background-color: #FFFFEE;
    }


</style><!-- comment

.. raw:: html

   <span>&nbsp;</span>

.. raw:: html

   <hr/>

Idea for addition to intro : talk about geometry factorization -->
<div class="mytitle">
<header>
<h1 style="background-color:lightgrey;text-align:center;">
      <span class="alarm">Review  </span> JUNO Integration with <i>Opticks</i> : <br> GPU Optical Simulation with NVIDIA® OptiX™
    <h2 style="background-color:lightgrey;text-align:center"> Open source, https://bitbucket.org/simoncblyth/opticks </h2>
</h1>
</header>
</div>

<div class="mycredit">
<h2 style="background-color:lightgrey"> Simon C Blyth, IHEP, CAS &mdash; JUNO Collaboration Meeting, Jan/Feb 2021, Virtual</h2>
</div>
        <!--  s5talk  -->
        <br/>
    
</div>
<div class="slide" id="outline">
<h1>Outline</h1>
<img alt="/env/presentation/newtons-opticks.png" class="align-right" src="/env/presentation/newtons-opticks.png" style="width: 299px; height: 547px;" />
<ul class="small simple">
<li><span class="blue">Introduction (pp 2-6)</span><ul>
<li>Optical Photon Simulation Problem...</li>
<li>NVIDIA OptiX Ray Tracing Engine</li>
<li>Geant4 + Opticks Hybrid Workflow</li>
<li>Opticks : Translates G4 Geometry to GPU, Without Approximation</li>
</ul>
</li>
<li><span class="blue">2020 : Leap in Opticks awareness and Users</span><ul>
<li>G4OpticksTest : Fermilab Geant4 team</li>
<li>Geant4 Bugs 2305,2311 : opticalsurface, bordersurface</li>
<li>CERN Geant4 team (John Apostolakis)</li>
<li>LZ team (dark matter experiment), LBL Perlmutter Supercomputer team, NVIDIA OptiX team</li>
<li>LHCb RICH (Sajan Easo)</li>
</ul>
</li>
<li><span class="blue">Necessary JUNO Geometry Changes (pp 7-14)</span><ul>
<li><span class="red">Remove all Torus to enable translation to GPU</span></li>
<li>&quot;tubs-torus&quot; -&gt; polycone : --pmt20inch-polycone-neck</li>
<li>HamamatsuR12860 &amp; NNVTMCPPMT : neck comparisons</li>
</ul>
</li>
<li><span class="blue">Integration of JUNO Offline + Opticks (pp 15-17)</span><ul>
<li><span class="red">Opticks is now a JunoENV External</span></li>
<li>JUNO Offline : Where WITH_G4OPTICKS used ?</li>
<li><span class="red">Using Offline + Opticks : tut_detsim.py options</span></li>
<li>Next Step : Theta dependent Collection Efficiency -&gt; GPU</li>
</ul>
</li>
<li><span class="blue">Opticks + Geant4 News : Two Geant4 Task Force R&amp;Ds Based on Opticks (p27)</span></li>
<li><span class="blue">Summary and Links (p28)</span></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-optical-photon-simulation-problem">
<h1><span class="incremental">JUNO Optical Photon Simulation Problem...</span></h1>
<pre>







</pre><div class="sidebar">
<p class="first sidebar-title"><span class="small">Huge CPU Memory+Time Expense</span></p>
<dl class="small last docutils">
<dt><strong>JUNO Muon Simulation Bottleneck</strong></dt>
<dd>~99% CPU time, memory constraints</dd>
<dt><strong>Ray-Geometry intersection Dominates</strong></dt>
<dd>simulation is not alone in this problem...</dd>
<dt><strong>Optical photons : naturally parallel, simple :</strong></dt>
<dd><ul class="first last simple">
<li>produced by Cherenkov+Scintillation</li>
<li>yield only Photomultiplier hits</li>
</ul>
</dd>
</dl>
</div>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="nvidia-optix-ray-tracing-engine-http-developer-nvidia-com-optix">
<h1><span class="small">NVIDIA® OptiX™ Ray Tracing Engine -- http://developer.nvidia.com/optix</span></h1>
<div class="sidebar">
<p class="first sidebar-title">OptiX Raytracing Pipeline</p>
<p class="small">Analogous to OpenGL rasterization pipeline:</p>
<img alt="/env/optix/docs/optix-model.png" class="last align-right" src="/env/optix/docs/optix-model.png" style="width: 450px;" />
</div>
<p class="small"><strong>OptiX makes GPU ray tracing accessible</strong></p>
<ul class="small simple">
<li><strong>accelerates</strong> ray-geometry intersections</li>
<li>simple : single-ray programming model</li>
<li>&quot;...free to use within any application...&quot;</li>
<li><span class="red">access RT Cores[1] with OptiX 6.0.0+ via RTX™ mode</span></li>
</ul>
<p class="small"><strong>NVIDIA expertise:</strong></p>
<ul class="small simple">
<li><span class="red">~linear scaling up to 4 GPUs</span></li>
<li>acceleration structure creation + traversal (Blue)</li>
<li>instanced sharing of geometry + acceleration structures</li>
<li>compiler optimized for GPU ray tracing</li>
</ul>
<p class="tiny"><tt class="docutils literal"><span class="pre">https://developer.nvidia.com/rtx</span></tt></p>
<p class="small"><strong>User provides (Yellow):</strong></p>
<ul class="small simple">
<li>ray generation</li>
<li>geometry bounding box, intersects</li>
</ul>
<p class="tiny">[1] Turing+ GPUs eg NVIDIA TITAN RTX</p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="geant4opticksworkflow">
<h1><span class="i">Geant4OpticksWorkflow</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="opticks-translates-g4-geometry-to-gpu-without-approximation">
<h1><span class="small">Opticks : Translates G4 Geometry to GPU, Without Approximation</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Materials/Surfaces -&gt; GPU Texture</span></p>
<p class="small"><strong>Material/Surface/Scintillator properties</strong></p>
<ul class="small simple">
<li>interpolated to standard wavelength domain</li>
<li>interleaved into &quot;boundary&quot; texture</li>
<li>&quot;reemission&quot; texture for wavelength generation</li>
</ul>
<p class="small"><strong>Material/surface boundary : 4 indices</strong></p>
<ul class="small simple">
<li>outer material (parent)</li>
<li>outer surface (inward photons, parent -&gt; self)</li>
<li>inner surface (outward photons, self -&gt; parent)</li>
<li>inner material (self)</li>
</ul>
<p class="small">Primitives labelled with unique boundary index</p>
<ul class="small simple">
<li>ray primitive intersection -&gt; boundary index</li>
<li>texture lookup -&gt; material/surface properties</li>
</ul>
<p class="small last"><span class="red">simple/fast properties + reemission wavelength</span></p>
</div>
<p class="small"><strong>G4 Structure Tree -&gt; Instance+Global Arrays -&gt; OptiX</strong></p>
<p class="small">Group structure into repeated instances + global remainder:</p>
<ul class="small simple">
<li>auto-identify repeated geometry with &quot;progeny digests&quot;<ul>
<li>JUNO (SVN trunk) : 9 distinct instances + 1 global</li>
</ul>
</li>
<li>instance transforms used in OptiX/OpenGL geometry</li>
</ul>
<p class="small"><span class="red">instancing -&gt; huge memory savings for JUNO PMTs</span></p>
<pre>
</pre><!-- comment

**Automated : Geant4 "World" -> Opticks CSG -> CUDA/OptiX**

**Solids : analytic CSG + triangulated**

* intersection functions for ~10 primitives
* intersection program for arbitrarily complex CSG shapes

  * :red:`automated : G4 -> Opticks -> OptiX` -->

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="j1808-top-rtx">
<h1><span class="i">j1808_top_rtx</span></h1>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="leap-in-opticks-awareness-meetings-publications-new-users">
<h1><span class="small">2020 : Leap in Opticks Awareness : Meetings, Publications &gt;&gt;&gt; New Users</span></h1>
<p class="small"><strong>(Feb 2020) Workshop on Efficient Computing for HEP, Edinburgh</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://indico.ph.ed.ac.uk/event/66/">https://indico.ph.ed.ac.uk/event/66/</a> &quot;Full Simulation of HEP Detectors with Geant4&quot;, Ben Morgan</li>
</ul>
<p class="small"><strong>(May 2020) HSF (HEP Software Foundation) Meeting : GPUs in Simulations</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://indico.cern.ch/event/921244/">https://indico.cern.ch/event/921244/</a> &quot;Opticks Development Experience : Problems and Successes&quot;, Simon Blyth</li>
</ul>
<p class="small"><strong>(10+24 June 2020) HSF Meeting : R&amp;D on accelerators in Simulations</strong> <span class="red">3/9 talks discussed Opticks</span></p>
<ul class="small simple">
<li><a class="reference external" href="https://indico.cern.ch/event/925887/">https://indico.cern.ch/event/925887/</a> <a class="reference external" href="https://indico.cern.ch/event/930881/">https://indico.cern.ch/event/930881/</a></li>
<li>&quot;e/γ (GPU) calorimeter simulation.. &quot;, John Apostolakis, &quot;Prototyping simulation .. on GPUs&quot;, Andrei Gheata</li>
<li>&quot;Prospects for (LHCb) RICH detector simulation using OptiX in GPUs&quot;, Sajan Easo</li>
</ul>
<p class="small"><strong>(Aug 2020) HSF Publication : HL-LHC Computing Review: Common Tools and Community Software</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://zenodo.org/record/4009114">https://zenodo.org/record/4009114</a> Graeme Stewart,... <span class="red">HL-LHC Computing Review discusses Opticks</span></li>
</ul>
<p class="small"><strong>(Sep 2020) Geant4 : R&amp;D Task Force Meeting</strong> <span class="red">3+ Geant4 teams pursuing GPUs, 1 based on Opticks</span></p>
<ul class="small simple">
<li><a class="reference external" href="https://indico.cern.ch/event/942142/sessions/363813/#20200915">https://indico.cern.ch/event/942142/sessions/363813/#20200915</a></li>
</ul>
<ol class="small arabic simple">
<li>&quot;G4Opticks for liquid Argon TPCs&quot;, Fermilab Geant4 Team, Hans Wenzel</li>
<li>&quot;<a class="reference external" href="mailto:VecGeom&#64;GPU">VecGeom&#64;GPU</a>&quot;, CERN Geant4 Team, Andrei Gheata</li>
</ol>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="leap-in-opticks-awareness-some-users-getting-serious">
<h1><span class="small">2020 : Leap in Opticks Awareness &gt;&gt;&gt; Some Users Getting Serious</span></h1>
<p class="small"><strong>(Aug 2020) Shanghai SJTU : Next-gen Neutrino Telescope Simulation Workshop</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://indico-tdli.sjtu.edu.cn/event/238/sessions/109/#20200813">https://indico-tdli.sjtu.edu.cn/event/238/sessions/109/#20200813</a></li>
<li>&quot;Opticks : GPU/Graphics backgroup + Application to underwater neutrino telescope simulations ?&quot;, Simon Blyth</li>
<li><span class="red">SJTU team evaluating Opticks for deep ocean expt simulations (Fan Hu, Donglian Xu)</span></li>
</ul>
<p class="small"><strong>(Aug 2020) Snowmass 2021 : Three LoI based on Opticks</strong> : <span class="red">Multi-expt Dark Matter group invited me to sign LoI</span></p>
<ol class="small arabic simple">
<li>&quot;Opticks : GPU photon simulation via NVIDIA OptiX&quot;, Simon Blyth</li>
<li>&quot;Fast simulations for Noble Liquid experiments&quot;, XENON, DARWIN, LZ teams, Simon Blyth</li>
<li>&quot;Simulating Optical Photons in HEP experiments on GPUs&quot;, Fermilab Geant4 team</li>
</ol>
<p class="small"><strong>(Aug 2020) NERSC Users Group (NUG) meeting</strong> : <span class="red">LZ aiming to deploy Opticks on Perlmutter supercomputer</span></p>
<ul class="small simple">
<li><a class="reference external" href="https://www.nersc.gov/users/NUG/annual-meetings/nug-2020/">https://www.nersc.gov/users/NUG/annual-meetings/nug-2020/</a></li>
<li><a class="reference external" href="https://www.nersc.gov/assets/Uploads/1400-Opticks-on-CoriGPU.pdf">https://www.nersc.gov/assets/Uploads/1400-Opticks-on-CoriGPU.pdf</a></li>
<li>&quot;Opticks on CoriGPU&quot;, O.Creaner, 5 authors from : NERSC/LBL/LZ/Stanford/Bristol</li>
<li><span class="red">Opticks in Shifter/Docker container -&gt; CoriGPU -&gt; Perlmutter Cray/NVIDIA supercomputer</span></li>
<li>Perlmutter : &gt; 6000 NVIDIA A100 (Ampere Architecture GPU)</li>
</ul>
<p class="tiny"><a class="reference external" href="https://insidehpc.com/2020/05/perlmutter-supercomputer-to-include-more-than-6000-nvidia-a100-processors/">https://insidehpc.com/2020/05/perlmutter-supercomputer-to-include-more-than-6000-nvidia-a100-processors/</a></p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="groups-io-1">
<h1><span class="i">GROUPS_IO_1</span></h1>
<pre>







</pre><div class="sidebar">
<p class="first sidebar-title"><span class="small">Email Group + Web Archive</span></p>
<p><tt class="docutils literal"><span class="pre">https://groups.io/g/opticks</span></tt></p>
<p><strong>25 Members, 33 Topics</strong></p>
<p>Members joining by year:</p>
<ul class="last simple">
<li>2018/2019/2020 : 5/9/11</li>
<li><tt class="docutils literal">opticks+subscribe&#64;groups.io</tt></li>
</ul>
</div>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="g4optickstest-demonstrates-geant4-opticks-hybrid-workflow">
<h1><span class="small">G4OpticksTest : Demonstrates Geant4 + Opticks hybrid workflow</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Plan for G4OpticksTest</span></p>
<ul class="small last simple">
<li>advanced example distributed with Geant4</li>
<li>explore use with G4Tasking with 10.7</li>
</ul>
</div>
<p class="small"><strong>(Nov 2020) HSF WLCG Virtual Workshop : https://indico.cern.ch/event/941278/timetable/#20201123.detailed</strong></p>
<ul class="small simple">
<li>Hans Wenzel, Fermilab Geant4 Team</li>
</ul>
<p class="small">Worked closely with Hans for several years</p>
<ul class="small simple">
<li>Developed Geant4-Opticks integration API <strong>G4Opticks</strong></li>
<li>Recently reported two Geant4 optical surface issues #2305 #2311</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="geant4-bug-2305">
<h1><span class="i">Geant4_Bug_2305</span></h1>
<pre>







</pre><div class="sidebar">
<p class="first sidebar-title">Geant4 Bug 2305</p>
<p><span class="small">https://bugzilla-geant4.kek.jp/show_bug.cgi?id=2305</span></p>
<p>Five Geant4 releases are <strong>unusable</strong>:</p>
<ul class="last simple">
<li>1060, 1061, 1062, 1063</li>
<li>1070</li>
<li><strong>fix planned for 1071</strong></li>
</ul>
</div>
<pre>


</pre><p class="small"><span class="red">Unfortunately it took me five releases to notice this showstopper</span></p>
<p class="small"><strong>Any GDML using expt. with &gt; 1 optical surface, should not use these
five releases of Geant4.</strong></p>
<p class="small">Important to test ahead, checking lastest Geant4:</p>
<ul class="small simple">
<li><span class="red">natural way to contribute to Geant4</span> and <span class="blue">raises profile</span></li>
<li>avoids : surprises, excluded releases</li>
<li>ease future &quot;official&quot; updating</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="geant4-bug-2311">
<h1><span class="i">Geant4_Bug_2311</span></h1>
<pre>






</pre><div class="sidebar">
<p class="first sidebar-title">Geant4 Bug 2311</p>
<p><span class="small">https://bugzilla-geant4.kek.jp/show_bug.cgi?id=2311</span></p>
<p>Effected Geant4 releases: 1070+</p>
<p class="small">bordersurface std::vector -&gt; std::map API Change</p>
<ul class="small last simple">
<li>made Opticks name sort workaround for 1070</li>
<li>have suggested <strong>creation order index</strong> to improve workaround &gt; 1070</li>
</ul>
</div>
<pre>


</pre><p class="small"><span class="red">Problem noticed in first release</span></p>
<p class="small">Geant4 team seem willing to follow my suggestion
that will avoid any lasting impact.</p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="lhcb-rich-ring-imaging-cherenkov-with-opticks-sajan-easo">
<h1><span class="small">LHCb RICH (Ring Imaging Cherenkov) with Opticks : Sajan Easo</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">LHCb Opticks Users</span></p>
<p class="small">Several LHCb members are using Opticks</p>
<ul class="small last simple">
<li>Sajan Easo has reported his investigations</li>
</ul>
</div>
<p class="small"><strong>(June 2020) HSF (HEP Software Foundation) Meeting</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://indico.cern.ch/event/930881/">https://indico.cern.ch/event/930881/</a></li>
<li>&quot;Prospects for RICH simulation using Opticks&quot;, Sajan Easo (STFC-GB)</li>
<li>Standard Geant4 costs ~30% CPU time for optical photons</li>
<li><span class="red">successful validations</span></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="opticks-for-next-generation-neutrino-telescope-optimization">
<h1><span class="small">Opticks for next-generation neutrino telescope optimization ?</span></h1>
<p class="small"><strong>(Aug 2020) Shanghai SJTU : Next-gen Neutrino Telescope Simulation Workshop</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://indico-tdli.sjtu.edu.cn/event/238/sessions/109/#20200813">https://indico-tdli.sjtu.edu.cn/event/238/sessions/109/#20200813</a></li>
<li>&quot;Opticks : GPU/Graphics backgroud + Application to underwater neutrino telescope simulations ?&quot;, Simon Blyth</li>
<li><span class="red">SJTU team evaluating Opticks for deep ocean expt simulations (Fan Hu, Donglian Xu)</span><ul>
<li>enormous instrumented volumes O(10) km^3 water/ice</li>
<li>strings of pods geometry</li>
<li>huge numbers of Cherenkov photons propagating across enormous volumes, how to simulate ?</li>
</ul>
</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="lz-opticks-history-2018-2021-contacts-with-5-lz-people">
<h1><span class="small">LZ+Opticks history : 2018-2021 : contacts with &gt;5 LZ people</span></h1>
<ul class="small simple">
<li><span class="red">Summer 2020 : LZ+Opticks simulation identified as candidate for new Perlmutter Cray/NVIDIA supercomputer at NERSC</span></li>
<li>Autumn 2020 : LZ+NERSC proposed an NVIDIA assisted Hackathon to optimize LZ+Opticks simulation<ul>
<li>BUT no point optimizing prior to migration : NVIDIA OptiX 6 -&gt; 7 (an entirely new &quot;Vulkan-ized&quot; API)</li>
<li>migration to NVIDIA OptiX 7+ is unavoidable, it beings challenges and opportunities<ul>
<li>multi-GPU scaling no longer provided, thread-safe OptiX 7 opens possibilities, especially for Opticks Server+Client</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="small"><strong>(Aug 2020) NERSC Users Group (NUG) meeting</strong> : <span class="red">LZ aiming to deploy Opticks on Perlmutter supercomputer</span></p>
<ul class="small simple">
<li><a class="reference external" href="https://www.nersc.gov/users/NUG/annual-meetings/nug-2020/">https://www.nersc.gov/users/NUG/annual-meetings/nug-2020/</a></li>
<li>&quot;Opticks on CoriGPU&quot;, O.Creaner, 5 authors from : NERSC/LBL/LZ/Stanford/Bristol</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="lz-opticks-simulation-on-perlmutter-6000-nvidia-a100">
<h1><span class="small">2021 : LZ+Opticks simulation on Perlmutter (&gt;6000 NVIDIA A100)</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Opportunity for Expert Assistance</span></p>
<ul class="small last simple">
<li>NVIDIA GPU developer team<ul>
<li>real experts advising/optimizing Opticks</li>
<li>influence on NVIDIA OptiX direction(?)</li>
</ul>
</li>
<li>NERSC supercomputer team<ul>
<li>Docker/Shifter containerization</li>
<li>large scale production optimization</li>
</ul>
</li>
</ul>
</div>
<p class="small"><strong>(8 Jan 2021) Zoom Introduction Meeting of &gt;12 people : LZ/NERSC(6), NVIDIA(5), Opticks(1)</strong></p>
<ul class="small simple">
<li>NERSC + NVIDIA teams: senior engineers + postdoc &quot;workers&quot;</li>
<li>NVIDIA team : experienced with OptiX 6-&gt;7, multi-GPU + multi-threaded CUDA/OptiX</li>
</ul>
<p class="small"><strong>Prepared Opticks codebase orientation for developers</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://simoncblyth.bitbucket.io/opticks/docs/orientation.html">https://simoncblyth.bitbucket.io/opticks/docs/orientation.html</a></li>
</ul>
<p class="small"><strong>From February:</strong></p>
<ul class="small simple">
<li><span class="red">plan bi-weekly working meetings</span></li>
<li>migration assistance</li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="uk-swift-hep-grant-software-infrastructure-and-technology-for-hep">
<h1><span class="small">UK SWIFT-HEP grant : SoftWare InFrastructure and Technology for HEP</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">UOM : Plan 0.5 FTE over 12 months</span></p>
<ul class="small simple">
<li>integration of Opticks within Geant4</li>
<li>widening Opticks applicability</li>
<li>&quot;... also plan to hire software engineer to assist...&quot;</li>
</ul>
<p class="small last"><span class="blue">details yet to be determined</span></p>
</div>
<p class="small"><strong>SWIFT-HEP : Newly funded (1.5M GBP over 3 yrs)</strong></p>
<p class="small">University of Manchester (UOM), Adam Davis</p>
<ul class="small simple">
<li>&quot;... we identified Opticks as a major contribution area ...&quot;</li>
</ul>
<p class="small"><strong>(Jan 2021) SwiftHep/ExcaliburHep workshop presentation</strong></p>
<p class="small">Ben Morgan, University of Warwick + Geant4</p>
<ul class="small simple">
<li><a class="reference external" href="https://indico.cern.ch/event/976081/">https://indico.cern.ch/event/976081/</a></li>
</ul>

        <!--  s5talk  -->
        <br/>
    <!-- comment

00:Title Page
01:Outline

Intro

    02:JUNO Optical Photon Simulation Problem...
    03:NVIDIA® OptiX™ Ray Tracing Engine - - http://developer.nvidia.com/optix
    04:Geant4 Opticks Workflow
    05:Opticks : Translates G4 Geometry to GPU, Without Approximation
    06:Ray Trace Render

Leap+Group

    07:2020 : Leap in Opticks Awareness : Meetings, Publications >>> New Users
    08:2020 : Leap in Opticks Awareness >>> Some Users Getting Serious
    09:groups.io : Email Group + Web Archive

Big Example 1

    10:G4OpticksTest : Demonstrates Geant4 + Opticks hybrid workflow
    11:Geant4_Bug_2305
    12:Geant4_Bug_2311

Small Examples 2,3

    13:LHCb RICH (Ring Imaging Cherenkov) with Opticks : Sajan Easo
    14:Opticks for next-generation neutrino telescope optimization ?

Big Example 4

    15:LZ+Opticks history : 2018-2021 : contacts with >5 LZ people
    16:2021 : LZ+Opticks simulation on Perlmutter (>6000 NVIDIA A100)

Big Example 5

    17:UK SWIFT-HEP grant : SoftWare InFrastructure and Technology for HEP




Extras

    JUNO Geometry : Remove Torus to enable translation to GPU -->
<!-- comment

:small:`https://bitbucket.org/simoncblyth/opticks/src/master/notes/tasks/tasks.rst`
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

.. image:: /env/presentation/tasks/tasks_jan_2021_half.png
   :width: 600px
   :align: right

.. class:: small

   **Task list : Table of contents**

   * task descriptions + progress notes -->
</div>
<div class="slide" id="opticks-three-levels-of-performance">
<h1><span class="small">Opticks : Three Levels of Performance</span></h1>
<ul class="small simple">
<li><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks/src/master/notes/performance.rst">https://bitbucket.org/simoncblyth/opticks/src/master/notes/performance.rst</a></li>
</ul>
<div class="sidebar">
<p class="first sidebar-title"><strong>cluster</strong> level optimizations</p>
<p class="small"><strong>Opticks Server + many Clients</strong></p>
<ul class="small simple">
<li>genstep requests, hits in response</li>
<li>bring Opticks to CPU only batch nodes</li>
<li>avoid GPU starvation</li>
<li>header only implementation : <tt class="docutils literal">OpticksClient.hh</tt></li>
</ul>
<p class="small"><strong>So far : Network Transport of NP Arrays</strong></p>
<ul class="small simple">
<li><a class="reference external" href="https://github.com/simoncblyth/np">https://github.com/simoncblyth/np</a></li>
<li>depends only on Boost-Asio (Async IO)</li>
<li>np_server/np_client operational</li>
</ul>
<p class="small last"><strong>Next : integrate that with Opticks</strong></p>
</div>
<ol class="small arabic simple">
<li><strong>optical</strong>: optical photon simulation, ie the time and memory required to generate and propagate optical photons</li>
<li><strong>node</strong>: overall simulation performance using a single node with one or more GPUs</li>
<li><strong>cluster</strong>: production performance of a GPU cluster creating large monte carlo samples
with many hundreds or thousands of production jobs orchestrated with a batch system</li>
</ol>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="integration-of-juno-opticks-opticks-is-a-junoenv-external">
<h1><span class="small">Integration of JUNO + Opticks : Opticks is a JunoENV External</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Opticks Build Generalized</span></p>
<p class="small"><strong>Builds against CMAKE_PREFIX_PATH</strong></p>
<ul class="small simple">
<li>Boost, CLHEP, XercesC, Geant4</li>
<li>-&gt; Opticks uses JUNO externals</li>
</ul>
<p class="small"><strong>opticks-config</strong> (<strong>pkg-config</strong> .pc file based)</p>
<ul class="small simple">
<li>integrates with non-CMake projects, eg CMT</li>
</ul>
<p class="small"><strong>releases on github</strong> : latest <tt class="docutils literal"><span class="pre">v0.0.0-rc3</span></tt></p>
<p class="small last"><span class="small">https://github.com/simoncblyth/opticks/releases/tag/v0.0.0-rc3</span></p>
</div>
<p class="small">Add Opticks to an existing installation (<span class="red">SVN trunk r3990+</span>):</p>
<p class="small"><tt class="docutils literal">bash junoenv libs all opticks</tt></p>
<ul class="small simple">
<li>pre-requisites : NVIDIA Driver, CUDA, OptiX</li>
</ul>
<p class="small"><strong>Four mandatory envvars :</strong></p>
<pre class="mypre">
<b><span class="alarm">export CMTEXTRATAGS=opticks </span></b>
<b><span class="alarm"># -> Opticks ON in JunoENV + CMT</span></b>
export OPTICKS_COMPUTE_CAPABILITY=70 <b><span class="blue"> # -> nvcc flags</span></b>
export OPTICKS_CUDA_PREFIX=/usr/local/cuda-10.1
export OPTICKS_OPTIX_PREFIX=/usr/local/OptiX_650
<b><span class="blue"># location of CUDA and OptiX installs </span></b>
</pre><p class="small"><strong>Build all JUNO externals, including Opticks (takes ~1hr, 13G) :</strong></p>
<pre class="mypretiny">
jlibs(){
    mkdir -p $JUNOTOP && cd $JUNOTOP
    svn co https://juno.ihep.ac.cn/svn/offline/trunk/installation/junoenv && cd $JUNOTOP/junoenv
    local libs=$(bash junoenv libs list | perl -ne 'm, (\S*)@, && print "$1\n"' -)
    for lib in $libs ; do
        bash junoenv libs all $lib || return 1
    done
}
</pre><ul class="small simple">
<li><a class="reference external" href="https://juno.ihep.ac.cn/mediawiki/index.php/Offline:Installation#Install_Opticks_using_JunoENV">https://juno.ihep.ac.cn/mediawiki/index.php/Offline:Installation#Install_Opticks_using_JunoENV</a></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="integration-of-offline-opticks-where-with-g4opticks-used">
<h1><span class="small">Integration of Offline + Opticks : Where WITH_G4OPTICKS used ?</span></h1>
<p class="small">Offline Opticks : <tt class="docutils literal">#ifdef WITH_G4OPTICKS ... #endif</tt> + <tt class="docutils literal">if(m_opticksMode &gt; 0){ ... }</tt></p>
<pre class="mypre">
cd $JUNOTOP/offline/Simulation/DetSimV2 ; find . -type f -exec grep -l WITH_G4OPTICKS {} \+

./DetSimOptions/src/DetSim0Svc.cc                  ## initialize/finalize
./DetSimOptions/src/LSExpDetectorConstruction.cc   ## translate geometry to GPU

./PhysiSim/src/DsG4Scintillation.cc    ## collect Scintillation gensteps, excluding reemission
./PhysiSim/src/LocalG4Cerenkov1042.cc  ## collect Cerenkov gensteps
./PhysiSim/src/DsPhysConsOptical.cc    ## use LocalG4Cerenkov1042 rather than G4Cerenkov

./PMTSim/src/PMTSDMgr.cc         ## setup separate PMTHitMerger m_pmthitmerger_opticks
./PMTSim/src/junoSD_PMT_v2.cc    ## bulk hit creation+collection at EndOfEvent
</pre><dl class="small docutils">
<dt><tt class="docutils literal"><span class="pre">junoSD_PMT_v2::Initialize</span></tt></dt>
<dd><ul class="first last simple">
<li>setup extra <strong>hitCollection_opticks</strong>  <span class="red">(temporarily doing both GPU+CPU sim, with separate hits + merger)</span></li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">junoSD_PMT_v2::EndOfEvent_Opticks</span></tt></dt>
<dd><ul class="first last simple">
<li>invoke <tt class="docutils literal"><span class="pre">G4Opticks::propagateOpticalPhotons</span></tt> with the gensteps collected</li>
<li>bulk populate <strong>hitCollection_opticks</strong></li>
</ul>
</dd>
</dl>
<ul class="small simple">
<li><a class="reference external" href="https://juno.ihep.ac.cn/mediawiki/index.php/Offline:Installation#building_the_offline_-DWITH_G4OPTICKS">https://juno.ihep.ac.cn/mediawiki/index.php/Offline:Installation#building_the_offline_-DWITH_G4OPTICKS</a></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="integration-of-offline-opticks-tut-detsim-py-options">
<h1><span class="small">Integration of Offline + Opticks : tut_detsim.py options</span></h1>
<p class="small"><em>tut_detsim.py</em> options relevant to Opticks usage</p>
<dl class="small docutils">
<dt><tt class="docutils literal"><span class="pre">--opticks-mode</span> 0</tt></dt>
<dd>do not use Opticks GPU propagation, the default</dd>
<dt><tt class="docutils literal"><span class="pre">--opticks-mode</span> 1</tt> (currently <span class="green">SVN trunk r3990</span>)</dt>
<dd>performs both CPU and GPU optical simulations
put GPU hits into separate <strong>hitCollectionOpticks</strong></dd>
<dt><tt class="docutils literal"><span class="pre">--opticks-mode</span> 10</tt> # TODO: IMPLEMENT AFTER FURTHER VALIDATION</dt>
<dd>switch off CPU optical photons,
put GPU hits into standard <strong>hitCollection</strong></dd>
<dt><tt class="docutils literal"><span class="pre">--no-guide_tube</span></tt></dt>
<dd>change geometry skipping the guide tube torus</dd>
<dt><tt class="docutils literal"><span class="pre">--pmt20inch-polycone-neck</span></tt></dt>
<dd>change geometry of LPMT necks avoiding use of torus</dd>
</dl>
<p class="small"><tt class="docutils literal">tds</tt> : <strong>Example Bash Function :</strong></p>
<pre class="mypre">
tds-(){ python $JUNOTOP/offline/Examples/Tutorial/share/tut_detsim.py $* ; }
tds(){ tds- --opticks-mode 1 --no-guide_tube --pmt20inch-polycone-neck --evtmax 2 gun ; }
</pre><ul class="small simple">
<li><a class="reference external" href="https://juno.ihep.ac.cn/mediawiki/index.php/Offline:Detsimuserguide/UsingOpticks">https://juno.ihep.ac.cn/mediawiki/index.php/Offline:Detsimuserguide/UsingOpticks</a></li>
</ul>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="integration-of-offline-opticks-next-step-theta-dep-ce-gpu">
<h1><span class="small">Integration of Offline + Opticks : Next Step : Theta dep. CE -&gt; GPU</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Collection Effic. Culling -&gt; GPU ?</span></p>
<p class="small">Significant performance/memory benefit (factor ~2)</p>
<ul class="small simple">
<li>-&gt; <span class="red">only collected hits copied to CPU</span></li>
</ul>
<p class="small">Aligns CPU/GPU random consumption</p>
<ul class="small last simple">
<li>randoms consumed in same sequence CPU/GPU</li>
<li>-&gt; easier validation : aligned bi-simulation</li>
</ul>
</div>
<p class="small"><strong>(1) Complete CPU side bulk hit creation in PMTSim:</strong> <tt class="docutils literal"><span class="pre">junoSD_PMT_v2::EndOfEvent_Opticks</span></tt></p>
<p class="small">Hits currently missing:</p>
<ul class="small simple">
<li>local_pos : position in PMT frame</li>
<li>theta dependent collection efficiency culling</li>
<li>pAcrylic/pInnerWater boundary_pos[1] : <span class="red">is this essential ?</span></li>
</ul>
<p class="small"><strong>(2) CUDA port:</strong> <tt class="docutils literal"><span class="pre">junoSD_PMT_v2::get_ce</span></tt></p>
<ul class="small simple">
<li>interpolation of : 9 collection efficiency theta samples 0-&gt;90 deg</li>
<li>PMTParamSvc info (PMTType[2], QEType) -&gt; GPU</li>
<li>Port <tt class="docutils literal"><span class="pre">G4DataInterpolation::CubicSplineInterpolation</span></tt> ?<ul>
<li>direct port difficult + lots of flops for every detected photon (perhaps [3])</li>
<li>instead &quot;cheat&quot; with GPU texture &quot;tables&quot; (similar to <strong>reemission_texture</strong> approach)<ul>
<li><span class="red">9 theta samples -&gt; G4DataInterpolation -&gt; 90 theta &quot;samples&quot;</span> -&gt; <tt class="docutils literal">theta_texture</tt></li>
<li><tt class="docutils literal">theta_texture(theta) <span class="pre">-&gt;</span> ce</tt> : GPU hardware linear interpolation</li>
</ul>
</li>
</ul>
</li>
</ul>
<img alt="/env/presentation/1px.png" src="/env/presentation/1px.png" style="width: 1000px; height: 1px;" />
<p class="tiny">[1] set in NormalTrackInfo by <tt class="docutils literal"><span class="pre">NormalAnaMgr::UserSteppingAction</span></tt>
[2] PMTID int <span class="strike">distinguishes</span> NNVT/Hamamatsu !</p>
<p class="tiny">[3] <a class="reference external" href="https://github.com/DannyRuijters/CubicInterpolationCUDA">https://github.com/DannyRuijters/CubicInterpolationCUDA</a> &quot;GPU Prefilter for Accurate Cubic B-spline Interpolation&quot;</p>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="summary-and-links">
<h1><span class="small">Summary and Links</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Next Steps</span></p>
<ul class="small last simple">
<li>Theta dependant CE -&gt; GPU</li>
<li>validation : in-situ random aligned bi-simulation</li>
<li>validation : apply full step-by-step recording</li>
</ul>
</div>
<img alt="/env/presentation/1px.png" src="/env/presentation/1px.png" style="width: 500px; height: 20px;" />
<!--  -->
<blockquote>
<p><em>Opticks</em> : state-of-the-art GPU ray traced optical simulation
integrated with <em>Geant4</em>. <span class="red">Now integrated with JUNO Offline</span>
<strong>Pioneer users welcome</strong></p>
<img alt="/env/presentation/1px.png" src="/env/presentation/1px.png" style="width: 1000px; height: 1px;" />
<ul class="simple">
<li>Drastic speedup -&gt; better detector understanding -&gt; greater precision<ul>
<li><strong>any simulation limited by optical photons can benefit</strong></li>
<li>more photon limited -&gt; more overall speedup (99% -&gt; 100x)</li>
</ul>
</li>
</ul>
</blockquote>
<table border="1" class="docutils align-center">
<colgroup>
<col width="55%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr><td><a class="reference external" href="https://bitbucket.org/simoncblyth/opticks">https://bitbucket.org/simoncblyth/opticks</a></td>
<td>code repository</td>
</tr>
<tr><td><a class="reference external" href="https://github.com/simoncblyth/opticks/releases">https://github.com/simoncblyth/opticks/releases</a></td>
<td>.zip .tar.gz  archives</td>
</tr>
<tr><td><a class="reference external" href="https://simoncblyth.bitbucket.io">https://simoncblyth.bitbucket.io</a></td>
<td>presentations and videos</td>
</tr>
<tr><td><a class="reference external" href="https://groups.io/g/opticks">https://groups.io/g/opticks</a></td>
<td>forum/mailing list archive</td>
</tr>
<tr><td>email:opticks+subscribe&#64;groups.io</td>
<td>subscribe to mailing list</td>
</tr>
</tbody>
</table>
<!-- comment

*Opticks* uses hardware accelerated GPU ray tracing
via NVIDIA OptiX to give **effectively zero time and zero CPU memory**
optical photon simulation to *Geant4* applications.

.. image:: /env/presentation/1px.png
   :width: 1000px
   :height: 10px -->

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="juno-geometry-remove-torus-to-enable-translation-to-gpu">
<h1><span class="small">JUNO Geometry : Remove Torus to enable translation to GPU</span></h1>
<div class="sidebar">
<p class="first sidebar-title"><span class="small">Why Avoid Torus ?</span></p>
<p class="small"><strong>Double heavy quartic root finding</strong></p>
<ul class="small simple">
<li>fragile (crashes in some OptiX versions)</li>
<li>precision problems in CSG combinations</li>
<li>mere presence in OptiX kernel <span class="red">kills RTX mode performance by factor 10</span></li>
</ul>
<p class="small"><strong>Alternative Approaches To Cope With Torus</strong></p>
<ul class="small last simple">
<li>triangulated torus</li>
<li>TODO : ray marching (aka sphere tracing) signed distance function (SDF) model</li>
</ul>
</div>
<p class="small"><strong>tut_detsim.py options (in SVN trunk r3990)</strong></p>
<dl class="small docutils">
<dt><tt class="docutils literal"><span class="pre">--no-guide_tube</span></tt></dt>
<dd>skip the guide tube torus</dd>
<dt><tt class="docutils literal"><span class="pre">--pmt20inch-polycone-neck</span></tt></dt>
<dd><p class="first">&quot;cylinder - torus&quot; -&gt; polycone</p>
<ul class="last simple">
<li>NNVT_MCPPMT_PMTSolid</li>
<li>Hamamatsu_R12860_PMTSolid</li>
</ul>
</dd>
<dt><span class="red">TODO</span>: <tt class="docutils literal"><span class="pre">--pmt20inch-simpler-csg</span></tt></dt>
<dd>simpler+faster CSG, same geometry</dd>
</dl>

        <!--  s5talk  -->
        <br/>
    </div>
<div class="slide" id="scan-pf-1-opticks-vs-geant4-2">
<h1><span class="i">scan-pf-1_Opticks_vs_Geant4 2</span></h1>
<pre>




</pre><table border="1" class="small docutils align-center">
<colgroup>
<col width="30%" />
<col width="42%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head" colspan="2">JUNO analytic, 400M photons from center</th>
<th class="head">Speedup</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Geant4 Extrap.</td>
<td>95,600 s (26 hrs)</td>
<td>&nbsp;</td>
</tr>
<tr><td>Opticks RTX ON (i)</td>
<td>58 s</td>
<td>1650x</td>
</tr>
</tbody>
</table>

        <!--  s5talk  -->
        <br/>
    
       <style type="text/css">

          div.slide { 
             background-clip: border-box;
             background-repeat: no-repeat;
             height: 100%;
          }
          div.slide#slide0{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-benefits{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#visualizing-an-optical-photon-simulation{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 640px 360px;
             background-position: 600px 100px;
             
          }
          div.slide#overview{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#g4daeview-py-fast-opengl-3d-viewer-for-g4dae-files{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20140419-170713.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#cerenkov-photons-simulation-top-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-115923.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#cerenkov-photons-simulation-side-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-115935.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#scintillation-photons-simulation-top-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-121444.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#scintillation-photons-simulation-side-view{
             background-image: url(/env/geant4/geometry/collada/g4daeview/20141224-121435.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#standard-geant4-workflow{
             background-image: url(/env/keynotefigs/G4DAEChroma/G4DAEChroma.001.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#external-photon-simulation-workflow{
             background-image: url(/env/keynotefigs/G4DAEChroma/G4DAEChroma.002.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#geant4opticksworkflow{
             background-image: url(/env/Documents/Geant4OpticksWorkflow/Geant4OpticksWorkflow.001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview{
             background-image: url(/env/graphics/ggeoview/ggeoview-cerenkov-001.png);
             background-size: 1047px 795px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview-m1-points{
             background-image: url(/env/graphics/ggeoview/ggeoview-scintillation-points-mat1.png);
             background-size: 1435px 848px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview-flag-selection{
             background-image: url(/env/graphics/ggeoview/ggeoview-scintillation-flag-seq-select.png);
             background-size: 1436px 842px;
             background-position: 0px 0px;
             
          }
          div.slide#ggeoview-cerenkov-geom-m1{
             background-image: url(/env/graphics/ggeoview/ggeoview-cerenkov-m1-geom.png);
             background-size: 1416px 845px;
             background-position: 0px 0px;
             
          }
          div.slide#detecting-neutrinos-via-optical-photons-1{
             background-image: url(/env/presentation/dayabay-principal_half.png);
             background-size: 1417px 830px;
             background-position: 0px 0px;
             
          }
          div.slide#detecting-neutrinos-via-optical-photons-2{
             background-image: url(/env/presentation/dayabay-principal_half.png);
             background-size: 1417px 830px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-inside-wide{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-wide_half.png);
             background-size: 1432px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-wide{
             background-image: url(/env/graphics/ggeoview/jpmt-wide_half.png);
             background-size: 1409px 836px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-headview{
             background-image: url(/env/graphics/ggeoview/jpmt-headview_half.png);
             background-size: 1308px 783px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-backview{
             background-image: url(/env/graphics/ggeoview/jpmt-backview_half.png);
             background-size: 1149px 794px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-approach{
             background-image: url(/env/graphics/ggeoview/jpmt-approach_half.png);
             background-size: 1431px 839px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-arrival{
             background-image: url(/env/graphics/ggeoview/jpmt-arrival_half.png);
             background-size: 1427px 841px;
             background-position: 0px 0px;
             
          }
          div.slide#optical-photon-simulation-problem{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-optical-photon-simulation-problem{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-before-contact{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-before-contact-2{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-before-contact-3{
             background-image: url(/env/graphics/ggeoview/jpmt-before-contact_half.png);
             background-size: 1430px 844px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-after-contact{
             background-image: url(/env/graphics/ggeoview/jpmt-after-contact_half.png);
             background-size: 1425px 840px;
             background-position: 0px 0px;
             
          }
          div.slide#jpmt-inside-outside{
             background-image: url(/env/graphics/ggeoview/jpmt-inside-outside_half.png);
             background-size: 1401px 842px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-in-action{
             background-image: url(/env/presentation/optix-in-action_half.png);
             background-size: 966px 646px;
             background-position: 100px 50px;
             
          }
          div.slide#pmtinbox-approach-1{
             background-image: url(/env/graphics/ggeoview/PmtInBox-approach.png);
             background-size: 1069px 769px;
             background-position: 0px 0px;
             
          }
          div.slide#pmtinbox-approach-2{
             background-image: url(/env/graphics/ggeoview/PmtInBox-approach.png);
             background-size: 1069px 769px;
             background-position: 0px 0px;
             
          }
          div.slide#pmtinbox-after-1{
             background-image: url(/env/graphics/ggeoview/PmtInBox-after.png);
             background-size: 1057px 760px;
             background-position: 0px 0px;
             
          }
          div.slide#pmtinbox-after-2{
             background-image: url(/env/graphics/ggeoview/PmtInBox-after.png);
             background-size: 1057px 760px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-pmt-wall-photo-1{
             background-image: url(/env/presentation/gtc2016/dyb-pmt-wall-photo.png);
             background-size: 1329px 798px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-pmt-wall-photo-2{
             background-image: url(/env/presentation/gtc2016/dyb-pmt-wall-photo.png);
             background-size: 1329px 798px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-not-16-9{
             background-image: url(/env/presentation/gtc2016/sk-PH20-water-withboat-apr23-wm.png);
             background-size: 1181px 771px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-1{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-2{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-3{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#super-kamiokande-pmts-4{
             background-image: url(/env/presentation/PH20-water-withboat-apr23-wm_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#kamiokande-ii-1{
             background-image: url(/env/presentation/1987a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#kamiokande-ii-2{
             background-image: url(/env/presentation/1987a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#kamiokande-ii-3{
             background-image: url(/env/presentation/1987a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#fast-optical-photon-simulation{
             background-image: url(/env/presentation/newtons-opticks.png);
             background-size: 374px 684px;
             background-position: 800px 0px;
             
          }
          div.slide#photomultiplier-tubes-pmts{
             background-image: url(/env/presentation/hamamatsu-pmt-16x9.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#photomultiplier-tube-operation{
             background-image: url(/env/presentation/hamamatsu-pmt-16x9.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#old-hamamatsu-photomultiplier-tubes-pmts{
             background-image: url(/env/presentation/hamamatsu-pmt.png);
             background-size: 1099px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#old-photomultiplier-tube-operation{
             background-image: url(/env/presentation/hamamatsu-pmt.png);
             background-size: 1099px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#jiangmen-underground-neutrino-observatory-juno{
             background-image: url(/env/presentation/juno-schematic-5.png);
             background-size: 1391px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#jiangmen-underground-neutrino-observatory-goals{
             background-image: url(/env/presentation/juno-schematic-5.png);
             background-size: 1391px 734px;
             background-position: 0px 0px;
             
          }
          div.slide#dayabay-reactor-neutrino-expt-far-site{
             background-image: url(/env/presentation/DybFar_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-far-site-2{
             background-image: url(/env/presentation/DybFar_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-far-site-3{
             background-image: url(/env/presentation/DybFar_crop.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#geant4-monte-carlo-simulation-toolkit{
             background-image: url(/env/presentation/g4-hep.png);
             background-size: 1025px 621px;
             background-position: 100px 100px;
             
          }
          div.slide#geant4-monte-carlo-simulation-toolkit-generality{
             background-image: url(/env/presentation/g4-hep.png);
             background-size: 1025px 621px;
             background-position: 100px 100px;
             
          }
          div.slide#seeing-neutrinos-via-scintillation-cherenkov-light{
             background-image: url(/env/presentation/cherenkov.png);
             background-size: 316px 203px;
             background-position: 850px 400px;
             
          }
          div.slide#opticks-auto-instancing{
             background-image: url(/env/graphics/ggeoview/ggv-juno-instancing.png);
             background-size: 852px 592px;
             background-position: 450px 80px;
             
          }
          div.slide#nvidia-optix-1{
             background-image: url(/env/presentation/NVIDIAOptiXWebsite_Oct2016.png);
             background-size: 1280px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-2{
             background-image: url(/env/presentation/NVIDIAOptiXWebsite_Oct2016.png);
             background-size: 1280px;
             background-position: 0px 0px;
             
          }
          div.slide#opticksdocs{
             background-image: url(/env/presentation/OpticksDocs.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#daya-bay-antineutrino-detection-via-inverse-beta-decay-1{
             background-image: url(/env/presentation/AntineutrinoDetectionViaIBDJetterSept2014.png);
             background-size: 809px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-antineutrino-detection-via-inverse-beta-decay-2{
             background-image: url(/env/presentation/AntineutrinoDetectionViaIBDJetterSept2014.png);
             background-size: 809px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-1{
             background-image: url(/env/presentation/ZheTaupDetectorResponseModel.png);
             background-size: 968px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-2{
             background-image: url(/env/presentation/ZheTaupDetectorResponseModel.png);
             background-size: 968px 576px;
             background-position: 100px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-fit-to-calibration-data-1{
             background-image: url(/env/presentation/EnergyResponseModel.png);
             background-size: 693px 504px;
             background-position: 0px 100px;
             
          }
          div.slide#daya-bay-energy-response-model-fit-to-calibration-data-2{
             background-image: url(/env/presentation/ConstrainingNonLinearity.png);
             background-size: 761px 553px;
             background-position: 0px 80px;
             
          }
          div.slide#daya-bay-ngd-analysis-most-precise-theta13{
             background-image: url(/env/presentation/DYBZheTaup2015Theta13OscillationAnalysis.png);
             background-size: 1057px 625px;
             background-position: 100px 60px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-3{
             background-image: url(/env/presentation/op_full_raytrace_3.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-1{
             background-image: url(/env/presentation/op_full_raytrace_1.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-0{
             background-image: url(/env/presentation/op_full_raytrace_0.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-daya-bay-near-site-gpu-raytrace-2{
             background-image: url(/env/presentation/op_full_raytrace_2.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-juno-chimney-gpu-raytrace-0{
             background-image: url(/env/presentation/j1707_chimney_analytic_raytrace.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-analytic-juno-pmt-snap-gpu-raytrace-1{
             background-image: url(/env/presentation/j1707-okop-snap.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#gpu-instance-culling-with-level-of-detail{
             background-image: url(/env/presentation/j1707_lod_oglrap_instcull.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-export-of-g4-geometry-to-gltf-2-0{
             background-image: url(/env/yoctoglrap/dyb_near_venice_half.png);
             background-size: 1020px 737px;
             background-position: 0px 0px;
             
          }
          div.slide#what-are-numpy-arrays{
             background-image: url(/env/presentation/what_are_numpy_arrays.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#what-are-numpy-arrays-2{
             background-image: url(/env/presentation/what_are_numpy_arrays.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bvh{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_029.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#spatial-index-acceleration-structure{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_029.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bvh-pascal{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_030.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bvh-turing{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_031.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#hardware-traversal-of-bvh-spatial-index{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_031.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#siggraph-2018-announcing-worlds-first-ray-tracing-gpu{
             background-image: url(/env/presentation/nvidia/SIGGRAPH_2018_Announcing_Worlds_First_Ray_Tracing_GPU_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#siggraph-2019-eric-enderton-rt-cores{
             background-image: url(/env/presentation/nvidia/SIGGRAPH_2019_Eric_Enderton_RT_Cores.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-turing-gpu-72-sm-4608-cuda-cores{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_009.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-turing-gpu-72-sm-4608-cuda-cores-spec{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_009.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#raytrace-vs-raster{
             background-image: url(/env/presentation/nvidia/NV_Turing_Editors_Day_132.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ray-tracing-vs-rasterization{
             background-image: url(/env/presentation/nvidia/black.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#raytrace-diagram{
             background-image: url(/env/presentation/graphics/1024px-ray_trace_diagram.svg.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#j1808-top-ogl{
             background-image: url(/env/presentation/j1808/j1808_top_ogl.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#j1808-top-rtx{
             background-image: url(/env/presentation/j1808/j1808_top_rtx.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#j1808-escapes{
             background-image: url(/env/presentation/j1808/j1808_escapes.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#geocache-360{
             background-image: url(/env/presentation/geocache_360.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-360-benchmark-with-optix-6-0-0-rtx-mode{
             background-image: url(/env/presentation/geocache_360.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#absmry-1m{
             background-image: url(/env/presentation/ana/absmry_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#absmry-1m-2{
             background-image: url(/env/presentation/ana/absmry_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ta34-1m{
             background-image: url(/env/presentation/ana/ta34_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#ta34-1m-2{
             background-image: url(/env/presentation/ana/ta34_1M.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv34-1m-a{
             background-image: url(/env/presentation/ana/tv34_1M_a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv34-1m-b{
             background-image: url(/env/presentation/ana/tv34_1M_b.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv21-1m-a{
             background-image: url(/env/presentation/ana/tv21_1M_a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv21-1m-a-2{
             background-image: url(/env/presentation/ana/tv21_1M_a.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#tv21-1m-c{
             background-image: url(/env/presentation/ana/tv21_1M_c.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#rtx-speedup{
             background-image: url(/env/presentation/ana/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#overheads{
             background-image: url(/env/presentation/ana/Overheads.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-speedup{
             background-image: url(/env/presentation/ana/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-vs-geant4{
             background-image: url(/env/presentation/ana/Opticks_vs_Geant4.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-vs-geant4-2{
             background-image: url(/env/presentation/ana/Opticks_vs_Geant4.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nhit{
             background-image: url(/env/presentation/ana/NHit.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#interval-over-launch{
             background-image: url(/env/presentation/ana/Interval_over_Launch.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#titan-rtx-72-raytrace-dedicated-rt-cores-4608-cuda-cores-24gb-vram-2500-usd{
             background-image: url(/env/presentation/nvidia/TITAN_RTX.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-143808{
             background-image: url(/env/presentation/ana/bench_20190526_143808.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-143808-2{
             background-image: url(/env/presentation/ana/bench_20190526_143808.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-202537{
             background-image: url(/env/presentation/ana/bench_20190526_202537.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#bench-20190526-202537-2{
             background-image: url(/env/presentation/ana/bench_20190526_202537.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#tv16-fastener{
             background-image: url(/env/presentation/tv/tv16_Fastener.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#tv20-polycone-neck{
             background-image: url(/env/presentation/tv/tv20_polycone_neck.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#tubs-torus-polycone-pmt20inch-polycone-neck{
             background-image: url(/env/presentation/tv/tv20_polycone_neck.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#inch-pmt-neck-cylinder-torus-polycone{
             background-image: url(/env/presentation/tv/tv20_polycone_neck.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#genstep-interface{
             background-image: url(/env/presentation/simulation/genstep_interface.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#introducing-optix-7{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#where-next-for-opticks{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 640px 360px;
             background-position: 670px 300px;
             
          }
          div.slide#opticks-experience-problems-with-using-nvidia-optix{
             background-image: url(/env/presentation/nvidia/Introducing_OptiX_7.png);
             background-size: 640px 360px;
             background-position: 670px 300px;
             
          }
          div.slide#turing-built-for-rtx{
             background-image: url(/env/presentation/nvidia/TURING_Built_for_RTX_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#turing-built-for-rtx-2{
             background-image: url(/env/presentation/nvidia/TURING_Built_for_RTX_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-rtx-metro-exodus{
             background-image: url(/env/presentation/nvidia/NVIDIA_RTX_Metro_Exodus_half.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#modern-gpu-ray-tracing{
             background-image: url(/env/presentation/nvidia/Modern_GPU_RAY_Tracing.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-optix-programming-model-analogous-to-rasterization-apis-opengl-shaders{
             background-image: url(/env/presentation/nvidia/Modern_GPU_RAY_Tracing.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#nvidia-quadro-rtx-8000-48g{
             background-image: url(/env/presentation/nvidia/NVIDIA_Quadro_RTX.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#siggraph-2010-optix-a-general-purpose-ray-tracing-engine{
             background-image: url(/env/presentation/nvidia/SIGGRAPH_2010_OptiX_A_General_Purpose_Ray_Tracing_Engine.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#useful-speedup-1000x-but-why-not-giga-rays-s-1-photon-10-rays{
             background-image: url(/env/presentation/nvidia/dhart/dhart_siggraph_2019_RTX_traversal_custom_primitives.png);
             background-size: 720px 405px;
             background-position: 10px 210px;
             
          }
          div.slide#juno-intro-1{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.001.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-2{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.002.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-3{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.003.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-intro-4{
             background-image: url(/env/Documents/JUNOIntro/JUNOIntro.004.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#juno-multipurpose-pedro-nufact-2019{
             background-image: url(/env/presentation/juno/JUNO_Multipurpose_Pedro_NuFact_2019.png);
             background-size: 960px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#dhart-siggraph-2019-optix-5-traversal{
             background-image: url(/env/presentation/nvidia/dhart_siggraph_2019_OptiX_5_traversal.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#dhart-siggraph-2019-optix-5-traversal{
             background-image: url(/env/presentation/nvidia/dhart_siggraph_2019_OptiX_5_traversal.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-check-gui-to-bt5-sd{
             background-image: url(/env/presentation/ana/scan-pf-1/scan-pf-check-GUI-TO-BT5-SD.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-check-gui-to-sc-bt5-sd{
             background-image: url(/env/presentation/ana/scan-pf-1/scan-pf-check-GUI-TO-SC-BT5-SD.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-interval-over-launch{
             background-image: url(/env/presentation/ana/scan-pf-0/Interval_over_Launch.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-nhit{
             background-image: url(/env/presentation/ana/scan-pf-0/NHit.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-opticks-speedup{
             background-image: url(/env/presentation/ana/scan-pf-0/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-opticks-vs-geant4{
             background-image: url(/env/presentation/ana/scan-pf-0/Opticks_vs_Geant4.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-overheads{
             background-image: url(/env/presentation/ana/scan-pf-0/Overheads.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-rtx-speedup{
             background-image: url(/env/presentation/ana/scan-pf-0/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-0-rtx-speedup-2{
             background-image: url(/env/presentation/ana/scan-pf-0/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-interval-over-launch{
             background-image: url(/env/presentation/ana/scan-pf-1/Interval_over_Launch.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-nhit{
             background-image: url(/env/presentation/ana/scan-pf-1/NHit.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-speedup{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-speedup-2{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-vs-geant4{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_vs_Geant4.png);
             background-size: 1280px 720pxS;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-opticks-vs-geant4-2{
             background-image: url(/env/presentation/ana/scan-pf-1/Opticks_vs_Geant4.png);
             background-size: 1280px 720pxS;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-overheads{
             background-image: url(/env/presentation/ana/scan-pf-1/Overheads.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#scan-pf-1-rtx-speedup{
             background-image: url(/env/presentation/ana/scan-pf-1/RTX_Speedup.png);
             background-size: 1280px 720px;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-translates-g4-geometry-to-gpu-without-approximation{
             background-image: url(/env/presentation/face_view_PMTs.png);
             background-size: 640px 360px;
             background-position: 20px 340px;
             
          }
          div.slide#gpltcf-hamamatsur12860lmaskvirtual-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_HamamatsuR12860lMaskVirtual_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-hamamatsur12860lmaskvirtual-subplotsfig-zoom{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_HamamatsuR12860lMaskVirtual_SubPlotsFig_Zoom.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-hamamatsur12860lmaskvirtual-combizoom-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_HamamatsuR12860lMaskVirtual_combiZoom_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-nnvtmcppmtlmaskvirtual-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_NNVTMCPPMTlMaskVirtual_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-nnvtmcppmtlmaskvirtual-subplotsfig-zoom{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_NNVTMCPPMTlMaskVirtual_SubPlotsFig_Zoom.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#gpltcf-nnvtmcppmtlmaskvirtual-combizoom-subplotsfig{
             background-image: url(/env/presentation/ana/PolyconeNeck/gpltcf_NNVTMCPPMTlMaskVirtual_combiZoom_SubPlotsFig.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#g4optickstest-demonstrates-geant4-opticks-hybrid-workflow{
             background-image: url(/env/presentation/fermilab_geant4_team/hans_nov2020_lar_tpc_p1_half.png),url(/env/presentation/fermilab_geant4_team/hans_nov2020_lar_tpc_p13_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#geant4-bug-2305{
             background-image: url(/env/presentation/fermilab_geant4_team/geant4_bugzilla_2305_half.png);
             background-size: 1180px 310px;
             background-position: 50px 10px;
             
          }
          div.slide#geant4-bug-2311{
             background-image: url(/env/presentation/fermilab_geant4_team/geant4_bugzilla_2311_half.png);
             background-size: 1180px 310px;
             background-position: 50px 10px;
             
          }
          div.slide#lhcb-rich-ring-imaging-cherenkov-with-opticks-sajan-easo{
             background-image: url(/env/presentation/lhcb_rich_sajan_easo/sajan_easo_prospects_june_2020_p3_half.png),url(/env/presentation/lhcb_rich_sajan_easo/sajan_easo_prospects_june_2020_p8_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#groups-io-1{
             background-image: url(/env/presentation/groups_io/groups_io_jan_2021_25_members_33_topics_half.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#groups-io-2{
             background-image: url(/env/presentation/groups_io/groups_io_jan_2021_message_history_table_half.png);
             background-size: auto auto;
             background-position: 0px 0px;
             
          }
          div.slide#opticks-for-next-generation-neutrino-telescope-optimization{
             background-image: url(/env/presentation/sjtu_fan_hu_oceanic/fan_hu_pod_strings_geometry_half.png);
             background-size: 640px 360px;
             background-position: 640px 360px;
             
          }
          div.slide#uk-swift-hep-grant-software-infrastructure-and-technology-for-hep{
             background-image: url(/env/presentation/benmorgan_swifthep_jan2021/detector_simulation_swiftHEP_p1_half.png),url(/env/presentation/benmorgan_swifthep_jan2021/detector_simulation_swiftHEP_p19_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#lz-opticks-history-2018-2021-contacts-with-5-lz-people{
             background-image: url(/env/presentation/nersc_creaner/optical_sims_using_gpus_half.png),url(/env/presentation/nersc_creaner/lz_motivation_to_gpus_half.png);
             background-size: 640px 360px,640px 360px;
             background-position: 0px 360px,640px 360px;
              
          }
          div.slide#lz-opticks-simulation-on-perlmutter-6000-nvidia-a100{
             background-image: url(/env/presentation/nersc_creaner/perlmutter_half.png);
             background-size: 640px 360px;
             background-position: 640px 360px;
             
          } 

       </style>
    <!-- comment


1280px_720px
640px_360px

NVIDIA
                    Memory    Bandwidth     CUDA(RT) Cores
TITAN V             12 GB       651 GB/s    5120(0)
Tesla V100          32 GB       900 GB/s    5120(0)
TITAN RTX           24 GB       672 GB/s    4608(72)
Quadro RTX 8000     48 GB       672 GB/s    4608(72)

SM*64 gives cores

https://www.techpowerup.com/gpu-specs/titan-v.c3051
https://www.techpowerup.com/gpu-specs/titan-rtx.c3311
https://www.techpowerup.com/gpu-specs/quadro-rtx-8000.c3306 -->
</div>
</div>
</body>
</html>
