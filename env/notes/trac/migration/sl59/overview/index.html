<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Trac Migration to SL59 &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../../" />
    <link rel="up" title="Trac/SVN Migration to SL59" href="../" />
    <link rel="next" title="Prior Migration Notes" href="../priors/" />
    <link rel="prev" title="Trac/SVN Migration to SL59" href="../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../priors/" title="Prior Migration Notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="Trac/SVN Migration to SL59"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >Trac</a> &raquo;</li>
          <li><a href="../../" >Migrating Trac Contents Elsewhere</a> &raquo;</li>
          <li><a href="../" accesskey="U">Trac/SVN Migration to SL59</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scm/">SCM</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../">Trac</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../admin/">Trac Admin</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../">Migrating Trac Contents Elsewhere</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../_sources/trac/migration/sl59/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">Trac/SVN Migration to SL59</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../priors/"
                        title="next chapter">Prior Migration Notes</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="trac-migration-to-sl59">
<h1>Trac Migration to SL59<a class="headerlink" href="#trac-migration-to-sl59" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="review-current-instance-installation">
<h2>review current instance installation<a class="headerlink" href="#review-current-instance-installation" title="Permalink to this headline">Â¶</a></h2>
<p>System apache config pulls in config:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Include</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">httpd</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">svnsetup</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>which then pulls:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Include</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">httpd</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">svnsetup</span><span class="o">/</span><span class="n">repos</span><span class="o">.</span><span class="n">conf</span>
<span class="n">Include</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">httpd</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">svnsetup</span><span class="o">/</span><span class="n">svn</span><span class="o">.</span><span class="n">conf</span>
<span class="n">Include</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">httpd</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">svnsetup</span><span class="o">/</span><span class="n">tracs</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>The <cite>tracs.conf</cite> connects to mod python in system python2.3:</p>
<div class="highlight-python"><pre>&lt;Location /tracs&gt;
   SetHandler mod_python
   PythonPath "sys.path + ['/usr/lib/python2.3/site-packages']"
   PythonHandler trac.web.modpython_frontend
   PythonOption TracEnvParentDir /home/scm/tracs
   PythonOption TracUriRoot /tracs</pre>
</div>
</div>
<div class="section" id="current-server">
<h2>current server<a class="headerlink" href="#current-server" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-python"><pre>[dayabay] /home/blyth &gt; uname -a
Linux dayabay.ihep.ac.cn 2.6.9-104.ELsmp #1 SMP Fri Jul 6 09:14:38 CEST 2012 i686 i686 i386 GNU/Linux

[dayabay] /home/blyth &gt; cat /etc/redhat-release
Scientific Linux CERN SLC release 4.8 (Beryllium)

[dayabay] /home/blyth &gt; python -V
Python 2.3.4

[dayabay] /home/blyth &gt; python -c "import sys ; print '\n'.join(sys.path) "

/usr/lib/python2.3/site-packages/configobj-4.6.0-py2.3.egg
/usr/lib/python2.3/site-packages/Genshi-0.5-py2.3-linux-i686.egg
/usr/lib/python2.3/site-packages/Trac-0.11-py2.3.egg
/usr/lib/python2.3/site-packages/TracAccountManager-0.2.1dev_r3857-py2.3.egg
/usr/lib/python2.3/site-packages/BittenNotify-0.1dev_r28-py2.3.egg
/usr/lib/python2.3/site-packages/TracFullBlogPlugin-0.1-py2.3.egg
/usr/lib/python2.3/site-packages/NavAdd-0.1-py2.3.egg
/usr/lib/python2.3/site-packages/SilverCity-0.9.7-py2.3-linux-i686.egg
/usr/lib/python2.3/site-packages/textile-2.0.11-py2.3.egg
/usr/lib/python2.3/site-packages/Trac2Latex-0.0.1-py2.3.egg
/usr/lib/python2.3/site-packages/Trac2MediaWiki-0.0.2-py2.3.egg
/usr/lib/python2.3/site-packages/TracNav-4.0pre6-py2.3.egg
/usr/lib/python2.3/site-packages/TracTags-0.6-py2.3.egg
/usr/lib/python2.3/site-packages/TracTocMacro-11.0.0.3-py2.3.egg
/usr/lib/python2.3/site-packages/setuptools-0.6c11-py2.3.egg
/usr/lib/python2.3/site-packages/virtualenv-1.4.3.post1-py2.3.egg
/usr/lib/python2.3/site-packages/pip-0.6.post1-py2.3.egg
/usr/lib/python2.3/site-packages/supervisor-3.0a7-py2.3.egg
/usr/lib/python2.3/site-packages/elementtree-1.2.7_20070827_preview-py2.3.egg
/usr/lib/python2.3/site-packages/meld3-0.6.6-py2.3.egg
/usr/lib/python2.3/site-packages/hashlib-20081119-py2.3-linux-i686.egg
/usr/lib/python2.3/site-packages/Bitten-0.6dev_r561-py2.3.egg
/usr/lib/python2.3/site-packages/BitExtra-0.0.1-py2.3.egg
/usr/lib/python23.zip
/usr/lib/python2.3
/usr/lib/python2.3/plat-linux2
/usr/lib/python2.3/lib-tk
/usr/lib/python2.3/lib-dynload
/usr/lib/python2.3/site-packages
/usr/lib/python2.3/site-packages/gtk-2.0


[dayabay] /home/blyth &gt; svn --version
svn, version 1.4.4 (r25188)
   compiled Nov 21 2007, 11:15:10</pre>
</div>
</div>
<div class="section" id="dayabay1-test-machine">
<h2>dayabay1 test machine<a class="headerlink" href="#dayabay1-test-machine" title="Permalink to this headline">Â¶</a></h2>
<p>Double hop required to get in:</p>
<div class="highlight-python"><pre>simon:~ blyth$ ssh II
Last login: Fri Sep 13 16:06:11 2013 from simon.phys.ntu.edu.tw
**********************************************************************
|  Time  |      Up Time     |Loing Users|        Load Average        |
 16:08:44 up 52 days, 11:59, 28 users,  load average: 1.19, 0.96, 1.07
**********************************************************************
TEL:5037(office);83050656

-bash-3.2$ ssh NN
Last login: Fri Sep 13 16:07:57 2013 from lxslc514.ihep.ac.cn

[root@dayabay1 ~]# uname -a
Linux dayabay1 2.6.18-308.el5 #1 SMP Fri Feb 24 08:42:10 CET 2012 x86_64 x86_64 x86_64 GNU/Linux

[root@dayabay1 ~]# cat /etc/redhat-release
Scientific Linux CERN SLC release 5.9 (Boron)

[root@dayabay1 ~]# python -V
Python 2.4.3

[root@dayabay1 ~]# python -c "import sys ; print '\n'.join(sys.path) "

/usr/lib64/python24.zip
/usr/lib64/python2.4
/usr/lib64/python2.4/plat-linux2
/usr/lib64/python2.4/lib-tk
/usr/lib64/python2.4/lib-dynload
/usr/lib64/python2.4/site-packages
/usr/lib64/python2.4/site-packages/Numeric
/usr/lib64/python2.4/site-packages/gtk-2.0
/usr/lib/python2.4/site-packages

[root@dayabay1 ~]# which svn
/usr/bin/svn

[root@dayabay1 ~]# svn --version
svn, version 1.6.11 (r934486)
   compiled Apr 12 2013, 08:05:38</pre>
</div>
</div>
<div class="section" id="svn-migrate-1-4-1-6">
<h2>svn migrate 1.4 1.6<a class="headerlink" href="#svn-migrate-1-4-1-6" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=svn migrate 1.4 1.6">google:svn migrate 1.4 1.6</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/1435047/migrate-from-subversion-1-4-to-1-6">http://stackoverflow.com/questions/1435047/migrate-from-subversion-1-4-to-1-6</a></li>
</ul>
<div class="highlight-python"><pre>svnadmin create --pre-1.5-compatible /path/to/repo
svnadmin load /path/to/repo &lt;dumpfile
svnadmin upgrade /path/to/repo</pre>
</div>
<div class="section" id="svnbook-on-migration">
<h3>svnbook on migration<a class="headerlink" href="#svnbook-on-migration" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://svnbook.red-bean.com/nightly/en/svn.ref.svnadmin.html#svn.ref.svnadmin.c">http://svnbook.red-bean.com/nightly/en/svn.ref.svnadmin.html#svn.ref.svnadmin.c</a></li>
</ul>
<dl class="docutils">
<dt><cite>&#8211;pre-1.4-compatible</cite></dt>
<dd>When creating a new repository, use a format that is compatible with versions of Subversion earlier than Subversion 1.4.</dd>
<dt><cite>&#8211;pre-1.5-compatible</cite></dt>
<dd>When creating a new repository, use a format that is compatible with versions of Subversion earlier than Subversion 1.5.</dd>
<dt><cite>&#8211;pre-1.6-compatible</cite></dt>
<dd>When creating a new repository, use a format that is compatible with versions of Subversion earlier than Subversion 1.6.</dd>
</dl>
</div>
<div class="section" id="svn-version-migration">
<h3>svn version migration<a class="headerlink" href="#svn-version-migration" title="Permalink to this headline">Â¶</a></h3>
<p>This looks forced as we have been using system 1.4 and the new system uses 1.6.</p>
</div>
</div>
<div class="section" id="trac-version-migration">
<h2>trac version migration<a class="headerlink" href="#trac-version-migration" title="Permalink to this headline">Â¶</a></h2>
<p>System (yum distro) versions are 0.10.4, 0.10.5 on the old and new.
We have been using 0.11, no compelling reason to change.</p>
<p>Problematic due to bitten, the patches that have been applied, and the large number of plugins.</p>
<p>On old machine we use python2.3 site-packages level install, not system level with <cite>/usr/lib/python2.3/site-packages/Trac-0.11-py2.3.egg</cite></p>
<div class="section" id="version-pinned-due-to-bitten-and-patches">
<h3>version pinned due to bitten and patches<a class="headerlink" href="#version-pinned-due-to-bitten-and-patches" title="Permalink to this headline">Â¶</a></h3>
<p>The bitten trac plugin provides a master/slave system that requires (from bitter experience)
that the slaves (installed at BNL,LBNL,IHEP,NTU,NUU) use precisely
the same version of bitten that the master Trac instance does.  This effectively pins the
bitten version of the master, without having to reinstall all the slaves.</p>
<p>Other reasons to keep the same version:</p>
<blockquote>
<div><ul>
<li><p class="first">Pinned revisions of ~15 plugins are known to work with the current version</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://dayabay.phys.ntu.edu.tw/repos/env/trunk/trac/package/">http://dayabay.phys.ntu.edu.tw/repos/env/trunk/trac/package/</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">~8 patches to trac and plugins require precisely the same revisions to be used</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://dayabay.phys.ntu.edu.tw/repos/env/trunk/trac/patch/">http://dayabay.phys.ntu.edu.tw/repos/env/trunk/trac/patch/</a></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="what-to-change">
<h3>what to change ?<a class="headerlink" href="#what-to-change" title="Permalink to this headline">Â¶</a></h3>
<p>As little as possible, but:</p>
<ol class="arabic simple">
<li>update AccountManager plugin</li>
<li>remember docutils and RST support in Trac</li>
<li>check the tickets and notes for long forgotten things to change, eg bitten build web UI</li>
</ol>
<div class="sidebar">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../priors/" title="Prior Migration Notes"
             >next</a> |</li>
        <li class="right" >
          <a href="../" title="Trac/SVN Migration to SL59"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >Trac</a> &raquo;</li>
          <li><a href="../../" >Migrating Trac Contents Elsewhere</a> &raquo;</li>
          <li><a href="../" >Trac/SVN Migration to SL59</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>