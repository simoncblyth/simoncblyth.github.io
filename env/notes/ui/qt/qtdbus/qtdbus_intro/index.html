<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>QtDbus Intro &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../../" />
    <link rel="up" title="qtdbus" href="../" />
    <link rel="next" title="Qt Mac Deployment" href="../../macdeployqt/" />
    <link rel="prev" title="qtdbus" href="../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../macdeployqt/" title="Qt Mac Deployment"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="qtdbus"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >ui</a> &raquo;</li>
          <li><a href="../../" >qt</a> &raquo;</li>
          <li><a href="../" accesskey="U">qtdbus</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../package_management/">Package Management</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../">ui</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../">qt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../_sources/ui/qt/qtdbus/qtdbus_intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">qtdbus</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../macdeployqt/"
                        title="next chapter">Qt Mac Deployment</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="qtdbus-intro">
<h1>QtDbus Intro<a class="headerlink" href="#qtdbus-intro" title="Permalink to this headline">¶</a></h1>
<p>Follow along</p>
<ul class="simple">
<li><a class="reference external" href="http://developer.nokia.com/Community/Wiki/QtDbus_quick_tutorial">http://developer.nokia.com/Community/Wiki/QtDbus_quick_tutorial</a></li>
</ul>
<div class="section" id="in-short">
<h2>In short<a class="headerlink" href="#in-short" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:qtdbus blyth$ ./qdbusxml2cpp.sh
qdbusxml2cpp -v -c DemoIf -p demoif.h:demoif.cpp com.nokia.Demo.xml
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
qdbusxml2cpp -v -c DemoIfAdaptor -a demoifadaptor.h:demoifadaptor.cpp com.nokia.Demo.xml
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
simon:qtdbus blyth$
simon:qtdbus blyth$ qmake
Project MESSAGE: qtAddLibrary: found framework QtDBus in directory /opt/local/Library/Frameworks
Project MESSAGE: qtAddLibrary: found framework QtGui in directory /opt/local/Library/Frameworks
Project MESSAGE: qtAddLibrary: found framework QtCore in directory /opt/local/Library/Frameworks
simon:qtdbus blyth$ make
...
simon:qtdbus blyth$ qtdbus.app/Contents/MacOS/qtdbus      ## dbus daemon needs to be running before starting the app
MyDemo::MyDemo</pre>
</div>
</div>
<div class="section" id="interface-description-xml">
<h2>Interface description XML<a class="headerlink" href="#interface-description-xml" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>&lt;node&gt;
  &lt;interface name="com.nokia.Demo"&gt;
    &lt;method name="SayHello"&gt;
      &lt;annotation name="com.trolltech.QtDBus.QtTypeName.In1" value="QVariantMap"/&gt;
      &lt;arg name="name" type="s" direction="in" /&gt;
      &lt;arg name="customdata" type="a{sv}" direction="in" /&gt;
    &lt;/method&gt;
    &lt;method name="SayHelloThere"&gt;
      &lt;arg name="name" type="s" direction="in" /&gt;
    &lt;/method&gt;
    &lt;method name="SayBye"/&gt;
    &lt;signal name="LateEvent"&gt;
        &lt;arg name="eventkind" type="s" direction="out"/&gt;
    &lt;/signal&gt;
 &lt;/interface&gt;
&lt;/node&gt;
</pre>
</div>
</div>
<div class="section" id="generate-code-from-description-with-qtdbusxml2cpp">
<h2>Generate code from description with qtdbusxml2cpp<a class="headerlink" href="#generate-code-from-description-with-qtdbusxml2cpp" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:qtdbus blyth$ qdbusxml2cpp -h
Usage: qdbusxml2cpp [options...] [xml-or-xml-file] [interfaces...]
Produces the C++ code to implement the interfaces defined in the input file.

Options:
  -a &lt;filename&gt;    Write the adaptor code to &lt;filename&gt;
  -c &lt;classname&gt;   Use &lt;classname&gt; as the class name for the generated classes
  -h               Show this information
  -i &lt;filename&gt;    Add #include to the output
  -l &lt;classname&gt;   When generating an adaptor, use &lt;classname&gt; as the parent class
  -m               Generate #include "filename.moc" statements in the .cpp files
  -N               Don't use namespaces
  -p &lt;filename&gt;    Write the proxy code to &lt;filename&gt;
  -v               Be verbose.
  -V               Show the program version and quit.

If the file name given to the options -a and -p does not end in .cpp or .h, the
program will automatically append the suffixes and produce both files.
You can also use a colon (:) to separate the header name from the source file
name, as in '-a filename_p.h:filename.cpp'.

If you pass a dash (-) as the argument to either -p or -a, the output is written
to the standard output</pre>
</div>
</div>
<div class="section" id="generate-client-proxy-code-from-xml">
<h2>Generate Client Proxy Code from XML<a class="headerlink" href="#generate-client-proxy-code-from-xml" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:qtdbus blyth$ pwd
/Users/blyth/e/ui/qt/qtdbus
simon:qtdbus blyth$ vi com.nokia.Demo.xml
simon:qtdbus blyth$ which qdbusxml2cpp
/opt/local/bin/qdbusxml2cpp
simon:qtdbus blyth$ qdbusxml2cpp -v -c DemoIf -p demoif.h:demoif.cpp com.nokia.Demo.xml
                    ##
                    ##  -v verbose
                    ##  -c DemoIf                    the classname to use
                    ##  -p demoif.h:demoif.cpp       write proxy code to these files
                    ##
                    ##   generates demoif.{h,cpp}

Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
simon:qtdbus blyth$ ll
total 32
drwxr-xr-x  3 blyth  staff   102 27 Nov 12:42 ..
-rw-r--r--  1 blyth  staff    95 27 Nov 12:42 qtdbus_intro.rst
-rw-r--r--  1 blyth  staff   430 27 Nov 12:43 com.nokia.Demo.xml
-rw-r--r--  1 blyth  staff  1592 27 Nov 12:44 demoif.h
-rw-r--r--  1 blyth  staff   666 27 Nov 12:44 demoif.cpp
drwxr-xr-x  6 blyth  staff   204 27 Nov 12:44 .
simon:qtdbus blyth$</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="https://bugreports.qt-project.org/browse/QTBUG-14835">https://bugreports.qt-project.org/browse/QTBUG-14835</a></li>
</ul>
<p>Attempt to follow the suggestion in the deprecatin warning, gives error and fails to generate, so live with the warning:</p>
<div class="highlight-python"><pre>perl -pi -e 's,trolltech,qtproject,g' com.nokia.Demo.xml

simon:qtdbus blyth$ qdbusxml2cpp -v -c DemoIf -p demoif.h:demoif.cpp com.nokia.Demo.xml
Got unknown type `a{sv}'
You should add &lt;annotation name="org.qtproject.QtDBus.QtTypeName.In1" value="&lt;type&gt;"/&gt; to the XML description

simon:qtdbus blyth$ perl -pi -e 's,qtproject,trolltech,g' com.nokia.Demo.xml    ## back to original
simon:qtdbus blyth$ qdbusxml2cpp -v -c DemoIf -p demoif.h:demoif.cpp com.nokia.Demo.xml
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://dbus.freedesktop.org/doc/dbus-specification.html">http://dbus.freedesktop.org/doc/dbus-specification.html</a></li>
</ul>
</div>
<div class="section" id="generate-server-stub-adapter-code-from-xml">
<h2>Generate Server Stub (Adapter code) from XML<a class="headerlink" href="#generate-server-stub-adapter-code-from-xml" title="Permalink to this headline">¶</a></h2>
<p>Note <tt class="docutils literal"><span class="pre">-a</span></tt> rather than <tt class="docutils literal"><span class="pre">-p</span></tt>:</p>
<div class="highlight-python"><pre>simon:qtdbus blyth$ qdbusxml2cpp -v -c DemoIfAdaptor -a demoifadaptor.h:demoifadaptor.cpp com.nokia.Demo.xml
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
Warning: deprecated annotation 'com.trolltech.QtDBus.QtTypeName.In1' found; suggest updating to 'org.qtproject.QtDBus.QtTypeName.In1'
simon:qtdbus blyth$</pre>
</div>
</div>
<div class="section" id="put-the-above-in-a-script">
<h2>Put the above in a script<a class="headerlink" href="#put-the-above-in-a-script" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>#!/bin/bash -l

generate(){
   local xml=com.nokia.Demo.xml
   local cls=DemoIf
   local nam=$(echo $cls | tr '[A-Z]' '[a-z]')
   local pcmd="qdbusxml2cpp -v -c $cls -p $nam.h:$nam.cpp $xml"
   echo $pcmd
   eval $pcmd
   local acmd="qdbusxml2cpp -v -c ${cls}Adaptor -a ${nam}adaptor.h:${nam}adaptor.cpp $xml"
   echo $acmd
   eval $acmd
}

generate $*

</pre>
</div>
</div>
<div class="section" id="make-a-project">
<h2>Make a project<a class="headerlink" href="#make-a-project" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:qtdbus blyth$ qmake -project</pre>
</div>
<p>Add to the qtdbus.pro generated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">QT</span> <span class="o">+=</span> <span class="n">dbus</span>
</pre></div>
</div>
<p>Then:</p>
<ol class="arabic simple">
<li><cite>qmake</cite> to generate a Makefile</li>
<li><cite>make</cite> succeeds to moc the signal/slots and compile all the generated code by complains of lack of main at linking.</li>
</ol>
</div>
<div class="section" id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:qtdbus blyth$ qtdbus.app/Contents/MacOS/qtdbus
MyDemo::MyDemo
Dynamic session lookup supported but failed: launchd did not provide a socket path, verify that org.freedesktop.dbus-session.plist is loaded!</pre>
</div>
</div>
<div class="section" id="try-to-query-server">
<h2>Try to query server<a class="headerlink" href="#try-to-query-server" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:~ blyth$ which qdbus
/opt/local/bin/qdbus

simon:~ blyth$ qdbus com.nokia.Demo
Dynamic session lookup supported but failed: launchd did not provide a socket path, verify that org.freedesktop.dbus-session.plist is loaded!
Could not connect to D-Bus server: org.freedesktop.DBus.Error.NoMemory: Not enough memory</pre>
</div>
</div>
<div class="section" id="qdbus-probing">
<h2>qdbus probing<a class="headerlink" href="#qdbus-probing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>simon:~ blyth$ which dbus-send
/opt/local/bin/dbus-send

simon:~ blyth$ which qdbus
/opt/local/bin/qdbus</pre>
</div>
<p>When dbus daemon is not running:</p>
<div class="highlight-python"><pre>simon:~ blyth$ qdbus com.nokia.Demo
Dynamic session lookup supported but failed: launchd did not provide a socket path, verify that org.freedesktop.dbus-session.plist is loaded!
Could not connect to D-Bus server: org.freedesktop.DBus.Error.NoMemory: Not enough memory</pre>
</div>
<p>When running:</p>
<div class="highlight-python"><pre>simon:~ blyth$ qdbus com.nokia.Demo
/</pre>
</div>
<p>The daemon knows about the interface:</p>
<div class="highlight-python"><pre>simon:~ blyth$ qdbus com.nokia.Demo /
signal void com.nokia.Demo.LateEvent(QString eventkind)
method void com.nokia.Demo.SayBye()
method void com.nokia.Demo.SayHello(QString name, QVariantMap customdata)
method QDBusVariant org.freedesktop.DBus.Properties.Get(QString interface_name, QString property_name)
method QVariantMap org.freedesktop.DBus.Properties.GetAll(QString interface_name)
method void org.freedesktop.DBus.Properties.Set(QString interface_name, QString property_name, QDBusVariant value)
method QString org.freedesktop.DBus.Introspectable.Introspect()
method QString org.freedesktop.DBus.Peer.GetMachineId()
method void org.freedesktop.DBus.Peer.Ping()</pre>
</div>
<div class="highlight-python"><pre>simon:~ blyth$ dbus-send --type=method_call --print-reply \
&gt;     --dest=com.nokia.Demo / org.freedesktop.DBus.Introspectable.Introspect
method return sender=:1.0 -&gt; dest=:1.3 reply_serial=2
   string "&lt;!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd"&gt;
&lt;node&gt;
  &lt;interface name="com.nokia.Demo"&gt;
    &lt;method name="SayHello"&gt;
      &lt;annotation value="QVariantMap" name="com.trolltech.QtDBus.QtTypeName.In1"/&gt;
      &lt;arg direction="in" type="s" name="name"/&gt;
      &lt;arg direction="in" type="a{sv}" name="customdata"/&gt;
    &lt;/method&gt;
    &lt;method name="SayBye"/&gt;
    &lt;signal name="LateEvent"&gt;
      &lt;arg direction="out" type="s" name="eventkind"/&gt;
    &lt;/signal&gt;
  &lt;/interface&gt;
  &lt;interface name="org.freedesktop.DBus.Properties"&gt;
    &lt;method name="Get"&gt;
      &lt;arg name="interface_name" type="s" direction="in"/&gt;
      &lt;arg name="property_name" type="s" direction="in"/&gt;
      &lt;arg name="value" type="v" direction="out"/&gt;
    &lt;/method&gt;
    &lt;method name="Set"&gt;
      &lt;arg name="interface_name" type="s" direction="in"/&gt;
      &lt;arg name="property_name" type="s" direction="in"/&gt;
      &lt;arg name="value" type="v" direction="in"/&gt;
    &lt;/method&gt;
    &lt;method name="GetAll"&gt;
      &lt;arg name="interface_name" type="s" direction="in"/&gt;
      &lt;arg name="values" type="a{sv}" direction="out"/&gt;
      &lt;annotation name="org.qtproject.QtDBus.QtTypeName.Out0" value="QVariantMap"/&gt;
    &lt;/method&gt;
  &lt;/interface&gt;
  &lt;interface name="org.freedesktop.DBus.Introspectable"&gt;
    &lt;method name="Introspect"&gt;
      &lt;arg name="xml_data" type="s" direction="out"/&gt;
    &lt;/method&gt;
  &lt;/interface&gt;
  &lt;interface name="org.freedesktop.DBus.Peer"&gt;
    &lt;method name="Ping"/&gt;
    &lt;method name="GetMachineId"&gt;
      &lt;arg name="machine_uuid" type="s" direction="out"/&gt;
    &lt;/method&gt;
  &lt;/interface&gt;
&lt;/node&gt;
"</pre>
</div>
<p>Remote signalling:</p>
<div class="highlight-python"><pre>simon:~ blyth$ qdbus com.nokia.Demo / com.nokia.Demo.SayBye</pre>
</div>
<p>Over at the app console:</p>
<div class="highlight-python"><pre>simon:qtdbus blyth$ qtdbus.app/Contents/MacOS/qtdbus
MyDemo::MyDemo
MyDemo::SayBye</pre>
</div>
<p>Similarly:</p>
<div class="highlight-python"><pre>simon:~ blyth$ dbus-send --type=method_call --print-reply \
&gt;     --dest=com.nokia.Demo / com.nokia.Demo.SayBye
method return sender=:1.0 -&gt; dest=:1.5 reply_serial=2</pre>
</div>
<p>What about methods with parameters:</p>
<div class="highlight-python"><pre>simon:~ blyth$ qdbus com.nokia.Demo / com.nokia.Demo.SayHello simon
Invalid number of parameters
simon:~ blyth$ qdbus com.nokia.Demo / com.nokia.Demo.SayHello
Error: org.freedesktop.DBus.Error.UnknownMethod
No such method 'SayHello' in interface 'com.nokia.Demo' at object path '/' (signature '')
simon:~ blyth$
simon:~ blyth$ qdbus com.nokia.Demo / com.nokia.Demo.SayHello simon b
Sorry, can't pass arg of type 'QVariantMap'.</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://forum.kde.org/viewtopic.php?f=17&amp;t=85292">http://forum.kde.org/viewtopic.php?f=17&amp;t=85292</a></li>
</ul>
<p>Seems cannot do that from commandline arguments with <tt class="docutils literal"><span class="pre">qdbus</span></tt> tool. So..</p>
</div>
<div class="section" id="add-method-that-just-takes-string-arg-for-simplicity">
<h2>Add method that just takes string arg for simplicity<a class="headerlink" href="#add-method-that-just-takes-string-arg-for-simplicity" title="Permalink to this headline">¶</a></h2>
<p>Succeeds to invoke methods with string arguments in the running qt app:</p>
<div class="highlight-python"><pre>simon:~ blyth$ qdbus com.nokia.Demo / com.nokia.Demo.SayHelloThere simon
simon:~ blyth$ qdbus com.nokia.Demo / com.nokia.Demo.SayHelloThere "http://simon?c=2,3,4&amp;other=yes&amp;yo"</pre>
</div>
<div class="highlight-python"><pre>simon:qtdbus blyth$ ./run.sh
MyDemo::MyDemo
MyDemo::SayHelloThere [ "simon" ]
MyDemo::SayHelloThere [ "http://simon?c=2,3,4&amp;other=yes&amp;yo" ]</pre>
</div>
</div>
<div class="section" id="python-dbus">
<h2>Python dbus<a class="headerlink" href="#python-dbus" title="Permalink to this headline">¶</a></h2>
<p>For passing dicts need to go beyond <tt class="docutils literal"><span class="pre">qdbus</span></tt>:</p>
<div class="highlight-python"><pre>simon:~ blyth$ sudo port install -v dbus-python26
Password:
---&gt;  Computing dependencies for gettext</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://dbus.freedesktop.org/doc/dbus-python/">http://dbus.freedesktop.org/doc/dbus-python/</a></li>
<li><a class="reference external" href="http://cgit.freedesktop.org/dbus/dbus-python/tree/examples/example-client.py">http://cgit.freedesktop.org/dbus/dbus-python/tree/examples/example-client.py</a></li>
<li><a class="reference external" href="http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html">http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html</a></li>
</ul>
<div class="section" id="too-many-dependencies">
<h3>Too many dependencies<a class="headerlink" href="#too-many-dependencies" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>simon:~ blyth$ port deps dbus-python26
Full Name: dbus-python26 @0.83.2_0
Build Dependencies:   pkgconfig
Library Dependencies: dbus, dbus-glib, gettext, glib2, libiconv, python26, py26-gobject
simon:~ blyth$</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../macdeployqt/" title="Qt Mac Deployment"
             >next</a> |</li>
        <li class="right" >
          <a href="../" title="qtdbus"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >ui</a> &raquo;</li>
          <li><a href="../../" >qt</a> &raquo;</li>
          <li><a href="../" >qtdbus</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>