<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CONVERT SLIDES IN S5 RST TO HTML AND PDF &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" />
    <link rel="up" title="doc" href="../" />
    <link rel="next" title="Python" href="../../python/" />
    <link rel="prev" title="doc" href="../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../python/" title="Python"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="doc"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" accesskey="U">doc</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">doc</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">CONVERT SLIDES IN S5 RST TO HTML AND PDF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/doc/slides.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">doc</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../python/"
                        title="next chapter">Python</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="convert-slides-in-s5-rst-to-html-and-pdf">
<h1>CONVERT SLIDES IN S5 RST TO HTML AND PDF<a class="headerlink" href="#convert-slides-in-s5-rst-to-html-and-pdf" title="Permalink to this headline">¶</a></h1>
<div class="section" id="checking-configured-settings">
<h2>Checking configured settings<a class="headerlink" href="#checking-configured-settings" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><em>slides-info</em></dt>
<dd>echos the paths/names in use</dd>
<dt><em>slides-get 0 15</em></dt>
<dd><p class="first">capture PNGs per page, crop the chrome, convert PNGs into PDF</p>
<p>BEFORE USING MOVE ASIDE THE PRIOR CAPTURES MANUALLY:</p>
<div class="last highlight-python"><pre>delta:~ blyth$ slides-cd ..
delta:presentation blyth$ mv gpu_optical_photon_simulation gpu_optical_photon_simulation_apr28</pre>
</div>
</dd>
</dl>
</div>
<div class="section" id="creating-html-slides-from-s5-restructured-text-sources">
<h2>Creating HTML slides from S5 Restructured Text Sources<a class="headerlink" href="#creating-html-slides-from-s5-restructured-text-sources" title="Permalink to this headline">¶</a></h2>
<p>For simplicity arrange to have only one .txt file in the presentations folder, eg when
adapting an existing presentation:</p>
<div class="highlight-python"><pre>simon:presentation blyth$ svn cp nov2013_gpu_nuwa.txt gpu_optical_photon_simulation.txt
A         gpu_optical_photon_simulation.txt
simon:presentation blyth$ svn mv  nov2013_gpu_nuwa.txt  nov2013_gpu_nuwa.txt.old
A         nov2013_gpu_nuwa.txt.old
D         nov2013_gpu_nuwa.txt</pre>
</div>
<p>Check/update <em>slides-name</em>, <em>slides-branch</em>, <em>slides-host</em> settings using <em>slides-vi</em> <em>slides-info</em>, to
correspond to the name and location of the S5 sources. Normally
would just need to update <em>slides-name</em>, in above example <em>gpu_optical_photon_simulation</em>.</p>
<p>Update S5 source, regenerate html and view local html in browser:</p>
<div class="highlight-python"><pre>simon:presentation blyth$ vi gpu_optical_photon_simulation.txt
simon:presentation blyth$ make
python ./rst2s5-2.6.py --theme-url ui/my-small-white --current-slide --visible-controls --language=en gpu_optical_photon_simulation.txt gpu_optical_photon_simulation.html
created gpu_optical_photon_simulation.html NAMES gpu_optical_photon_simulation

simon:presentation blyth$ open gpu_optical_photon_simulation.html</pre>
</div>
<p>To check a particular page use links like:</p>
<ul class="simple">
<li><a class="reference external" href="file:///Users/blyth/env/muon_simulation/presentation/gpu_optical_photon_simulation.html?p=18">file:///Users/blyth/env/muon_simulation/presentation/gpu_optical_photon_simulation.html?p=18</a></li>
</ul>
<p>The above steps can also be done with <em>slides-make</em>.</p>
<dl class="docutils">
<dt><em>slides-make</em></dt>
<dd>Uses rst2s5.py to convert S5 .txt sources into .html.</dd>
</dl>
</div>
<div class="section" id="rsync-derived-files-elsewhere-and-cleanup-source-tree">
<h2>Rsync derived files elsewhere and cleanup source tree<a class="headerlink" href="#rsync-derived-files-elsewhere-and-cleanup-source-tree" title="Permalink to this headline">¶</a></h2>
<p>Check the slides dir destination is as desired then <em>make rsync</em>:</p>
<div class="highlight-python"><pre>simon:presentation blyth$ slides-dir
/usr/local/env/muon_simulation/presentation/nov2013_gpu_nuwa
simon:presentation blyth$ slides-
simon:presentation blyth$ slides-dir
/usr/local/env/muon_simulation/presentation/gpu_optical_photon_simulation</pre>
</div>
<p>The above steps can also be done with <em>slides-rsync</em>.</p>
<dl class="docutils">
<dt><em>slides-rsync</em></dt>
<dd>Copies derived html and pdf files out of working copy, then cleans them from working copy.</dd>
</dl>
</div>
<div class="section" id="publish-html-to-web-server">
<h2>Publish html to web server<a class="headerlink" href="#publish-html-to-web-server" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>make sure working copy is clean and commit changed files to subversion</li>
<li>update env working copy on webserver</li>
<li>generate the html on the web server with <em>slides-make</em> or manually as shown above</li>
<li>use <em>slides-rsync</em> to propagate into the appropriate place for Sphinx derived html</li>
<li>rsync to the webserver htdocs with <em>slides-publish</em> note that the destination
reuses the folders used by sphinx derived documentation</li>
</ol>
<p>Hmm, also needed to:</p>
<div class="highlight-python"><pre>cd ~/env
make rsync</pre>
</div>
<ul class="simple">
<li>TODO: streamline this, too many steps that have to be done in the correct order, see <strong>eup</strong> func on C2R</li>
</ul>
</div>
<div class="section" id="publish-to-local-apache">
<h2>Publish to local apache<a class="headerlink" href="#publish-to-local-apache" title="Permalink to this headline">¶</a></h2>
<p>Avoid integration with Sphinx build docs which causes the complications.
Publish to local apache using:</p>
<ol class="arabic simple">
<li><em>slides-apache-prepare</em></li>
<li><em>slides-apache-publish</em></li>
</ol>
</div>
<div class="section" id="publish-to-remote-apache">
<h2>Publish to remote apache<a class="headerlink" href="#publish-to-remote-apache" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><em>env-htdocs-rsync C2</em></li>
</ol>
</div>
<div class="section" id="integrate-urls-of-presentation-html-with-sphinx">
<h2>Integrate URLs of presentation HTML with Sphinx<a class="headerlink" href="#integrate-urls-of-presentation-html-with-sphinx" title="Permalink to this headline">¶</a></h2>
<p>In the Sphinx index.rst in the presention folder add
raw html lists of links in order to allow navigation
from Sphinx derived docs to the presentation html and pdf.</p>
</div>
<div class="section" id="coexisting-with-sphinx">
<h2>Coexisting with Sphinx<a class="headerlink" href="#coexisting-with-sphinx" title="Permalink to this headline">¶</a></h2>
<p>Slide sources are named <em>.txt</em> rather than <em>.rst</em></p>
<p>This avoid Sphinx attempting to build the S5 sources, which are
in plain docutils restructured text using S5 definitions rather
than Sphinx RST.</p>
<p>The generated S5 html and pdf are placed within the Sphinx
build directory at the appropriate place in the tree
corresponding to the RST sources</p>
</div>
<div class="section" id="creating-screenshots-from-g4daeview-py">
<h2>Creating screenshots from g4daeview.py<a class="headerlink" href="#creating-screenshots-from-g4daeview-py" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>slides-
slides-screenshots-dir-cd
g4daeview.sh --with-chroma --load 1</pre>
</div>
</div>
<div class="section" id="include-fullscreen-image-in-s5-slides">
<h2>Include Fullscreen Image in S5 slides ?<a class="headerlink" href="#include-fullscreen-image-in-s5-slides" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Scaling_background_images">https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Scaling_background_images</a></li>
<li><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/background">https://developer.mozilla.org/en-US/docs/Web/CSS/background</a></li>
<li><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/background-repeat">https://developer.mozilla.org/en-US/docs/Web/CSS/background-repeat</a></li>
</ul>
<p>Use raw html directive at the head of the RST source, identifying slides
to receive background images via div#id css selectors where the id are
a somewhat mangled slide titles.</p>
<p>Note:</p>
<ol class="arabic simple">
<li>document relative and server relative links are usable from css</li>
<li>protocol relative, starting &#8220;//&#8221; also works but that would mean
hardcoding the sever hostname</li>
</ol>
<div class="highlight-python"><pre>.. include:: &lt;s5defs.txt&gt;

.. raw:: html

   &lt;style type="text/css"&gt;

     /*
          1282 × 960  pixels    143.99 pixels/inch  237.1 KB (242,821 bytes)     chroma_dayabay_adlid.png
          1278 × 962  pixels    143.99 pixels/inch  433.5 KB (443,928 bytes)     chroma_dayabay_pool_pmts.png

          With "background-size: contain" and not specifying a size for the div leads
          to scaling being dependant on the dimensions of the div, which depend on the amount
          of content lines on the page, also this changes resize browser window. When
          little content the image is scaled up into top left corner.

          With "background-size: cover" and not specifying a size for the div leads
          to scaling to fill horizontally, but vertical chop when the content ends.

          Omitting "background-size" and not specifying a size for the div get
          no image scaling, it appears as-is but chopped according to size of the div.

          Omitting "background-size" and specifying "div.slide { height: 100%; }"
          gets no image scaling and image presented as-is without any chopping.  This
          is a better approach as the per slide config is minimised to just
          specifying the url.

     */

      div.slide {
         background-clip: border-box;
         background-repeat: no-repeat;
         height: 100%;
      }
      div.slide#full-screen{
         background-image: url(images/chroma/chroma_dayabay_adlid.png);
      }
      div.slide#full-screen-2{
         background-image: url(images/chroma/chroma_dayabay_pool_pmts.png);
      }
      div.slide#test-server-relative-link{
         background-image: url(/env/test/LANS_AD3_CoverGas_Humidity.png);
      }
      div.slide#test-protocol-relative-link{
         background-image: url(//localhost/env/test/LANS_AD3_CoverGas_Humidity.png);
      }


   &lt;/style&gt;



   ...bulk of slides omitted...


   Full Screen
   ------------

   Full Screen 2
   ---------------

   Content appears on top of the image, that can be difficult to read.</pre>
</div>
</div>
<div class="section" id="convert-html-pages-to-pdf">
<h2>Convert .html pages to .pdf<a class="headerlink" href="#convert-html-pages-to-pdf" title="Permalink to this headline">¶</a></h2>
<p>Creates PDF documents from a sequence of cropped browser
screen capture PNGs.</p>
<p>This is particularly useful with S5 slides created with
rst2s5.py as this avoids having to duplicate the layout exercise
for the pdf.  A PDF can be created from the rst via several routes
but it will not look like the S5 slides without duplicated styling
effort.</p>
<p>The disadvantage is bitmapped PDFs lacking clickable links.
Mitigate this (and gain some html traffic) by providing a
prominent reference to the online html version of the slides.</p>
<p>The advantage of having slides in html, generated from
plain text RST files outweighs the disadvantage.</p>
</div>
<div class="section" id="pdf-creation-functions">
<h2>PDF CREATION FUNCTIONS<a class="headerlink" href="#pdf-creation-functions" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><em>slides-get N M</em></dt>
<dd><p class="first">performs the below functions, does screencaptures to PNG,
cropping PNG and converting to PDF, usage:</p>
<div class="last highlight-python"><pre>slides-get 0 5</pre>
</div>
</dd>
<dt><em>slides-capture N M</em></dt>
<dd><p class="first">screencapture a sequence of Safari pages, eg S5 slides</p>
<p>During operation the sequence of Browser pages will load
one by one.  As each URL is visited, user intervention
to click the window is required. As the tabs are left it is
preferable to start with only a small number of
Safari tabs before running the script.</p>
<p>For each load:</p>
<ol class="last arabic simple">
<li>focus will shift to the new page</li>
<li>wait until onload javascript has completed</li>
<li>screencapture will kick in and color the browser blue with a camera icon</li>
<li>click the browser window to take the capture</li>
</ol>
</dd>
<dt><em>slides-crop</em></dt>
<dd>runs python cropper on all NN.png, creating NN_crop.png</dd>
<dt><em>slides-convert</em></dt>
<dd><p class="first">uses convert to concatenate NN_crop.png into name.pdf , this
is using ImageMagick (a very heavy dependency).</p>
<p>Initially used Automator action,
/Library/WebServer/Documents/env/muon_simulation/presentation/pngs2pdf.workflow</p>
<p class="last">Subsequently created an Automator Service <cite>Make PDF from PNGs</cite>,
documented at <a class="reference external" href="http://dayabay.phys.ntu.edu.tw/tracs/env/intertrac/osx/osx_automator_workflows">env:osx/osx_automator_workflows</a></p>
</dd>
<dt><em>slides-rst2pdf-convert</em></dt>
<dd>DID NOT PURSUE THIS TECHNIQUE AS TOO MUCH STYLING REINVENTION</dd>
</dl>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../python/" title="Python"
             >next</a> |</li>
        <li class="right" >
          <a href="../" title="doc"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" >doc</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>