<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Material Properties &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../../../" />
    <link rel="up" title="geant4_opticks_integration" href="../" />
    <link rel="next" title="Time Goes Backward" href="../time_goes_backward/" />
    <link rel="prev" title="Taming Geant4 Verbosity" href="../geant4_verbosity/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../time_goes_backward/" title="Time Goes Backward"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../geant4_verbosity/" title="Taming Geant4 Verbosity"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../../" >Graphics</a> &raquo;</li>
          <li><a href="../../../" >ggeoview</a> &raquo;</li>
          <li><a href="../../" >issues</a> &raquo;</li>
          <li><a href="../" accesskey="U">geant4_opticks_integration</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../llvm/">llvm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../">Graphics</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../">ggeoview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../oglrap/">oglrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../meshlab/">meshlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../collada/">collada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../cgal/">CGAL Computational Geometry Algorithms Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mesh/">mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../vrml/">vrml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../opengl/">opengl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../transformations/">transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../panda3d/">panda3d</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pipeline/">pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../math/">math</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../glumpy/">glumpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../scenekit/">scenekit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pyopengl/">pyopengl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../unity/">unity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../../_sources/graphics/ggeoview/issues/geant4_opticks_integration/ancient_gdml_export_lacks_material_properties.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../geant4_verbosity/"
                        title="previous chapter">Taming Geant4 Verbosity</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../time_goes_backward/"
                        title="next chapter">Time Goes Backward</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="material-properties">
<h1>Material Properties<a class="headerlink" href="#material-properties" title="Permalink to this headline">¶</a></h1>
<div class="section" id="worked-around-issue-old-gdml-export-omits-material-properties">
<h2>[WORKED AROUND] Issue : old GDML export omits material properties<a class="headerlink" href="#worked-around-issue-old-gdml-export-omits-material-properties" title="Permalink to this headline">¶</a></h2>
<p>Get NULL MPT in loaded model:</p>
<div class="highlight-python"><pre>147 void G4GDMLWriteMaterials::MaterialWrite(const G4Material* const materialPtr)
148 {
...
163    if (materialPtr-&gt;GetMaterialPropertiesTable())
164    {
165      PropertyWrite(materialElement, materialPtr);
166    }

228 void G4GDMLWriteMaterials::PropertyWrite(xercesc::DOMElement* matElement,
229                                          const G4Material* const mat)
230 {
...
241    for (mpos=pmap-&gt;begin(); mpos!=pmap-&gt;end(); mpos++)
242    {
243       propElement = NewElement("property");
244       propElement-&gt;setAttributeNode(NewAttribute("name", mpos-&gt;first));
245       propElement-&gt;setAttributeNode(NewAttribute("ref",
246                                     GenerateName(mpos-&gt;first, mpos-&gt;second)));</pre>
</div>
<p>No property elements in the ancient geant4 exported GDML:</p>
<div class="highlight-python"><pre>simon:cfg4 blyth$ grep property /usr/local/env/geant4/geometry/export/DayaBay_VGDX_20140414-1300/g4_00.gdml</pre>
</div>
<p>Only that one GDML file amongst the exports, exports were copied over to D:</p>
<div class="highlight-python"><pre>simon:export blyth$ find . -name '*.gdml'
./DayaBay_VGDX_20140414-1300/g4_00.gdml
simon:export blyth$ pwd
/usr/local/env/geant4/geometry/export</pre>
</div>
<p>Anyhow checking geant4.0.2p01/G4GDMLWriteMaterials::MaterialWrite does not write material properties:</p>
<div class="highlight-python"><pre>[blyth@ntugrid5 env]$ nuwa-;cd $(nuwa-g4-sdir)</pre>
</div>
<ul class="simple">
<li>re-export DYB geometry, checking material properties, old export lacks em<ul>
<li>this not so easy, would need to backport recent GDML writer to work with nuwa
but the info is in the DAE, and are able to reconstruct G4 materials with
the properties for the geocache as done by cfg4- CPropLib, so used this
workaround</li>
<li>Actually this work is closely releated to G4DAE exporter and intended
eventual revisit to bring up to latest G4 and maybe find way to
reduce pain of subsequent such syncing.
Also note that GDML writer requires special G4 build configuration
so if that could be avoided in g4d- ?</li>
<li>see also export-</li>
</ul>
</li>
</ul>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../time_goes_backward/" title="Time Goes Backward"
             >next</a> |</li>
        <li class="right" >
          <a href="../geant4_verbosity/" title="Taming Geant4 Verbosity"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../../" >Graphics</a> &raquo;</li>
          <li><a href="../../../" >ggeoview</a> &raquo;</li>
          <li><a href="../../" >issues</a> &raquo;</li>
          <li><a href="../" >geant4_opticks_integration</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>