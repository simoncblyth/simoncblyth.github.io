<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Glumpy Usage Of PyOpenGL &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../" />
    <link rel="up" title="glumpy" href="../" />
    <link rel="next" title="scenekit" href="../../scenekit/" />
    <link rel="prev" title="GLUMPY" href="../glumpy/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../scenekit/" title="scenekit"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../glumpy/" title="GLUMPY"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >Graphics</a> &raquo;</li>
          <li><a href="../" accesskey="U">glumpy</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../llvm/">llvm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">Graphics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../ggeoview/">ggeoview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../oglrap/">oglrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../meshlab/">meshlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collada/">collada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cgal/">CGAL Computational Geometry Algorithms Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mesh/">mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vrml/">vrml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../opengl/">opengl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../transformations/">transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d/">panda3d</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pipeline/">pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math/">math</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">glumpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scenekit/">scenekit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pyopengl/">pyopengl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../unity/">unity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/graphics/glumpy/glumpy_usage_of_pyopengl.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../glumpy/"
                        title="previous chapter">GLUMPY</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../scenekit/"
                        title="next chapter">scenekit</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="glumpy-usage-of-pyopengl">
<h1>Glumpy Usage Of PyOpenGL<a class="headerlink" href="#glumpy-usage-of-pyopengl" title="Permalink to this headline">¶</a></h1>
<div class="section" id="vertexbuffer">
<h2>VertexBuffer<a class="headerlink" href="#vertexbuffer" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><cite>/usr/local/env/graphics/glumpy/glumpy/glumpy/graphics/vertex_buffer.py</cite></li>
</ul>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p><cite>daeviewgl.py</cite>:</p>
<div class="highlight-python"><pre>129 def main():
130     import sys
131     logging.basicConfig(level=logging.INFO)
132
133     arg = "4998:6000"
134     vbo = VBO.from_dae(arg, scale=True)
135
136     fig = gp.figure((1024,768))
137     frame = fig.add_frame(size=(1,1))
138
139     mesh = gp.graphics.VertexBuffer( vbo.data, vbo.faces )
140     trackball = gp.Trackball( 65, 135, 1.0, 2.5 )
141
142     FigHandler(fig, trackball)
143     FrameHandler(frame, mesh, trackball)
144
145     gp.show()</pre>
</div>
<p>Adapted from <cite>demos/obj-viewer.py</cite> in <cite>daeviewgl.py</cite>:</p>
<div class="highlight-python"><pre>38     def __init__(self, vertices, normals, faces):
39
40         data = np.zeros(len(vertices), [('position', np.float32, 3),
41                                      ('color', np.float32, 3),
42                                      ('normal',   np.float32, 3)])
43         data['position'] = vertices
44         data['color'] = np.random.random(vertices.shape)   # (vertices+1)/2.
45         data['normal'] = normals
46
47         self.data = data
48         self.faces = faces</pre>
</div>
</div>
<div class="section" id="init">
<h3>__init__<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h3>
<p>Dicts of attributes keyed on first char of subdtype name created, buffers created and bound:</p>
<div class="highlight-python"><pre>128 class VertexBuffer(object):
130     def __init__(self, vertices, indices=None):
...
155             if name in['position', 'color', 'normal', 'tex_coord',
156                        'fog_coord', 'secondary_color', 'edge_flag']:
157                 vclass = 'VertexAttribute_%s' % name
158                 attribute = eval(vclass)(count,gltype,stride,offset)
159                 self.attributes[name[0]] = attribute
160             else:
161                 attribute = VertexAttribute_generic(count,gltype,stride,offset,index)
162                 self.generic_attributes.append(attribute)
163                 index += 1
...
167         self.vertices_id = gl.glGenBuffers(1)
168
169         gl.glBindBuffer( gl.GL_ARRAY_BUFFER, self.vertices_id )
170         gl.glBufferData( gl.GL_ARRAY_BUFFER, self.vertices, gl.GL_STATIC_DRAW )
171         gl.glBindBuffer( gl.GL_ARRAY_BUFFER, 0 )
172
173         self.indices = indices
174         self.indices_id = gl.glGenBuffers(1)
175         gl.glBindBuffer( gl.GL_ELEMENT_ARRAY_BUFFER, self.indices_id )
176         gl.glBufferData( gl.GL_ELEMENT_ARRAY_BUFFER, self.indices, gl.GL_STATIC_DRAW )
177         gl.glBindBuffer( gl.GL_ELEMENT_ARRAY_BUFFER, 0 )</pre>
</div>
</div>
<div class="section" id="draw">
<h3>draw<a class="headerlink" href="#draw" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>186     def draw( self, mode=gl.GL_QUADS, what='pnctesf' ):
187         gl.glPushClientAttrib( gl.GL_CLIENT_VERTEX_ARRAY_BIT )          # mask specifies which attributes to save
188         gl.glBindBuffer( gl.GL_ARRAY_BUFFER, self.vertices_id )         # select this objects ARRAY and ELEMENT_ARRAY buffers via id
189         gl.glBindBuffer( gl.GL_ELEMENT_ARRAY_BUFFER, self.indices_id )
190         for attribute in self.generic_attributes:
191             attribute.enable()
192         for c in self.attributes.keys():
193             if c in what:
194                 self.attributes[c].enable()
195         gl.glDrawElements( mode, self.indices.size, gl.GL_UNSIGNED_INT, None)
196         gl.glBindBuffer( gl.GL_ELEMENT_ARRAY_BUFFER, 0 )
197         gl.glBindBuffer( gl.GL_ARRAY_BUFFER, 0 )
198         gl.glPopClientAttrib( )
199</pre>
</div>
</div>
<div class="section" id="vertexattribute-position-color-normal">
<h3>VertexAttribute_position/color/normal/...<a class="headerlink" href="#vertexattribute-position-color-normal" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://pyopengl.sourceforge.net/context/tutorials/shader_4.xhtml">http://pyopengl.sourceforge.net/context/tutorials/shader_4.xhtml</a></li>
</ul>
<div class="highlight-python"><pre>... the use of glVertexPointer and glColorPointer is part of the "legacy" OpenGL
API. When using shader-based geometry there is no need to restrict oneself to a
single position, colour or texture for a given vertex.</pre>
</div>
<div class="section" id="glvertexpointer">
<h4>glVertexPointer<a class="headerlink" href="#glvertexpointer" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="http://www.opengl.org/sdk/docs/man2/xhtml/glVertexPointer.xml">http://www.opengl.org/sdk/docs/man2/xhtml/glVertexPointer.xml</a></li>
</ul>
<div class="highlight-python"><pre>096 class VertexAttribute_position(VertexAttribute):
097     def __init__(self, count, gltype, stride, offset):
098         assert count &gt; 1, \
099             'Vertex attribute must have count of 2, 3 or 4'
100         assert gltype in (gl.GL_SHORT, gl.GL_INT, gl.GL_FLOAT, gl.GL_DOUBLE), \
101             'Vertex attribute must have signed type larger than byte'
102         VertexAttribute.__init__(self, count, gltype, stride, offset)
103     def enable(self):
104         gl.glVertexPointer(self.count, self.gltype, self.stride, self.offset)
105         gl.glEnableClientState(gl.GL_VERTEX_ARRAY)
106</pre>
</div>
</div>
<div class="section" id="glcolorpointer">
<h4>glColorPointer<a class="headerlink" href="#glcolorpointer" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="https://www.opengl.org/sdk/docs/man2/xhtml/glColorPointer.xml">https://www.opengl.org/sdk/docs/man2/xhtml/glColorPointer.xml</a></li>
</ul>
<div class="highlight-python"><pre>27 class VertexAttribute_color(VertexAttribute):
28     def __init__(self, count, gltype, stride, offset):
29         assert count in (3, 4), \
30             'Color attributes must have count of 3 or 4'
31         VertexAttribute.__init__(self, count, gltype, stride, offset)
32     def enable(self):
33         gl.glColorPointer(self.count, self.gltype, self.stride, self.offset)
34         gl.glEnableClientState(gl.GL_COLOR_ARRAY)
35
36</pre>
</div>
</div>
<div class="section" id="glnormalpointer">
<h4>glNormalPointer<a class="headerlink" href="#glnormalpointer" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><pre>60 class VertexAttribute_normal(VertexAttribute):
61     def __init__(self, count, gltype, stride, offset):
62         assert count == 3, \
63             'Normal attribute must have a size of 3'
64         assert gltype in (gl.GL_BYTE, gl.GL_SHORT,
65                           gl.GL_INT, gl.GL_FLOAT, gl.GL_DOUBLE), \
66                                 'Normal attribute must have signed type'
67         VertexAttribute.__init__(self, 3, gltype, stride, offset)
68     def enable(self):
69         gl.glNormalPointer(self.gltype, self.stride, self.offset)
70         gl.glEnableClientState(gl.GL_NORMAL_ARRAY)
71</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../scenekit/" title="scenekit"
             >next</a> |</li>
        <li class="right" >
          <a href="../glumpy/" title="GLUMPY"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >Graphics</a> &raquo;</li>
          <li><a href="../" >glumpy</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>