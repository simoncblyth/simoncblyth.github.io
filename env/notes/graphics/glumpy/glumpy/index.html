<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GLUMPY &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../" />
    <link rel="up" title="glumpy" href="../" />
    <link rel="next" title="Glumpy Usage Of PyOpenGL" href="../glumpy_usage_of_pyopengl/" />
    <link rel="prev" title="glumpy" href="../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../glumpy_usage_of_pyopengl/" title="Glumpy Usage Of PyOpenGL"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="glumpy"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >Graphics</a> &raquo;</li>
          <li><a href="../" accesskey="U">glumpy</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../llvm/">llvm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">Graphics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../meshlab/">meshlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collada/">collada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cgal/">CGAL Computational Geometry Algorithms Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mesh/">mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vrml/">vrml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../opengl/">opengl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../transformations/">transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d/">panda3d</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pipeline/">pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math/">math</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">glumpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scenekit/">scenekit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pyopengl/">pyopengl</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hg/">hg</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/graphics/glumpy/glumpy.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">glumpy</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../glumpy_usage_of_pyopengl/"
                        title="next chapter">Glumpy Usage Of PyOpenGL</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="glumpy">
<h1>GLUMPY<a class="headerlink" href="#glumpy" title="Permalink to this headline">Â¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="https://code.google.com/p/glumpy/">https://code.google.com/p/glumpy/</a></li>
<li><a class="reference external" href="http://groups.google.com/group/glumpy-users">http://groups.google.com/group/glumpy-users</a></li>
</ul>
<p>glumpy is a small python library for the rapid vizualization of numpy arrays,
(mainly two dimensional) that has been designed with efficiency in mind. If you
want to draw nice figures for inclusion in a scientific article, better
use matplotlib. If you want to have a sense of whats going on in your
simulation while it is running, then maybe glumpy can help you.</p>
<p>glumpy is made on top of PyOpenGL (<a class="reference external" href="http://pyopengl.sourceforge.net/">http://pyopengl.sourceforge.net/</a>)</p>
<div class="section" id="glumpy-atb">
<h2>glumpy.atb<a class="headerlink" href="#glumpy-atb" title="Permalink to this headline">Â¶</a></h2>
<p>Glumpy provides bindings and demos to use AntTweakBar
<a class="reference external" href="http://anttweakbar.sourceforge.net/doc/">http://anttweakbar.sourceforge.net/doc/</a></p>
</div>
<div class="section" id="forks">
<h2>forks<a class="headerlink" href="#forks" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic simple">
<li><a class="reference external" href="https://github.com/davidcox/glumpy">https://github.com/davidcox/glumpy</a>  key binding extension</li>
</ol>
</div>
<div class="section" id="alternatives">
<h2>alternatives<a class="headerlink" href="#alternatives" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic simple">
<li><a class="reference external" href="https://github.com/rossant/galry">https://github.com/rossant/galry</a></li>
<li><a class="reference external" href="https://github.com/vispy/vispy">https://github.com/vispy/vispy</a></li>
<li><a class="reference external" href="http://vispy.org/">http://vispy.org/</a></li>
<li><a class="reference external" href="https://code.google.com/p/visvis/">https://code.google.com/p/visvis/</a></li>
<li><a class="reference external" href="http://www.pyqtgraph.org/">http://www.pyqtgraph.org/</a></li>
</ol>
</div>
<div class="section" id="installations">
<h2>installations<a class="headerlink" href="#installations" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="delta">
<h3>Delta<a class="headerlink" href="#delta" title="Permalink to this headline">Â¶</a></h3>
<p>Into chroma virtualenv python (based on macports python 2.7.6):</p>
<div class="highlight-python"><pre>glumpy-get
cd glumpy
python setup.py install
...
Writing /usr/local/env/chroma_env/lib/python2.7/site-packages/glumpy-0.2.1-py2.7.egg-info</pre>
</div>
</div>
<div class="section" id="g4pb">
<h3>G4PB<a class="headerlink" href="#g4pb" title="Permalink to this headline">Â¶</a></h3>
<p>Into macports py26:</p>
<div class="highlight-python"><pre>g4pb:~ blyth$ glumpy-
g4pb:~ blyth$ glumpy-get
Cloning into 'glumpy'...
remote: Counting objects: 1026, done.
Receiving objects: 100% (1026/1026), 4.26 MiB | 899 KiB/s, done.
Resolving deltas: 100% (699/699), done.
g4pb:glumpy blyth$ pwd
/usr/local/env/graphics/glumpy
g4pb:glumpy blyth$ cd glumpy/
g4pb:glumpy blyth$ which python
/opt/local/bin/python
g4pb:glumpy blyth$ sudo python setup.py install
...
Writing /opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/glumpy-0.2.1-py2.6.egg-info
g4pb:glumpy blyth$</pre>
</div>
<div class="section" id="issue1-undefined-function-glutmainloopevent-osx-10-5-8-macports-py26">
<h4>issue1 : undefined function glutMainLoopEvent (OSX 10.5.8 macports py26)<a class="headerlink" href="#issue1-undefined-function-glutmainloopevent-osx-10-5-8-macports-py26" title="Permalink to this headline">Â¶</a></h4>
<p>Kludge fix via edit to backend_glut.py</p>
<div class="highlight-python"><pre>Traceback (most recent call last):
  File "/Users/blyth/env/bin/daeviewgl.py", line 4, in &lt;module&gt;
    main()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/env/geant4/geometry/collada/daeview/daeviewgl.py", line 223, in main
    gp.show()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/glumpy/window/backend_glut.py", line 58, in show
    _window.start()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/glumpy/window/backend_glut.py", line 591, in start
    glut.glutMainLoopEvent()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/OpenGL/platform/baseplatform.py", line 340, in __call__
    self.__name__, self.__name__,
OpenGL.error.NullFunctionError: Attempt to call an undefined function glutMainLoopEvent, check for bool(glutMainLoopEvent) before calling
g4pb:~ blyth$</pre>
</div>
<p>glumpy/window/backend_glut.py failing in start:</p>
<div class="highlight-python"><pre>585         if not self._interactive:
586             #glut.glutMainLoop()
587             while not self._stop_mainloop:
588                 try:
589                     glut.glutCheckLoop()
590                 except:
591                     glut.glutMainLoopEvent()
592</pre>
</div>
<p>Uncommenting the <em>glut.glutMainLook()</em> on line 586 succeeds to get graphical view to appear:</p>
<div class="highlight-python"><pre>g4pb:~ blyth$ sudo vi /opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/glumpy/window/backend_glut.py +586</pre>
</div>
<p>Similar to <a class="reference external" href="http://code.google.com/p/glumpy/issues/detail?id=22">http://code.google.com/p/glumpy/issues/detail?id=22</a></p>
</div>
<div class="section" id="issue2-key-trackpad-binding-osx-10-5-8-macports-py26">
<h4>issue2 : key/trackpad binding (OSX 10.5.8 macports py26)<a class="headerlink" href="#issue2-key-trackpad-binding-osx-10-5-8-macports-py26" title="Permalink to this headline">Â¶</a></h4>
<p>Unable to Z/XY pan (key binding/scroll wheel?)</p>
</div>
<div class="section" id="issue3-fig-save-via-fbo-fails">
<h4>issue3 : fig.save via FBO fails<a class="headerlink" href="#issue3-fig-save-via-fbo-fails" title="Permalink to this headline">Â¶</a></h4>
<p>My workaround is to avoid FBO and simply glReadPixels from the framebuffer:</p>
<div class="highlight-python"><pre>12   File "/usr/local/env/chroma_env/lib/python2.7/site-packages/env/geant4/geometry/collada/daeview/daeinteractivityhandler.py", line 171, in save_to_file
13     self.fig.save("%s.png" % name )
14   File "/usr/local/env/chroma_env/lib/python2.7/site-packages/glumpy/figure.py", line 293, in save
15     fbo.glRenderbufferStorageEXT( fbo.GL_RENDERBUFFER_EXT, fbo.GL_DEPTH_COMPONENT, w, h)
16 AttributeError: 'module' object has no attribute 'GL_DEPTH_COMPONENT'</pre>
</div>
<p>Attempted to fix on Delta by commenting depthbuffer, this succeeds to write a file,
but checking in Preview its distinctly odd looking. Code changes remain:</p>
<div class="highlight-python"><pre>(chroma_env)delta:glumpy blyth$ pwd
/usr/local/env/chroma_env/lib/python2.7/site-packages/glumpy
(chroma_env)delta:glumpy blyth$ vi figure.py</pre>
</div>
</div>
</div>
</div>
<div class="section" id="demos">
<h2>demos<a class="headerlink" href="#demos" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="obj-viewer">
<h3>obj-viewer<a class="headerlink" href="#obj-viewer" title="Permalink to this headline">Â¶</a></h3>
<p>Nice trackball operation</p>
<p>/usr/local/env/graphics/glumpy/glumpy/demos/obj-viewer.py</p>
</div>
</div>
<div class="section" id="interesting-code">
<h2>interesting code<a class="headerlink" href="#interesting-code" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="graphics-vertex-buffer-py">
<h3>graphics/vertex_buffer.py<a class="headerlink" href="#graphics-vertex-buffer-py" title="Permalink to this headline">Â¶</a></h3>
<p>Attributes describe the meaning of VBO arrays.</p>
<p>Base class: <cite>VertexAttribute(count,gltype,stride,offset)</cite>
with sub classes that check ctor arguments and provide enable methods eg:</p>
<dl class="docutils">
<dt>VertexAttribute_color</dt>
<dd>gl.glColorPointer(self.count, self.gltype, self.stride, self.offset)
gl.glEnableClientState(gl.GL_COLOR_ARRAY)</dd>
<dt>VertexAttribute_edge_flag</dt>
<dd>gl.glEdgeFlagPointer(self.stride, self.offset)
gl.glEnableClientState(gl.GL_EDGE_FLAG_ARRAY)</dd>
<dt>VertexAttribute_fog_coord</dt>
<dd>gl.glFogCoordPointer(self.count, self.gltype, self.stride, self.offset)
gl.glEnableClientState(gl.GL_FOG_COORD_ARRAY)</dd>
<dt>VertexAttribute_normal</dt>
<dd>gl.glNormalPointer(self.gltype, self.stride, self.offset)
gl.glEnableClientState(gl.GL_NORMAL_ARRAY)</dd>
<dt>VertexAttribute_secondary_color</dt>
<dd>gl.glSecondaryColorPointer(3, self.gltype, self.stride, self.offset)
gl.glEnableClientState(gl.GL_SECONDARY_COLOR_ARRAY)</dd>
<dt>VertexAttribute_tex_coord</dt>
<dd>gl.glTexCoordPointer(self.count, self.gltype, self.stride, self.offset)
gl.glEnableClientState(gl.GL_TEXTURE_COORD_ARRAY)</dd>
<dt>VertexAttribute_position</dt>
<dd>gl.glVertexPointer(self.count, self.gltype, self.stride, self.offset)
gl.glEnableClientState(gl.GL_VERTEX_ARRAY)</dd>
<dt>VertexAttribute_generic</dt>
<dd>gl.glVertexAttribPointer( self.index, self.count, self.gltype, self.normalized, self.stride, self.offset );
gl.glEnableVertexAttribArray( self.index )</dd>
</dl>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="30%" />
<col width="32%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">gl***Pointer</th>
<th class="head">GL_***_ARRAY</th>
<th class="head">Att names</th>
<th class="head"><ul class="first last simple">
<li></li>
</ul>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Color</td>
<td>COLOR</td>
<td>color</td>
<td>c</td>
</tr>
<tr class="row-odd"><td>EdgeFlag</td>
<td>EDGE_FLAG</td>
<td>edge_flag</td>
<td>e</td>
</tr>
<tr class="row-even"><td>FogCoord</td>
<td>FOG_COORD</td>
<td>fog_coord</td>
<td>f</td>
</tr>
<tr class="row-odd"><td>Normal</td>
<td>NORMAL</td>
<td>normal</td>
<td>n</td>
</tr>
<tr class="row-even"><td>SecondaryColor</td>
<td>SECONDARY_COLOR</td>
<td>secondary_color</td>
<td>s</td>
</tr>
<tr class="row-odd"><td>TexCoord</td>
<td>TEXTURE_COORD</td>
<td>tex_coord</td>
<td>t</td>
</tr>
<tr class="row-even"><td>Vertex</td>
<td>VERTEX</td>
<td>position</td>
<td>p</td>
</tr>
<tr class="row-odd"><td>VertexAttrib</td>
<td>N/A</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<ol class="arabic simple">
<li>clear pattern followed by all apart from <cite>_generic</cite>.</li>
<li>some pointer calls take not all of count/gltype/stride/offset</li>
</ol>
<p>Buffer identifiers vertices_id and indices_id are generated
and bound to GL_ARRAY_BUFFER and GL_ELEMENT_ARRAY_BUFFER
and the buffer data is passed, causing once only upload to the GPU
in the ctor.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">vertices_id</span> <span class="o">=</span> <span class="n">gl</span><span class="o">.</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertices_id</span> <span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glBufferData</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_STATIC_DRAW</span> <span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">indices_id</span> <span class="o">=</span> <span class="n">gl</span><span class="o">.</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices_id</span> <span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glBufferData</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">,</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_STATIC_DRAW</span> <span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
</pre></div>
</div>
<p>Thence at VBO draw:</p>
<ol class="arabic simple">
<li>GL_ARRAY_BUFFER bound using vertices_id</li>
<li>GL_ELEMENT_ARRAY_BUFFER bound using indices_id</li>
<li>any generic attributes are enabled</li>
<li>attributes chosen by <cite>what</cite> argument first letters are enabled
which switch the meanings of the array data</li>
<li>gl.glDrawElements( mode, self.indices.size, gl.gl_UNSIGNED_INT, None )</li>
<li>GL_ARRAY_BUFFER and GL_ELEMENT_ARRAY_BUFFER are unbound</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">draw</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">gl</span><span class="o">.</span><span class="n">GL_QUADS</span><span class="p">,</span> <span class="n">what</span><span class="o">=</span><span class="s">&#39;pnctesf&#39;</span> <span class="p">):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">glPushClientAttrib</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_CLIENT_VERTEX_ARRAY_BIT</span> <span class="p">)</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertices_id</span> <span class="p">)</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices_id</span> <span class="p">)</span>

    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generic_attributes</span><span class="p">:</span>
        <span class="n">attribute</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">what</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">glDrawElements</span><span class="p">(</span> <span class="n">mode</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_UNSIGNED_INT</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">glBindBuffer</span><span class="p">(</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">glPopClientAttrib</span><span class="p">(</span> <span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference external" href="http://www.opengl.org/sdk/docs/man2/xhtml/glDrawElements.xml">http://www.opengl.org/sdk/docs/man2/xhtml/glDrawElements.xml</a></li>
</ul>
<div class="highlight-python"><pre>glDrawElements( GLenum      mode,
                GLsizei     count,      # Specifies the number of elements to be rendered
                GLenum      type,       # Specifies the type of the values in indices.
                                          Must be one of GL_UNSIGNED_BYTE, GL_UNSIGNED_SHORT, or GL_UNSIGNED_INT.
                const GLvoid *indices); # Specifies a pointer to the location where the indices are stored</pre>
</div>
<p>When glDrawElements is called, it uses <em>count</em> sequential elements from an
enabled array, starting at <em>indices</em> to construct a sequence of geometric
primitives. <em>mode</em> specifies what kind of primitives are constructed and how the
array elements construct these primitives. If more than one array is enabled,
each is used. If GL_VERTEX_ARRAY is not enabled, no geometric primitives are
constructed.</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">mode</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GL_POINTS</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>GL_LINE_STRIP</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>GL_LINE_LOOP</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>GL_LINES</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>GL_TRIANGLE_STRIP</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>GL_TRIANGLE_FAN</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>GL_TRIANGLES</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>GL_QUAD_STRIP</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>GL_QUADS</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>GL_POLYGON</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><a class="reference external" href="http://www.opengl.org/sdk/docs/man2/xhtml/glDrawRangeElements.xml">http://www.opengl.org/sdk/docs/man2/xhtml/glDrawRangeElements.xml</a></li>
</ul>
<div class="highlight-python"><pre>void glDrawRangeElements(   GLenum      mode,
                            GLuint      start,
                            GLuint      end,
                            GLsizei     count,
                            GLenum      type,
                            const GLvoid *      indices);</pre>
</div>
<p>glDrawRangeElements is available only if the GL version is 1.2 or greater.</p>
</div>
</div>
<div class="section" id="glumpy-timers">
<h2>glumpy timers<a class="headerlink" href="#glumpy-timers" title="Permalink to this headline">Â¶</a></h2>
<p>TODO: work out way to switch off timers</p>
<p>/usr/local/env/graphics/glumpy/glumpy/glumpy/window/backend_glut.py:</p>
<div class="highlight-python"><pre>560     def start(self):
561         ''' Starts main loop. '''
562
563         # Start timers
564         for i in range(len(self._timer_stack)):
565             def func(index):
566                 handler, fps = self._timer_stack[index]
567                 t = glut.glutGet(glut.GLUT_ELAPSED_TIME)
568                 dt = (t - self._timer_date[index])/1000.0
569                 self._timer_date[index] = t
570                 handler(dt)
571                 glut.glutTimerFunc(int(1000./fps), func, index)
572                 self._timer_date[index] = glut.glutGet(glut.GLUT_ELAPSED_TIME)
573             fps = self._timer_stack[i][1]
574             glut.glutTimerFunc(int(1000./fps), func, i)</pre>
</div>
<div class="highlight-python"><pre>delta:glumpy blyth$ find . -name '*.py' -exec grep -H _timer {} \;
./graphics/vertex_buffer.py:def on_timer(value):
./graphics/vertex_buffer.py:    glut.glutTimerFunc(10, on_timer, 0)
./graphics/vertex_buffer.py:    glut.glutTimerFunc(10, on_timer, 0)
./window/backend_glut.py:        self._timer_stack = []
./window/backend_glut.py:        self._timer_date = []
./window/backend_glut.py:        for i in range(len(self._timer_stack)):
./window/backend_glut.py:                handler, fps = self._timer_stack[index]
./window/backend_glut.py:                dt = (t - self._timer_date[index])/1000.0
./window/backend_glut.py:                self._timer_date[index] = t
./window/backend_glut.py:                self._timer_date[index] = glut.glutGet(glut.GLUT_ELAPSED_TIME)
./window/backend_glut.py:            fps = self._timer_stack[i][1]
./window/window.py:            self._timer_stack.append((func, fps))
./window/window.py:            self._timer_date.append(0)
delta:glumpy blyth$</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../glumpy_usage_of_pyopengl/" title="Glumpy Usage Of PyOpenGL"
             >next</a> |</li>
        <li class="right" >
          <a href="../" title="glumpy"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >Graphics</a> &raquo;</li>
          <li><a href="../" >glumpy</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>