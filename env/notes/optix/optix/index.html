<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>NVIDIA OptiX Ray Trace Toolkit &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" />
    <link rel="up" title="optix" href="../" />
    <link rel="prev" title="optix" href="../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../" title="optix"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" accesskey="U">optix</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">optix</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">NVIDIA OptiX Ray Trace Toolkit</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/optix/optix.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">optix</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="nvidia-optix-ray-trace-toolkit">
<h1>NVIDIA OptiX Ray Trace Toolkit<a class="headerlink" href="#nvidia-optix-ray-trace-toolkit" title="Permalink to this headline">¶</a></h1>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference external" href="https://devtalk.nvidia.com/default/board/90/optix/">https://devtalk.nvidia.com/default/board/90/optix/</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://on-demand-gtc.gputechconf.com/gtcnew/on-demand-gtc.php?searchByKeyword=Optix&amp;searchItems=&amp;sessionTopic=&amp;sessionEvent=&amp;sessionYear=&amp;sessionFormat=&amp;submit=&amp;select=+">http://on-demand-gtc.gputechconf.com/gtcnew/on-demand-gtc.php?searchByKeyword=Optix&amp;searchItems=&amp;sessionTopic=&amp;sessionEvent=&amp;sessionYear=&amp;sessionFormat=&amp;submit=&amp;select=+</a></p>
<p>Many presentations (videos and pdfs) on OptiX</p>
</li>
<li><p class="first"><a class="reference external" href="http://docs.nvidia.com/gameworks/index.html#gameworkslibrary/optix/optix_programming_guide.htm">http://docs.nvidia.com/gameworks/index.html#gameworkslibrary/optix/optix_programming_guide.htm</a></p>
</li>
</ul>
</div>
<div class="section" id="update-optix-version-and-build-samples">
<h2>Update OptiX version and build samples<a class="headerlink" href="#update-optix-version-and-build-samples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>-bash-4.1$ optix-linux-jump 370         # modify the symbolic link
OptiX -&gt; NVIDIA-OptiX-SDK-3.7.0-linux64

-bash-4.1$ optix-name
NVIDIA-OptiX-SDK-3.7.0-linux64

-bash-4.1$ optix-samples-get-all   ## copy samples, to avoid touching originals

-bash-4.1$ optix-samples-cmake     ## fails due to cmake version

-bash-4.1$ optix-samples-cmake-kludge   ## kludge the requirement, seems to work with 2.6.4
cmake_minimum_required(VERSION 2.8.8 FATAL_ERROR)
cmake_minimum_required(VERSION 2.6.4 FATAL_ERROR)

-bash-4.1$ optix-samples-cmake     ## now completes
-bash-4.1$ optix-samples-make      ##</pre>
</div>
</div>
<div class="section" id="determine-driver-version-on-linux-on-mac-use-syspref-panel">
<h2>Determine Driver Version on Linux (on Mac use SysPref panel)<a class="headerlink" href="#determine-driver-version-on-linux-on-mac-use-syspref-panel" title="Permalink to this headline">¶</a></h2>
<p>With nvidia-smi or:</p>
<div class="highlight-python"><pre>-bash-4.1$ cat /proc/driver/nvidia/version   # original old driver
NVRM version: NVIDIA UNIX x86_64 Kernel Module  319.37  Wed Jul  3 17:08:50 PDT 2013
GCC version:  gcc version 4.4.7 20120313 (Red Hat 4.4.7-4) (GCC)

-bash-4.1$ cat /proc/driver/nvidia/version   # updated Feb ~7 2015
NVRM version: NVIDIA UNIX x86_64 Kernel Module  340.65  Tue Dec  2 09:50:34 PST 2014
GCC version:  gcc version 4.4.7 20120313 (Red Hat 4.4.7-4) (GCC)
-bash-4.1$</pre>
</div>
</div>
<div class="section" id="release-notes-optix-version-3-7-beta-3-january-2015">
<h2>Release Notes OptiX Version 3.7 beta 3 (January 2015)<a class="headerlink" href="#release-notes-optix-version-3-7-beta-3-january-2015" title="Permalink to this headline">¶</a></h2>
<p>The CUDA R343 or later driver is required. The latest available WHQL drivers
are highly recommended. For the Mac, the driver extension module supplied with
CUDA 5.0 or later will need to be installed. Note that the Linux and Mac
drivers can only be obtained from the CUDA 6.5 download page at the moment.</p>
<p>SLI is not required for OptiX to use multiple GPUs, and it interferes when
OptiX uses either D3D or OpenGL interop. Disabling SLI will not degrade OptiX
performance and will provide a more stable environment for OptiX applications
to run. SLI is termed &#8220;Multi-GPU mode&#8221; in recent NVIDIA Control Panels, with
the correct option being &#8220;Disable multi-GPU mode&#8221; to ensure OptiX is not
encumbered by graphics overhead.</p>
</div>
<div class="section" id="release-notes-optix-version-3-6-3-september-2014">
<h2>Release Notes OptiX Version 3.6.3 (September 2014)<a class="headerlink" href="#release-notes-optix-version-3-6-3-september-2014" title="Permalink to this headline">¶</a></h2>
<p>The CUDA R331 or later driver is required. The latest available WHQL drivers
are highly recommended (343 or later for Windows, 343 for Linux and the CUDA
6.0 driver extension for Mac). For the Mac, the driver extension module
supplied with CUDA 5.0 or later will need to be installed. Note that the Linux
and Mac drivers can only be obtained from the CUDA 6.0 download page at the
moment.</p>
</div>
<div class="section" id="release-notes-optix-version-3-5-january-2013">
<h2>Release Notes OptiX Version 3.5 (January 2013)<a class="headerlink" href="#release-notes-optix-version-3-5-january-2013" title="Permalink to this headline">¶</a></h2>
<p>The CUDA R319 or later driver is required. The latest available WHQL drivers
are highly recommended (320.92 or later for Windows, 319.60 for Linux and the
CUDA 5.5 driver extension for Mac). For the Mac, the driver extension module
supplied with CUDA 5.0 or later will need to be installed. Note that the Linux
and Mac drivers can only be obtained from the CUDA 5.5 download page at the
moment.</p>
</div>
<div class="section" id="hgpu01-install">
<h2>hgpu01 install<a class="headerlink" href="#hgpu01-install" title="Permalink to this headline">¶</a></h2>
<p>Manual CUDA:</p>
<div class="highlight-python"><pre>-bash-4.1$ cat /etc/redhat-release
Scientific Linux release 6.5 (Carbon)

-bash-4.1$ rpm -qf /usr/local/cuda-5.5
file /usr/local/cuda-5.5 is not owned by any package</pre>
</div>
<p>Hmm getting &#8220;OptiX Error: Invalid context&#8221;, with 370b3
I was getting this on laptop until I updated the driver.</p>
<div class="highlight-python"><pre>scp /Users/blyth/Downloads/NVIDIA-OptiX-SDK-3.5.1-linux64.run L6:/dyb/dybd07/user/blyth/hgpu01.ihep.ac.cn/
scp /Users/blyth/Downloads/NVIDIA-OptiX-SDK-3.6.3-linux64.run L6:/dyb/dybd07/user/blyth/hgpu01.ihep.ac.cn/
scp /Users/blyth/Downloads/NVIDIA-OptiX-SDK-3.7.0-linux64.sh L6:/dyb/dybd07/user/blyth/hgpu01.ihep.ac.cn/

-bash-4.1$ chmod ugo+x NVIDIA-OptiX-SDK-3.5.1-linux64.run
-bash-4.1$ chmod ugo+x NVIDIA-OptiX-SDK-3.6.3-linux64.run
-bash-4.1$ chmod ugo+x NVIDIA-OptiX-SDK-3.7.0-linux64.sh

-bash-4.1$ ./NVIDIA-OptiX-SDK-3.5.1-linux64.run --prefix=. --include-subdir
-bash-4.1$ ./NVIDIA-OptiX-SDK-3.6.3-linux64.run --prefix=. --include-subdir
-bash-4.1$ ./NVIDIA-OptiX-SDK-3.7.0-linux64.sh --prefix=. --include-subdir

-bash-4.1$ ln -sfnv NVIDIA-OptiX-SDK-3.5.1-PRO-linux64 OptiX
-bash-4.1$ ln -sfnv NVIDIA-OptiX-SDK-3.6.3-linux64 OptiX
-bash-4.1$ ln -sfnv NVIDIA-OptiX-SDK-3.7.0-linux64 OptiX

-bash-4.1$ pwd
/dyb/dybd07/user/blyth/hgpu01.ihep.ac.cn/OptiX/SDK-precompiled-samples

-bash-4.1$ LD_LIBRARY_PATH=. ./sample3
OptiX 3.7.0
Number of Devices = 2
...
Constructing a context...
OptiX Error: Invalid context
(/root/sw/wsapps/raytracing/rtsdk/rel3.7/samples/sample3/sample3.c:96)

-bash-4.1$ LD_LIBRARY_PATH=. ./sample3
OptiX 3.6.3
Number of Devices = 2
...
Constructing a context...
  Created with 2 device(s)
  Supports 2147483647 simultaneous textures
  Free memory:
    Device 0: 4952547328 bytes
    Device 1: 4952547328 bytes

-bash-4.1$ LD_LIBRARY_PATH=. ./sample3
OptiX 3.5.1
Number of Devices = 2
...
Constructing a context...
  Created with 2 device(s)
  Supports 2147483647 simultaneous textures
  Free memory:
    Device 0: 4952547328 bytes
    Device 1: 4952547328 bytes</pre>
</div>
<div class="highlight-python"><pre>-bash-4.1$ LD_LIBRARY_PATH=. ./sample7 -f sample7.ppm
OptiX Error: Invalid context (Details: Function "RTresult _rtContextCompile(RTcontext)" caught exception: Unable to set the CUDA device., [3735714])
-bash-4.1$</pre>
</div>
</div>
<div class="section" id="optix-3-6-3-problems">
<h2>OptiX 3.6.3 problems<a class="headerlink" href="#optix-3-6-3-problems" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://devtalk.nvidia.com/default/topic/763478/simplest-optix-code-unable-to-set-cuda-device/">https://devtalk.nvidia.com/default/topic/763478/simplest-optix-code-unable-to-set-cuda-device/</a></li>
</ul>
<div class="highlight-python"><pre>-bash-4.1$ LD_LIBRARY_PATH=. ./sample7 -f sample7.ppm
OptiX Error: Invalid context (Details: Function "RTresult _rtContextCompile(RTcontext)" caught exception: Unable to set the CUDA device., [3735714])
-bash-4.1$</pre>
</div>
</div>
<div class="section" id="optix-370b2-rtprintf-bizarre-bug">
<h2>OptiX_370b2 rtPrintf bizarre bug<a class="headerlink" href="#optix-370b2-rtprintf-bizarre-bug" title="Permalink to this headline">¶</a></h2>
<p>Whilst debugging wavelength texture lookups with
a program which is only invoked for the single touched pixel
under the mouse:</p>
<div class="highlight-python"><pre>33 RT_PROGRAM void closest_hit_touch()
34 {
35   prd_touch.result = contrast_color ;
36   prd_touch.node = node_index ;
37
38   prd_touch.texlookup_b = wlookup( NM_BLUE  , 0.5f ) ;
39   prd_touch.texlookup_g = wlookup( NM_GREEN , 0.5f ) ;
40   prd_touch.texlookup_r = wlookup( NM_RED   , 0.5f ) ;
41
42   for(int i=-5 ; i &lt; 45 ; i++ )
43   {
44      float wl = wavelength_domain.x + wavelength_domain.z*i ;
45      float4 lookup = wlookup( wl, 0.5f );
46      rtPrintf("material1.cu::closest_hit_touch node %d   i %2d wl %10.3f   lookup  %10.3f %10.3f %10.3f %10.3f \n",
47         node_index,
48         i,
49         wl,
50         lookup.x,
51         lookup.y,
52         lookup.z,
53         lookup.w);
54   }
55 }</pre>
</div>
<p>Get the expected output, BUT on splitting the rtPrintf
into two calls get <strong>Unknown error</strong>.:</p>
<div class="highlight-python"><pre>OptiX Error: Unknown error (Details: Function "RTresult _rtContextCompile(RTcontext)" caught exception: Assertion failed: "Traits::getNext(m_cur) != 0", [7143516])</pre>
</div>
<p>Unfortunately the only way to discover the source of
the problem is by &#8220;binary search&#8221; trial and error. Moral:</p>
<ul class="simple">
<li>never make largescale changes to optix programs without testing,
always test after making small focussed changes</li>
<li>limit use rtPrintf to only one per program ?</li>
<li>dont leave rtPrintf lying around, just use one at a time whilst debugging
and then comment them out</li>
</ul>
</div>
<div class="section" id="transparency-blending">
<h2>Transparency/blending<a class="headerlink" href="#transparency-blending" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://developer.nvidia.com/content/transparency-or-translucency-rendering">https://developer.nvidia.com/content/transparency-or-translucency-rendering</a></li>
<li><a class="reference external" href="http://casual-effects.blogspot.tw/2014/03/weighted-blended-order-independent.html">http://casual-effects.blogspot.tw/2014/03/weighted-blended-order-independent.html</a></li>
</ul>
</div>
<div class="section" id="optix-and-atomics">
<h2>OptiX and atomics<a class="headerlink" href="#optix-and-atomics" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference external" href="https://devtalk.nvidia.com/default/topic/522795/optix/atomic-buffer-operations/">https://devtalk.nvidia.com/default/topic/522795/optix/atomic-buffer-operations/</a></p>
<p>see zoneplate sample</p>
<p>One thing to keep in mind is that atomic operations will not work in multi-GPU
situations unless you specify RT_BUFFER_GPU_LOCAL. In that case the data stays
resident on the device and can only be read by the device that wrote it.</p>
</li>
</ul>
</div>
<div class="section" id="optix-and-curand">
<h2>OptiX and curand ?<a class="headerlink" href="#optix-and-curand" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=optix curand">google:optix curand</a></li>
<li><a class="reference external" href="https://devtalk.nvidia.com/search/more/sitecommentsearch/curand%20optix/">https://devtalk.nvidia.com/search/more/sitecommentsearch/curand%20optix/</a></li>
<li><a class="reference external" href="https://devtalk.nvidia.com/default/topic/759883/random-number-streams/?offset=1">https://devtalk.nvidia.com/default/topic/759883/random-number-streams/?offset=1</a></li>
<li><a class="reference external" href="https://devtalk.nvidia.com/default/topic/770325/curand_init-within-optix/">https://devtalk.nvidia.com/default/topic/770325/curand_init-within-optix/</a></li>
</ul>
<p>Suggest that it can be made to work</p>
<div class="section" id="chroma-curand">
<h3>Chroma curand<a class="headerlink" href="#chroma-curand" title="Permalink to this headline">¶</a></h3>
<p>chroma/chroma/cuda/random.h:</p>
<div class="highlight-python"><pre>001 #ifndef __RANDOM_H__
  2 #define __RANDOM_H__
  3
  4 #include &lt;curand_kernel.h&gt;
  5
  6 #include "physical_constants.h"
  7 #include "interpolate.h"
  8
  9 __device__ float
 10 uniform(curandState *s, const float &amp;low, const float &amp;high)
 11 {
 12     return low + curand_uniform(s)*(high-low);
 13 }
///   all the random funcs have curandState* s argument
...
135 __global__ void
136 init_rng(int nthreads, curandState *s, unsigned long long seed,
137      unsigned long long offset)
138 {
139     int id = blockIdx.x*blockDim.x + threadIdx.x;
140
141     if (id &gt;= nthreads)
142     return;
143
144     curand_init(seed, id, offset, &amp;s[id]);
145 }</pre>
</div>
<p>chroma/chroma/cuda/propagate_hit.cu:</p>
<div class="highlight-python"><pre>128 __global__ void
129 propagate_hit(
...
134       curandState *rng_states,
...
...
164     int id = blockIdx.x*blockDim.x + threadIdx.x;
165
166     if (id &gt;= nthreads)
167     return;
168
169     g = &amp;sg;
170
171     curandState rng = rng_states[id];
...
208             generate_cerenkov_photon(p, cs, rng );</pre>
</div>
<p>chroma/chroma/gpu/tools.py:</p>
<div class="highlight-python"><pre>107 init_rng_src = """
108 #include &lt;curand_kernel.h&gt;
109
110 extern "C"
111 {
112
113 __global__ void init_rng(int nthreads, curandState *s, unsigned long long seed, unsigned long long offset)
114 {
115     int id = blockIdx.x*blockDim.x + threadIdx.x;
116
117     if (id &gt;= nthreads)
118         return;
119
120     curand_init(seed, id, offset, &amp;s[id]);
121 }
122
123 } // extern "C"
124 """
125
126 def get_rng_states(size, seed=1):
127     "Return `size` number of CUDA random number generator states."
128     rng_states = cuda.mem_alloc(size*characterize.sizeof('curandStateXORWOW', '#include &lt;curand_kernel.h&gt;'))
129
130     module = pycuda.compiler.SourceModule(init_rng_src, no_extern_c=True)
131     init_rng = module.get_function('init_rng')
132
133     init_rng(np.int32(size), rng_states, np.uint64(seed), np.uint64(0), block=(64,1,1), grid=(size//64+1,1))
134
135     return rng_states</pre>
</div>
</div>
</div>
<div class="section" id="optix-exception-codes">
<h2>optix exception codes<a class="headerlink" href="#optix-exception-codes" title="Permalink to this headline">¶</a></h2>
<p>/Developer/OptiX/include/internal/optix_declarations.h:</p>
<div class="highlight-python"><pre>197 typedef enum
198 {
199   RT_EXCEPTION_PROGRAM_ID_INVALID           = 0x3EE,    /*!&lt; Program ID not valid       */
200   RT_EXCEPTION_TEXTURE_ID_INVALID           = 0x3EF,    /*!&lt; Texture ID not valid       */
201   RT_EXCEPTION_BUFFER_ID_INVALID            = 0x3FA,    /*!&lt; Buffer ID not valid        */
202   RT_EXCEPTION_INDEX_OUT_OF_BOUNDS          = 0x3FB,    /*!&lt; Index out of bounds        */
203   RT_EXCEPTION_STACK_OVERFLOW               = 0x3FC,    /*!&lt; Stack overflow             */
204   RT_EXCEPTION_BUFFER_INDEX_OUT_OF_BOUNDS   = 0x3FD,    /*!&lt; Buffer index out of bounds */
205   RT_EXCEPTION_INVALID_RAY                  = 0x3FE,    /*!&lt; Invalid ray                */
206   RT_EXCEPTION_INTERNAL_ERROR               = 0x3FF,    /*!&lt; Internal error             */
207   RT_EXCEPTION_USER                         = 0x400,    /*!&lt; User exception             */
208
209   RT_EXCEPTION_ALL                          = 0x7FFFFFFF  /*!&lt; All exceptions        */
210 } RTexception;</pre>
</div>
</div>
<div class="section" id="testing-optix-with-curand">
<h2>testing optix with curand<a class="headerlink" href="#testing-optix-with-curand" title="Permalink to this headline">¶</a></h2>
<p>When attempting to use curand subsequences getting RT_EXCEPTION_STACK_OVERFLOW:</p>
<div class="highlight-python"><pre>Caught exception 0x3FC at launch index (144,0)
Caught exception 0x3FC at launch index (0,0)
Caught exception 0x3FC at launch index (96,0)</pre>
</div>
<p>with the MeshViewer original setting of stack size:</p>
<div class="highlight-python"><pre>m_context-&gt;setStackSize( 1180 );</pre>
</div>
<p>Winding up the stack size to 10000 succeeds to run, but unusably slowly.</p>
<div class="section" id="things-to-try">
<h3>things to try<a class="headerlink" href="#things-to-try" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>hmm, could subsequent optix launches reuse a buffer initialized on the
first launch ?  to enable a single initializing launch</li>
<li>hmm, but optix is unusable with the large stacksizes needed
for curand_init with subsequences and probably changing stack size
will invalidate the context ?</li>
<li>what about using plain CUDA kernel call to
do curand_init and prepare the curandState buffer for interop
with subsequent optix launches</li>
</ul>
</div>
</div>
<div class="section" id="optix-and-cuda-interop">
<h2>OptiX and CUDA interop<a class="headerlink" href="#optix-and-cuda-interop" title="Permalink to this headline">¶</a></h2>
<p>Doc says, if the application creates a CUDA context before OptiX,
the applicaton should make sure to use the below
to ensure subsequent maximum performance from OptiX.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cudaSetDeviceFlags</span><span class="p">(</span><span class="n">cudaDeviceMapHost</span> <span class="o">|</span> <span class="n">cudaDeviceLmemResizeToMax</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-python"><pre>delta:OptiX_370b2_sdk blyth$ find . -name '*.cpp' -exec grep -H cudaSet {} \;
./ocean/ocean.cpp:    cudaSetDevice(m_cuda_device);
./ocean/ocean.cpp:  cudaSetDevice( m_cuda_device );
./simplePrime/simplePrimeCommon.cpp:    CHK_CUDA( cudaSetDevice(i) );
./simplePrimeInstancing/simplePrimeCommon.cpp:    CHK_CUDA( cudaSetDevice(i) );
./simplePrimeMasking/simplePrimeCommon.cpp:    CHK_CUDA( cudaSetDevice(i) );
./simplePrimepp/simplePrimeCommon.cpp:    CHK_CUDA( cudaSetDevice(i) );
./simplePrimeppMultiBuffering/simplePrimeCommon.cpp:    CHK_CUDA( cudaSetDevice(i) );
./simplePrimeppMultiGpu/simplePrimeCommon.cpp:    CHK_CUDA( cudaSetDevice(i) );
./simplePrimeppMultiGpu/simplePrimeppMultiGpu.cpp:      CHK_CUDA( cudaSetDevice(int(i)) );
./simplePrimeppMultiGpu/simplePrimeppMultiGpu.cpp:      CHK_CUDA( cudaSetDevice(int(i)) );
./simplePrimeppMultiGpu/simplePrimeppMultiGpu.cpp:      CHK_CUDA( cudaSetDevice(int(i)) );
./simplePrimeppMultiGpu/simplePrimeppMultiGpu.cpp:      CHK_CUDA( cudaSetDevice(int(i)) );
delta:OptiX_370b2_sdk blyth$
delta:OptiX_370b2_sdk blyth$
delta:OptiX_370b2_sdk blyth$
delta:OptiX_370b2_sdk blyth$ pwd
/usr/local/env/cuda/OptiX_370b2_sdk</pre>
</div>
<p>/usr/local/env/cuda/OptiX_370b2_sdk/ocean/ocean.cpp:</p>
<div class="highlight-python"><pre>340     //
341     // Setup cufft state
342     //
343
344     const unsigned int fft_input_size  = FFT_WIDTH * FFT_HEIGHT * sizeof(float2);
345
346     m_context-&gt;launch( 0, 0 );
///
///     presumably ensures OptiX is first to setup CUDA context
///
347
348     m_cuda_device = OptiXDeviceToCUDADevice( m_context, 0 );
///
///     helper method: OptiX ordinal 0 -&gt; CUDA ordinal
///
349
350     if ( m_cuda_device &lt; 0 ) {
351       std::cerr &lt;&lt; "OptiX device 0 must be a valid CUDA device number.\n";
352       exit(1);
353     }
354
355     // output the CUFFT results directly into Optix buffer
356     cudaSetDevice(m_cuda_device);
357
358     cutilSafeCall( cudaMalloc( reinterpret_cast&lt;void**&gt;( &amp;m_d_h0 ), fft_input_size ) );
///
///     plain CUDA allocation of space on device
///
359
360     m_h_h0      = new float2[FFT_WIDTH * FFT_HEIGHT];
361     generateH0( m_h_h0 );
///
///     host side generation, but it didnt have to be
///
362
363     cutilSafeCall( cudaMemcpy( m_d_h0, m_h_h0, fft_input_size, cudaMemcpyHostToDevice) );
///
///     host to device copy
364
365     memcpy( m_h0_buffer-&gt;map(), m_h_h0, fft_input_size );
366     m_h0_buffer-&gt;unmap();
///
///    copy from host into OptiX buffer
///
367
368     // Finalize
369     m_context-&gt;validate();
370     m_context-&gt;compile();</pre>
</div>
</div>
<div class="section" id="optix-and-opengl-interop-optix-depth-buffer-calculation">
<h2>OptiX and OpenGL interop : OptiX depth buffer calculation<a class="headerlink" href="#optix-and-opengl-interop-optix-depth-buffer-calculation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://rickarkin.blogspot.tw/2012/03/optix-is-ray-tracing-framework-it-can.html">http://rickarkin.blogspot.tw/2012/03/optix-is-ray-tracing-framework-it-can.html</a></li>
</ul>
<p>Depth buffer combination may be the most important and a bit complicated. As a
ray tracing engine, Optix need not to do depth buffer test, so one can only
find the rtIntersectionDistance, which means the distance from the ray origin
to current ray-surface intersection point. So handily generate an OpenGL
compliant depth buffer is the first problem. A useful reference is
<a class="reference external" href="http://www.songho.ca/opengl/gl_projectionmatrix.html">http://www.songho.ca/opengl/gl_projectionmatrix.html</a></p>
<p>My realization of the depth value construction is  attached as below:</p>
<div class="highlight-python"><pre>// eyeDist:  distance from eye to the intersection point.
// n:           near clipping plane
// f:            far clipping plane
__device__ float computeClipDepth( float eyeDist, float n, float f )
{
    float clipDepth = (f+n)/(f-n) - (1/eyeDist)*2.0f*f*n/(f-n);
    clipDepth = clipDepth*0.5 + 0.5f;
    return clipDepth;
}</pre>
</div>
<p>The second problem is to use the generated depth buffer of Optix into OpenGL.
Actually it is totally OpenGL operations. But maybe its not a daily used
process like draw a triangle or shading a scene object, so there is little
resource could be found on the web.  My realization of the depth value
construction is  also attached as below, where depthImg contains per pixel
depth value, coloredImg contains per pixel color value.:</p>
<div class="highlight-python"><pre>glPushAttrib(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);  // save buffer bit attribs to stack
glPushClientAttrib(GL_CLIENT_PIXEL_STORE_BIT);            // save client attrib to stack
//
// above lines prep for changing attribs by saving current ones
//
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
glDepthMask(GL_FALSE);
glWindowPos2i(0, 0);  // specify the raster position in window coordinates for pixel operations
glDrawPixels(w, h, GL_RGBA , GL_FLOAT, coloredImg);

glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
glDepthMask(GL_TRUE);
glDepthFunc(GL_ALWAYS);
//
// specify the value used for depth buffer comparisons
//
//    GL_LESS
//         Passes if the incoming depth value is less than the stored depth value.
//    GL_ALWAYS
//         Always passes.  (unconditionally write to depth buffer)
//

glWindowPos2i(0, 0);
glDrawPixels(w, h, GL_DEPTH_COMPONENT , GL_FLOAT, depthImg);

//
//  restore initial attribute state
//
glPopClientAttrib();
glPopAttrib(); // GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT</pre>
</div>
</div>
<div class="section" id="optix-talks">
<h2>OptiX talks<a class="headerlink" href="#optix-talks" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference external" href="http://on-demand.gputechconf.com/gtc/2012/presentations/SS107-GPU-Ray-Tracing-OptiX.pdf">http://on-demand.gputechconf.com/gtc/2012/presentations/SS107-GPU-Ray-Tracing-OptiX.pdf</a></p>
<p>Some details on multi GPU interop and avoiding unnecessary copying</p>
</li>
</ul>
</div>
<div class="section" id="optix-without-opengl">
<h2>OptiX without OpenGL<a class="headerlink" href="#optix-without-opengl" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>delta:bin blyth$ ./sample7 -f out.ppm
delta:bin blyth$ libpng-
delta:bin blyth$ cat out.ppm | libpng-wpng &gt; out.png
Encoding image data...
Done.
delta:bin blyth$ open out.png</pre>
</div>
</div>
<div class="section" id="optix-and-sli-handling-of-multiple-gpus">
<h2>OptiX and SLI handling of multiple GPUs<a class="headerlink" href="#optix-and-sli-handling-of-multiple-gpus" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Scalable_Link_Interface">http://en.wikipedia.org/wiki/Scalable_Link_Interface</a></li>
<li><a class="reference external" href="http://devblogs.nvidia.com/parallelforall/cuda-pro-tip-control-gpu-visibility-cuda_visible_devices/">http://devblogs.nvidia.com/parallelforall/cuda-pro-tip-control-gpu-visibility-cuda_visible_devices/</a></li>
</ul>
<p>OptiX doesnt like SLI, switch it off.</p>
<div class="highlight-python"><pre>export CUDA_VISIBLE_DEVICES=0,1,2</pre>
</div>
</div>
<div class="section" id="optix-opengl-interop-with-pbo">
<h2>OptiX OpenGL interop with PBO<a class="headerlink" href="#optix-opengl-interop-with-pbo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://rickarkin.blogspot.tw/2012/03/use-pbo-to-share-buffer-between-cuda.html">http://rickarkin.blogspot.tw/2012/03/use-pbo-to-share-buffer-between-cuda.html</a></li>
</ul>
</div>
<div class="section" id="optix-opengl-interop">
<h2>OptiX OpenGL interop<a class="headerlink" href="#optix-opengl-interop" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=OptiX OpenGL interop">google:OptiX OpenGL interop</a></li>
</ul>
</div>
<div class="section" id="optix-programming-guide-3-7-0-pdf">
<h2>OptiX_Programming_Guide_3.7.0.pdf<a class="headerlink" href="#optix-programming-guide-3-7-0-pdf" title="Permalink to this headline">¶</a></h2>
<div class="section" id="opengl-interop">
<h3>OpenGL Interop<a class="headerlink" href="#opengl-interop" title="Permalink to this headline">¶</a></h3>
<p>OptiX supports interop for:</p>
<ul class="simple">
<li>OpenGL buffer objects</li>
<li>textures</li>
<li>render buffers</li>
</ul>
<p>OpenGL buffer objects can be read and written by OptiX program
objects, whereas textures and render buffers can only be read.</p>
</div>
<div class="section" id="buffer-objects">
<h3>Buffer Objects<a class="headerlink" href="#buffer-objects" title="Permalink to this headline">¶</a></h3>
<p>OpenGL buffer objects like PBOs and VBOs can be encapsulated for use in OptiX
with rtBufferCreateFromGLBO. The resulting buffer is a reference only to the
OpenGL data; the size of the OptiX buffer as well as the format have to be set
via rtBufferSetSize and rtBufferSetFormat.
When the OptiX buffer is destroyed, the state of the OpenGL buffer object is unaltered.
Once an OptiX buffer is created, the original GL buffer object is immutable,
meaning the properties of the GL object like its size cannot be changed
while registered with OptiX. However, it is still possible to read and write
to the GL buffer object using the appropriate GL functions.
If it is necessary to change properties of an object, first call rtBufferGLUnregister
before making changes. After the changes are made the object has to be
registered again with rtBufferGLRegister.
This is necessary to allow OptiX to access the objects data again. Registration
and unregistration calls are expensive and should be avoided if possible.</p>
</div>
</div>
<div class="section" id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://devtalk.nvidia.com/default/topic/751906/?comment=4240594">https://devtalk.nvidia.com/default/topic/751906/?comment=4240594</a><ul>
<li>rtPrintf not printf</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="optix-usage-examples">
<h2>OptiX Usage Examples<a class="headerlink" href="#optix-usage-examples" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://code.google.com/p/hybrid-rendering-thesis/source/browse/trunk/src/Raytracer/OptixRender.cpp?r=44">https://code.google.com/p/hybrid-rendering-thesis/source/browse/trunk/src/Raytracer/OptixRender.cpp?r=44</a></li>
<li><a class="reference external" href="https://github.com/keithroe/Legion/blob/master/src/Legion/Renderer/OptiXScene.cpp">https://github.com/keithroe/Legion/blob/master/src/Legion/Renderer/OptiXScene.cpp</a><ul>
<li>CMakeLists.txt CUDA macro usage that stuffs ptx into libraries</li>
</ul>
</li>
<li><a class="reference external" href="https://github.com/pspkzar/OptiXRenderer/blob/master/src/OptixRenderer.cpp">https://github.com/pspkzar/OptiXRenderer/blob/master/src/OptixRenderer.cpp</a></li>
<li><a class="reference external" href="https://github.com/nvpro-samples/gl_optix_composite">https://github.com/nvpro-samples/gl_optix_composite</a></li>
<li><a class="reference external" href="https://github.com/nvpro-samples/gl_optix_composite/blob/master/shaders/optix_triangle_mesh.cu">https://github.com/nvpro-samples/gl_optix_composite/blob/master/shaders/optix_triangle_mesh.cu</a><ul>
<li>texture lookup example</li>
</ul>
</li>
<li><a class="reference external" href="http://graphicsrunner.blogspot.tw/2011/03/instant-radiosity-using-optix-and.html">http://graphicsrunner.blogspot.tw/2011/03/instant-radiosity-using-optix-and.html</a></li>
</ul>
</div>
<div class="section" id="optix-with-glfw">
<h2>OptiX with GLFW<a class="headerlink" href="#optix-with-glfw" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://code.google.com/p/hybrid-rendering-thesis/source/browse/trunk/glfw_optix/src/main.cpp">https://code.google.com/p/hybrid-rendering-thesis/source/browse/trunk/glfw_optix/src/main.cpp</a></li>
</ul>
<p>See hrt-</p>
</div>
<div class="section" id="nvfx-generic-effect-system-for-graphic-apis-including-opengl-and-optix">
<h2>nvfx : Generic Effect system for Graphic APIs, including OpenGL and OptiX<a class="headerlink" href="#nvfx-generic-effect-system-for-graphic-apis-including-opengl-and-optix" title="Permalink to this headline">¶</a></h2>
<p>nvFx is a new approach for compositing shaders and compute kernels together,
using an API-agnostic description of effects for objects materials and scene
management (post-processing, management of rendering passes).</p>
<ul class="simple">
<li><strong>curious how the OptiX side of things is implemented</strong><ul>
<li>specifically how material params are fed to the OptiX programs</li>
</ul>
</li>
<li><a class="reference external" href="http://www.google.com/search?q=nvfx">google:nvfx</a></li>
<li><a class="reference external" href="https://github.com/tlorach/nvFX">https://github.com/tlorach/nvFX</a></li>
<li><a class="reference external" href="http://lorachnroll.blogspot.tw/2013/07/nvfx-effect-system-on-top-of-many.html">http://lorachnroll.blogspot.tw/2013/07/nvfx-effect-system-on-top-of-many.html</a></li>
</ul>
</div>
<div class="section" id="large-codebases-using-optix">
<h2>Large Codebases Using OptiX<a class="headerlink" href="#large-codebases-using-optix" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>macrosim-</li>
</ul>
</div>
<div class="section" id="version-switching">
<h2>Version Switching<a class="headerlink" href="#version-switching" title="Permalink to this headline">¶</a></h2>
<p>Use symbolic link for version switching:</p>
<div class="highlight-python"><pre>delta:Developer blyth$ ll
total 8
drwxr-xr-x   7 root  admin   238 Aug  7  2013 OptiX_301
drwxr-xr-x   3 root  wheel   102 Jan 15  2014 NVIDIA
drwxr-xr-x   7 root  admin   238 Dec 18 07:08 OptiX_370b2
drwxr-xr-x  33 root  wheel  1190 Jan 15 08:46 ..
lrwxr-xr-x   1 root  wheel     9 Jan 22 11:27 OptiX -&gt; OptiX_301
drwxr-xr-x   6 root  wheel   204 Jan 22 11:27 .</pre>
</div>
</div>
<div class="section" id="samples">
<h2>Samples<a class="headerlink" href="#samples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>open file:///Developer/OptiX/SDK/NVIDIA-OptiX-SDK-samples.html</pre>
</div>
<p>Above references a missing sample:</p>
<div class="highlight-python"><pre>file:///Developer/OptiX/SDK/collision/</pre>
</div>
<ul class="simple">
<li>/Developer/OptiX/SDK-precompiled-samples/sample6.app<ul>
<li>ray traced geometry of a cow</li>
</ul>
</li>
<li>/Developer/OptiX/SDK-precompiled-samples/shadeTree.app<ul>
<li>Christmas decorations</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="building-samples-including-sutil-library">
<h2>Building samples including sutil library<a class="headerlink" href="#building-samples-including-sutil-library" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>delta:OptiX blyth$ optix-name
OptiX_370b2
delta:OptiX blyth$ optix-samples-get-all   # copy samples to writable dir
delta:OptiX blyth$ optix-samples-cmake
...
-- Found CUDA: /usr/local/cuda (Required is at least version "2.3")
-- Found OpenGL: /System/Library/Frameworks/OpenGL.framework
-- Found GLUT: -framework GLUT
Cannot find Cg, hybridShadows will not be built
Cannot find Cg.h, hybridShadows will not be built
Disabling hybridShadows, which requires glut and opengl and Cg.
Cannot find Cg, isgReflections will not be built
Cannot find Cg.h, isgReflections will not be built
Disabling isgReflections, which requires glut and opengl and Cg.
Cannot find Cg, isgShadows will not be built
Cannot find Cg.h, isgShadows will not be built
Disabling isgShadows, which requires glut and opengl and Cg.
-- Configuring done
-- Generating done
-- Build files have been written to: /usr/local/env/cuda/OptiX_370b2_sdk_install

delta:OptiX blyth$ optix-samples-make</pre>
</div>
</div>
<div class="section" id="path-to-samples-ptx-dir-gets-compiled-in">
<h2>Path to SAMPLES_PTX_DIR gets compiled in<a class="headerlink" href="#path-to-samples-ptx-dir-gets-compiled-in" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>delta:SDK blyth$ find . -name '*.*' -exec grep -H SAMPLES_PTX_DIR {} \;
./CMakeLists.txt:set(SAMPLES_PTX_DIR "${CMAKE_BINARY_DIR}/lib/ptx" CACHE PATH "Path to where the samples look for the PTX code.")
./CMakeLists.txt:set(CUDA_GENERATED_OUTPUT_DIR ${SAMPLES_PTX_DIR})
./CMakeLists.txt:  string(REPLACE "/" "\\\\" SAMPLES_PTX_DIR ${SAMPLES_PTX_DIR})
./sampleConfig.h.in:#define SAMPLES_PTX_DIR "@SAMPLES_PTX_DIR@"
./sutil/sutil.c:  dir = getenv( "OPTIX_SAMPLES_PTX_DIR" );
./sutil/sutil.c:  if( dirExists(SAMPLES_PTX_DIR) )
./sutil/sutil.c:    return SAMPLES_PTX_DIR;</pre>
</div>
</div>
<div class="section" id="optix-3-7-0-beta2">
<h2>OptiX-3.7.0-beta2<a class="headerlink" href="#optix-3-7-0-beta2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>need to register with NVIDIA OptiX developer program to gain access</li>
</ul>
<p>Package installs into same place as 301:</p>
<div class="highlight-python"><pre>delta:Contents blyth$ pwd
/Volumes/NVIDIA-OptiX-SDK-3.7.0-mac64/NVIDIA-OptiX-SDK-3.7.0-mac64.pkg/Contents
delta:Contents blyth$ lsbom Archive.bom | head -5
.   40755   501/0
./Developer 40755   501/0
./Developer/OptiX   40755   0/80
./Developer/OptiX/SDK   40755   0/80
./Developer/OptiX/SDK/CMake 40755   0/80</pre>
</div>
<p>So move that aside:</p>
<div class="highlight-python"><pre>delta:Developer blyth$ sudo mv OptiX OptiX_301</pre>
</div>
<ul class="simple">
<li>all precompiled samples failing</li>
</ul>
<div class="highlight-python"><pre>terminating with uncaught exception of type optix::Exception: Invalid context

8   libsutil.dylib                  0x000000010f8b71d6 optix::Handle&lt;optix::ContextObj&gt;::create() + 150
9   libsutil.dylib                  0x000000010f8b5b1b SampleScene::SampleScene() + 59
10  libsutil.dylib                  0x000000010f8a6a52 MeshScene::MeshScene(bool, bool, bool) + 34
11                                  0x000000010f870885 MeshViewer::MeshViewer() + 21


delta:SDK-precompiled-samples blyth$ open ocean.app
LSOpenURLsWithRole() failed with error -10810 for the file /Developer/OptiX/SDK-precompiled-samples/ocean.app.
delta:SDK-precompiled-samples blyth$


8   libsutil.dylib                  0x000000010e1141d6 optix::Handle&lt;optix::ContextObj&gt;::create() + 150
9   libsutil.dylib                  0x000000010e112b1b SampleScene::SampleScene() + 59
10                                  0x000000010e0d793c WhirligigScene::WhirligigScene(GLUTDisplay::contDraw_E) + 28</pre>
</div>
<div class="highlight-python"><pre>delta:SDK-precompiled-samples blyth$ ./sample3
OptiX 3.7.0
Number of Devices = 1

Device 0: GeForce GT 750M
  Compute Support: 3 0
  Total Memory: 2147024896 bytes
  Clock Rate: 925500 kilohertz
  Max. Threads per Block: 1024
  SM Count: 2
  Execution Timeout Enabled: 1
  Max. HW Texture Count: 128
  TCC driver enabled: 0
  CUDA Device Ordinal: 0

Constructing a context...
OptiX Error: Invalid context
(/Volumes/DATA/teamcity/agent/work/ad29186266c461fa/sw/wsapps/raytracing/rtsdk/rel3.7/samples/sample3/sample3.c:96)
delta:SDK-precompiled-samples blyth$</pre>
</div>
<div class="highlight-python"><pre>95   printf("Constructing a context...\n");
96   RT_CHECK_ERROR(rtContextCreate(&amp;context));
97</pre>
</div>
<p>This is with</p>
<ul class="simple">
<li>CUDA Driver Version: 5.5.47</li>
<li>GPU Driver Version: 8.26.26 310.40.45f01</li>
</ul>
</div>
<div class="section" id="optix-301-install-issues">
<h2>OptiX 301 Install issues<a class="headerlink" href="#optix-301-install-issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>attempting to open pkg complains of unidentified developer<ul>
<li>/Volumes/NVIDIA-OptiX-SDK-3.0.1-mac64/NVIDIA-OptiX-SDK-3.0.1-mac64.pkg</li>
</ul>
</li>
<li>make exception in <cite>SysPrefs &gt; Security &amp; Privacy &gt; General</cite><ul>
<li>hmm mavericks 10.9.4 &#8220;open anyway&#8221; doesnt work</li>
<li>authenticate and change to from &#8220;anywhere&#8221;</li>
</ul>
</li>
</ul>
<div class="highlight-python"><pre>delta:~ blyth$ optix-cmake
...
Specified C compiler /usr/bin/cc is not recognized (gcc, icc).  Using CMake defaults.
Specified CXX compiler /usr/bin/c++ is not recognized (g++, icpc).  Using CMake defaults.
CMake Warning at CMake/ConfigCompilerFlags.cmake:195 (message):
  Unknown Compiler.  Disabling SSE 4.1 support
Call Stack (most recent call first):
  CMakeLists.txt:116 (include)


-- Found CUDA: /usr/local/cuda (Required is at least version "2.3")
-- Found OpenGL: /System/Library/Frameworks/OpenGL.framework
-- Found GLUT: -framework GLUT
Cannot find Cg, hybridShadows will not be built
Cannot find Cg.h, hybridShadows will not be built
Disabling hybridShadows, which requires glut and opengl and Cg.
Cannot find Cg, isgShadows will not be built
Cannot find Cg.h, isgShadows will not be built
Disabling isgShadows, which requires glut and opengl and Cg.
Cannot find Cg, isgReflections will not be built
Cannot find Cg.h, isgReflections will not be built
Disabling isgReflections, which requires glut and opengl and Cg.
-- Configuring done
-- Generating done
-- Build files have been written to: /usr/local/env/cuda/optix301
delta:optix301 blyth$</pre>
</div>
<p>List the samples:</p>
<div class="highlight-python"><pre>delta:optix301 blyth$ optix-make help</pre>
</div>
<p>All giving error:</p>
<div class="highlight-python"><pre>delta:optix301 blyth$ optix-make sample6
[  7%] Building NVCC ptx file lib/ptx/cuda_compile_ptx_generated_triangle_mesh_small.cu.ptx
clang: error: unsupported option '-dumpspecs'
clang: error: no input files
CMake Error at cuda_compile_ptx_generated_triangle_mesh_small.cu.ptx.cmake:200 (message):
  Error generating
  /usr/local/env/cuda/optix301/lib/ptx/cuda_compile_ptx_generated_triangle_mesh_small.cu.ptx


make[3]: *** [lib/ptx/cuda_compile_ptx_generated_triangle_mesh_small.cu.ptx] Error 1
make[2]: *** [sutil/CMakeFiles/sutil.dir/all] Error 2
make[1]: *** [sample6/CMakeFiles/sample6.dir/rule] Error 2
make: *** [sample6] Error 2
delta:optix301 blyth$</pre>
</div>
<p>Seems that nvcc is running clang internally with non existing option:</p>
<div class="highlight-python"><pre>delta:optix301 blyth$ /usr/local/cuda/bin/nvcc -M -D__CUDACC__ /Developer/OptiX/SDK/cuda/triangle_mesh_small.cu -o /usr/local/env/cuda/optix301/sutil/CMakeFiles/cuda_compile_ptx.dir/__/cuda/cuda_compile_ptx_generated_triangle_mesh_small.cu.ptx.NVCC-depend -ccbin /usr/bin/cc -m64 -DGLUT_FOUND -DGLUT_NO_LIB_PRAGMA --use_fast_math -U__BLOCKS__ -DNVCC -I/usr/local/cuda/include -I/Developer/OptiX/include -I/Developer/OptiX/SDK/sutil -I/Developer/OptiX/include/optixu -I/usr/local/env/cuda/optix301 -I/usr/local/cuda/include -I/System/Library/Frameworks/GLUT.framework/Headers -I/Developer/OptiX/SDK/sutil -I/Developer/OptiX/SDK/cuda
clang: error: unsupported option '-dumpspecs'
clang: error: no input files
delta:optix301 blyth$</pre>
</div>
<div class="section" id="cmake-debug">
<h3>cmake debug<a class="headerlink" href="#cmake-debug" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">added &#8220;&#8211;verbose&#8221;</p>
</li>
<li><p class="first">adding &#8220;-ccbin /usr/bin/clang&#8221; gets past the &#8220;&#8211;dumpspecs&#8221; failure, now get</p>
<blockquote>
<div><p>nvcc fatal   : redefinition of argument &#8216;compiler-bindir&#8217;</p>
</div></blockquote>
</li>
<li><p class="first">/Developer/OptiX/SDK/CMake/FindCUDA/run_nvcc.cmake:</p>
<div class="highlight-python"><pre>108 # Any -ccbin existing in CUDA_NVCC_FLAGS gets highest priority
109 list( FIND CUDA_NVCC_FLAGS "-ccbin" ccbin_found0 )
110 list( FIND CUDA_NVCC_FLAGS "--compiler-bindir" ccbin_found1 )
111 if( ccbin_found0 LESS 0 AND ccbin_found1 LESS 0 )
112   if (CUDA_HOST_COMPILER STREQUAL "$(VCInstallDir)bin" AND DEFINED CCBIN)
113     set(CCBIN -ccbin "${CCBIN}")
114   else()
115     set(CCBIN -ccbin "${CUDA_HOST_COMPILER}")
116   endif()
117 endif()

* http://public.kitware.com/Bug/view.php?id=13674</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="cmake-fix">
<h3>cmake fix<a class="headerlink" href="#cmake-fix" title="Permalink to this headline">¶</a></h3>
<p>Kludge the cmake:</p>
<div class="highlight-python"><pre>delta:FindCUDA blyth$ sudo cp run_nvcc.cmake run_nvcc.cmake.original
delta:FindCUDA blyth$ pwd
/Developer/OptiX/SDK/CMake/FindCUDA</pre>
</div>
<p>Turns out not to be necessary, the cmake flag does the trick:</p>
<div class="highlight-python"><pre>cmake $(optix-dir) -DCUDA_NVCC_FLAGS="-ccbin /usr/bin/clang"</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=cuda 5.5 clang">google:cuda 5.5 clang</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/19351219/cuda-clang-and-os-x-mavericks">http://stackoverflow.com/questions/19351219/cuda-clang-and-os-x-mavericks</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/12822205/nvidia-optix-geometrygroup">http://stackoverflow.com/questions/12822205/nvidia-optix-geometrygroup</a></li>
</ul>
</div>
</div>
<div class="section" id="check-optix-raytrace-speed-on-dyb-geometry">
<h2>Check Optix Raytrace Speed on DYB geometry<a class="headerlink" href="#check-optix-raytrace-speed-on-dyb-geometry" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>In [3]: v=np.load(os.path.expandvars("$DAE_NAME_DYB_CHROMACACHE_MESH/vertices.npy"))

In [4]: v
Out[4]:
array([[ -16585.725, -802008.375,   -3600.   ],
       [ -16039.019, -801543.125,   -3600.   ],
       [ -15631.369, -800952.188,   -3600.   ],
       ...,
       [ -14297.924, -801935.812,  -12110.   ],
       [ -14414.494, -801973.438,  -12026.   ],
       [ -14414.494, -801973.438,  -12110.   ]], dtype=float32)

In [5]: v.shape
Out[5]: (1216452, 3)

In [6]: t = np.load(os.path.expandvars("$DAE_NAME_DYB_CHROMACACHE_MESH/triangles.npy"))
In [7]: t.shape
Out[7]: (2402432, 3)
In [8]: t.max()
Out[8]: 1216451
In [9]: t.min()
Out[9]: 0</pre>
</div>
<p>Write geometry in obj format:</p>
<div class="highlight-python"><pre>In [11]: fp = file("/tmp/dyb.obj", "w")
In [12]: np.savetxt(fp, v, fmt="v %.18e %.18e %.18e")
In [13]: np.savetxt(fp, t, fmt="f %d %d %d")
In [14]: fp.close()</pre>
</div>
<p>Geometry appears mangled, as obj format does not handle Russian doll geometry,
but the optix raytrace is interactive (unless some trickery being used, that is
greatly faster than chroma raytrace). Fast enough to keep me interested:</p>
<div class="highlight-python"><pre>./sample6 --cache --obj /tmp/dyb.obj --light-scale 5</pre>
</div>
</div>
<div class="section" id="how-to-load-collada-into-optix">
<h2>How to load COLLADA into OptiX ?<a class="headerlink" href="#how-to-load-collada-into-optix" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">nvidia Scenix looks abandoned</p>
</li>
<li><p class="first">plumped for assimp following example of oppr- example, see assimp- assimptest- raytrace&#8211;</p>
</li>
<li><p class="first">oppr- converts ASSIMP imported mesh into OptiX geometry:</p>
<div class="highlight-python"><pre>delta:OppositeRenderer blyth$ find . -name '*.cpp' -exec grep -H getSceneRootGroup {} \;
./RenderEngine/renderer/OptixRenderer.cpp:        m_sceneRootGroup = scene.getSceneRootGroup(m_context);
./RenderEngine/scene/Cornell.cpp:optix::Group Cornell::getSceneRootGroup(optix::Context &amp; context)
./RenderEngine/scene/Scene.cpp:optix::Group Scene::getSceneRootGroup( optix::Context &amp; context )
delta:OppositeRenderer blyth$</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="optix-tutorial">
<h2>OptiX Tutorial<a class="headerlink" href="#optix-tutorial" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://docs.nvidia.com/gameworks/content/gameworkslibrary/optix/optix_quickstart.htm">http://docs.nvidia.com/gameworks/content/gameworkslibrary/optix/optix_quickstart.htm</a></li>
</ul>
<p>Tutorials gt 5 asserting in rtContextCompile:</p>
<div class="highlight-python"><pre>delta:bin blyth$ ./tutorial -T 5
OptiX Error: Unknown error (Details: Function "RTresult _rtContextCompile(RTcontext_api*)" caught exception: Assertion failed: [1312612])</pre>
</div>
<p>Binary search reveals the culprit to be the <em>sin(phi)</em>:</p>
<div class="highlight-python"><pre>74 rtTextureSampler&lt;float4, 2&gt; envmap;
75 RT_PROGRAM void envmap_miss()
76 {
77   float theta = atan2f( ray.direction.x, ray.direction.z );
78   float phi   = M_PIf * 0.5f -  acosf( ray.direction.y );
79   float u     = (theta + M_PIf) * (0.5f * M_1_PIf);
80   float v     = 0.5f * ( 1.0f + sin(phi) );
81   // the "sin" above causing an assert with OptiX_301 CUDA 5.5 without --use_fast_math
82   prd_radiance.result = make_float3( tex2D(envmap, u, v) );
83 }</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="https://devtalk.nvidia.com/default/topic/559505/apparently-an-unexplicable-error/">https://devtalk.nvidia.com/default/topic/559505/apparently-an-unexplicable-error/</a></li>
</ul>
<p>Resolved by adding <em>&#8211;use_fast_math</em> to the cmake commandline setting CUDA_NVCC_FLAGS:</p>
<div class="highlight-python"><pre>cmake -DOptiX_INSTALL_DIR=$(optix-install-dir) -DCUDA_NVCC_FLAGS="-ccbin /usr/bin/clang --use_fast_math " "$(optix-sdir)"</pre>
</div>
<p>After a few crashes like the above observe GPU memory to be almost full
and attempts to run anything on the GPU fail with a system
exception report. To free up some GPU memory sleep/revive the machine:</p>
<div class="highlight-python"><pre>delta:bin blyth$ cu
timestamp                Fri Jan 23 10:44:11 2015
tag                      default
name                     GeForce GT 750M
compute capability       (3, 0)
memory total             2.1G
memory used              2.1G
memory free              51.4M
delta:bin blyth$</pre>
</div>
</div>
<div class="section" id="f64-check">
<h2>f64 check<a class="headerlink" href="#f64-check" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>delta:raytrace blyth$ grep f64 *.ptx
MeshViewer_generated_TriangleMesh.cu.ptx:   .target sm_10, map_f64_to_f32
MeshViewer_generated_TriangleMesh.cu.ptx:   ld.global.f32   %f64, [ray+28];
MeshViewer_generated_TriangleMesh.cu.ptx:   set.lt.u32.f32  %r30, %f64, %f58;
MeshViewer_generated_material1.cu.ptx:  .target sm_10, map_f64_to_f32
RayTrace_generated_TriangleMesh.cu.ptx: .target sm_10, map_f64_to_f32
RayTrace_generated_TriangleMesh.cu.ptx: ld.global.f32   %f64, [ray+28];
RayTrace_generated_TriangleMesh.cu.ptx: set.lt.u32.f32  %r30, %f64, %f58;
RayTrace_generated_material0.cu.ptx:    .target sm_10, map_f64_to_f32
RayTrace_generated_material1.cu.ptx:    .target sm_10, map_f64_to_f32
RayTrace_generated_tutorial0.cu.ptx:    .target sm_10, map_f64_to_f32
RayTrace_generated_tutorial0.cu.ptx:    cvt.sat.f32.f32     %f64, %f63;
RayTrace_generated_tutorial0.cu.ptx:    mul.f32     %f66, %f64, %f65;
delta:raytrace blyth$</pre>
</div>
</div>
<div class="section" id="following-updating-cuda-from-5-5-to-6-5-get">
<h2>Following updating CUDA from 5.5 to 6.5 get<a class="headerlink" href="#following-updating-cuda-from-5-5-to-6-5-get" title="Permalink to this headline">¶</a></h2>
<p>While still using OptiX301:</p>
<div class="highlight-python"><pre>delta:sample3 blyth$ raytrace-v -n
[ 19%] Built target AssimpGeometryTest
Scanning dependencies of target MeshViewer
[ 22%] Building CXX object CMakeFiles/MeshViewer.dir/MeshViewer.cpp.o
Linking CXX executable MeshViewer
[ 61%] Built target MeshViewer
[100%] Built target RayTrace
dyld: Library not loaded: @rpath/libcudart.dylib
  Referenced from: /Developer/OptiX/lib64/liboptix.1.dylib
  Reason: Incompatible library version: liboptix.1.dylib requires version 1.1.0 or later, but libcudart.5.5.dylib provides version 0.0.0
Trace/BPT trap: 5
delta:sample3 blyth$</pre>
</div>
<p>But with the beta OptiX_370b2 the invalid context issue is gone:</p>
<div class="highlight-python"><pre>delta:SDK-precompiled-samples blyth$ ./sample3
OptiX 3.7.0
Number of Devices = 1

Device 0: GeForce GT 750M
  Compute Support: 3 0
  Total Memory: 2147024896 bytes
  Clock Rate: 925500 kilohertz
  Max. Threads per Block: 1024
  SM Count: 2
  Execution Timeout Enabled: 1
  Max. HW Texture Count: 128
  TCC driver enabled: 0
  CUDA Device Ordinal: 0

Constructing a context...
  Created with 1 device(s)
  Supports 2147483647 simultaneous textures
  Free memory:
    Device 0: 1099292672 bytes</pre>
</div>
</div>
<div class="section" id="optix-cmake-claims-needs-2-8-8-by-appears-to-build-ok-with-2-6-4">
<h2>OptiX cmake claims needs 2.8.8 by appears to build ok with 2.6.4<a class="headerlink" href="#optix-cmake-claims-needs-2-8-8-by-appears-to-build-ok-with-2-6-4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>CMake Error at CMakeLists.txt:82 (cmake_minimum_required):
  CMake 2.8.8 or higher is required.  You are running version 2.6.4</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cmake</span><span class="o">-</span><span class="n">samples</span><span class="o">-</span><span class="n">cmake</span><span class="o">-</span><span class="n">kludge</span>  <span class="c"># inplace edit the version requirement</span>
</pre></div>
</div>
</div>
<div class="section" id="each-optix-release-requires-a-different-driver-release">
<h2>Each OptiX release requires a different driver release<a class="headerlink" href="#each-optix-release-requires-a-different-driver-release" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sample7-works-with-optix370-new-driver-340-65">
<h3>sample7 works with Optix370 (new driver 340.65)<a class="headerlink" href="#sample7-works-with-optix370-new-driver-340-65" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>-bash-4.1$ LD_LIBRARY_PATH=. ./sample7 -f out.ppm
-bash-4.1$ ll *.ppm
-rw-r--r-- 1 blyth dyw 2211856 Feb  9 11:53 out.ppm
-bash-4.1$ date
Mon Feb  9 11:54:10 CST 2015
-bash-4.1$ optix-name
NVIDIA-OptiX-SDK-3.7.0-linux64
-bash-4.1$

-bash-4.1$ cat /proc/driver/nvidia/version
NVRM version: NVIDIA UNIX x86_64 Kernel Module  340.65  Tue Dec  2 09:50:34 PST 2014
GCC version:  gcc version 4.4.7 20120313 (Red Hat 4.4.7-4) (GCC)</pre>
</div>
</div>
<div class="section" id="sample7-fails-with-optix-363-old-driver">
<h3>sample7 fails with OptiX 363 (old driver)<a class="headerlink" href="#sample7-fails-with-optix-363-old-driver" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>-bash-4.1$ ./sample7 -f out.ppm
OptiX Error: Invalid context (Details: Function "RTresult _rtContextLaunch2D(RTcontext, unsigned int, RTsize, RTsize)" caught exception: Unable to set the CUDA device., [3735714])
-bash-4.1$
-bash-4.1$ pwd
/dyb/dybd07/user/blyth/hgpu01.ihep.ac.cn/env/cuda/NVIDIA-OptiX-SDK-3.6.3-linux64_sdk_install/bin
-bash-4.1$</pre>
</div>
</div>
<div class="section" id="sample7-works-with-optix-351-old-driver">
<h3>sample7 works with OptiX 351 (old driver)<a class="headerlink" href="#sample7-works-with-optix-351-old-driver" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>-bash-4.1$ LD_LIBRARY_PATH=. ./sample7 -f sample7.ppm

delta:~ blyth$ scp L6:/dyb/dybd07/user/blyth/hgpu01.ihep.ac.cn/OptiX/SDK-precompiled-samples/sample7.ppm .
delta:~ blyth$ libpng-
delta:~ blyth$ cat sample7.ppm | libpng-wpng &gt; sample7.png
Encoding image data...
Done.
delta:~ blyth$ open sample7.png</pre>
</div>
</div>
</div>
<div class="section" id="benchmark">
<h2>Benchmark<a class="headerlink" href="#benchmark" title="Permalink to this headline">¶</a></h2>
<p>Quick look at scaling with GPU cores, close to linear</p>
<ul class="simple">
<li>CUDA_VISIBLE_DEVICES=0</li>
<li>CUDA_VISIBLE_DEVICES=1</li>
<li>unset</li>
<li>K20m 2496 cores each,  total 4992 cores</li>
<li>750m 384 cores</li>
</ul>
<div class="highlight-python"><pre>In [2]: 4992./384.
Out[2]: 13.0

In [3]: 345.154/28.03
Out[3]: 12.313735283624688

In [4]: 49.1/28.03
Out[4]: 1.7516946129147342</pre>
</div>
<p>1,1,2 K20m:</p>
<div class="highlight-python"><pre>Time to load geometry: 5.05531 s.
Time to compile kernel: 0.220482 s.
Time to build AS      : 0.162403 s.
PREPROCESS: MeshViewer | compile 0.000169992 sec | accelbuild 0.0002141 sec
BENCHMARK: MeshViewer | 20.3645 fps | 1 (warmup) | 2 (timed) | 0.0982101 sec | 49.105 ms/f

Time to load geometry: 4.99532 s.
Time to compile kernel: 0.218149 s.
Time to build AS      : 0.160232 s.
PREPROCESS: MeshViewer | compile 0.000129938 sec | accelbuild 0.000213146 sec
BENCHMARK: MeshViewer | 20.354 fps | 1 (warmup) | 2 (timed) | 0.0982609 sec | 49.1304 ms/f

Time to load geometry: 4.9231 s.
Time to compile kernel: 0.22342 s.
Time to build AS      : 0.312235 s.
PREPROCESS: MeshViewer | compile 0.000135899 sec | accelbuild 0.000245094 sec
BENCHMARK: MeshViewer | 35.669 fps | 1 (warmup) | 2 (timed) | 0.056071 sec | 28.0355 ms/f</pre>
</div>
<p>1 750m:</p>
<div class="highlight-python"><pre>Time to load geometry: 3.05554 s.
Time to compile kernel: 0.160299 s.
Time to build AS      : 0.286529 s.
PREPROCESS: MeshViewer | compile 9.70364e-05 sec | accelbuild 0.000139952 sec
BENCHMARK: MeshViewer | 2.89726 fps | 1 (warmup) | 2 (timed) | 0.690308 sec | 345.154 ms/f</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../" title="optix"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" >optix</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>