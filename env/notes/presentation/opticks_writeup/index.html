<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Opticks Writeup Preparations &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ggeoview/">ggeoview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oglrap/">oglrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cfg4/">cfg4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/presentation/opticks_writeup.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="opticks-writeup-preparations">
<h1>Opticks Writeup Preparations<a class="headerlink" href="#opticks-writeup-preparations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="chep-proceedings">
<h2>CHEP Proceedings<a class="headerlink" href="#chep-proceedings" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Deadline Feb 6th 2017</p>
</li>
<li><p class="first">8 pages limit, create in ioproc style with:</p>
<div class="highlight-python"><pre>ioproc-;ioproc--</pre>
</div>
</li>
</ul>
<dl class="docutils">
<dt><em>presentation-writeup</em></dt>
<dd>edit this document, adding text preparation notes</dd>
<dt><em>workflow-;reps-;reps-edit</em></dt>
<dd>last NTU report</dd>
</dl>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>~/opticks_refs for references and inspiration docs</li>
<li><a class="reference external" href="https://cloud.github.com/downloads/thrust/thrust/Thrust%3A%20A%20Productivity-Oriented%20Library%20for%20CUDA.pdf">https://cloud.github.com/downloads/thrust/thrust/Thrust%3A%20A%20Productivity-Oriented%20Library%20for%20CUDA.pdf</a></li>
</ul>
</div>
<div class="section" id="figures">
<h2>Figures<a class="headerlink" href="#figures" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>how many ? what size ?</li>
<li>plots, screen shots</li>
</ul>
</div>
<div class="section" id="tables">
<h2>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>performance comparison</li>
</ul>
</div>
<div class="section" id="hep-software-paper-tone-examples">
<h2>HEP Software Paper Tone Examples<a class="headerlink" href="#hep-software-paper-tone-examples" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://geant4.cern.ch/results/index.shtml">http://geant4.cern.ch/results/index.shtml</a></li>
<li><a class="reference external" href="http://geant4.cern.ch/results/publications.shtml#journal">http://geant4.cern.ch/results/publications.shtml#journal</a></li>
</ul>
</div>
<div class="section" id="high-level-view-of-parallelism-is-hep">
<h2>High Level View of Parallelism is HEP<a class="headerlink" href="#high-level-view-of-parallelism-is-hep" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-future-of-commodity-computing-and-many-core-versus-the-interests-of-hep-software">
<h3>The future of commodity computing and many-core versus the interests of HEP software<a class="headerlink" href="#the-future-of-commodity-computing-and-many-core-versus-the-interests-of-hep-software" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://iopscience.iop.org/article/10.1088/1742-6596/396/5/052058/pdf">http://iopscience.iop.org/article/10.1088/1742-6596/396/5/052058/pdf</a></li>
</ul>
</div>
</div>
<div class="section" id="what-makes-optix-fast">
<h2>What makes OptiX fast ?<a class="headerlink" href="#what-makes-optix-fast" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sbvh-spatial-splits-in-bounding-volume-hierarchies">
<h3>SBVH : Spatial Splits in Bounding Volume Hierarchies<a class="headerlink" href="#sbvh-spatial-splits-in-bounding-volume-hierarchies" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://dl.acm.org/citation.cfm?id=1572771">http://dl.acm.org/citation.cfm?id=1572771</a></li>
<li><a class="reference external" href="http://www.nvidia.com/docs/IO/77714/sbvh.pdf">http://www.nvidia.com/docs/IO/77714/sbvh.pdf</a></li>
<li><a class="reference external" href="http://highperformancegraphics.org/previous/www_2009/presentations/stich-spatial.pdf">http://highperformancegraphics.org/previous/www_2009/presentations/stich-spatial.pdf</a></li>
<li><a class="reference external" href="http://highperformancegraphics.org/previous/www_2009/program.html">http://highperformancegraphics.org/previous/www_2009/program.html</a></li>
</ul>
</div>
<div class="section" id="optix-talks">
<h3>OptiX talks<a class="headerlink" href="#optix-talks" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://bps11.idav.ucdavis.edu/talks/12-userDefinedRayTracingPipelines-Parker-BPS2011.pdf">http://bps11.idav.ucdavis.edu/talks/12-userDefinedRayTracingPipelines-Parker-BPS2011.pdf</a></li>
</ul>
</div>
<div class="section" id="scheduling-in-optix">
<h3>Scheduling in OptiX<a class="headerlink" href="#scheduling-in-optix" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://highperformancegraphics.org/previous/www_2009/presentations/nvidia-rt.pdf">http://highperformancegraphics.org/previous/www_2009/presentations/nvidia-rt.pdf</a></li>
<li>~/opticks_refs/scheduling_in_optix_robison_nvidia-rt.pdf</li>
<li><a class="reference external" href="http://highperformancegraphics.org/previous/www_2009/presentations/aila-understanding.pdf">http://highperformancegraphics.org/previous/www_2009/presentations/aila-understanding.pdf</a></li>
<li>~/opticks_refs/aila-understanding.pdf</li>
</ul>
</div>
<div class="section" id="megakernels-considered-harmful">
<h3>Megakernels considered harmful<a class="headerlink" href="#megakernels-considered-harmful" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://dl.acm.org/citation.cfm?id=2492060">http://dl.acm.org/citation.cfm?id=2492060</a></li>
</ul>
</div>
</div>
<div class="section" id="related-work">
<h2>Related Work<a class="headerlink" href="#related-work" title="Permalink to this headline">¶</a></h2>
<div class="section" id="purpose-of-related-work-section">
<h3>Purpose of <em>Related Work</em> section<a class="headerlink" href="#purpose-of-related-work-section" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>set the scene</li>
<li>fair coverage of Chroma limitations without getting down to performance comparison numbers.
There really is no comparison performance wise, so no point in doing the comparison work.</li>
</ul>
</div>
<div class="section" id="chroma">
<h3>Chroma<a class="headerlink" href="#chroma" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>~/opticks_refs/chroma.pdf</li>
</ul>
<p>Chroma implements both GPU ray tracing and optical photon simulation using CUDA kernels
that are launched via PyCUDA scripts. The scripts make extensive use of NumPy.</p>
</div>
<div class="section" id="chroma-why-not-to-use">
<h3>Chroma : why not to use<a class="headerlink" href="#chroma-why-not-to-use" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>requires optical photons to be copied from CPU to GPU, Opticks generates photons on GPU</li>
<li>implements its own GPU ray tracing, including BVH acceleration structure creation and traversal.
These remain active areas of computer science research with frequent algorithmic improvements.</li>
<li>implements its own simple GPU ray tracing work scheduling, again an area of active research
which is liable to require reimplementation for new GPU architectures</li>
<li>limited to triangle geometries</li>
</ul>
<p>Efficient GPU ray tracing through use of acceleration structures and GPU work scheduling
remain active areas of research with implementations liable to require reworking for each
GPU architecture.</p>
<p>The Chroma approach of implementing GPU ray tracing makes it
The ambitious nature of the Chroma implementation makes it difficult to maintain for
production usage, but at the same time an excellent learning resource.</p>
<p>Chroma is currently implemented using CUDA but in principal it could be ported to OpenCL
to enable usage on AMD and Intel GPUs in addition to the NVIDIA GPUs that CUDA requires.</p>
<p>Opticks aim is to very closely reproduce Geant4 simulation results.</p>
<p>Ambitiously:</p>
<ul class="simple">
<li>constructs BVH acceleration structure using Morton codes (integer with spatial grouping)</li>
</ul>
</div>
<div class="section" id="tao-voxelization">
<h3>Tao Voxelization<a class="headerlink" href="#tao-voxelization" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference external" href="http://juno.ihep.ac.cn/cgi-bin/Dev_DocDB/ShowDocument?docid=1293">http://juno.ihep.ac.cn/cgi-bin/Dev_DocDB/ShowDocument?docid=1293</a></p>
<p>Fast Muon Simulation in the JUNO Central Detector</p>
</li>
<li><p class="first"><a class="reference external" href="http://iopscience.iop.org/article/10.1088/1674-1137/40/8/086201/pdf">http://iopscience.iop.org/article/10.1088/1674-1137/40/8/086201/pdf</a></p>
</li>
</ul>
</div>
<div class="section" id="muon-photon-yield">
<h3>Muon Photon yield<a class="headerlink" href="#muon-photon-yield" title="Permalink to this headline">¶</a></h3>
<p>Muon average track length in CD LS is about 23m, suppose 2MeV/cm energy deposit, LS optical photon yield is 10000/MeV
23*100*2*10000 = 46,000,000 optical photons.</p>
<ul class="simple">
<li><a class="reference external" href="http://juno.ihep.ac.cn/Dev_DocDB/0020/002058/003/Tutorial_for_muon_reconstruction.pdf">http://juno.ihep.ac.cn/Dev_DocDB/0020/002058/003/Tutorial_for_muon_reconstruction.pdf</a></li>
</ul>
</div>
<div class="section" id="geantv">
<h3>GeantV<a class="headerlink" href="#geantv" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="vecgeom-usolids">
<h3>VecGeom/USolids<a class="headerlink" href="#vecgeom-usolids" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://arxiv.org/pdf/1312.0816v1.pdf">https://arxiv.org/pdf/1312.0816v1.pdf</a> Vectorising the detector geometry to optimize particle transport</li>
</ul>
<p>Shared objective with Opticks so intro will cover similar ground, but for neutrino detectors
where the simplicity means GPU focus and drastic speedups are in the cards.</p>
<ul>
<li><p class="first"><a class="reference external" href="http://www.google.com/search?q=vecgeom">google:vecgeom</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://indico.fnal.gov/getFile.py/access?contribId=8&amp;resId=0&amp;materialId=slides&amp;confId=9213">https://indico.fnal.gov/getFile.py/access?contribId=8&amp;resId=0&amp;materialId=slides&amp;confId=9213</a>  (Jan 30, 2015 )</p>
</li>
<li><p class="first"><a class="reference external" href="https://indico.fnal.gov/getFile.py/access?contribId=24&amp;sessionId=35&amp;resId=0&amp;materialId=slides&amp;confId=9717">https://indico.fnal.gov/getFile.py/access?contribId=24&amp;sessionId=35&amp;resId=0&amp;materialId=slides&amp;confId=9717</a></p>
<p>Integration of VecGeom into Geant4 (Sept 2015)</p>
<p>VECGEOM_REPLACES_USOLIDS macro</p>
</li>
<li><p class="first">all navigation is still performed and controlled by Geant4</p>
</li>
<li><p class="first">boolean operations with solids still managed by Geant4</p>
</li>
</ul>
<p>Hmm the above imply no migration of geometry to reside on GPU ?</p>
<ul class="simple">
<li><a class="reference external" href="http://aidasoft.web.cern.ch/USolids">http://aidasoft.web.cern.ch/USolids</a></li>
<li><a class="reference external" href="https://indico.cern.ch/event/468478/contributions/2195688/attachments/1292009/1924788/Geom_solids_WP3_June2016.pptx">https://indico.cern.ch/event/468478/contributions/2195688/attachments/1292009/1924788/Geom_solids_WP3_June2016.pptx</a></li>
<li>~/opticks_refs/Geom_solids_WP3_June2016.pdf</li>
<li><a class="reference external" href="http://indico.cern.ch/event/382133/contributions/1809012/attachments/761594/1044801/geom-solids_WP3_June_2015.pdf">http://indico.cern.ch/event/382133/contributions/1809012/attachments/761594/1044801/geom-solids_WP3_June_2015.pdf</a></li>
</ul>
<p><strong>Towards a high performance geometry library for particle-detector simulations</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://iopscience.iop.org/article/10.1088/1742-6596/608/1/012023/pdf">http://iopscience.iop.org/article/10.1088/1742-6596/608/1/012023/pdf</a></li>
<li>~/opticks_refs/Towards_a_high_perf_geom_lib_Apostolakis_2015_J._Phys.3A_Conf._Ser._608_012023.pdf</li>
</ul>
</div>
<div class="section" id="vecgeom-gpu-impressions">
<h3>VecGeom/GPU impressions<a class="headerlink" href="#vecgeom-gpu-impressions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Interesting there is no mention of acceleration structures...</li>
</ul>
<p>Probably this is a no-triangle effect, when have millions of triangles
the use of acceleration structures is mandatory, but operating at volume level
makes this is much less critical. Nevertheless geometries can get to 100k of volumes
so it would still be beneficial.</p>
<ul class="simple">
<li>GPUs currently an &#8220;also have..&#8221; bullet point, not yet shifted mindset to &#8220;GPU resident&#8221; approach.</li>
</ul>
</div>
<div class="section" id="opticks-use-of-vecgeom-is-it-possible">
<h3>Opticks use of VecGeom, is it possible ?<a class="headerlink" href="#opticks-use-of-vecgeom-is-it-possible" title="Permalink to this headline">¶</a></h3>
<p>Not straightforwardly...</p>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=optix rtPotentialIntersection rtReportIntersection">google:optix rtPotentialIntersection rtReportIntersection</a></li>
<li><a class="reference external" href="https://docs.nvidia.com/gameworks/content/gameworkslibrary/optix/optix_quickstart.htm">https://docs.nvidia.com/gameworks/content/gameworkslibrary/optix/optix_quickstart.htm</a></li>
</ul>
<p>Scene data is provided to OptiX via a node tree structure that
is constructed using the OptiX CPU side API.
Geometry nodes at the leaves of the tree are assigned
primitive counts and associated CUDA programs that return bounding box and
report ray primitive intersection positions.
The programs access GPU geometry buffers which are copied from the CPU at initialization.
Multiple geometry instance nodes are allowed to share geometry objects, this
together with the use of transform nodes is used to model the many thousands of
photomultiplier tubes without repetition of information.
The OptiX node tree is also used to configure acceleration structures
used for different parts of the scene.</p>
</div>
<div class="section" id="hep-gpu">
<h3>HEP GPU<a class="headerlink" href="#hep-gpu" title="Permalink to this headline">¶</a></h3>
<p>High energy electromagnetic particle transportation on the GPU  (CHEP2013)</p>
<p>P Canal, D Elvira, S Y Jun, J Kowalkowski, M Paterno and J Apostolakis</p>
<ul class="simple">
<li><a class="reference external" href="https://web.fnal.gov/project/Geant4RD/Shared%20Documents/chep2013-gpu.pdf">https://web.fnal.gov/project/Geant4RD/Shared%20Documents/chep2013-gpu.pdf</a></li>
<li><a class="reference external" href="mailto:syjun&#37;&#52;&#48;fnal&#46;gov">syjun<span>&#64;</span>fnal<span>&#46;</span>gov</a></li>
</ul>
</div>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Following the end of the free lunch of CPU performance improvement
in approximately 2005 improvements increasingly requires development
effort to adopt new concurrent technologies.</p>
<p>Most work towards accelerating Geant4 simulation performance has been
done in the context of vectorization</p>
<p>Most neutrino detectors are comprised of large homogenous target volumes such as
scintillating liquids coupled with photon detectors such as photomultiplier tubes.
Simplicity of design and
The relative simplicity of neutrino detector</p>
<p>Neutrino detectors</p>
<p>The relative simplicity of neutrino detectors and the
optical physics that</p>
<p>The simplicity of optical physics and neutrino detector geometry
makes it feasible</p>
<p>Most existing work on improving the performance
of simulation</p>
<div class="section" id="gpu-or-mic">
<h3>GPU or MIC<a class="headerlink" href="#gpu-or-mic" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=GPU or MIC">google:GPU or MIC</a></li>
<li><a class="reference external" href="https://www.karlrupp.net/2013/06/cpu-gpu-and-mic-hardware-characteristics-over-time/">https://www.karlrupp.net/2013/06/cpu-gpu-and-mic-hardware-characteristics-over-time/</a></li>
<li><a class="reference external" href="http://www.nvidia.com/object/justthefacts.html">http://www.nvidia.com/object/justthefacts.html</a> Intel Xeon Phi vs NVIDIA GPU</li>
</ul>
</div>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="approach">
<h3>approach<a class="headerlink" href="#approach" title="Permalink to this headline">¶</a></h3>
<p>Neutrino detector simulations are dominated by the propagation of
very large numbers of optical photons.  This shines a harsh light
on Geant4.</p>
</div>
<div class="section" id="importance-of-simulation-and-geant4">
<h3>importance of simulation and geant4<a class="headerlink" href="#importance-of-simulation-and-geant4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>mission critical for all phases high energy physics experiments from detector design, ...</li>
<li>geant4 dominance, common element in software of most experiments</li>
</ul>
</div>
<div class="section" id="neutrino-detection-special-features">
<h3>neutrino detection special features<a class="headerlink" href="#neutrino-detection-special-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>simple geometry compared to collider experiments with large homogenous
target volumes coupled with many thousands of nearly identical photon detectors</li>
<li>photons created by only a few processes, mainly interested in small subset
of photons that hit photon detectors</li>
<li>important signal and background events can yield many millions of photons</li>
<li>era of ever increasing CPU is over</li>
<li>HEP is lagging in its transition to parallel computing and especially to the GPU,
due the complexity of most detector geometries and many of the physics processes, however
neutrino detectors are special</li>
<li>simplicity of optical physics, the independence of each photon and the sheer number
of optical photons makes the simulation of optical photons to be well suited
to use of GPU massive parallelism techniques</li>
<li>unification of graphics and computation</li>
</ul>
</div>
</div>
<div class="section" id="nvidia-optix">
<h2>NVIDIA OptiX<a class="headerlink" href="#nvidia-optix" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://on-demand-gtc.gputechconf.com/gtcnew/on-demand-gtc.php?searchByKeyword=OptiX&amp;searchItems=&amp;sessionTopic=&amp;sessionEvent=&amp;sessionYear=&amp;sessionFormat=&amp;submit=&amp;select=">http://on-demand-gtc.gputechconf.com/gtcnew/on-demand-gtc.php?searchByKeyword=OptiX&amp;searchItems=&amp;sessionTopic=&amp;sessionEvent=&amp;sessionYear=&amp;sessionFormat=&amp;submit=&amp;select=</a></li>
</ul>
<div class="section" id="gpu-ray-tracing-exposed-under-the-hood-of-the-nvidia-optix-ray-tracing-engine">
<h3>GPU Ray Tracing Exposed: Under the Hood of the NVIDIA OptiX Ray Tracing Engine<a class="headerlink" href="#gpu-ray-tracing-exposed-under-the-hood-of-the-nvidia-optix-ray-tracing-engine" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://on-demand.gputechconf.com/gtc/2010/video/S12250-GPU-Ray-Tracing-NVIDIA-Optix-Ray-Tracing-Engine.mp4">http://on-demand.gputechconf.com/gtc/2010/video/S12250-GPU-Ray-Tracing-NVIDIA-Optix-Ray-Tracing-Engine.mp4</a></p>
<ul class="simple">
<li>1st 15 min discusses Aila and Lane paper</li>
<li>last 15 min discusses the state machine</li>
<li>key observation : divergence is temporary, usually comes back to common states</li>
</ul>
</div>
<div class="section" id="aila">
<h3>Aila<a class="headerlink" href="#aila" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://mediatech.aalto.fi/~timo/">https://mediatech.aalto.fi/~timo/</a></li>
</ul>
</div>
<div class="section" id="steven-parker-stanford-university-lecture">
<h3>Steven Parker, Stanford University Lecture<a class="headerlink" href="#steven-parker-stanford-university-lecture" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.youtube.com/watch?v=KH3hS0LBq80">https://www.youtube.com/watch?v=KH3hS0LBq80</a></p>
<ul class="simple">
<li>jump to 23min to skip the general intro</li>
<li>SIMT divergence kept temporary via prescribed state transition ordering</li>
<li>termination penalty</li>
<li>many threads, means must minimize state per thread</li>
</ul>
</div>
<div class="section" id="gpu-radiation-therapy">
<h3>GPU radiation therapy<a class="headerlink" href="#gpu-radiation-therapy" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4003902/pdf/nihms564930.pdf">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4003902/pdf/nihms564930.pdf</a></li>
</ul>
</div>
</div>
<div class="section" id="openlab-on-hep-usage-of-parallelism">
<h2>OpenLab on HEP usage of parallelism<a class="headerlink" href="#openlab-on-hep-usage-of-parallelism" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=Jarp S, Lazzaro A and Nowak A">google:Jarp S, Lazzaro A and Nowak A</a></li>
<li><a class="reference external" href="http://inspirehep.net/record/1211475/files/jpconf12_396_042043.pdf?version=1">http://inspirehep.net/record/1211475/files/jpconf12_396_042043.pdf?version=1</a></li>
<li>Many-core experience with HEP software at CERN openlab</li>
</ul>
</div>
<div class="section" id="gpu-within-hep">
<h2>GPU within HEP<a class="headerlink" href="#gpu-within-hep" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference external" href="http://www.google.com/search?q=GPU use within High Energy Physics">google:GPU use within High Energy Physics</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://arxiv.org/pdf/1512.06637.pdf">https://arxiv.org/pdf/1512.06637.pdf</a></p>
<p>On the Way to Future’s High Energy Particle Physics Transport Code  (For the GeantV collab)</p>
</li>
<li><p class="first">has a simple description of AtRest, AlongStep, PostStep, ...</p>
</li>
</ul>
<div class="section" id="impressions">
<h3>impressions<a class="headerlink" href="#impressions" title="Permalink to this headline">¶</a></h3>
<p>Other than Chroma have so far found no mention of
acceleration structures (eg BVH) in discussions of GPU ports
of G4. This suggests that</p>
</div>
</div>
<div class="section" id="google-geant4-accelerate">
<h2><a class="reference external" href="http://www.google.com/search?q=geant4 accelerate">google:geant4 accelerate</a><a class="headerlink" href="#google-geant4-accelerate" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gpu-in-physics-computation-case-geant4-navigation">
<h3>GPU in Physics Computation: Case Geant4 Navigation<a class="headerlink" href="#gpu-in-physics-computation-case-geant4-navigation" title="Permalink to this headline">¶</a></h3>
<p>2011 investigation of G4 GPU porting of Geant4 navigation.</p>
<ul class="simple">
<li><a class="reference external" href="https://arxiv.org/pdf/1209.5235v1.pdf">https://arxiv.org/pdf/1209.5235v1.pdf</a></li>
<li>~/opticks_refs/1209.5235v1.pdf</li>
</ul>
<p><strong>Impression</strong></p>
<ul class="simple">
<li><strong>no mention of acceleration structures, suggests stuck in G4 geometry straightjacket/mindset</strong></li>
<li>direct ports of highly branching CPU code to GPU yields little benefit</li>
<li>porting is not enough, re-architecting is needed</li>
</ul>
</div>
<div class="section" id="high-energy-electromagnetic-particle-transportation-on-the-gpu">
<h3>High energy electromagnetic particle transportation on the GPU<a class="headerlink" href="#high-energy-electromagnetic-particle-transportation-on-the-gpu" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://iopscience.iop.org/article/10.1088/1742-6596/513/5/052013/pdf">http://iopscience.iop.org/article/10.1088/1742-6596/513/5/052013/pdf</a></li>
</ul>
</div>
<div class="section" id="vectorising-the-detector-geometry-to-optimize-particle-transport-dec-2013">
<h3>Vectorising the detector geometry to optimize particle transport (Dec 2013)<a class="headerlink" href="#vectorising-the-detector-geometry-to-optimize-particle-transport-dec-2013" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://arxiv.org/abs/1312.0816">https://arxiv.org/abs/1312.0816</a></li>
</ul>
</div>
</div>
<div class="section" id="free-lunch-is-over">
<h2>Free Lunch is Over<a class="headerlink" href="#free-lunch-is-over" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.drdobbs.com/web-development/a-fundamental-turn-toward-concurrency-in/184405990">http://www.drdobbs.com/web-development/a-fundamental-turn-toward-concurrency-in/184405990</a></li>
<li><a class="reference external" href="http://dl.acm.org/citation.cfm?id=1095421">http://dl.acm.org/citation.cfm?id=1095421</a></li>
<li>~/opticks_refs/p54-sutter.pdf</li>
<li><a class="reference external" href="http://www.gotw.ca/publications/concurrency-ddj.htm">http://www.gotw.ca/publications/concurrency-ddj.htm</a></li>
</ul>
</div>
<div class="section" id="google-intel-many-integrated-core-vs-nvidia-gpu">
<h2><a class="reference external" href="http://www.google.com/search?q=intel Many Integrated Core vs NVIDIA GPU">google:intel Many Integrated Core vs NVIDIA GPU</a><a class="headerlink" href="#google-intel-many-integrated-core-vs-nvidia-gpu" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.greymatter.com/corporate/hardcopy-article/gpu-vs-manycore/">http://www.greymatter.com/corporate/hardcopy-article/gpu-vs-manycore/</a>  (2012)</li>
</ul>
<div class="section" id="experience-with-intel-s-many-integrated-core-architecture-in-atlas-software">
<h3>Experience with Intel&#8217;s Many Integrated Core architecture in ATLAS software<a class="headerlink" href="#experience-with-intel-s-many-integrated-core-architecture-in-atlas-software" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://iopscience.iop.org/article/10.1088/1742-6596/513/5/052018/pdf">http://iopscience.iop.org/article/10.1088/1742-6596/513/5/052018/pdf</a></p>
<p>Intel’s MIC architecture is very new, and perhaps put in the market somewhat
prematurely, if the state of the tools, drivers, and other support are an
indicator. Rapid progress is expected to continue, but at this point it is pure
speculation which tools Intel will endure long-term.  The next generation of
MIC boards, Knight’s Landing, will be available both as a coprocessor and as
standalone CPU. It is not clear whether the latter will allow memory
extensions, but Intel has stated that the standalone product will remove the
current programming complexities of data transfers, suggesting a single main
memory. Other indicated improvements are in memory bandwidth and energy
efficiency, but no word on an increase in the number of cores.  Our
object-oriented codes scattered across shared libraries run more effectively on
the MIC than on Xeon CPUs if there is sufficient, fully independent,
parallelism. Thus, if a future board allows memory extensions, we may well be
able to run process-parallel AthenaMP or event- parallel GaudiHive efficiently
on the MIC. Until then, work should focus on the service model that allows
effective use of accelerator cards.</p>
</div>
<div class="section" id="gpgpu-for-track-finding-in-high-energy-physics">
<h3>GPGPU for track finding in High Energy Physics<a class="headerlink" href="#gpgpu-for-track-finding-in-high-energy-physics" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://arxiv.org/abs/1507.03074">https://arxiv.org/abs/1507.03074</a></li>
</ul>
</div>
<div class="section" id="proceedings-gpu-computing-in-high-energy-physics-gpuhep2014-pisa-italy-september-10-12-2014">
<h3>Proceedings, GPU Computing in High-Energy Physics (GPUHEP2014) : Pisa, Italy, September 10-12, 2014<a class="headerlink" href="#proceedings-gpu-computing-in-high-energy-physics-gpuhep2014-pisa-italy-september-10-12-2014" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://inspirehep.net/record/1387408?ln=en">http://inspirehep.net/record/1387408?ln=en</a></li>
<li><a class="reference external" href="http://www-library.desy.de/preparch/desy/proc/proc14-05/40.pdf">http://www-library.desy.de/preparch/desy/proc/proc14-05/40.pdf</a>  some contribs seems truncated</li>
</ul>
</div>
<div class="section" id="google-photon-propagation-with-gpus-in-icecube">
<h3><a class="reference external" href="http://www.google.com/search?q=Photon Propagation with GPUs in IceCube">google:Photon Propagation with GPUs in IceCube</a><a class="headerlink" href="#google-photon-propagation-with-gpus-in-icecube" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://bib-pubdb1.desy.de/record/291395">https://bib-pubdb1.desy.de/record/291395</a></li>
<li><a class="reference external" href="http://adsabs.harvard.edu/abs/2013NIMPA.725..141C">http://adsabs.harvard.edu/abs/2013NIMPA.725..141C</a></li>
</ul>
</div>
</div>
<div class="section" id="gpu-computing-in-high-energy-physics-10-12-september-2014">
<h2>GPU Computing in High Energy Physics (10-12 September 2014)<a class="headerlink" href="#gpu-computing-in-high-energy-physics-10-12-september-2014" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://agenda.infn.it/conferenceOtherViews.py?confId=7534&amp;view=standardshort">https://agenda.infn.it/conferenceOtherViews.py?confId=7534&amp;view=standardshort</a></li>
</ul>
<div class="section" id="first-experience-with-portable-high-performance-geometry-code-on-gpu">
<h3>First experience with portable high-performance geometry code on GPU<a class="headerlink" href="#first-experience-with-portable-high-performance-geometry-code-on-gpu" title="Permalink to this headline">¶</a></h3>
<ol class="upperalpha simple" start="10">
<li>de Fine Licht (CERN)</li>
</ol>
<ul class="simple">
<li><a class="reference external" href="https://agenda.infn.it/getFile.py/access">https://agenda.infn.it/getFile.py/access</a>?contribId=34&amp;sessionId=3&amp;resId=0&amp;materialId=slides&amp;confId=7534￼</li>
</ul>
<p>Desire to support multiple architectures without having multiple
implementations in source code of each algorithm; functionality vs.
maintainability</p>
<p>Will provide a CUDA API for a GeantV GPU prototype developed at Fermilab</p>
<p>MY TAKE:</p>
<ul class="simple">
<li>direct porting CPU code to run on GPU will not lead to an performant implementation.
GPUs demand rearchitecting. Nevertheless some micro-reuse (algorithms contained in headers)
can be done without compromise.</li>
<li>too hung up on not duplicating implementations for different architectures,<ul>
<li>need to think of the costs for each decision, complicating use of a new computing architecture
with generic programming which ties you down to the vectorised way of doing things is a mistake</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="geantv-gpu-prototype">
<h3>GeantV GPU prototype<a class="headerlink" href="#geantv-gpu-prototype" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=GeantV GPU prototype">google:GeantV GPU prototype</a></li>
<li><a class="reference external" href="https://cdcvs.fnal.gov/redmine/projects/g4hpc/wiki/Geant_Vector_and_GPU_Prototype">https://cdcvs.fnal.gov/redmine/projects/g4hpc/wiki/Geant_Vector_and_GPU_Prototype</a></li>
</ul>
<p>Annual Concurrency Meeting February 4-6, 2013 Fermilab</p>
<ul class="simple">
<li><a class="reference external" href="https://indico.cern.ch/event/231531/contributions/488117/attachments/384377/534650/acm_gpu_syjun.pdf">https://indico.cern.ch/event/231531/contributions/488117/attachments/384377/534650/acm_gpu_syjun.pdf</a></li>
</ul>
</div>
<div class="section" id="id1">
<h3>GeantV<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://geant.cern.ch/content/publications">http://geant.cern.ch/content/publications</a></li>
</ul>
</div>
<div class="section" id="usolids">
<h3>USolids<a class="headerlink" href="#usolids" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://indico.cern.ch/event/149557/contributions/1385755/attachments/150293/212884/usolids-chep4.pdf">https://indico.cern.ch/event/149557/contributions/1385755/attachments/150293/212884/usolids-chep4.pdf</a></li>
<li>Location of point either inside, outside or on surface</li>
<li>Shortest distance to surface for outside points</li>
<li>Shortest distance to surface for inside points</li>
<li>Distance to surface for inside points with given direction</li>
<li>Distance to surface for outside points with given direction</li>
<li>Normal vector for closest surface from given point</li>
</ul>
<p>CURIOUS:</p>
<ul class="simple">
<li>what in Geant4 needs the shortest distance methods ?</li>
</ul>
<div class="sidebar">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>