<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PyCUDA Debugging &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" />
    <link rel="up" title="pycuda" href="../" />
    <link rel="next" title="PyCUDA Error Handling" href="../pycuda_error_handling/" />
    <link rel="prev" title="PyCUDA References" href="../pycuda_refs/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../pycuda_error_handling/" title="PyCUDA Error Handling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../pycuda_refs/" title="PyCUDA References"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" accesskey="U">pycuda</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">pycuda</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../pycuda_bash/">PYCUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pycuda_refs/">PyCUDA References</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">PyCUDA Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pycuda_error_handling/">PyCUDA Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pycuda_pyopengl_interop/">pycuda_pyopengl_interop</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/pycuda/pycuda_debugging.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../pycuda_refs/"
                        title="previous chapter">PyCUDA References</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../pycuda_error_handling/"
                        title="next chapter">PyCUDA Error Handling</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pycuda-debugging">
<h1>PyCUDA Debugging<a class="headerlink" href="#pycuda-debugging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cuda-gdb">
<h2>cuda-gdb<a class="headerlink" href="#cuda-gdb" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>(chroma_env)delta:chroma_camera blyth$ cuda-gdb --args python -m pycuda.debug simplecamera.py -s3199 -d3 -f10 --eye=0,1,0 --lookat=10,0,10  -i
NVIDIA (R) CUDA Debugger
5.5 release
Portions Copyright (C) 2007-2013 NVIDIA Corporation
GNU gdb (GDB) 7.2
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin11.4.2".
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;...
Reading symbols from /usr/local/env/chroma_env/bin/python...(no debugging symbols found)...done.
(cuda-gdb) r
Starting program: /usr/local/env/chroma_env/bin/python -m pycuda.debug simplecamera.py -s3199 -d3 -f10 --eye=0,1,0 --lookat=10,0,10 -i
warning: Could not open OSO archive file "/opt/local/var/macports/build/_opt_mports_dports_lang_python27/python27/work/Python-2.7.6/libpython2.7.a"
warning: Could not open OSO archive file "/BinaryCache/Libsyscall/Libsyscall-2422.90.20~2/Symbols/BuiltProducts/libsystem_kernel.a"
warning: `/private/var/tmp/Libsyscall/Libsyscall-2422.90.20~2/Libsyscall.build/Libsyscall_dynamic.build/Objects-normal/x86_64/_libc_funcptr.o': can't open to read symbols: No such file or directory.
warning: `/private/var/tmp/Libsyscall/Libsyscall-2422.90.20~2/Libsyscall.build/Libsyscall_dynamic.build/Objects-normal/x86_64/kernel_vers.o': can't open to read symbols: No such file or directory.
warning: `/private/var/tmp/Libsyscall/Libsyscall-2422.90.20~2/Libsyscall.build/Libsyscall_dynamic.build/Objects-normal/x86_64/memcpy.o': can't open to read symbols: No such file or directory.
warning: `/private/var/tmp/Libsyscall/Libsyscall-2422.90.20~2/Libsyscall.build/Libsyscall_dynamic.build/Objects-normal/x86_64/strcmp.o': can't open to read symbols: No such file or directory.
...
WARNING:env.geant4.geometry.collada.daenode:failed to find parent for   top.0             -  (failure expected only for root node)
WARNING:env.geant4.geometry.collada.collada_to_chroma:setting parent_material to __dd__Materials__Vacuum0xaf1d298 as parent is None for node top.0
INFO:chroma:Flattening detector mesh...
INFO:chroma:  triangles: 2483650
INFO:chroma:  vertices:  1264049
INFO:chroma:Loading BVH "default" for geometry from cache.
INFO:chroma:Camera.__init__
-s/--solid           : 3199
-e/--eye             : [ 0.  1.  0.]
-a/--lookat          : [ 10.   0.  10.]
-u/--up              : [-1.  0.  0.]
-r/--size            : [640, 480]
-d/--alpha-max       : 3
-f/--focal-length    : 10
-r/--radius          : 0.5
[New Thread 0x1653 of process 960]
warning: `/opt/local/var/macports/build/_opt_mports_dports_lang_python27/python27/work/Python-2.7.6/build/temp.macosx-10.9-x86_64-2.7/opt/local/var/macports/build/_opt_mports_dports_lang_python27/python27/work/Python-2.7.6/Mac/Modules/MacOS.o': can't open to read symbols: No such file or directory.
warning: `/opt/local/var/macports/build/_opt_mports_dports_lang_python27/python27/work/Python-2.7.6/build/temp.macosx-10.9-x86_64-2.7/opt/local/var/macports/build/_opt_mports_dports_lang_python27/python27/work/Python-2.7.6/Modules/parsermodule.o': can't open to read symbols: No such file or directory.
warning: `/opt/local/var/macports/build/_opt_mports_dports_python_py-game/py27-game/work/pygame-1.9.1release/build/temp.macosx-10.9-x86_64-2.7/src/sdlmain_osx.o': can't open to read symbols: No such file or directory.
[New Thread 0x181b of process 960]
[New Thread 0x1903 of process 960]
[New Thread 0x1a03 of process 960]
[New Thread 0x1b03 of process 960]
warning: `/private/var/tmp/CoreServicesInternal/CoreServicesInternal-184.9~1/CoreServicesInternal.build/CoreServicesInternal.build/Objects-normal/x86_64/BookmarkCommon.o': can't open to read symbols: No such file or directory.
warning: `/private/var/tmp/CoreServicesInternal/CoreServicesInternal-184.9~1/CoreServicesInternal.build/CoreServicesInternal.build/Objects-normal/x86_64/BookmarkData.o': can't open to read symbols: No such file or directory.
...
...
warning: `/private/var/tmp/CoreServicesInternal/CoreServicesInternal-184.9~1/CoreServicesInternal.build/CoreServicesInternal.build/Objects-normal/x86_64/ScopedBookmarksClient.o': can't open to read symbols: No such file or directory.
warning: `/private/var/tmp/CoreServicesInternal/CoreServicesInternal-184.9~1/CoreServicesInternal.build/CoreServicesInternal.build/Objects-normal/x86_64/ftsattr.o': can't open to read symbols: No such file or directory.
[New Thread 0x1c0b of process 960]
[New Thread 0x1d23 of process 960]
[New Thread 0x1e1b of process 960]
INFO:chroma:using bounds (array([ -16701.390625  , -801625.6875    ,   -8942.78808594], dtype=float32), array([ -16431.1953125 , -801339.5625    ,   -8742.21191406], dtype=float32)) for solid_index 3199
cam_up (axis2)   [-0.50248756 -0.04975124  0.49751244]
left   (axis1)   [ 0.          0.70534562  0.07053456]
forward          [ 0.70534562 -0.07053456  0.70534562]
radius               : 0.5
ball_center          : [ 320.  240.]
ball_radius          : 200.0
[New Thread 0x1f2b of process 960]
[New Thread 0x15d7 of process 960]
[Context Create of context 0x113aa6e00 on Device 0]
A device about to be used for compute may already be in use for graphics.
This is an unsupported scenario. Further debugging might be unsafe. Aborting.
Disable the 'cuda gpu_busy_check' option to bypass the checking mechanism.
(cuda-gdb)</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://stackoverflow.com/questions/19138670/cuda-debug-in-mac-error-a-device-about-to-be-used-for-compute-may-already-be">http://stackoverflow.com/questions/19138670/cuda-debug-in-mac-error-a-device-about-to-be-used-for-compute-may-already-be</a></li>
<li><a class="reference external" href="http://www.google.com/search?q=A device about to be used for compute may already be in use for graphics.">google:A device about to be used for compute may already be in use for graphics.</a></li>
<li><a class="reference external" href="https://devtalk.nvidia.com/default/topic/627584/cuda-gdb/cuda-gdb-on-mavericks/">https://devtalk.nvidia.com/default/topic/627584/cuda-gdb/cuda-gdb-on-mavericks/</a></li>
</ul>
<p>Debugging with the window server running (desktop) on Mac is only supported
when the device is not used for graphics. This is what they debugger <cite>cuda gpu_busy_check</cite>
verifies. You can override it at your own risks. If the device
is used for display, hitting a breakpoint in your cuda application will freeze
the display.</p>
<p>To help mitigate the problem, you can try to:</p>
<ol class="arabic simple">
<li>disable any form of hardware acceleration</li>
<li>do not use anything openGL and the like</li>
<li>disable Automatic Graphics Switching in the System Settings-&gt;Energy Saver tab.</li>
</ol>
<p>Some more information can be found at</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.nvidia.com/cuda/cuda-gdb/index.html#single-gpu-debugging">http://docs.nvidia.com/cuda/cuda-gdb/index.html#single-gpu-debugging</a></li>
</ul>
</div>
<div class="section" id="osx-console-login">
<h2>OSX console login<a class="headerlink" href="#osx-console-login" title="Permalink to this headline">¶</a></h2>
<p>Need to switch off auto login and add name and password in <cite>Prefs &gt; Users and Groups</cite></p>
<ul class="simple">
<li><a class="reference external" href="http://www.tuaw.com/2011/02/26/little-known-options-for-the-os-x-login-window/">http://www.tuaw.com/2011/02/26/little-known-options-for-the-os-x-login-window/</a></li>
<li><a class="reference external" href="http://apple.stackexchange.com/questions/85742/console-does-not-work">http://apple.stackexchange.com/questions/85742/console-does-not-work</a></li>
</ul>
<p>Enabled root user, but still cannot do the console login. The trick is
to login as <cite>&gt;console</cite> with the greater than sign, then you enter an
admin password.  The result is tiny text on retina screen, notes that
network and SVN works in this mode.</p>
<p>Need to work out how to tickle the issue in headless manner.</p>
</div>
<div class="section" id="pygame-headless">
<h2>pygame headless<a class="headerlink" href="#pygame-headless" title="Permalink to this headline">¶</a></h2>
<p>See <cite>/opt/local/share/doc/py27-game/examples/headless_no_windows_needed.py</cite></p>
<ul class="simple">
<li></li>
</ul>
</div>
<div class="section" id="observations">
<h2>observations<a class="headerlink" href="#observations" title="Permalink to this headline">¶</a></h2>
<p>Device memory usage logged varies a lot:</p>
<div class="highlight-python"><pre>INFO:chroma:Optimization: Sufficient memory to move triangles onto GPU
INFO:chroma:Optimization: Sufficient memory to move vertices onto GPU
INFO:chroma:device usage:
----------
nodes             2.8M  44.7M
total                   44.7M
----------
device total             2.1G
device used              1.6G
device free            568.2M</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../pycuda_error_handling/" title="PyCUDA Error Handling"
             >next</a> |</li>
        <li class="right" >
          <a href="../pycuda_refs/" title="PyCUDA References"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" >pycuda</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>