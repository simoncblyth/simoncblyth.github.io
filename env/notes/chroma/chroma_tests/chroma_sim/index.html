<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Forking Multiprocessing pycuda &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../" />
    <link rel="up" title="tests" href="../" />
    <link rel="next" title="cube example" href="../chroma_cube/" />
    <link rel="prev" title="bin/chroma-cam" href="../chroma_cam/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../chroma_cube/" title="cube example"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../chroma_cam/" title="bin/chroma-cam"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >chroma</a> &raquo;</li>
          <li><a href="../" accesskey="U">tests</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">chroma</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../chroma_issues/">Chroma Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma/">CHROMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_chroma_works/">How Chroma Works ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/">Chroma Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../refs/">Chroma Refs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_prerequisites/">Chroma Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_geant4_integration/">Chroma Geant4 Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_nuwa_geant4_integration/">Chroma/NuWa/Geant4 Integration with ZeroMQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_nuwa_integration/">Chroma NuWa Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_cuda_photon/">Chroma CUDA Photon handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_collada/">Chroma COLLADA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_pycuda/">Getting to know how Chroma uses PyCUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_geometry/">Chroma Geometry Source Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_materials/">Chroma Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_propagate/">Photon Propagation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_physics/">Chroma Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_detector/">Chroma Modeling of Sensitive Detectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_server/">Chroma Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_zeromq/">Chroma ZeroMQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_camera/">chroma_camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_sim/">chroma_sim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_cuda_freeze/">Chroma CUDA Freeze</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_cuda/">Chroma CUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_visualisation/">Chroma Visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geant4_background/">Geant4 Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cuda_background/">Cuda Threads and Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bvh_background/">Bounding Volume Hierarchy (BVH)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chroma_install/">install issues</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ChromaZMQRootTest/">ChromaZMQRootTest</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/chroma/chroma_tests/chroma_sim.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../chroma_cam/"
                        title="previous chapter">bin/chroma-cam</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../chroma_cube/"
                        title="next chapter">cube example</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="forking-multiprocessing-pycuda">
<h1>Forking Multiprocessing pycuda<a class="headerlink" href="#forking-multiprocessing-pycuda" title="Permalink to this headline">¶</a></h1>
<p>From <cite>benchmark.py</cite> a relevant comment:</p>
<div class="highlight-python"><pre>19 # Generator processes need to fork BEFORE the GPU context is setup
20 g4generator = generator.photon.G4ParallelGenerator(4, water)</pre>
</div>
<p>This presumably means all processes will use their own GPU context ?</p>
<div class="section" id="crux-of-chroma-sim">
<h2>crux of <cite>chroma-sim</cite><a class="headerlink" href="#crux-of-chroma-sim" title="Permalink to this headline">¶</a></h2>
<p>It appears that there is no provision for setting up dummy
materials for model stl files (these are just lists of vertices and faces ?).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">detector</span> <span class="o">=</span> <span class="n">chroma</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_geometry_from_string</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">pos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">options</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="nb">dir</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">options</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

<span class="n">ev_gen</span> <span class="o">=</span> <span class="n">constant_particle_gun</span><span class="p">(</span><span class="n">particle_name</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">particle</span><span class="p">,</span>
                               <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="nb">dir</span><span class="p">,</span> <span class="n">ke</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">ke</span><span class="p">)</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">(</span><span class="n">detector</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">seed</span><span class="p">,</span> <span class="n">cuda_device</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
                 <span class="n">geant4_processes</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">ngenerators</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;RNG seed: </span><span class="si">%i</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">sim</span><span class="o">.</span><span class="n">seed</span>

<span class="n">writer</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">RootWriter</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">output_filename</span><span class="p">)</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ev</span> <span class="ow">in</span> \
        <span class="nb">enumerate</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">ev_gen</span><span class="p">,</span>
                                                <span class="n">options</span><span class="o">.</span><span class="n">nevents</span><span class="p">),</span>
                               <span class="n">keep_photons_beg</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">save_photons_beg</span><span class="p">,</span>
                               <span class="n">keep_photons_end</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">save_photons_end</span><span class="p">)):</span>
    <span class="k">print</span> <span class="s">&#39;</span><span class="se">\r</span><span class="s">Event: </span><span class="si">%i</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">ev</span><span class="o">.</span><span class="n">nphotons</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;Geant4 generated event with no photons!&#39;</span>

    <span class="n">writer</span><span class="o">.</span><span class="n">write_event</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="observations">
<h2>Observations<a class="headerlink" href="#observations" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>material definitions are needed</li>
<li>possible issue with multiprocessing and pycuda</li>
</ol>
<div class="highlight-python"><pre>(chroma_env)delta:bin blyth$ chroma-sim ../chroma/models/liberty.stl
INFO:chroma:Flattening detector mesh...
INFO:chroma:  triangles: 17060
INFO:chroma:  vertices:  8573
INFO:chroma:Loading BVH "default" for geometry from cache.
Process G4GeneratorProcess-3:
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
Process G4GeneratorProcess-2:
    self.run()
Traceback (most recent call last):
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
Process G4GeneratorProcess-1:
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
    g4material = G4Material('world_material', material.density * g / cm3,
Traceback (most recent call last):
AttributeError: 'NoneType' object has no attribute 'density'
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
    self.run()
Process G4GeneratorProcess-4:
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
Traceback (most recent call last):
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
    g4material = G4Material('world_material', material.density * g / cm3,
    g4material = G4Material('world_material', material.density * g / cm3,
AttributeError: 'NoneType' object has no attribute 'density'
AttributeError: 'NoneType' object has no attribute 'density'
    self.run()
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
    g4material = G4Material('world_material', material.density * g / cm3,
AttributeError: 'NoneType' object has no attribute 'density'
Traceback (most recent call last):
  File "/usr/local/env/chroma_env/bin/chroma-sim", line 8, in &lt;module&gt;
    execfile(__file__)
  File "/usr/local/env/chroma_env/src/chroma/bin/chroma-sim", line 115, in &lt;module&gt;
    main()
  File "/usr/local/env/chroma_env/src/chroma/bin/chroma-sim", line 91, in main
    geant4_processes=options.ngenerators)
  File "/usr/local/env/chroma_env/src/chroma/chroma/sim.py", line 41, in __init__
    self.context = gpu.create_cuda_context(cuda_device)
  File "/usr/local/env/chroma_env/src/chroma/chroma/gpu/tools.py", line 129, in create_cuda_context
    cuda.init()
pycuda._driver.RuntimeError: cuInit failed: no device
Exception AttributeError: "'Simulation' object has no attribute 'context'" in &lt;bound method Simulation.__del__ of &lt;chroma.sim.Simulation object at 0x1184675d0&gt;&gt; ignored
(chroma_env)delta:bin blyth$ :</pre>
</div>
<p>Seen this before, it cuInit fails to find the device on the first try:</p>
<div class="highlight-python"><pre>(chroma_env)delta:bin blyth$ chroma-sim ../chroma/models/companioncube.stl
INFO:chroma:Flattening detector mesh...
INFO:chroma:  triangles: 17245
INFO:chroma:  vertices:  8567
INFO:chroma:Building new BVH using recursive grid algorithm.
Expanding 170 parent nodes
Merging 17245 nodes to 5451 parents
Expanding 46 parent nodes
Merging 5691 nodes to 1327 parents
Merging 1373 nodes to 296 parents
Merging 296 nodes to 56 parents
Merging 56 nodes to 16 parents
Merging 16 nodes to 4 parents
Merging 4 nodes to 1 parent
INFO:chroma:BVH generated in 0.6 seconds.
INFO:chroma:Saving BVH (2c45445ab0a39d1ddd3c348400a7fd91:default) to cache.
Process G4GeneratorProcess-1:
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
    g4material = G4Material('world_material', material.density * g / cm3,
AttributeError: 'NoneType' object has no attribute 'density'
Process G4GeneratorProcess-2:
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
Process G4GeneratorProcess-3:
    g4material = G4Material('world_material', material.density * g / cm3,
AttributeError: 'NoneType' object has no attribute 'density'
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
    g4material = G4Material('world_material', material.density * g / cm3,
AttributeError: 'NoneType' object has no attribute 'density'
Process G4GeneratorProcess-4:
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/photon.py", line 20, in run
    gen = g4gen.G4Generator(self.material, seed=self.seed)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 42, in __init__
    self.world_material = self.create_g4material(material)
  File "/usr/local/env/chroma_env/src/chroma/chroma/generator/g4gen.py", line 59, in create_g4material
    g4material = G4Material('world_material', material.density * g / cm3,
AttributeError: 'NoneType' object has no attribute 'density'
INFO:chroma:Optimization: Sufficient memory to move triangles onto GPU
INFO:chroma:Optimization: Sufficient memory to move vertices onto GPU
INFO:chroma:device usage:
----------
nodes            24.7K 394.9K
total                  394.9K
----------
device total             2.1G
device used            238.8M
device free              1.9G

RNG seed: 3020167515</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../chroma_cube/" title="cube example"
             >next</a> |</li>
        <li class="right" >
          <a href="../chroma_cam/" title="bin/chroma-cam"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >chroma</a> &raquo;</li>
          <li><a href="../" >tests</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>