<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Ideas &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/ggeoview/ideas.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="ideas">
<h1>Ideas<a class="headerlink" href="#ideas" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sampling">
<h2>Sampling<a class="headerlink" href="#sampling" title="Permalink to this headline">¶</a></h2>
<div class="section" id="from-chep-2015-proceedings">
<h3>From CHEP 2015 Proceedings<a class="headerlink" href="#from-chep-2015-proceedings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://iopscience.iop.org/issue/1742-6596/664/9">http://iopscience.iop.org/issue/1742-6596/664/9</a></li>
<li><a class="reference external" href="http://iopscience.iop.org/article/10.1088/1742-6596/664/9/092013">http://iopscience.iop.org/article/10.1088/1742-6596/664/9/092013</a></li>
</ul>
<p>First experience of vectorizing electromagnetic physics models for detector simulation</p>
<p>Alias sampling is suggested as better for parallelisation than acceptance-rejection
method.</p>
<div class="highlight-python"><pre>This may well be the case, but the elephant in the room (for optical physics anyhow)
is geometrical intersection, not rng sampling</pre>
</div>
</div>
<div class="section" id="alias-method">
<h3>Alias Method<a class="headerlink" href="#alias-method" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference external" href="https://en.wikipedia.org/wiki/Alias_method">https://en.wikipedia.org/wiki/Alias_method</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://apps.jcns.fz-juelich.de/doku/sc/ransampl">http://apps.jcns.fz-juelich.de/doku/sc/ransampl</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.keithschwarz.com/darts-dice-coins/">http://www.keithschwarz.com/darts-dice-coins/</a></p>
<p>Extensive explanation of alias method</p>
</li>
</ul>
</div>
</div>
<div class="section" id="geometry">
<h2>Geometry<a class="headerlink" href="#geometry" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prism-tir">
<h3>Prism TIR<a class="headerlink" href="#prism-tir" title="Permalink to this headline">¶</a></h3>
<p>Implement Prism (triangular half cube)</p>
</div>
<div class="section" id="cartesian-oval-surface-of-revolution">
<h3>Cartesian Oval Surface of Revolution<a class="headerlink" href="#cartesian-oval-surface-of-revolution" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Cartesian_oval">https://en.wikipedia.org/wiki/Cartesian_oval</a> (Hecht p130)</li>
</ul>
<div class="highlight-python"><pre>l0 n1 + li n2 = constant</pre>
</div>
</div>
<div class="section" id="practicalities">
<h3>Practicalities<a class="headerlink" href="#practicalities" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>enable test geometry to somehow fallback to triangulated when no anlytic</li>
</ul>
</div>
</div>
<div class="section" id="optical-tests">
<h2>Optical Tests<a class="headerlink" href="#optical-tests" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="spherical-interface-refraction">
<h2>Spherical Interface Refraction<a class="headerlink" href="#spherical-interface-refraction" title="Permalink to this headline">¶</a></h2>
<p>p133 Hecht, refraction at spherical interface:</p>
<div class="highlight-python"><pre>.
                             /
                            A
                           /
      SA = l0             /           AP = li
                         /
                         |
S -----------------------V             C        P
.                        .                      .
|         so             |          si          |



S : point source
C : center of sphere
P : point where ray crosses axis

phi        : angle SCA
180. - phi : angle PCA


law of cosines for triangles SAC and ACP
and angle relation: SCA + PCA = pi

optical path length,  OPL = n1 l0 + n2 li

Fermats principle, dOPL/dx = 0   (derivative with position variable)

n1 R (s0 + R) sin(phi)      n2 R (si - R ) sin(phi)
----------------------  -   ------------------------  = 0
    2 l0                             2 li

yielding relation between parameters of ray going from S to P via refraction at spherical interface

n1     n2       1  /  n2 si     n1 so   \
--  +  --   =   -- |  ----- -  -------  |
l0     li       R  \    li       l0     /

small angle assumption A close to V,  cos(phi) ~ 1  sin(phi) ~ phi
(this assumption corresponds to paraxial rays and is known as Gaussian Optics)

l0 ~ s0
li ~ si

n1     n2      n2 - n1
--  +  --  =   -------
s0     si         R</pre>
</div>
<div class="section" id="thin-gaussian-lens">
<h3>Thin Gaussian Lens<a class="headerlink" href="#thin-gaussian-lens" title="Permalink to this headline">¶</a></h3>
<p>p138 Hecht, spherical lens assuming small angles from optical axis (paraxial rays)</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div>/<a href="#id1"><span class="problematic" id="id2">|</span></a></div></blockquote>
<p>/ | </p>
</div></blockquote>
<p>/  |  </p>
</div></blockquote>
<dl class="docutils">
<dt>C2      V1  |  V2       C1</dt>
<dd><dl class="first last docutils">
<dt> |  /</dt>
<dd><dl class="first last docutils">
<dt>| /</dt>
<dd>|/</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<div class="line-block">
<div class="line">|   d   |        |</div>
</div>
<div class="line-block">
<div class="line">R2        |</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">R1      |</div>
</div>
</div></blockquote>
</div></blockquote>
<p>C1 - R1 + d = C2 + R2</p>
<blockquote>
<div>d  = R2 + R1 - (C2 - C1)</div></blockquote>
</div></blockquote>
<p>nm      nm                /  1     1           nl d
&#8212;  +  &#8212;  =  (nl - nm) |  -  -  -   |   +  &#8212;&#8212;&#8212;&#8212;
so1     si2                R1    R2  /      (si1 - d)sil</p>
</div></blockquote>
<p>Thin lens assumption removes the d term, and simplify with air/vacuum nm=1 get
relation between object and image distances:</p>
<div class="highlight-python"><pre>1      1         1                /  1      1   \
--  +  ---   =   --  =   (nl - 1) |  --  -  --  |
so     si        f                \  R1     R2  /


                     =   2 (nl - 1 )        for R1 = -R2 = R
                         -----------
                              R</pre>
</div>
<p>With parallel rays, 1/so = 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">si</span> <span class="o">=</span> <span class="n">f</span> <span class="o">=</span>   <span class="n">R</span> <span class="o">/</span> <span class="mi">2</span><span class="p">(</span><span class="n">nl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>For example Vacuum/Pyrex:</p>
<div class="highlight-python"><pre>ggv --mat Pyrex   # index 1.458

si = f = R * 1.0917

In [2]: 1./(2*(1.458-1.))
Out[2]: 1.091703056768559

In [3]: 700./1.091703056768559
Out[3]: 641.1999999999999</pre>
</div>
<p>Pick radius to make focus at edge of box:</p>
<div class="highlight-python"><pre>local test_config=(
             mode=BoxInBox
             analytic=1

             shape=B,L

             boundary=Rock//perfectAbsorbSurface/Vacuum
             parameters=-1,1,0,700

             boundary=Vacuum///Pyrex
             parameters=641.2,641.2,-600,600

           )</pre>
</div>
<p>Visually at least, get the expected focus point.</p>
<p>TODO:</p>
<ul class="simple">
<li>numerical check of focus coordinates, using the record data, incorporating
lens thickness</li>
</ul>
</div>
<div class="section" id="dispersing-prisms">
<h3>Dispersing Prisms<a class="headerlink" href="#dispersing-prisms" title="Permalink to this headline">¶</a></h3>
<p>Hecht p163, deviation angle as function of prism apex angle, refractive index and incident normal angle.
Minimum deviation occurs where ray traverses symmetrically.</p>
<p>How to define a symmetric prism</p>
<ul class="simple">
<li>apex angle A, height h, depth d</li>
</ul>
<div class="highlight-python"><pre>.
                 A  (0,h)
                /|\
               / | \
              /  |  \
             /   h   \
            /    |    \ (x,y)
           M     |     N
          /      |      \
         C-------O-------B

               (0,0)
      (-a/2,0)         (a/2, 0)


  angles B = C = (180 - A)/2



               a/2
  tan(A/2) = --------
                h

  a/2 = h tan(A/2)

  need plane eqns of faces

  AB direction : ( 0, h) - (a/2, 0)  = (-a/2, h)    ON direction (h, a/2)
  AC direction : ( 0, h) - (-a/2, 0) = ( a/2, h)    OM direction (h, -a/2)

  (-a/2, h ).( h, a/2 ) = 0



  ON. A = (h, a/2)  . (0, h ) =  ah/2
  OM. A = (h, -a/2) . (0, h ) = -ah/2


  hmm can I calc the planes whilst calulating the bounds...

  plane N
      (h, a/2, 0 )     ah/2

  plane M
      (h, -a/2, 0)     -ah/2

  plane O
      (0, -1,  0)       0

  plane F
      (0,  0,  1)       d/2

  plane B
      (0,  0, -1)      -d/2





  plane containing

  A    (0,  h,0)
  B    (a/2,0,0)
  B'   (a/2,0,d)</pre>
</div>
</div>
<div class="section" id="dispersion">
<h3>Dispersion<a class="headerlink" href="#dispersion" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>dispersion angle calculation yields refractive index, so
predict the refractive index as a function of wavelength
from the angle and compare<ul>
<li>or fabricate a material with a linear refractive index</li>
</ul>
</li>
</ul>
<div class="sidebar">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>