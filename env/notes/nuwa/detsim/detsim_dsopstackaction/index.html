<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>NuWa DetSim DsOpStackAction &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../" />
    <link rel="up" title="detsim" href="../" />
    <link rel="next" title="NuWa DetSim DsFastMuonStackAction" href="../detsim_dsfastmuonstackaction/" />
    <link rel="prev" title="DetSim Configuration" href="../detsim_configuration/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../detsim_dsfastmuonstackaction/" title="NuWa DetSim DsFastMuonStackAction"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../detsim_configuration/" title="DetSim Configuration"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >nuwa</a> &raquo;</li>
          <li><a href="../" accesskey="U">detsim</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../javascript/">javascript</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">nuwa</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../dybinst_mavericks/">NuWa on Mavericks</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">detsim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../eventdisplay/">eventdisplay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nuwa_cmt_debugging/">NuWa CMT Debugging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/nuwa/detsim/detsim_dsopstackaction.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../detsim_configuration/"
                        title="previous chapter">DetSim Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../detsim_dsfastmuonstackaction/"
                        title="next chapter">NuWa DetSim DsFastMuonStackAction</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="nuwa-detsim-dsopstackaction">
<h1>NuWa DetSim DsOpStackAction<a class="headerlink" href="#nuwa-detsim-dsopstackaction" title="Permalink to this headline">¶</a></h1>
<p><cite>DsOpStackAction</cite></p>
<ol class="arabic simple">
<li>doesnt actually store photons,</li>
<li>just provides classification <cite>fKill/fWaiting/fUrgent</cite> that directs G4 which stack to place things on<ul>
<li>are the G4 stacks accessible without patching ? <strong>NO</strong> can access stackManager but no access to stacks</li>
<li>convert that into <cite>ChromaPhotonList</cite></li>
</ul>
</li>
</ol>
<div class="section" id="related">
<h2>Related<a class="headerlink" href="#related" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../../chroma/chroma_geant4_integration/"><em>Chroma Geant4 Integration</em></a></li>
<li><a class="reference internal" href="../../../chroma/chroma_nuwa_geant4_integration/"><em>Chroma/NuWa/Geant4 Integration with ZeroMQ</em></a></li>
<li><a class="reference internal" href="../../../geant4/event/geant4_stackingaction/"><em>Geant4 StackingAction</em></a></li>
<li><a class="reference internal" href="../../../geant4/event/geant4_stackmanager/"><em>Geant4 StackManager</em></a></li>
</ul>
</div>
<div class="section" id="classifynewtrack">
<h2>ClassifyNewTrack<a class="headerlink" href="#classifynewtrack" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>63 G4ClassificationOfNewTrack DsOpStackAction::ClassifyNewTrack (const G4Track* aTrack) {</pre>
</div>
</div>
<div class="section" id="dsopstackaction-basis">
<h2>DsOpStackAction Basis<a class="headerlink" href="#dsopstackaction-basis" title="Permalink to this headline">¶</a></h2>
<p><cite>NuWa-trunk/dybgaudi/Simulation/DetSim/src/DsOpStackAction.h</cite>:</p>
<div class="highlight-python"><pre>26
27 class DsOpStackAction :  public GiGaStackActionBase
28 {</pre>
</div>
</div>
<div class="section" id="g4userstackingaction">
<h2>G4UserStackingAction<a class="headerlink" href="#g4userstackingaction" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../../geant4/event/geant4_stackingaction/"><em>Geant4 StackingAction</em></a></li>
<li><a class="reference internal" href="../../../geant4/event/geant4_stackmanager/"><em>Geant4 StackManager</em></a></li>
</ul>
<p><cite>source/event/include/G4UserStackingAction.hh</cite>:</p>
<div class="highlight-python"><pre>44 class G4UserStackingAction
45 {
46   public:
47       G4UserStackingAction();
48       virtual ~G4UserStackingAction();
49   protected:
50       G4StackManager * stackManager;
51   public:
52       inline void SetStackManager(G4StackManager * value)
53       { stackManager = value; }
54
55   public: // with description
56 //---------------------------------------------------------------
57 // vitual methods to be implemented by user
58 //---------------------------------------------------------------
59 //
60       virtual G4ClassificationOfNewTrack
61         ClassifyNewTrack(const G4Track* aTrack);</pre>
</div>
</div>
<div class="section" id="gigastackactionbase">
<h2>GiGaStackActionBase<a class="headerlink" href="#gigastackactionbase" title="Permalink to this headline">¶</a></h2>
<p><cite>NuWa-trunk/lhcb/Sim/GiGa/GiGa/GiGaStackActionBase.h</cite>:</p>
<div class="highlight-python"><pre>26 class GiGaStackActionBase:
27   public virtual IGiGaStackAction   ,
28   public          GiGaBase
29 {</pre>
</div>
<div class="section" id="id1">
<h3>ClassifyNewTrack<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>67   /** From G4:
68
69       Reply G4ClassificationOfNewTrack determined by the
70       newly coming G4Track.
71
72       enum G4ClassificationOfNewTrack
73       {
74       fUrgent,    // put into the urgent stack
75       fWaiting,   // put into the waiting stack
76       fPostpone,  // postpone to the next event
77       fKill       // kill without stacking
78       };
79
80       The parent_ID of the track indicates the origin of it.
81       G4int parent_ID = aTrack-&gt;get_parentID();
82
83       parent_ID = 0 : primary particle
84       parent_ID &gt; 0 : secondary particle
85       parent_ID &lt; 0 : postponed from the previous event
86   */
87   virtual G4ClassificationOfNewTrack ClassifyNewTrack ( const G4Track* ) ;
88</pre>
</div>
</div>
<div class="section" id="newstage">
<h3>NewStage<a class="headerlink" href="#newstage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>089   /** From G4:
090
091       This method is called by G4StackManager when the urgentStack
092       becomes empty and contents in the waitingStack are transtered
093       to the urgentStack.
094
095       Note that this method is not called at the begining of each
096       event, but "PrepareNewEvent" is called.
097
098       In case re-classification of the stacked tracks is needed,
099       use the following method to request to G4StackManager.
100
101       stackManager-&gt;ReClassify();
102
103       All of the stacked tracks in the waitingStack will be re-classified
104       by "ClassifyNewTrack" method.
105
106       To abort current event, use the following method.
107       stackManager-&gt;clear();
108
109       Note that this way is valid and safe only for the case it is called
110       from this user class. The more global way of event abortion is
111
112       G4UImanager * UImanager = G4UImanager::GetUIpointer();
113       UImanager-&gt;ApplyCommand("/event/abort");
114   */
115   virtual void                       NewStage         ();</pre>
</div>
<ul class="simple">
<li>hmm where is <cite>stackManager</cite> coming from ?</li>
</ul>
</div>
<div class="section" id="preparenewevent">
<h3>PrepareNewEvent<a class="headerlink" href="#preparenewevent" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>117   /** From G4:
118
119       This method is called by G4StackManager at the begining of
120       each event.
121
122       Be careful that the urgentStack and the waitingStack of
123       G4StackManager are empty at this moment, because this method
124       is called before accepting primary particles. Also, note that
125       the postponeStack of G4StackManager may have some postponed
126       tracks.
127   */
128   virtual void                       PrepareNewEvent  ();</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../detsim_dsfastmuonstackaction/" title="NuWa DetSim DsFastMuonStackAction"
             >next</a> |</li>
        <li class="right" >
          <a href="../detsim_configuration/" title="DetSim Configuration"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >nuwa</a> &raquo;</li>
          <li><a href="../" >detsim</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>