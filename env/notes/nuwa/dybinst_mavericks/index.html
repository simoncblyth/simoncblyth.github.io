<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>NuWa on Mavericks &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" />
    <link rel="up" title="nuwa" href="../" />
    <link rel="next" title="detsim" href="../detsim/" />
    <link rel="prev" title="nuwa" href="../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../detsim/" title="detsim"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="nuwa"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" accesskey="U">nuwa</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">nuwa</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">NuWa on Mavericks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detsim/">detsim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nuwa_cmt_debugging/">NuWa CMT Debugging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/nuwa/dybinst_mavericks.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">nuwa</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../detsim/"
                        title="next chapter">detsim</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="nuwa-on-mavericks">
<h1>NuWa on Mavericks<a class="headerlink" href="#nuwa-on-mavericks" title="Permalink to this headline">Â¶</a></h1>
<p>Getting NuWa installed on Mavericks, with clang will take effort:</p>
<div class="highlight-python"><pre>delta:~ blyth$ dybinst-
delta:~ blyth$ dybinst-cd
delta:dyb blyth$ dybinst-all
Setting MACOSX_DEPLOYMENT_TARGET=10.9
Checking out installation directory installation/trunk/dybinst.
Making directory ./external


Wed Feb 12 11:19:47 CST 2014
Start Logging to /usr/local/env/dyb/dybinst-20140212-111947.log (or dybinst-recent.log)


Starting dybinst commands: cmt checkout external optional projects

Stage: "cmt"...

Downloading http://dayabay.bnl.gov/software/offline/tarFiles/CMT/v1r20p20080222/CMTv1r20p20080222.tar.gz ...done
Unpacking CMTv1r20p20080222.tar.gz ...done
Building CMT ...
Stage: "checkout"...

SVN checkout http://dayabay.ihep.ac.cn/svn/dybsvn/NuWa/trunk to /usr/local/env/dyb/NuWa-trunk ...
done
Command: svn co -q http://dayabay.ihep.ac.cn/svn/dybsvn/NuWa/trunk /usr/local/env/dyb/NuWa-trunk
done
Found CMTCONFIG="i386-darwin-UnknownCompiler-dbg" from lcgcmt
Checking your CMTCONFIG="i386-darwin-UnknownCompiler-dbg"...
#CMT&gt; Warning: apply_tag with empty name [$(cmt_compiler_version)]
#CMT&gt; Warning: apply_tag with empty name [$(cmt_compiler_version)]

ERROR: CMTCONFIG is not compatible!

CMTCONFIG is:   "i386-darwin-UnknownCompiler-dbg"
Should be like: "i386-darwin-UnknownCompiler-dbg"

You may be explicitly defining CMTCONFIG or you are using a platform
that is not yet supported.  If you don't care about what CMTCONFIG is
set to, then do not set it prior to running dybinst.  If you do want
to force CMTCONFIG or you have a new platform you must add support

To add support you must edit:

  NuWa-trunk/lcgcmt/LCG_Settings/cmt/requirements

1) If the CMTCONFIG shown above has any "Unknown" parts you must add
various host-* tags based on the intrisic output of:

$ cmt show tags
CMTv1 (from CMTVERSION)
CMTr20 (from CMTVERSION)
CMTp20080222 (from CMTVERSION)
Darwin (from uname) package CMT implies [Unix]
i386 (from package CMT)
mac109 (from package CMT)
Unix (from package CMT) excludes [WIN32 Win32]

And then you may need to add to the "host-os", "host-compiler" and
"host-cpu" macros definitions.

2) To tell CMT what your platform characteristcs are, you must define
various "tag-*" tags based on the CMTCONFIG tag.  The standard form is

### Daya Bay CMTCONFIG tags
...
tag i386-darwin-UnknownCompiler-dbg tag-XXX tag-YYY tag-ZZZ tag-dbg
tag i386-darwin-UnknownCompiler-opt tag-XXX tag-YYY tag-ZZZ tag-opt
### end Daya Bay CMTCONFIG tags

Note, replace any "Unknown" with what you fixed in step 1.

 failed with 1</pre>
</div>
<div class="section" id="bring-new-config-to-nuwa">
<h2>Bring new config to NuWa<a class="headerlink" href="#bring-new-config-to-nuwa" title="Permalink to this headline">Â¶</a></h2>
<p>Seemingly matching CMTCONFIG that still cause error:</p>
<ul class="simple">
<li><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/ticket/257">http://dayabay.ihep.ac.cn/tracs/dybsvn/ticket/257</a></li>
<li><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/changeset/6776">http://dayabay.ihep.ac.cn/tracs/dybsvn/changeset/6776</a></li>
</ul>
<p>Quoting from the ticket:</p>
<div class="highlight-python"><pre>Even when the CMTCONFIG comes out matching ... can get a failure if your combination of
targets is not in LCG_basesystem.</pre>
</div>
<p>Looking at the revisions of others doing this can help</p>
<ul class="simple">
<li><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/log/lcgcmt/trunk/LCG_Settings/cmt/requirements">http://dayabay.ihep.ac.cn/tracs/dybsvn/log/lcgcmt/trunk/LCG_Settings/cmt/requirements</a></li>
</ul>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../detsim/" title="detsim"
             >next</a> |</li>
        <li class="right" >
          <a href="../" title="nuwa"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" >nuwa</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>