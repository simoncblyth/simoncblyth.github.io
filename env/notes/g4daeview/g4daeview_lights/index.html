<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>G4DAEVIEW Lights &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geant4/">geant4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../numpy/">numpy</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/g4daeview/g4daeview_lights.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="g4daeview-lights">
<h1>G4DAEVIEW Lights<a class="headerlink" href="#g4daeview-lights" title="Permalink to this headline">¶</a></h1>
<div class="section" id="reference">
<h2>reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.opengl.org/archives/resources/faq/technical/lights.htm">http://www.opengl.org/archives/resources/faq/technical/lights.htm</a></li>
<li><a class="reference external" href="http://www.talisman.org/opengl-1.1/Reference/glLight.html">http://www.talisman.org/opengl-1.1/Reference/glLight.html</a></li>
</ul>
<p>The position is transformed by the modelview matrix when glLight is called
(just as if it were a point), and it is stored in eye coordinates. If the w
component of the position is 0, the light is treated as a directional source.
Diffuse and specular lighting calculations take the light&#8217;s direction, but not
its actual position, into account, and attenuation is disabled. Otherwise,
diffuse and specular lighting calculations are based on the actual location of
the light in eye coordinates, and attenuation is enabled. The initial position
is (0, 0, 1, 0); thus, the initial light source is directional, parallel to,
and in the direction of the -Z axis.</p>
</div>
<div class="section" id="light-positioning">
<h2>Light Positioning<a class="headerlink" href="#light-positioning" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.glprogramming.com/red/chapter05.html#name13">http://www.glprogramming.com/red/chapter05.html#name13</a></li>
</ul>
<p>As shown, you supply a vector of four values (x, y, z, w) for the GL_POSITION
parameter. If the last value, w, is zero, the corresponding light source is a
directional one, and the (x, y, z) values describe its direction. This
direction is transformed by the modelview matrix. By default, GL_POSITION is
(0, 0, 1, 0), which defines a directional light that points along the negative
z-axis. (Note that nothing prevents you from creating a directional light with
the direction of (0, 0, 0), but such a light won&#8217;t help you much.)</p>
<p>If the w value is nonzero, the light is positional, and the (x, y, z) values
specify the location of the light in homogeneous object coordinates. (See
Appendix F.) This location is transformed by the modelview matrix and stored in
eye coordinates. (See &#8220;Controlling a Light&#8217;s Position and Direction&#8221; for more
information about how to control the transformation of the light&#8217;s location.)
Also, by default, a positional light radiates in all directions, but you can
restrict it to producing a cone of illumination by defining the light as a
spotlight. (See &#8220;Spotlights&#8221; for an explanation of how to define a light as a
spotlight.)
i</p>
<div class="section" id="controlling-a-light-s-position-and-direction">
<h3>Controlling a Light&#8217;s Position and Direction<a class="headerlink" href="#controlling-a-light-s-position-and-direction" title="Permalink to this headline">¶</a></h3>
<p>Moving the Light Source Together with Your Viewpoint</p>
<ul class="simple">
<li><a class="reference external" href="http://www.glprogramming.com/red/chapter05.html#name10">http://www.glprogramming.com/red/chapter05.html#name10</a></li>
</ul>
<p>To create a light that moves along with the viewpoint, you need to set the
light position before the viewing transformation. Then the viewing
transformation affects both the light and the viewpoint in the same way.
Remember that the light position is stored in eye coordinates, and this is one
of the few times when eye coordinates are critical. In Example 5-7, the light
position is defined in init(), which stores the light position at (0, 0, 0) in
eye coordinates. In other words, the light is shining from the lens of the
camera.</p>
</div>
</div>
<div class="section" id="understanding-lights">
<h2>Understanding Lights<a class="headerlink" href="#understanding-lights" title="Permalink to this headline">¶</a></h2>
<p>Moving the red light along z while looking down z:</p>
<div class="highlight-python"><pre>           r1     r2       r3
look       &lt;      eye
  |--------|-------|-------|---------   Z
  0        1       2       3</pre>
</div>
<div class="highlight-python"><pre>g4daeview.py -g 5000:6000 -t "" --eye="0,0,2" --look="0,0,0" --up="0,0.001,1" --lights="r" --rlight="0,0,1"

    # only PMTs lit red, not background

g4daeview.py -g 5000:6000 -t "" --eye="0,0,2" --look="0,0,0" --up="0,0.001,1" --lights="r" --rlight="0,0,2"

    # light at eye position, PMTs and background lit red
    # perturbing z offset, makes background fade to grey around zoffset 0.4,
    # light must be behind you to light the background

g4daeview.py -g 5000:6000 -t "" --eye="0,0,2" --look="0,0,0" --up="0,0.001,1" --lights="r" --rlight="0,0,3"

    # bright red background, fading to grey at zoffset 1.4

g4daeview.py -g 5000:6000 -t "" --eye="0,0,2" --look="0,0,0" --up="0,0.001,1" --lights="r" --rlight="-1,1,2"</pre>
</div>
<p>Original glumpy trackball constrained distance to be greater than 1:</p>
<div class="highlight-python"><pre>213         gl.glTranslate (self._x, self._y, -self._distance)
...
238     def _set_distance(self, distance):
239         self._distance = distance
240         if self._distance &lt; 1: self._distance= 1
241     distance = property(_get_distance, _set_distance,
242                         doc='''Scene distance from point of view''')
243</pre>
</div>
<div class="highlight-python"><pre>g4daeview.py -g 5000:6000 -t "" --eye="0,0,2" --look="0,0,0" --up="0,0.001,1" --lights="rgb" --rlight="-1,1,1" --glight="1,1,1" --blight="0,-1,1" --flight 10


g4daeview.py -g 5000:6000 --lights="rgb" --rlight="-1,1,-3" --glight="1,1,-3" --blight="0,-1,-3"   -t "" --eye="0,0.001,-3"  --wlight=0.</pre>
</div>
</div>
<div class="section" id="glumpy-lights">
<h2>glumpy lights<a class="headerlink" href="#glumpy-lights" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>(chroma_env)delta:glumpy blyth$ find . -name '*.py' -exec grep -l Light {} \;
./demos/atb.py
./demos/colormaps.py
./demos/histogram.py
./demos/obj-viewer.py
./glumpy/colormap.py                 # smth else
./glumpy/figure.py                   # figure on_init setup
./glumpy/graphics/vertex_buffer.py   # only the testing main
(chroma_env)delta:glumpy blyth$</pre>
</div>
</div>
<div class="section" id="refs">
<h2>refs<a class="headerlink" href="#refs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.glprogramming.com/red/chapter05.html#name5">http://www.glprogramming.com/red/chapter05.html#name5</a></li>
<li><a class="reference external" href="http://sjbaker.org/steve/omniv/opengl_lighting.html">http://sjbaker.org/steve/omniv/opengl_lighting.html</a></li>
</ul>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>