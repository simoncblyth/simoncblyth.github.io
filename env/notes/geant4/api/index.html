<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Geant4 API &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" />
    <link rel="up" title="geant4" href="../" />
    <link rel="next" title="Geant4 Optical Photon" href="../opticalphoton/" />
    <link rel="prev" title="GiGa" href="../giga/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../opticalphoton/" title="Geant4 Optical Photon"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../giga/" title="GiGa"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" accesskey="U">geant4</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">geant4</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geant4_gpu/">Geant4 GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geant4_profiling/">Geant4 Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../verbosity/">Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs/">Geant4 Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../giga/">GiGa</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Geant4 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../opticalphoton/">Geant4 Optical Photon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processes/">Geant4 Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../medical/">Medical Communities Using Geant4 (esp. optical photon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geometry/">Geant4 Geometry Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../g4py/">g4py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nuwa/">nuwa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/">Geant4 Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geant4_future_doe/">Geant4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/geant4/api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../giga/"
                        title="previous chapter">GiGa</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../opticalphoton/"
                        title="next chapter">Geant4 Optical Photon</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="geant4-api">
<h1>Geant4 API<a class="headerlink" href="#geant4-api" title="Permalink to this headline">¶</a></h1>
<p>Review <cite>G4UserXXXAction</cite> API with eye to external optical photon
propagation (a la Chroma).
Chroma grabs and kills optical photons tracks
in <cite>G4UserTrackingAction::PreUserTrackingAction</cite> and seemingly doesnt give them back.</p>
<div class="section" id="g4eventmanager-overview">
<h2>G4EventManager Overview<a class="headerlink" href="#g4eventmanager-overview" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference external" href="http://www.tunl.duke.edu/~tajima/geant4/pdf/jun2009b/1/kernel.pdf">http://www.tunl.duke.edu/~tajima/geant4/pdf/jun2009b/1/kernel.pdf</a></p>
</li>
<li><p class="first">An event is the basic unit of simulation in Geant4.</p>
</li>
<li><p class="first">At beginning of processing, primary tracks are generated. These primary tracks are pushed into a stack.</p>
</li>
<li><p class="first">A track is popped up from the stack one by one and tracked. Resulting secondary tracks are pushed into the stack.</p>
<blockquote>
<div><ul class="simple">
<li>This tracking lasts as long as the stack has a track.</li>
<li>When the stack becomes empty, processing of one event is over.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="optional-user-actions">
<h2>Optional User Actions<a class="headerlink" href="#optional-user-actions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://geant4.web.cern.ch/geant4/G4UsersDocuments/UsersGuides/ForApplicationDeveloper/html/UserActions/OptionalActions.html">http://geant4.web.cern.ch/geant4/G4UsersDocuments/UsersGuides/ForApplicationDeveloper/html/UserActions/OptionalActions.html</a></li>
</ul>
</div>
<div class="section" id="g4eventmanager-doprocessing">
<h2>G4EventManager::DoProcessing<a class="headerlink" href="#g4eventmanager-doprocessing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>098 void G4EventManager::DoProcessing(G4Event* anEvent)
...
139   trackContainer-&gt;PrepareNewEvent();
...
145   sdManager = G4SDManager::GetSDMpointerIfExist();
146   if(sdManager)
147   { currentEvent-&gt;SetHCofThisEvent(sdManager-&gt;PrepareNewEvent()); }
148
149   if(userEventAction) userEventAction-&gt;BeginOfEventAction(currentEvent);
...
171   G4VTrajectory* previousTrajectory;
172   while( ( track = trackContainer-&gt;PopNextTrack(&amp;previousTrajectory) ) != 0 )
173   {
...
184     tracking = true;
185     trackManager-&gt;ProcessOneTrack( track );
186     istop = track-&gt;GetTrackStatus();
187     tracking = false;
...
217     G4TrackVector * secondaries = trackManager-&gt;GimmeSecondaries();
218     switch (istop)
219     {
220       case fStopButAlive:
221       case fSuspend:
222         trackContainer-&gt;PushOneTrack( track, aTrajectory );
223         StackTracks( secondaries );
224         break;
225
226       case fPostponeToNextEvent:
227         trackContainer-&gt;PushOneTrack( track );
228         StackTracks( secondaries );
229         break;
230
231       case fStopAndKill:
232         StackTracks( secondaries );
233         delete track;
234         break;
235
236       case fAlive:
237         G4cout &lt;&lt; "Illeagal TrackStatus returned from G4TrackingManager!"
238              &lt;&lt; G4endl;
239       case fKillTrackAndSecondaries:
240         //if( secondaries ) secondaries-&gt;clearAndDestroy();
241         if( secondaries )
242         {
243           for(size_t i=0;i&lt;secondaries-&gt;size();i++)
244           { delete (*secondaries)[i]; }
245           secondaries-&gt;clear();
246         }
247         delete track;
248         break;
249     }
250   }</pre>
</div>
</div>
<div class="section" id="g4usereventaction">
<h2>G4UserEventAction<a class="headerlink" href="#g4usereventaction" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="g4userstackingaction">
<h2>G4UserStackingAction<a class="headerlink" href="#g4userstackingaction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classifynewtrack">
<h3><cite>ClassifyNewTrack()</cite><a class="headerlink" href="#classifynewtrack" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">invoked by G4StackManager whenever a new G4Track object is &#8220;pushed&#8221; onto a stack by G4EventManager</p>
</li>
<li><p class="first">returns an enumerator, G4ClassificationOfNewTrack with one of four possible values:</p>
<blockquote>
<div><ul class="simple">
<li>fUrgent - track is placed in the urgent stack</li>
<li>fWaiting - track is placed in the waiting stack, and will not be simulated until the urgent stack is empty</li>
<li>fPostpone - track is postponed to the next event</li>
<li>fKill - the track is deleted immediately and not stored in any stack.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="newstage">
<h3><cite>NewStage()</cite><a class="headerlink" href="#newstage" title="Permalink to this headline">¶</a></h3>
<p>Invoked when the urgent stack is empty and the waiting stack contains at least one G4Track object.
Here the user may kill or re-assign to different stacks all the tracks in the
waiting stack by calling the <cite>stackManager-&gt;ReClassify()</cite> method which, in turn,
calls the <cite>ClassifyNewTrack()</cite> method.
If no user action is taken, all tracks in the waiting stack are transferred to the urgent stack.
The user may also decide to abort the current event even though some tracks may remain in the waiting
stack by calling <cite>stackManager-&gt;clear()</cite>.
This method is valid and safe only if it is called from the G4UserStackingAction class.</p>
</div>
<div class="section" id="preparenewevent">
<h3><cite>PrepareNewEvent()</cite><a class="headerlink" href="#preparenewevent" title="Permalink to this headline">¶</a></h3>
<p>Invoked at the beginning of each event. At this point no primary particles
have been converted to tracks, so the urgent and waiting stacks are empty.
However, there may be tracks in the postponed-to-next-event stack; for each of
these the <cite>ClassifyNewTrack()</cite> method is called and the track is assigned to the
appropriate stack.</p>
</div>
<div class="section" id="examples-dsfastmuonstackaction-dsopstackaction-examplen04">
<h3>Examples DsFastMuonStackAction, DsOpStackAction, ExampleN04<a class="headerlink" href="#examples-dsfastmuonstackaction-dsopstackaction-examplen04" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>[blyth@cms01 src]$ vi /data/env/local/dyb/trunk/NuWa-trunk/dybgaudi/Simulation/DetSim/src/DsFastMuonStackAction.cc</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://dayabay.bnl.gov/dox/DetSim/html/DsOpStackAction_8cc_source.html">http://dayabay.bnl.gov/dox/DetSim/html/DsOpStackAction_8cc_source.html</a></li>
</ul>
</div>
</div>
<div class="section" id="g4usertrackingaction">
<h2>G4UserTrackingAction<a class="headerlink" href="#g4usertrackingaction" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="g4usersteppingaction">
<h2>G4UserSteppingAction<a class="headerlink" href="#g4usersteppingaction" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="g4sdmanager">
<h2>G4SDManager<a class="headerlink" href="#g4sdmanager" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://geant4.web.cern.ch/geant4/UserDocumentation/UsersGuides/ForApplicationDeveloper/html/ch04s04.html">http://geant4.web.cern.ch/geant4/UserDocumentation/UsersGuides/ForApplicationDeveloper/html/ch04s04.html</a></li>
<li><a class="reference external" href="http://www.ge.infn.it/geant4/training/portland/readout.pdf">http://www.ge.infn.it/geant4/training/portland/readout.pdf</a></li>
</ul>
<div class="section" id="processhits">
<h3>ProcessHits<a class="headerlink" href="#processhits" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>[blyth@cms01 src]$ grep ProcessHits *.cc
DsPmtSensDet.cc:bool DsPmtSensDet::ProcessHits(G4Step* step,
DsPmtSensDet.cc:        error() &lt;&lt; "ProcessHits: step has no or empty touchable history" &lt;&lt; endreq;
DsRpcSensDet.cc:bool DsRpcSensDet::ProcessHits(G4Step* step,
DsRpcSensDet.cc:      error() &lt;&lt; "ProcessHits: step has no or empty touchable history."
[blyth@cms01 src]$</pre>
</div>
</div>
<div class="section" id="registering-hits-on-sensitive-detectors">
<h3>Registering hits on sensitive detectors<a class="headerlink" href="#registering-hits-on-sensitive-detectors" title="Permalink to this headline">¶</a></h3>
<p>Maybe possible lookahead to the next step with <cite>fStep-&gt;GetPostStepPoint()-&gt;GetSensitiveDetector()</cite>
to see if about to hit.</p>
<p>Whats the Chroma equivalent of SD &#8220;Collision detection&#8221;</p>
<div class="highlight-python"><pre> 42     42  117: G4StepStatus G4SteppingManager::Stepping()
  .      .  118: //////////////////////////////////////////
  .      .  119: {
  .      .  120:
  .      .  121: //--------
  .      .  122: // Prelude
  .      .  123: //--------
  .      .  124: #ifdef G4VERBOSE
  .      .  125:             // !!!!! Verbose
 10     10  126:              if(verboseLevel&gt;0) fVerbose-&gt;NewStep();
  .      .  127:          else
 13     13  128:              if(verboseLevel==-1) {
  .      .  129:              G4VSteppingVerbose::SetSilent(1);
  .      .  130:          }
  .      .  131:          else
  9    246  132:              G4VSteppingVerbose::SetSilent(0);
  .      .  133: #endif
  .      .  134:
  .      .  135: // Store last PostStepPoint to PreStepPoint, and swap current and nex
  .      .  136: // volume information of G4Track. Reset total energy deposit in one Step.
169   1759  137:    fStep-&gt;CopyPostToPreStepPoint();
265    317  138:    fStep-&gt;ResetTotalEnergyDeposit();
  .      .  139:
  .      .  140: // Switch next touchable in track to current one
390   9025  141:    fTrack-&gt;SetTouchableHandle(fTrack-&gt;GetNextTouchableHandle());
            ...
            ...
            ...
  .      .  218: //-------
  .      .  219: // Finale
  .      .  220: //-------
  .      .  221:
  .      .  222: // Update 'TrackLength' and remeber the Step length of the current Step
 69    144  223:    fTrack-&gt;AddTrackLength(fStep-&gt;GetStepLength());
 85     91  224:    fPreviousStepSize = fStep-&gt;GetStepLength();
 21     36  225:    fStep-&gt;SetTrack(fTrack);
  .      .  226: #ifdef G4VERBOSE
  .      .  227:                          // !!!!! Verbose
  .      .  228:
108    108  229:            if(verboseLevel&gt;0) fVerbose-&gt;StepInfo();
  .      .  230: #endif
  .      .  231: // Send G4Step information to Hit/Dig if the volume is sensitive
270   2794  232:    fCurrentVolume = fStep-&gt;GetPreStepPoint()-&gt;GetPhysicalVolume();
288    296  233:    StepControlFlag =  fStep-&gt;GetControlFlag();
 29     29  234:    if( fCurrentVolume != 0 &amp;&amp; StepControlFlag != AvoidHitInvocation) {
  .      .  235:       fSensitive = fStep-&gt;GetPreStepPoint()-&gt;
258    278  236:                                    GetSensitiveDetector();
 26     26  237:       if( fSensitive != 0 ) {
  1   4325  238:         fSensitive-&gt;Hit(fStep);
  .      .  239:       }
  .      .  240:    }</pre>
</div>
</div>
</div>
<div class="section" id="hits">
<h2>Hits<a class="headerlink" href="#hits" title="Permalink to this headline">¶</a></h2>
<p>In above the hit is formed based on <cite>fSensitive !=0</cite> ie <cite>fStep-&gt;GetPreStepPoint()-&gt;GetSensitiveDetector() != 0</cite></p>
<ul>
<li><p class="first"><cite>G4StepPoint</cite>:</p>
<div class="highlight-python"><pre>143   inline G4VSensitiveDetector* GetSensitiveDetector() const;
144   inline void SetSensitiveDetector(G4VSensitiveDetector*);</pre>
</div>
</li>
<li><p class="first"><a class="reference external" href="https://geant4.web.cern.ch/geant4/UserDocumentation/UsersGuides/ForApplicationDeveloper/html/ch04s04.html">https://geant4.web.cern.ch/geant4/UserDocumentation/UsersGuides/ForApplicationDeveloper/html/ch04s04.html</a></p>
</li>
</ul>
</div>
<div class="section" id="sensitive-detector">
<h2>Sensitive Detector<a class="headerlink" href="#sensitive-detector" title="Permalink to this headline">¶</a></h2>
<p>G4VSensitiveDetector is an abstract base class which represents a detector. The
principal mandate of a sensitive detector is the construction of hit objects
using information from steps along a particle track. The ProcessHits() method
of G4VSensitiveDetector performs this task using G4Step objects as input. In
the case of a &#8220;Readout&#8221; geometry, objects of the G4TouchableHistory class may
be used as an optional input.</p>
<p>Your concrete detector class should be instantiated with the unique name of
your detector. The name can be associated with one or more global names with
&#8220;/&#8221; as a delimiter for categorizing your detectors. For example:</p>
<div class="highlight-python"><pre>myEMcal = new MyEMcal("/myDet/myCal/myEMcal");</pre>
</div>
<p>where myEMcal is the name of your detector. The detector must be constructed in
G4VUserDetectorConstruction::ConstructSDandField() method. It must be assigned
to one or more G4LogicalVolume objects to set the sensitivity of these volumes.
SUch assignment must be made in the same
G4VUserDetectorConstruction::ConstructSDandField() method. The pointer should
also be registered to G4SDManager, as described in Section 4.4.3.</p>
<div class="highlight-python"><pre>[blyth@ntugrid5 DDDB]$ find . -name '*.xml' -exec grep -H sens {} \;
./PMT/hemi-parameters.xml:     and simply act as a holder of the sensitive detector.  The
./PMT/hemi-parameters.xml:     sensdet then needs to be programmed to make sure all optical
./PMT/headon-pmt.xml:  &lt;logvol name="lvHeadonPmtCathode" material="Bialkali" sensdet="DsPmtSensDet"&gt;
./PMT/hemi-pmt.xml:  &lt;logvol name="lvPmtHemiCathode" material="Bialkali" sensdet="DsPmtSensDet"&gt;
./PMT/hemi-pmt.xml:  &lt;logvol name="lvPmtHemiCathode" material="Bialkali" sensdet="DsPmtSensDet"&gt;
./RPC/RPCStrip.xml:  &lt;logvol name="lvRPCStrip" material="MixGas" sensdet="DsRpcSensDet"&gt;</pre>
</div>
<p>PMT/headon-pmt.xml:</p>
<div class="highlight-python"><pre>&lt;!-- The Photo Cathode --&gt;
&lt;logvol name="lvHeadonPmtCathode" material="Bialkali" sensdet="DsPmtSensDet"&gt;
  &lt;tubs name="headon-pmt-cath"
        sizeZ="HeadonPmtCathodeThickness"
        outerRadius="HeadonPmtGlassRadius-HeadonPmtGlassWallThick"/&gt;
&lt;/logvol&gt;

&lt;!-- Opaque Volume Behind Cathode --&gt;
&lt;logvol name="lvHeadonPmtBehindCathode" material="OpaqueVacuum"&gt;
  &lt;tubs name="headon-pmt-behind-vac"
        sizeZ="HeadonPmtGlassLength-2*HeadonPmtGlassWallThick-HeadonPmtCathodeThickness"
        outerRadius="HeadonPmtGlassRadius-HeadonPmtGlassWallThick"/&gt;
&lt;/logvol&gt;</pre>
</div>
<p>PMT/hemi-pmt.xml:</p>
<div class="highlight-python"><pre>&lt;!-- The Photo Cathode --&gt;
&lt;!-- use if limit photocathode to a face on diameter gt 167mm. --&gt;
&lt;logvol name="lvPmtHemiCathode" material="Bialkali" sensdet="DsPmtSensDet"&gt;
  &lt;union name="pmt-hemi-cathode"&gt;
    &lt;sphere name="pmt-hemi-cathode-face"
            outerRadius="PmtHemiFaceROCvac"
            innerRadius="PmtHemiFaceROCvac-PmtHemiCathodeThickness"
            deltaThetaAngle="PmtHemiFaceCathodeAngle"/&gt;
    &lt;sphere name="pmt-hemi-cathode-belly"
            outerRadius="PmtHemiBellyROCvac"
            innerRadius="PmtHemiBellyROCvac-PmtHemiCathodeThickness"
            startThetaAngle="PmtHemiBellyCathodeAngleStart"
            deltaThetaAngle="PmtHemiBellyCathodeAngleDelta"/&gt;
    &lt;posXYZ z="PmtHemiFaceOff-PmtHemiBellyOff"/&gt;
  &lt;/union&gt;
&lt;/logvol&gt;</pre>
</div>
<div class="highlight-python"><pre>g4daeview.sh --geometry-regexp PmtHemiCathode --wipegeometry
g4daeview.sh --geometry-regexp HeadonPmtCathode --wipegeometry</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../opticalphoton/" title="Geant4 Optical Photon"
             >next</a> |</li>
        <li class="right" >
          <a href="../giga/" title="GiGa"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" >geant4</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>