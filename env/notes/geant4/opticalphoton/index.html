<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Geant4 Optical Photon &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../" />
    <link rel="up" title="geant4" href="../" />
    <link rel="next" title="Geant4 Processes" href="../processes/" />
    <link rel="prev" title="Geant4 API" href="../api/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../processes/" title="Geant4 Processes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../api/" title="Geant4 API"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" accesskey="U">geant4</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pycuda/">pycuda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">geant4</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geant4_gpu/">Geant4 GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geant4_profiling/">Geant4 Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../verbosity/">Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs/">Geant4 Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../giga/">GiGa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/">Geant4 API</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Geant4 Optical Photon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processes/">Geant4 Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../medical/">Medical Communities Using Geant4 (esp. optical photon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geometry/">Geant4 Geometry Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../g4py/">g4py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nuwa/">nuwa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/">Geant4 Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geant4_future_doe/">Geant4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hg/">hg</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/geant4/opticalphoton.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../api/"
                        title="previous chapter">Geant4 API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../processes/"
                        title="next chapter">Geant4 Processes</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="geant4-optical-photon">
<h1>Geant4 Optical Photon<a class="headerlink" href="#geant4-optical-photon" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="http://www.google.com/search?q=optical photon processes">google:optical photon processes</a></li>
<li><a class="reference external" href="http://geant4.slac.stanford.edu/UsersWorkshop/PDF/Peter/OpticalPhoton.pdf">http://geant4.slac.stanford.edu/UsersWorkshop/PDF/Peter/OpticalPhoton.pdf</a></li>
<li>(ExampleN06 at /examples/novice/N06)</li>
</ul>
<div class="section" id="production-of-op-processes-electromagnetic-xrays">
<h2>Production of OP (/processes/electromagnetic/xrays)<a class="headerlink" href="#production-of-op-processes-electromagnetic-xrays" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Cerenkov Process</li>
<li>Scintillation Process</li>
<li>Transition Radiation</li>
</ul>
</div>
<div class="section" id="propagation-of-op-processes-optical">
<h2>Propagation of OP (/processes/optical)<a class="headerlink" href="#propagation-of-op-processes-optical" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Refraction and Reflection at medium boundaries</li>
<li>Bulk Absorption</li>
<li>Rayleigh scattering</li>
</ul>
</div>
<div class="section" id="hypernews-on-opticalphotons">
<h2>Hypernews on opticalphotons<a class="headerlink" href="#hypernews-on-opticalphotons" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://hypernews.slac.stanford.edu/HyperNews/geant4/get/opticalphotons.html">http://hypernews.slac.stanford.edu/HyperNews/geant4/get/opticalphotons.html</a></li>
</ul>
<div class="section" id="min-step-size-for-optical-photons">
<h3>Min step size for optical photons<a class="headerlink" href="#min-step-size-for-optical-photons" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://hypernews.slac.stanford.edu/HyperNews/geant4/get/opticalphotons/505/1.html">http://hypernews.slac.stanford.edu/HyperNews/geant4/get/opticalphotons/505/1.html</a></li>
</ul>
<div class="highlight-python"><pre>&gt; I'm wondering whether there is a way to set the minimum step size
&gt; for produced photons to make tracking less accurate, but also less CPU
&gt; consuming? I've searched forum, but found only examples of setting
&gt; maximum step size, which is not the case. If such a possibility exists,
&gt; I'd be grateful for every hint.

The steps optical photons take during the simulation are already the
minimum step size they can take. Optical photon steps are only limited by
geometry and discrete processes. The geometry has to be interrogated to find
the next volume boundary - I am not aware of any way to make this 'less
accurate' but faster.

If you find the CPU consum prohibitive you may bias the number of optical
photons you track. For example, you can remove every other photon in your
UserStackingAction. This reduces the statistical accuracy but you may still get
a result that is statistical significant for your setup.

Best regards, Peter</pre>
</div>
</div>
</div>
<div class="section" id="geant4-op-processes">
<h2>Geant4 OP processes<a class="headerlink" href="#geant4-op-processes" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>blyth@cms01 include]$ ll
total 116
-rw-r--r--  1 blyth blyth  2780 Mar 16  2009 G4WLSTimeGeneratorProfileExponential.hh
-rw-r--r--  1 blyth blyth  2764 Mar 16  2009 G4WLSTimeGeneratorProfileDelta.hh
-rw-r--r--  1 blyth blyth  2779 Mar 16  2009 G4VWLSTimeGeneratorProfile.hh
-rw-r--r--  1 blyth blyth  5221 Mar 16  2009 G4OpWLS.hh
-rw-r--r--  1 blyth blyth  5824 Mar 16  2009 G4OpRayleigh.hh
-rw-r--r--  1 blyth blyth  2255 Mar 16  2009 G4OpProcessSubType.hh
-rw-r--r--  1 blyth blyth 10395 Mar 16  2009 G4OpBoundaryProcess.hh.orig
-rw-r--r--  1 blyth blyth  4597 Mar 16  2009 G4OpAbsorption.hh
drwxr-xr-x  4 blyth blyth  4096 Mar 16  2009 ..
-rw-r--r--  1 blyth blyth 11031 Feb 16  2011 G4OpBoundaryProcess.hh
drwxr-xr-x  2 blyth blyth  4096 Feb 16  2011 .


[blyth@cms01 include]$ grep public\ G4VDiscreteProcess *.hh
G4OpAbsorption.hh:class G4OpAbsorption : public G4VDiscreteProcess
G4OpBoundaryProcess.hh:class G4OpBoundaryProcess : public G4VDiscreteProcess
G4OpRayleigh.hh:class G4OpRayleigh : public G4VDiscreteProcess
G4OpWLS.hh:class G4OpWLS : public G4VDiscreteProcess</pre>
</div>
<div class="highlight-python"><pre>[blyth@cms01 include]$ grep processName *.hh
G4OpAbsorption.hh:        G4OpAbsorption(const G4String&amp; processName = "OpAbsorption",
G4OpBoundaryProcess.hh:        G4OpBoundaryProcess(const G4String&amp; processName = "OpBoundary",
G4OpRayleigh.hh:        G4OpRayleigh(const G4String&amp; processName = "OpRayleigh",
G4OpWLS.hh:  G4OpWLS(const G4String&amp; processName = "OpWLS",</pre>
</div>
<div class="section" id="g4optical-include-g4opprocesssubtype-hh">
<h3><cite>g4optical/include/G4OpProcessSubType.hh</cite><a class="headerlink" href="#g4optical-include-g4opprocesssubtype-hh" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>enum G4OpProcessSubType
{
  fOpAbsorption = 31,
  fOpBoundary = 32,
  fOpRayleigh = 33,
  fOpWLS = 34
};</pre>
</div>
</div>
</div>
<div class="section" id="g4opboundaryprocess-hh-patch">
<h2>G4OpBoundaryProcess.hh patch<a class="headerlink" href="#g4opboundaryprocess-hh-patch" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>::</dt>
<dd>[<a class="reference external" href="mailto:blyth&#37;&#52;&#48;cms01">blyth<span>&#64;</span>cms01</a> include]$ pwd
/data/env/local/dyb/trunk/external/build/LCG/geant4.9.2.p01/source/processes/optical/include
[<a class="reference external" href="mailto:blyth&#37;&#52;&#48;cms01">blyth<span>&#64;</span>cms01</a> include]$ diff G4OpBoundaryProcess.hh.orig G4OpBoundaryProcess.hh
302,305c302,318
&lt;
&lt;           NewMomentum = G4LambertianRand(theGlobalNormal);
&lt;           theFacetNormal = (NewMomentum - OldMomentum).unit();
&lt;
&#8212;
&gt;         // wangzhe
&gt;         // Original:
&gt;           //NewMomentum = G4LambertianRand(theGlobalNormal);
&gt;           //theFacetNormal = (NewMomentum - OldMomentum).unit();
&gt;
&gt;         // Temp Fix:
&gt;         if(theGlobalNormal.mag()==0) {
&gt;             std::cout&lt;&lt;&#8221;Error. Zero caught. A normal vector with mag be 0. May trigger a infinite loop later.&#8221;&lt;&lt;std::endl;
&gt;             std::cout&lt;&lt;&#8221;A temporary solution: Photon is forced to go back along its original path.&#8221;&lt;&lt;std::endl;
&gt;             std::cout&lt;&lt;&#8221;Test from MDC09a tells the effect of this bug is tiny.&#8221;&lt;&lt;std::endl;
&gt;           G4ThreeVector myVec(0,0,0);
&gt;           theFacetNormal = (myVec - OldMomentum).unit();
&gt;         } else {
&gt;           NewMomentum = G4LambertianRand(theGlobalNormal);
&gt;           theFacetNormal = (NewMomentum - OldMomentum).unit();
&gt;         }
&gt;         // wz</dd>
</dl>
</div>
<div class="section" id="dayabay-detsim-specializations">
<h2>DayaBay DetSim specializations<a class="headerlink" href="#dayabay-detsim-specializations" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>[blyth@cms01 src]$ grep public\ G4VDiscreteProcess *.h
DsG4OpBoundaryProcess.h:class DsG4OpBoundaryProcess : public G4VDiscreteProcess
DsG4OpRayleigh.h:class DsG4OpRayleigh : public G4VDiscreteProcess
[blyth@cms01 src]$ pwd
/data/env/local/dyb/trunk/NuWa-trunk/dybgaudi/Simulation/DetSim/src</pre>
</div>
<div class="section" id="env-source-dybgaudi-trunk-simulation-detsim-src-dsg4opboundaryprocess-h">
<h3><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/intertrac/source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpBoundaryProcess.h">env:source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpBoundaryProcess.h</a><a class="headerlink" href="#env-source-dybgaudi-trunk-simulation-detsim-src-dsg4opboundaryprocess-h" title="Permalink to this headline">¶</a></h3>
<p>Same difference as noted above, plus name changes:</p>
<div class="highlight-python"><pre>[blyth@cms01 src]$ diff ~/g4optical/include/G4OpBoundaryProcess.hh DsG4OpBoundaryProcess.h</pre>
</div>
<div class="highlight-python"><pre>93 enum DsG4OpBoundaryProcessStatus {  Undefined,
94                                   FresnelRefraction, FresnelReflection,
95                                   TotalInternalReflection,
96                                   LambertianReflection, LobeReflection,
97                                   SpikeReflection, BackScattering,
98                                   Absorption, Detection, NotAtBoundary,
99                                   SameMaterial, StepTooSmall, NoRINDEX };
100
101 class DsG4OpBoundaryProcess : public G4VDiscreteProcess
102 {
103</pre>
</div>
</div>
<div class="section" id="env-source-dybgaudi-trunk-simulation-detsim-src-dsg4opboundaryprocess-cc">
<h3><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/intertrac/source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpBoundaryProcess.cc">env:source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpBoundaryProcess.cc</a><a class="headerlink" href="#env-source-dybgaudi-trunk-simulation-detsim-src-dsg4opboundaryprocess-cc" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>[blyth@cms01 src]$ diff ~/g4optical/src/G4OpBoundaryProcess.cc DsG4OpBoundaryProcess.cc
...
&lt; G4OpBoundaryProcess::PostStepDoIt(const G4Track&amp; aTrack, const G4Step&amp; aStep)
---
&gt; DsG4OpBoundaryProcess::PostStepDoIt(const G4Track&amp; aTrack, const G4Step&amp; aStep)
179c181
&lt;           G4cerr &lt;&lt; " G4OpBoundaryProcess/PostStepDoIt(): "
---
&gt;           G4cerr &lt;&lt; " DsG4OpBoundaryProcess/PostStepDoIt(): "
186a189,195
&gt;         if(theGlobalNormal.mag() == 0) {
&gt;           abNormalCounter++;
&gt;           std::cout &lt;&lt; "Because of normal = 0, the number of the killed optical photons is " &lt;&lt; abNormalCounter &lt;&lt; std::endl;
&gt;           aParticleChange.ProposeTrackStatus(fStopAndKill);
&gt;           return G4VDiscreteProcess::PostStepDoIt(aTrack, aStep);
&gt;         }
&gt;
189c198
&lt;            G4cerr &lt;&lt; " G4OpBoundaryProcess/PostStepDoIt(): "
---
&gt;            G4cerr &lt;&lt; " DsG4OpBoundaryProcess/PostStepDoIt(): "
301a311,336
&gt;                  if(OpticalSurface-&gt;GetName().contains("ESRAir")) {
&gt;                    G4double inciAngle = GetIncidentAngle();
&gt;                    //ESR in air
&gt;                    if(inciAngle*180./pi &gt; 40) {
&gt;                      theReflectivity = (theReflectivity - 0.993) + 0.973572 + 9.53233e-04*(inciAngle*180./pi) - 1.22184e-05*((inciAngle*180./pi))*((inciAngle*180./pi));
&gt;                    }</pre>
</div>
</div>
<div class="section" id="env-source-dybgaudi-trunk-simulation-detsim-src-dsg4oprayleigh-h">
<h3><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/intertrac/source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpRayleigh.h">env:source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpRayleigh.h</a><a class="headerlink" href="#env-source-dybgaudi-trunk-simulation-detsim-src-dsg4oprayleigh-h" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>[blyth@cms01 src]$ diff ~/g4optical/include/G4OpRayleigh.hh DsG4OpRayleigh.h
1a2,12
&gt; /**
&gt;  * \class DsG4OpRayleigh
&gt;  *
&gt;  * \brief A slightly modified version of G4OpRayleigh
&gt;  *
&gt;  * It is modified to make the Rayleigh Scattering happen with different waters defined in /dd/Material/
&gt;  *
&gt;  * This was taken from G4.9.1p1
&gt;  *
&gt;  * zhangh@bnl.gov on 8th, July
&gt;  */</pre>
</div>
</div>
<div class="section" id="env-source-dybgaudi-trunk-simulation-detsim-src-dsg4oprayleigh-cc">
<h3><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/intertrac/source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpRayleigh.cc">env:source:dybgaudi/trunk/Simulation/DetSim/src/DsG4OpRayleigh.cc</a><a class="headerlink" href="#env-source-dybgaudi-trunk-simulation-detsim-src-dsg4oprayleigh-cc" title="Permalink to this headline">¶</a></h3>
<p>Specialization to handle <cite>/dd/Materials/Water</cite> etc.. names for  &#8220;Water&#8221;</p>
<div class="highlight-python"><pre>[blyth@cms01 src]$ diff ~/g4optical/src/G4OpRayleigh.cc DsG4OpRayleigh.cc
...
&lt; void G4OpRayleigh::BuildThePhysicsTable()
---
&gt; void DsG4OpRayleigh::BuildThePhysicsTable()
226c238,241
&lt;                 if ((*theMaterialTable)[i]-&gt;GetName() == "Water")
---
&gt;                 if ((*theMaterialTable)[i]-&gt;GetName() == "/dd/Materials/Water" ||
&gt;                   (*theMaterialTable)[i]-&gt;GetName() == "/dd/Materials/OwsWater" ||
&gt;                   (*theMaterialTable)[i]-&gt;GetName() == "/dd/Materials/IwsWater"
&gt;                   )
246c261
&lt; G4double G4OpRayleigh::GetMeanFreePath(const G4Track&amp; aTrack,
---
&gt; G4double DsG4OpRayleigh::GetMeanFreePath(const G4Track&amp; aTrack,
257c272,275
&lt;         if (aMaterial-&gt;GetName() == "Water" &amp;&amp; DefaultWater){
---
&gt;       if ((strcmp(aMaterial-&gt;GetName(), "/dd/Materials/Water") == 0 ||
&gt;            strcmp(aMaterial-&gt;GetName(), "/dd/Materials/OwsWater") == 0 ||
&gt;            strcmp(aMaterial-&gt;GetName(), "/dd/Materials/IwsWater") == 0 )
&gt;           &amp;&amp; DefaultWater){
294c312</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../processes/" title="Geant4 Processes"
             >next</a> |</li>
        <li class="right" >
          <a href="../api/" title="Geant4 API"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../">Env  documentation</a> &raquo;</li>

          <li><a href="../" >geant4</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>