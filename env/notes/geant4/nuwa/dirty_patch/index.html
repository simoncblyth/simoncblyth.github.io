<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Make sense of dirty patch &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../" />
    <link rel="up" title="nuwa" href="../" />
    <link rel="next" title="Create Incremental Patch" href="../create_incremental_patch/" />
    <link rel="prev" title="Integration of Export Functionality into NuWa" href="../nuwa_integration/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../create_incremental_patch/" title="Create Incremental Patch"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../nuwa_integration/" title="Integration of Export Functionality into NuWa"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >geant4</a> &raquo;</li>
          <li><a href="../" accesskey="U">nuwa</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pycuda/">pycuda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">geant4</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geant4_gpu/">Geant4 GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geant4_profiling/">Geant4 Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../verbosity/">Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/">Geant4 Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../giga/">GiGa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/">Geant4 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../opticalphoton/">Geant4 Optical Photon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../processes/">Geant4 Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../medical/">Medical Communities Using Geant4 (esp. optical photon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geometry/">Geant4 Geometry Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../g4py/">g4py</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">nuwa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../event/">Geant4 Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geant4_future_doe/">Geant4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hg/">hg</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/geant4/nuwa/dirty_patch.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../nuwa_integration/"
                        title="previous chapter">Integration of Export Functionality into NuWa</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../create_incremental_patch/"
                        title="next chapter">Create Incremental Patch</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="make-sense-of-dirty-patch">
<h1>Make sense of dirty patch<a class="headerlink" href="#make-sense-of-dirty-patch" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#problems" id="id1">Problems</a></li>
<li><a class="reference internal" href="#moral" id="id2">Moral</a></li>
<li><a class="reference internal" href="#reproducing-a-patch" id="id3">Reproducing a patch</a><ul>
<li><a class="reference internal" href="#extend-diff-py-to-dump-single-file-patches" id="id4">Extend diff.py to dump single file patches</a></li>
<li><a class="reference internal" href="#create-patch-patch-match" id="id5">Create <cite>patch-;patch-match</cite></a></li>
<li><a class="reference internal" href="#test-patching" id="id6">test patching</a></li>
<li><a class="reference internal" href="#four-dirty-patches" id="id7">Four dirty patches</a></li>
<li><a class="reference internal" href="#there-are-more-orig" id="id8">There are more <cite>.orig</cite></a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-other-geant4-9-2-p01-patch2" id="id9">Check other geant4.9.2.p01.patch2</a></li>
<li><a class="reference internal" href="#my-dyb-old-geant4-mods-were-ontop-of-two-patches" id="id10">My dyb.old Geant4 mods were ontop of two patches</a></li>
</ul>
</div>
<div class="section" id="problems">
<h2><a class="toc-backref" href="#id1">Problems</a><a class="headerlink" href="#problems" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Find that existing NuWa geant4 patch already modified files that I need to change (the MPV ones).</li>
<li>the patch show signs of being <strong>dirty</strong> (presumably hand editing to add an older patch)</li>
</ul>
</div>
<div class="section" id="moral">
<h2><a class="toc-backref" href="#id2">Moral</a><a class="headerlink" href="#moral" title="Permalink to this headline">¶</a></h2>
<p>The moral of this mess is <strong>NEVER USE PATCHES</strong>, always stuff code that you are
using into a repository and clone from there.</p>
</div>
<div class="section" id="reproducing-a-patch">
<h2><a class="toc-backref" href="#id3">Reproducing a patch</a><a class="headerlink" href="#reproducing-a-patch" title="Permalink to this headline">¶</a></h2>
<p>Hmm means must first reproduce the preexisting geant4 patches:</p>
<div class="highlight-python"><pre>cd /data1/env/local/dyb/external/build/LCG

[blyth@belle7 LCG]$ mkdir g4checkpatch
[blyth@belle7 LCG]$ tar zxf geant4.9.2.p01.tar.gz -C g4checkpatch
[blyth@belle7 LCG]$ l g4checkpatch/
total 4
drwxr-xr-x 7 blyth blyth 4096 Mar 16  2009 geant4.9.2.p01
[blyth@belle7 LCG]$ mv g4checkpatch/geant4.9.2.p01 g4checkpatch/geant4.9.2.p01.orig
[blyth@belle7 LCG]$ cp -R geant4.9.2.p01 g4checkpatch/</pre>
</div>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ diff -r --brief geant4.9.2.p01.orig geant4.9.2.p01
Only in geant4.9.2.p01: bin
Only in geant4.9.2.p01: .geant4.9.2.p01.patch
Only in geant4.9.2.p01: .geant4.9.2.p01.patch2
Only in geant4.9.2.p01: include
Only in geant4.9.2.p01: lib
Files geant4.9.2.p01.orig/source/digits_hits/utils/src/G4ScoreLogColorMap.cc and geant4.9.2.p01/source/digits_hits/utils/src/G4ScoreLogColorMap.cc differ
Files geant4.9.2.p01.orig/source/digits_hits/utils/src/G4VScoreColorMap.cc and geant4.9.2.p01/source/digits_hits/utils/src/G4VScoreColorMap.cc differ
Files geant4.9.2.p01.orig/source/geometry/solids/Boolean/src/G4SubtractionSolid.cc and geant4.9.2.p01/source/geometry/solids/Boolean/src/G4SubtractionSolid.cc differ
Files geant4.9.2.p01.orig/source/materials/include/G4MaterialPropertyVector.hh and geant4.9.2.p01/source/materials/include/G4MaterialPropertyVector.hh differ
Files geant4.9.2.p01.orig/source/materials/src/G4MaterialPropertiesTable.cc and geant4.9.2.p01/source/materials/src/G4MaterialPropertiesTable.cc differ
Files geant4.9.2.p01.orig/source/materials/src/G4MaterialPropertyVector.cc and geant4.9.2.p01/source/materials/src/G4MaterialPropertyVector.cc differ
Files geant4.9.2.p01.orig/source/processes/electromagnetic/lowenergy/src/G4hLowEnergyLoss.cc and geant4.9.2.p01/source/processes/electromagnetic/lowenergy/src/G4hLowEnergyLoss.cc differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4ElectronNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4ElectronNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4PhotoNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4PhotoNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4PositronNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4PositronNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc and geant4.9.2.p01/source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc and geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc differ
Files geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh and geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh differ
Only in geant4.9.2.p01/source/processes/optical/include: G4OpBoundaryProcess.hh.orig
Files geant4.9.2.p01.orig/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h and geant4.9.2.p01/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h differ
Only in geant4.9.2.p01: tmp

[blyth@belle7 g4checkpatch]$ cd geant4.9.2.p01
[blyth@belle7 geant4.9.2.p01]$ rm -rf bin .geant4.9.2.p01.patch .geant4.9.2.p01.patch2 include lib tmp G4OpBoundaryProcess.hh.orig

## after cleaning the detritus

[blyth@belle7 g4checkpatch]$ diff -r --brief geant4.9.2.p01.orig geant4.9.2.p01
Files geant4.9.2.p01.orig/source/digits_hits/utils/src/G4ScoreLogColorMap.cc and geant4.9.2.p01/source/digits_hits/utils/src/G4ScoreLogColorMap.cc differ
Files geant4.9.2.p01.orig/source/digits_hits/utils/src/G4VScoreColorMap.cc and geant4.9.2.p01/source/digits_hits/utils/src/G4VScoreColorMap.cc differ
Files geant4.9.2.p01.orig/source/geometry/solids/Boolean/src/G4SubtractionSolid.cc and geant4.9.2.p01/source/geometry/solids/Boolean/src/G4SubtractionSolid.cc differ
Files geant4.9.2.p01.orig/source/materials/include/G4MaterialPropertyVector.hh and geant4.9.2.p01/source/materials/include/G4MaterialPropertyVector.hh differ
Files geant4.9.2.p01.orig/source/materials/src/G4MaterialPropertiesTable.cc and geant4.9.2.p01/source/materials/src/G4MaterialPropertiesTable.cc differ
Files geant4.9.2.p01.orig/source/materials/src/G4MaterialPropertyVector.cc and geant4.9.2.p01/source/materials/src/G4MaterialPropertyVector.cc differ
Files geant4.9.2.p01.orig/source/processes/electromagnetic/lowenergy/src/G4hLowEnergyLoss.cc and geant4.9.2.p01/source/processes/electromagnetic/lowenergy/src/G4hLowEnergyLoss.cc differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4ElectronNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4ElectronNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4PhotoNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4PhotoNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4PositronNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4PositronNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc and geant4.9.2.p01/source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc and geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc differ
Files geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh and geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh differ
Files geant4.9.2.p01.orig/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h and geant4.9.2.p01/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h differ
[blyth@belle7 g4checkpatch]$

[blyth@belle7 g4checkpatch]$ diff -u -r geant4.9.2.p01.orig geant4.9.2.p01 &gt; geant4.9.2.p01.patch0</pre>
</div>
<p>Path inconsistency in the patch makes me suspect hand editing of patch files.
Even after removing the 2nd small patch changes, cannot establish
a match due to different diff ordering.</p>
<div class="section" id="extend-diff-py-to-dump-single-file-patches">
<h3><a class="toc-backref" href="#id4">Extend diff.py to dump single file patches</a><a class="headerlink" href="#extend-diff-py-to-dump-single-file-patches" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://dayabay.phys.ntu.edu.tw/tracs/env/intertrac/base/diff.py">env:base/diff.py</a></li>
</ul>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ diff.py geant4.9.2.p01.orig geant4.9.2.p01 -p
[blyth@belle7 g4checkpatch]$ l patches/
total 92
-rw-rw-r-- 1 blyth blyth  388 Mar  4 20:15 geant4.9.2.p01_environments_g4py_config_module.gmk.patch
-rw-rw-r-- 1 blyth blyth  418 Mar  4 20:15 geant4.9.2.p01_environments_g4py_configure.patch
-rw-rw-r-- 1 blyth blyth  384 Mar  4 20:15 geant4.9.2.p01_source_digits_hits_utils_src_G4ScoreLogColorMap.cc.patch
-rw-rw-r-- 1 blyth blyth  407 Mar  4 20:15 geant4.9.2.p01_source_digits_hits_utils_src_G4VScoreColorMap.cc.patch
-rw-rw-r-- 1 blyth blyth 1230 Mar  4 20:15 geant4.9.2.p01_source_geometry_solids_Boolean_src_G4SubtractionSolid.cc.patch
-rw-rw-r-- 1 blyth blyth  680 Mar  4 20:15 geant4.9.2.p01_source_materials_include_G4MaterialPropertiesTable.hh.patch
-rw-rw-r-- 1 blyth blyth  888 Mar  4 20:15 geant4.9.2.p01_source_materials_include_G4MaterialPropertyVector.hh.patch
-rw-rw-r-- 1 blyth blyth  934 Mar  4 20:15 geant4.9.2.p01_source_materials_src_G4MaterialPropertiesTable.cc.patch
-rw-rw-r-- 1 blyth blyth 4080 Mar  4 20:15 geant4.9.2.p01_source_materials_src_G4MaterialPropertyVector.cc.patch
-rw-rw-r-- 1 blyth blyth  429 Mar  4 20:15 geant4.9.2.p01_source_persistency_gdml_include_G4GDMLWrite.hh.patch
-rw-rw-r-- 1 blyth blyth 2346 Mar  4 20:15 geant4.9.2.p01_source_persistency_gdml_src_G4GDMLWrite.cc.patch
-rw-rw-r-- 1 blyth blyth 1517 Mar  4 20:15 geant4.9.2.p01_source_processes_electromagnetic_lowenergy_src_G4hLowEnergyLoss.cc.patch
-rw-rw-r-- 1 blyth blyth  393 Mar  4 20:15 geant4.9.2.p01_source_processes_hadronic_processes_include_G4ElectronNuclearProcess.hh.patch
-rw-rw-r-- 1 blyth blyth  383 Mar  4 20:15 geant4.9.2.p01_source_processes_hadronic_processes_include_G4PhotoNuclearProcess.hh.patch
-rw-rw-r-- 1 blyth blyth  898 Mar  4 20:15 geant4.9.2.p01_source_processes_hadronic_processes_include_G4PositronNuclearProcess.hh.patch
-rw-rw-r-- 1 blyth blyth  765 Mar  4 20:15 geant4.9.2.p01_source_processes_hadronic_processes_src_G4ElectronNuclearProcess.cc.patch
-rw-rw-r-- 1 blyth blyth  737 Mar  4 20:15 geant4.9.2.p01_source_processes_hadronic_processes_src_G4PhotoNuclearProcess.cc.patch
-rw-rw-r-- 1 blyth blyth 1307 Mar  4 20:15 geant4.9.2.p01_source_processes_optical_include_G4OpBoundaryProcess.hh.patch
-rw-rw-r-- 1 blyth blyth  406 Mar  4 20:15 geant4.9.2.p01_source_visualization_HepRep_include_cheprep_DeflateOutputStreamBuffer.h.patch
-rw-rw-r-- 1 blyth blyth  666 Mar  4 20:15 geant4.9.2.p01_source_visualization_VRML_GNUmakefile.patch
-rw-rw-r-- 1 blyth blyth  663 Mar  4 20:15 geant4.9.2.p01_source_visualization_VRML_include_G4VRML2FileSceneHandler.hh.patch
-rw-rw-r-- 1 blyth blyth 1634 Mar  4 20:15 geant4.9.2.p01_source_visualization_VRML_src_G4VRML2FileSceneHandler.cc.patch
-rw-rw-r-- 1 blyth blyth  711 Mar  4 20:15 geant4.9.2.p01_source_visualization_VRML_src_G4VRML2SceneHandlerFunc.icc.patch</pre>
</div>
</div>
<div class="section" id="create-patch-patch-match">
<h3><a class="toc-backref" href="#id5">Create <cite>patch-;patch-match</cite></a><a class="headerlink" href="#create-patch-patch-match" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ t patch-match
patch-match is a function
patch-match ()
{
    local line;
    local mpatch=$1;
    local opatch=$mpatch.$FUNCNAME;
    local msg="=== $FUNCNAME :";
    echo $msg truncating $opatch : reconstructing a combi patch from single file patches in matched order;
    echo -n &gt;$opatch;
    local fpatch;
    grep -- +++ $mpatch | while read line; do
        fpatch=$(patch-match-line $line);
        echo $fpatch;
        [ -f "$fpatch" ] &amp;&amp; cat $fpatch &gt;&gt;$opatch;
        [ ! -f "$fpatch" ] &amp;&amp; echo $msg WARNING : FAILED to find $fpatch;
    done
}
[blyth@belle7 g4checkpatch]$ t patch-match-dirty
patch-match-dirty is a function
patch-match-dirty ()
{
    type $FUNCNAME;
    local msg="=== $FUNCNAME :";
    local patch="geant4.9.2.p01.patch";
    patch-match $patch;
    echo scrubbing the omitted line in the dirty patch;
    perl -pi -e 's,diff -u -r geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh\n,,' $patch.patch-match;
    local cmd="diff $patch $patch.patch-match";
    echo $msg $cmd;
    eval $cmd;
    echo $msg $cmd
}</pre>
</div>
<div class="highlight-python"><pre>[blyth@belle7 patches]$ pwd
/data1/env/local/dyb/external/build/LCG/g4checkpatch/patches

[blyth@belle7 patches]$ patch-;patch-match geant4.9.2.p01.patch
=== patch-match : truncating geant4.9.2.p01.patch.patch-match : reconstructing a combi patch from single file patches in matched order
geant4.9.2.p01_source_geometry_solids_Boolean_src_G4SubtractionSolid.cc.patch
geant4.9.2.p01_source_processes_electromagnetic_lowenergy_src_G4hLowEnergyLoss.cc.patch
geant4.9.2.p01_source_processes_hadronic_processes_include_G4ElectronNuclearProcess.hh.patch
geant4.9.2.p01_source_processes_hadronic_processes_include_G4PhotoNuclearProcess.hh.patch
geant4.9.2.p01_source_processes_hadronic_processes_include_G4PositronNuclearProcess.hh.patch
geant4.9.2.p01_source_processes_hadronic_processes_src_G4ElectronNuclearProcess.cc.patch
geant4.9.2.p01_source_processes_hadronic_processes_src_G4PhotoNuclearProcess.cc.patch
geant4.9.1.p01_source_processes_optical_include_G4OpBoundaryProcess.hh.patch
geant4.9.2.p01_source_materials_include_G4MaterialPropertyVector.hh.patch
geant4.9.2.p01_source_materials_src_G4MaterialPropertiesTable.cc.patch
geant4.9.2.p01_source_materials_src_G4MaterialPropertyVector.cc.patch</pre>
</div>
<p>Huh this is the new dyb, without my mods... how this diff between the order matched patches ?
This is due to the inconsistent name geant4.9.1.p01 vs geant4.9.2.p01 preventing inclusion of
the new patch:</p>
<div class="highlight-python"><pre>[blyth@belle7 patches]$ diff geant4.9.2.p01.patch geant4.9.2.p01.patch.patch-match
...
&lt; diff -u -r geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc
&lt; --- geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc      2009-03-16 10:06:45.000000000 -0400
&lt; +++ geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc   2009-06-11 01:22:12.000000000 -0400
---
&gt; --- geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc      2009-03-16 22:06:45.000000000 +0800
&gt; +++ geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc   2014-03-04 18:04:57.000000000 +0800
168,200c162,163
&lt; --- geant4.9.1.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2007-10-15 17:16:24.000000000 -0400
&lt; +++ geant4.9.1.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2009-04-14 11:28:42.000000000 -0400
&lt; @@ -408,10 +408,23 @@
&lt;  void G4OpBoundaryProcess::DoReflection()
&lt;  {
&lt;          if ( theStatus == LambertianReflection ) {
&lt; -
&lt; -          NewMomentum = G4LambertianRand(theGlobalNormal);
&lt; -          theFacetNormal = (NewMomentum - OldMomentum).unit();
&lt; -
&lt; +       // wangzhe
&lt; +       // Original:
&lt; +          //NewMomentum = G4LambertianRand(theGlobalNormal);
&lt; +          //theFacetNormal = (NewMomentum - OldMomentum).unit();
&lt; +
&lt; +       // Temp Fix:
&lt; +       if(theGlobalNormal.mag()==0) {
&lt; +            std::cout&lt;&lt;"Error. Zero caught. A normal vector with mag be 0. May trigger a infinite loop later."&lt;&lt;std::endl;
&lt; +            std::cout&lt;&lt;"A temporary solution: Photon is forced to go back along its original path."&lt;&lt;std::endl;
&lt; +            std::cout&lt;&lt;"Test from MDC09a tells the effect of this bug is tiny."&lt;&lt;std::endl;
&lt; +         G4ThreeVector myVec(0,0,0);
&lt; +         theFacetNormal = (myVec - OldMomentum).unit();
&lt; +       } else {
&lt; +         NewMomentum = G4LambertianRand(theGlobalNormal);
&lt; +         theFacetNormal = (NewMomentum - OldMomentum).unit();
&lt; +       }
&lt; +       // wz
&lt;          }
&lt;          else if ( theFinish == ground ) {
&lt;</pre>
</div>
<p>After kludging to handle the inconsistencies, get down to diff-of-diffs with <strong>patch-match-dirty</strong>
as below with just date differences and offset hunk start line numbers for G4OpBoundaryProcess.hh:</p>
<div class="highlight-python"><pre>&gt; +++ geant4.9.2.p01/source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc        2014-03-04 18:04:57.000000000 +0800
150,151c150,151
&lt; --- geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc      2009-03-16 10:06:45.000000000 -0400
&lt; +++ geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc   2009-06-11 01:22:12.000000000 -0400
---
&gt; --- geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc      2009-03-16 22:06:45.000000000 +0800
&gt; +++ geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc   2014-03-04 18:04:57.000000000 +0800
168,170c168,170
&lt; --- geant4.9.1.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2007-10-15 17:16:24.000000000 -0400
&lt; +++ geant4.9.1.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2009-04-14 11:28:42.000000000 -0400
&lt; @@ -408,10 +408,23 @@
---
&gt; --- geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh       2009-03-16 22:06:47.000000000 +0800
&gt; +++ geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2014-03-04 18:04:58.000000000 +0800
&gt; @@ -299,10 +299,23 @@
199,200c199,200
&lt; --- geant4.9.2.p01.orig/source/materials/include/G4MaterialPropertyVector.hh  2009-09-29 19:55:36.000000000 -0700
&lt; +++ geant4.9.2.p01/source/materials/include/G4MaterialPropertyVector.hh       2009-09-28 16:51:45.000000000 -0700
---
&gt; --- geant4.9.2.p01.orig/source/materials/include/G4MaterialPropertyVector.hh  2009-03-16 22:05:57.000000000 +0800
&gt; +++ geant4.9.2.p01/source/materials/include/G4MaterialPropertyVector.hh       2014-03-04 18:04:54.000000000 +0800
220,221c220,221</pre>
</div>
<p>Inconsistent hunk start line numbers:</p>
<div class="highlight-python"><pre>&lt; @@ -408,10 +408,23 @@
&gt; @@ -299,10 +299,23 @@</pre>
</div>
<p>It seems that the difference in hunk start line numbers does not matter for patch application ?
Checking /data1/env/local/dyb/external/build/LCG/geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh
it appears to be correctly applied.</p>
<ul class="simple">
<li><a class="reference external" href="http://www.gnu.org/software/diffutils/manual/html_node/Detailed-Unified.html#Detailed-Unified">http://www.gnu.org/software/diffutils/manual/html_node/Detailed-Unified.html#Detailed-Unified</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/10950412/what-does-1-1-mean-in-gits-diff-output">http://stackoverflow.com/questions/10950412/what-does-1-1-mean-in-gits-diff-output</a></li>
</ul>
<div class="highlight-python"><pre>298 inline
299 void G4OpBoundaryProcess::DoReflection()
300 {
301         if ( theStatus == LambertianReflection ) {
302       // wangzhe
303       // Original:
304           //NewMomentum = G4LambertianRand(theGlobalNormal);
305           //theFacetNormal = (NewMomentum - OldMomentum).unit();
306
307       // Temp Fix:
308       if(theGlobalNormal.mag()==0) {
309             std::cout&lt;&lt;"Error. Zero caught. A normal vector with mag be 0. May trigger a infinite loop later."&lt;&lt;std::endl;
310             std::cout&lt;&lt;"A temporary solution: Photon is forced to go back along its original path."&lt;&lt;std::endl;
311             std::cout&lt;&lt;"Test from MDC09a tells the effect of this bug is tiny."&lt;&lt;std::endl;
312         G4ThreeVector myVec(0,0,0);
313         theFacetNormal = (myVec - OldMomentum).unit();
314       } else {
315         NewMomentum = G4LambertianRand(theGlobalNormal);
316         theFacetNormal = (NewMomentum - OldMomentum).unit();
317       }
318       // wz
319         }
320         else if ( theFinish == ground ) {
321</pre>
</div>
<p>But there is a <cite>G4OpBoundaryProcess.hh.orig</cite> dropping in the source, presumably this is punishment from <cite>patch</cite>:</p>
<div class="highlight-python"><pre>[blyth@belle7 geant4.9.2.p01]$ pwd
/data1/env/local/dyb/external/build/LCG/geant4.9.2.p01

[blyth@belle7 geant4.9.2.p01]$ find . -name '*.orig' -exec ls -l {} \;
-rw-r--r-- 1 blyth blyth 10395 Mar 16  2009 ./include/G4OpBoundaryProcess.hh.orig
-rw-r--r-- 1 blyth blyth 10395 Mar 16  2009 ./source/processes/optical/include/G4OpBoundaryProcess.hh.orig
[blyth@belle7 geant4.9.2.p01]$</pre>
</div>
<p>Note the inconsistencies for G4OpBoundaryProcess</p>
<ul class="simple">
<li>&#8220;geant4.9.1.p01&#8221; is present where &#8220;geant4.9.2.p01&#8221; should be</li>
<li>the diff command line is omitted</li>
</ul>
<p>The patch that are comparing against was clearly fabricated in a dirty manner.</p>
</div>
<div class="section" id="test-patching">
<h3><a class="toc-backref" href="#id6">test patching</a><a class="headerlink" href="#test-patching" title="Permalink to this headline">¶</a></h3>
<p>With the clean patch:</p>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ cp geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh G4OpBoundaryProcess.hh
[blyth@belle7 g4checkpatch]$ patch -b G4OpBoundaryProcess.hh patches/geant4.9.2.p01_source_processes_optical_include_G4OpBoundaryProcess.hh.patch
patching file G4OpBoundaryProcess.hh
[blyth@belle7 g4checkpatch]$ ll G4Op*
-rw-r--r-- 1 blyth blyth 10395 Mar  5 12:59 G4OpBoundaryProcess.hh.orig
-rw-r--r-- 1 blyth blyth 11031 Mar  5 12:59 G4OpBoundaryProcess.hh</pre>
</div>
<p>Split off the dirty hunk in the patch, compare dirty to clean patch:</p>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ diff geant4.9.2.p01_G4OpBoundaryProcess.hh.patch patches/geant4.9.2.p01_source_processes_optical_include_G4OpBoundaryProcess.hh.patch
1,3c1,4
&lt; --- geant4.9.1.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2007-10-15 17:16:24.000000000 -0400
&lt; +++ geant4.9.1.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2009-04-14 11:28:42.000000000 -0400
&lt; @@ -408,10 +408,23 @@
---
&gt; diff -u -r geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh
&gt; --- geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh       2009-03-16 22:06:47.000000000 +0800
&gt; +++ geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh    2014-03-04 18:04:58.000000000 +0800
&gt; @@ -299,10 +299,23 @@
[blyth@belle7 g4checkpatch]$</pre>
</div>
<p>Confirm that dirty patch succeeds with complaint and .orig dropping:</p>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ cp geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh .
[blyth@belle7 g4checkpatch]$ patch -N G4OpBoundaryProcess.hh -i geant4.9.2.p01_G4OpBoundaryProcess.hh.patch
patching file G4OpBoundaryProcess.hh
Hunk #1 succeeded at 299 (offset -109 lines).

[blyth@belle7 g4checkpatch]$ ll G4OpBoundaryProcess.hh*
-rw-r--r-- 1 blyth blyth 10395 Mar  5 14:09 G4OpBoundaryProcess.hh.orig
-rw-r--r-- 1 blyth blyth 11031 Mar  5 14:09 G4OpBoundaryProcess.hh</pre>
</div>
</div>
<div class="section" id="four-dirty-patches">
<h3><a class="toc-backref" href="#id7">Four dirty patches</a><a class="headerlink" href="#four-dirty-patches" title="Permalink to this headline">¶</a></h3>
<p>Check the log:</p>
<div class="highlight-python"><pre>[blyth@belle7 dyb]$ grep Hunk *.log
dybinst-20140303-145546.log:Hunk #1 succeeded at 1330 with fuzz 1.
dybinst-20140303-145546.log:Hunk #1 succeeded at 299 (offset -109 lines).
dybinst-20140303-145546.log:Hunk #1 succeeded at 4659 (offset 44 lines).
dybinst-20140303-145546.log:Hunk #1 succeeded at 27 with fuzz 2.
[blyth@belle7 dyb]$</pre>
</div>
<div class="highlight-python"><pre>161632 openscientistvis: "running command: patch -N -p0 -i /data1/env/local/dyb/NuWa-trunk/lcgcmt/LCG_Builders/openscientistvis/patches/osc_16_11.patch"
161633 + patch -N -p0 -i /data1/env/local/dyb/NuWa-trunk/lcgcmt/LCG_Builders/openscientistvis/patches/osc_16_11.patch
161634 patching file OnX/source/Gtk/GtkUI.cxx
161635 Hunk #1 succeeded at 1330 with fuzz 1.
...
206730 geant4: "running command: patch -N -p1 -i /data1/env/local/dyb/NuWa-trunk/lcgcmt/LCG_Builders/geant4/patches/geant4.9.2.p01.patch"
206731 + patch -N -p1 -i /data1/env/local/dyb/NuWa-trunk/lcgcmt/LCG_Builders/geant4/patches/geant4.9.2.p01.patch
206732 patching file source/geometry/solids/Boolean/src/G4SubtractionSolid.cc
206733 patching file source/processes/electromagnetic/lowenergy/src/G4hLowEnergyLoss.cc
206734 patching file source/processes/hadronic/processes/include/G4ElectronNuclearProcess.hh
206735 patching file source/processes/hadronic/processes/include/G4PhotoNuclearProcess.hh
206736 patching file source/processes/hadronic/processes/include/G4PositronNuclearProcess.hh
206737 patching file source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc
206738 patching file source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc
206739 patching file source/processes/optical/include/G4OpBoundaryProcess.hh
206740 Hunk #1 succeeded at 299 (offset -109 lines).
206741 patching file source/materials/include/G4MaterialPropertyVector.hh
206742 patching file source/materials/src/G4MaterialPropertiesTable.cc
206743 patching file source/materials/src/G4MaterialPropertyVector.cc
...
216214 + patch -N -p1 -i /data1/env/local/dyb/NuWa-trunk/lcgcmt/LCG_Builders/more/patches/more-0.8.2.patch
216215 patching file more/Makefile.am
216216 patching file more/Makefile.in
216217 Hunk #1 succeeded at 4659 (offset 44 lines).
...
216247 + patch -N -p1 -i /data1/env/local/dyb/NuWa-trunk/lcgcmt/LCG_Builders/more/patches/more-0.8.2-popen.patch
216248 patching file more/io/ipstream.cc
216249 Hunk #1 succeeded at 27 with fuzz 2.</pre>
</div>
</div>
<div class="section" id="there-are-more-orig">
<h3><a class="toc-backref" href="#id8">There are more <cite>.orig</cite></a><a class="headerlink" href="#there-are-more-orig" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>[blyth@belle7 external]$ find . -name '*.orig'
./build/LCG/g4checkpatch/G4OpBoundaryProcess.hh.orig
./build/LCG/g4checkpatch/clean/G4OpBoundaryProcess.hh.orig
./build/LCG/g4checkpatch/geant4.9.2.p01.orig
./build/LCG/OpenScientist/osc_vis/bin_obuild/osc_vis/16.11/Resources/foreign/Python.obuild.orig
./build/LCG/OpenScientist/osc_vis/bin_obuild/osc_vis/16.11/Resources/foreign/Motif.obuild.orig
./build/LCG/OpenScientist/OnX/source/Gtk/GtkUI.cxx.orig
./build/LCG/OpenScientist/foreign/Python.obuild.orig
./build/LCG/OpenScientist/foreign/Motif.obuild.orig
./build/LCG/more-0.8.3/more/io/ipstream.cc.orig
./build/LCG/more-0.8.3/more/Makefile.in.orig
./build/LCG/geant4.9.2.p01/include/G4OpBoundaryProcess.hh.orig
./build/LCG/geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh.orig
./OpenScientist/16.11/i686-slc5-gcc41-dbg/osc_vis/16.11/Resources/foreign/Python.obuild.orig
./OpenScientist/16.11/i686-slc5-gcc41-dbg/osc_vis/16.11/Resources/foreign/Motif.obuild.orig
./OpenScientist/16.11/i686-slc5-gcc41-dbg/Resources/foreign/Python.obuild.orig
./OpenScientist/16.11/i686-slc5-gcc41-dbg/Resources/foreign/Motif.obuild.orig
./geant4/4.9.2.p01/i686-slc5-gcc41-dbg/include/G4OpBoundaryProcess.hh.orig
[blyth@belle7 external]$</pre>
</div>
</div>
</div>
<div class="section" id="check-other-geant4-9-2-p01-patch2">
<h2><a class="toc-backref" href="#id9">Check other geant4.9.2.p01.patch2</a><a class="headerlink" href="#check-other-geant4-9-2-p01-patch2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ patch-
[blyth@belle7 g4checkpatch]$ patch-match-clean
patch-match-clean is a function
patch-match-clean ()
{
    type $FUNCNAME;
    local msg="=== $FUNCNAME :";
    local patch="patches/geant4.9.2.p01.patch2";
    patch-match $patch "---";
    echo $msg scrubbing all the diff cmdline in patch;
    perl -pi -e 's,^diff -u -r .*\n$,,' $patch.patch-match;
    patch-match-compare $patch
}
=== patch-match-clean : mpatch patches/geant4.9.2.p01.patch2 patchdir patches marker ---
=== patch-match : truncating patches/geant4.9.2.p01.patch2.patch-match : reconstructing a combi patch from single file patches in matched order
patches/geant4.9.2.p01_source_digits_hits_utils_src_G4ScoreLogColorMap.cc.patch
patches/geant4.9.2.p01_source_visualization_HepRep_include_cheprep_DeflateOutputStreamBuffer.h.patch
patches/geant4.9.2.p01_source_digits_hits_utils_src_G4VScoreColorMap.cc.patch
=== patch-match-clean : scrubbing all the diff cmdline in patch
=== patch-match-compare : diff patches/geant4.9.2.p01.patch2 patches/geant4.9.2.p01.patch2.patch-match
1,2c1,2
&lt; --- geant4.9.2.p01/source/digits_hits/utils/src/G4ScoreLogColorMap.cc 2009-03-16 15:05:42.000000000 +0100
&lt; +++ geant4.9.2.p01.new/source/digits_hits/utils/src/G4ScoreLogColorMap.cc     2010-07-30 15:25:21.265772830 +0200
---
&gt; --- geant4.9.2.p01.orig/source/digits_hits/utils/src/G4ScoreLogColorMap.cc    2009-03-16 22:05:42.000000000 +0800
&gt; +++ geant4.9.2.p01/source/digits_hits/utils/src/G4ScoreLogColorMap.cc 2014-03-04 18:04:59.000000000 +0800
12,13c12,13
&lt; --- geant4.9.2.p01/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h    2009-03-16 15:06:51.000000000 +0100
&lt; +++ geant4.9.2.p01.new/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h        2010-07-30 15:27:57.315772592 +0200
---
&gt; --- geant4.9.2.p01.orig/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h       2009-03-16 22:06:51.000000000 +0800
&gt; +++ geant4.9.2.p01/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h    2014-03-04 18:04:55.000000000 +0800
22,23c22,23
&lt; --- geant4.9.2.p01/source/digits_hits/utils/src/G4VScoreColorMap.cc   2009-03-16 15:05:42.000000000 +0100
&lt; +++ geant4.9.2.p01.new/source/digits_hits/utils/src/G4VScoreColorMap.cc       2010-07-30 16:06:01.225772558 +0200
---
&gt; --- geant4.9.2.p01.orig/source/digits_hits/utils/src/G4VScoreColorMap.cc      2009-03-16 22:05:42.000000000 +0800
&gt; +++ geant4.9.2.p01/source/digits_hits/utils/src/G4VScoreColorMap.cc   2014-03-04 18:04:59.000000000 +0800
=== patch-match-compare : diff patches/geant4.9.2.p01.patch2 patches/geant4.9.2.p01.patch2.patch-match
[blyth@belle7 g4checkpatch]$</pre>
</div>
</div>
<div class="section" id="my-dyb-old-geant4-mods-were-ontop-of-two-patches">
<h2><a class="toc-backref" href="#id10">My dyb.old Geant4 mods were ontop of two patches</a><a class="headerlink" href="#my-dyb-old-geant4-mods-were-ontop-of-two-patches" title="Permalink to this headline">¶</a></h2>
<p>Need to extracate:</p>
<div class="highlight-python"><pre>[blyth@belle7 g4checkpatch]$ pwd
/data1/env/local/dyb.old/external/build/LCG/g4checkpatch

[blyth@belle7 g4checkpatch]$ diff -r --brief geant4.9.2.p01.orig geant4.9.2.p01
Files geant4.9.2.p01.orig/environments/g4py/config/module.gmk and geant4.9.2.p01/environments/g4py/config/module.gmk differ
Files geant4.9.2.p01.orig/environments/g4py/configure and geant4.9.2.p01/environments/g4py/configure differ

        ## this was me experimenting with g4py, only to find that be GetPoly API I was intyerested in was not provided

Files geant4.9.2.p01.orig/source/digits_hits/utils/src/G4ScoreLogColorMap.cc and geant4.9.2.p01/source/digits_hits/utils/src/G4ScoreLogColorMap.cc differ
Files geant4.9.2.p01.orig/source/digits_hits/utils/src/G4VScoreColorMap.cc and geant4.9.2.p01/source/digits_hits/utils/src/G4VScoreColorMap.cc differ
Files geant4.9.2.p01.orig/source/geometry/solids/Boolean/src/G4SubtractionSolid.cc and geant4.9.2.p01/source/geometry/solids/Boolean/src/G4SubtractionSolid.cc differ

       ## from the patches

Files geant4.9.2.p01.orig/source/materials/include/G4MaterialPropertiesTable.hh and geant4.9.2.p01/source/materials/include/G4MaterialPropertiesTable.hh differ
Only in geant4.9.2.p01/source/materials/include: G4MaterialPropertiesTable.hh.orig
Files geant4.9.2.p01.orig/source/materials/include/G4MaterialPropertyVector.hh and geant4.9.2.p01/source/materials/include/G4MaterialPropertyVector.hh differ
Only in geant4.9.2.p01/source/materials/include: G4MaterialPropertyVector.hh.orig
Files geant4.9.2.p01.orig/source/materials/src/G4MaterialPropertiesTable.cc and geant4.9.2.p01/source/materials/src/G4MaterialPropertiesTable.cc differ
Files geant4.9.2.p01.orig/source/materials/src/G4MaterialPropertyVector.cc and geant4.9.2.p01/source/materials/src/G4MaterialPropertyVector.cc differ
Only in geant4.9.2.p01/source/materials/src: G4MaterialPropertyVector.cc.orig

       ## interference between my changes and patch


Files geant4.9.2.p01.orig/source/persistency/gdml/include/G4GDMLWrite.hh and geant4.9.2.p01/source/persistency/gdml/include/G4GDMLWrite.hh differ

       ## buffer size limitation, truncating id fix

Files geant4.9.2.p01.orig/source/persistency/gdml/src/G4GDMLWrite.cc and geant4.9.2.p01/source/persistency/gdml/src/G4GDMLWrite.cc differ

       ## buffer size, replacing hardcoded 99

Files geant4.9.2.p01.orig/source/processes/electromagnetic/lowenergy/src/G4hLowEnergyLoss.cc and geant4.9.2.p01/source/processes/electromagnetic/lowenergy/src/G4hLowEnergyLoss.cc differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4ElectronNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4ElectronNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4PhotoNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4PhotoNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/include/G4PositronNuclearProcess.hh and geant4.9.2.p01/source/processes/hadronic/processes/include/G4PositronNuclearProcess.hh differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc and geant4.9.2.p01/source/processes/hadronic/processes/src/G4ElectronNuclearProcess.cc differ
Files geant4.9.2.p01.orig/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc and geant4.9.2.p01/source/processes/hadronic/processes/src/G4PhotoNuclearProcess.cc differ
Files geant4.9.2.p01.orig/source/processes/optical/include/G4OpBoundaryProcess.hh and geant4.9.2.p01/source/processes/optical/include/G4OpBoundaryProcess.hh differ
Only in geant4.9.2.p01/source/processes/optical/include: G4OpBoundaryProcess.hh.orig

Files geant4.9.2.p01.orig/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h and geant4.9.2.p01/source/visualization/HepRep/include/cheprep/DeflateOutputStreamBuffer.h differ

Files geant4.9.2.p01.orig/source/visualization/VRML/GNUmakefile and geant4.9.2.p01/source/visualization/VRML/GNUmakefile differ

     ## ill advised debug

Files geant4.9.2.p01.orig/source/visualization/VRML/include/G4VRML2FileSceneHandler.hh and geant4.9.2.p01/source/visualization/VRML/include/G4VRML2FileSceneHandler.hh differ
Files geant4.9.2.p01.orig/source/visualization/VRML/src/G4VRML2FileSceneHandler.cc and geant4.9.2.p01/source/visualization/VRML/src/G4VRML2FileSceneHandler.cc differ

     ## VRML2 precision fix + debug

Files geant4.9.2.p01.orig/source/visualization/VRML/src/G4VRML2SceneHandlerFunc.icc and geant4.9.2.p01/source/visualization/VRML/src/G4VRML2SceneHandlerFunc.icc differ

     ##  commented debug</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../create_incremental_patch/" title="Create Incremental Patch"
             >next</a> |</li>
        <li class="right" >
          <a href="../nuwa_integration/" title="Integration of Export Functionality into NuWa"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../" >geant4</a> &raquo;</li>
          <li><a href="../" >nuwa</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>