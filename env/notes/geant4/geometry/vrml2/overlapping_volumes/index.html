<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Fully Overlapping volumes, due to imprecise export &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../../" />
    <link rel="up" title="VRML2" href="../" />
    <link rel="next" title="VRML2FILE export debugging" href="../booleanprocessor_warnings/" />
    <link rel="prev" title="instant reality player" href="../instant_reality_player/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../booleanprocessor_warnings/" title="VRML2FILE export debugging"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../instant_reality_player/" title="instant reality player"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >geant4</a> &raquo;</li>
          <li><a href="../../" >Geant4 Geometry Export</a> &raquo;</li>
          <li><a href="../" accesskey="U">VRML2</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pycuda/">pycuda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../">geant4</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../geant4_gpu/">Geant4 GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../geant4_profiling/">Geant4 Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../verbosity/">Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/">Geant4 Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../giga/">GiGa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/">Geant4 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opticalphoton/">Geant4 Optical Photon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../processes/">Geant4 Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../medical/">Medical Communities Using Geant4 (esp. optical photon)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../">Geant4 Geometry Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../g4py/">g4py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nuwa/">nuwa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../event/">Geant4 Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../geant4_future_doe/">Geant4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../geant4_multi_threading/">Geant4 Multi Threading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hg/">hg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../simoncblyth.bitbucket.org/">simoncblyth.bitbucket.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../numpy/">numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../presentation/">Muon Simulation Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../optix/">optix</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../_sources/geant4/geometry/vrml2/overlapping_volumes.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../instant_reality_player/"
                        title="previous chapter">instant reality player</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../booleanprocessor_warnings/"
                        title="next chapter">VRML2FILE export debugging</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="fully-overlapping-volumes-due-to-imprecise-export">
<h1>Fully Overlapping volumes, due to imprecise export<a class="headerlink" href="#fully-overlapping-volumes-due-to-imprecise-export" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#executive-summary" id="id1">executive summary</a></li>
<li><a class="reference internal" href="#g4point3d-streaming" id="id2">G4Point3D streaming</a></li>
<li><a class="reference internal" href="#probable-fix" id="id3">Probable Fix</a></li>
<li><a class="reference internal" href="#distinct-volume-count-discrepancy" id="id4">distinct volume count discrepancy</a></li>
<li><a class="reference internal" href="#confirmation-of-shape-overlapping" id="id5">confirmation of shape overlapping</a></li>
<li><a class="reference internal" href="#check-detdesc-source-xml" id="id6">check detdesc source xml</a><ul>
<li><a class="reference internal" href="#correlate-extents-of-exported-shapes-with-expectations" id="id7">correlate extents of exported shapes with expectations</a></li>
<li><a class="reference internal" href="#initial-hypothesis" id="id8">initial hypothesis</a></li>
<li><a class="reference internal" href="#look-for-others-with-those-names" id="id9">Look for others with those names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scene-attribute-edits-via-web-interface" id="id10">Scene Attribute edits via web interface</a></li>
<li><a class="reference internal" href="#volume-selection-with-the-dupes-and-context-volumes" id="id11">Volume selection with the dupes and context volumes</a><ul>
<li><a class="reference internal" href="#highlight-the-dupes" id="id12">highlight the dupes</a></li>
<li><a class="reference internal" href="#first-degenerate-pair" id="id13">first degenerate pair</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="executive-summary">
<h2><a class="toc-backref" href="#id1">executive summary</a><a class="headerlink" href="#executive-summary" title="Permalink to this headline">¶</a></h2>
<p>The large y dimension values: <cite>-805788</cite> are resulting in a loss of precision
due to use of default streaming in the exported VRML2 geometries.
Six mother volumes end up exactly overlapping their six daughters, they are very close
concentric tubs.</p>
</div>
<div class="section" id="g4point3d-streaming">
<h2><a class="toc-backref" href="#id2">G4Point3D streaming</a><a class="headerlink" href="#g4point3d-streaming" title="Permalink to this headline">¶</a></h2>
<p>global/HEPGeometry/include/G4Point3D.hh:</p>
<div class="highlight-python"><pre>33 #include "globals.hh"
34 #include &lt;CLHEP/Geometry/Point3D.h&gt;
36 typedef HepGeom::Point3D&lt;G4double&gt; G4Point3D;</pre>
</div>
<p>external/build/LCG/geant4.9.2.p01/source/visualization/VRML/src/G4VRML2SceneHandlerFunc.icc:</p>
<div class="highlight-python"><pre>209         G4Point3D point = polyhedron.GetVertex(i);
211         point.transform( *fpObjectTransformation );
214         fDest &lt;&lt;                   point.x() &lt;&lt; " ";
215         fDest &lt;&lt;                   point.y() &lt;&lt; " ";
216         fDest &lt;&lt;                   point.z() &lt;&lt; "," &lt;&lt; "\n";</pre>
</div>
<div class="highlight-python"><pre>std::ofstream     fDest ;</pre>
</div>
</div>
<div class="section" id="probable-fix">
<h2><a class="toc-backref" href="#id3">Probable Fix</a><a class="headerlink" href="#probable-fix" title="Permalink to this headline">¶</a></h2>
<p>external/build/LCG/geant4.9.2.p01/source/visualization/VRML/src/G4VRML2FileSceneHandler.cc:</p>
<div class="highlight-python"><pre>041 #include &lt;iomanip&gt;   // SCB
...
190
191     G4cerr &lt;&lt; "Using setprecision(5) and fixed floating point notation for veracity of output [SCB PATCH] " &lt;&lt; G4endl;
192     fDest &lt;&lt; std::setprecision(5) &lt;&lt; std::fixed ; // SCB
193
194 }</pre>
</div>
</div>
<div class="section" id="distinct-volume-count-discrepancy">
<h2><a class="toc-backref" href="#id4">distinct volume count discrepancy</a><a class="headerlink" href="#distinct-volume-count-discrepancy" title="Permalink to this headline">¶</a></h2>
<p>Before including volume name metadata line in <em>src</em> name:</p>
<div class="highlight-python"><pre>sqlite&gt; select count(distinct(src)) from shape ;
12223</pre>
</div>
<p>After including the the name line, are 6 more distinct:</p>
<div class="highlight-python"><pre>simon:export blyth$ echo "select count(distinct(src)) from shape ;" | sqlite3 -noheader g4_00.db
12229</pre>
</div>
<ol class="arabic simple">
<li>This suggests six absolute position duplicated shapes with different volume names</li>
</ol>
</div>
<div class="section" id="confirmation-of-shape-overlapping">
<h2><a class="toc-backref" href="#id5">confirmation of shape overlapping</a><a class="headerlink" href="#confirmation-of-shape-overlapping" title="Permalink to this headline">¶</a></h2>
<p>Hashing the shape with name excluded confirms issue.
The dodgy dozen, six pairs of volumes are precisely co-located:</p>
<div class="highlight-python"><pre>sqlite&gt; select hash, group_concat(name), group_concat(id)  from shape group by hash having count(*) &gt; 1 ;
hash                              group_concat(name)                                                                                                                           group_concat(id)
--------------------------------  ---------------------------------------------------------------------------------------------                                                ----------------
036f14cfb2e7bbe62226d213bd3e7780  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000,/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000  6400,6401
2043a400a35f062979ddfa73254cac9d  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000,/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000  6318,6319
547dd4e8ad4c711815456951753d8fa9  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000,/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000  4570,4571
b7e229d741481e47f3c06236dbc2961d  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000,/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000  6230,6231
be270355bc36384aa290479074aaec4e  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000,/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000  4658,4659
c35f0b07cfa25126ec1b156aca3364d8  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000,/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000  4740,4741
sqlite&gt;</pre>
</div>
</div>
<div class="section" id="check-detdesc-source-xml">
<h2><a class="toc-backref" href="#id6">check detdesc source xml</a><a class="headerlink" href="#check-detdesc-source-xml" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/intertrac/dybgaudi/trunk/Detector/XmlDetDesc/DDDB/CalibrationSources/sources.xml">env:dybgaudi/trunk/Detector/XmlDetDesc/DDDB/CalibrationSources/sources.xml</a></li>
<li><a class="reference external" href="http://dayabay.ihep.ac.cn/tracs/dybsvn/browser/dybgaudi/trunk/Detector/XmlDetDesc/DDDB/CalibrationSources/sources.xml?annotate=blame&amp;rev=19722">http://dayabay.ihep.ac.cn/tracs/dybsvn/browser/dybgaudi/trunk/Detector/XmlDetDesc/DDDB/CalibrationSources/sources.xml?annotate=blame&amp;rev=19722</a> 4 year old XML from Dan</li>
</ul>
<div class="highlight-python"><pre>[blyth@cms01 DDDB]$ find . -name '*.xml' -exec grep -H /dd/Geometry/CalibrationSources/lvMainSSTube {} \;
./CalibrationSources/sources.xml:             logvol="/dd/Geometry/CalibrationSources/lvMainSSTube"&gt;
[blyth@cms01 DDDB]$ find . -name '*.xml' -exec grep -H /dd/Geometry/CalibrationSources/lvMainSSCavity {} \;
./CalibrationSources/sources.xml:             logvol="/dd/Geometry/CalibrationSources/lvMainSSCavity"&gt;</pre>
</div>
<div class="highlight-python"><pre>443   &lt;!-- AmCCo60 Source SS Tube Structure --&gt;
444   &lt;logvol name="lvMainSSTube" material="StainlessSteel"&gt;
445     &lt;tubs name="MainSSTube"
446           outerRadius="SSTubeOuterRadius"      ### 7.94*mm
447           sizeZ="SSTubeHeight-2*SSSpringPinOffSet"/&gt;   ## 29.72*mm   29.72-(2*.815)=28.09
448
449     &lt;physvol name="pvMainSSCavity"
450              logvol="/dd/Geometry/CalibrationSources/lvMainSSCavity"&gt;
451       &lt;posXYZ x="0*m" y="0*m" z="0*m" /&gt;
452     &lt;/physvol&gt;
453
454   &lt;/logvol&gt;
455
456   &lt;logvol name="lvMainSSCavity" material="Air"&gt;
457     &lt;tubs name="MainSSCavity"
458           sizeZ="AmCCo60AcrylicHeight"            ### 23.6*mm
459           outerRadius="AmCCo60AcrylicRadius" /&gt;   ### 6.55*mm
460
461     &lt;physvol name="pvAmCCo60SourceAcrylic"
462              logvol="/dd/Geometry/CalibrationSources/lvAmCCo60SourceAcrylic"&gt;
463       &lt;posXYZ x="0*m" y="0*m" z="0*m" /&gt;
464     &lt;/physvol&gt;
465
466   &lt;/logvol&gt;</pre>
</div>
<p>parameters.xml:</p>
<div class="highlight-python"><pre>68 &lt;parameter name="AmCCo60SourceAcrylicRadius" value="10.035*mm"/&gt;
69 &lt;parameter name="AmCCo60SourceAcrylicHeight" value="49.8*mm"/&gt;
70 &lt;parameter name="AmCCo60AcrylicHeight" value="23.6*mm"/&gt;              ### MATCHES
71 &lt;parameter name="AmCCo60AcrylicRadius" value="6.55*mm"/&gt;
72 &lt;parameter name="SSTubeOuterRadius" value="7.94*mm"/&gt;
73 &lt;parameter name="SSTubeHeight" value="29.72*mm"/&gt;
74 &lt;parameter name="AcrylicSideCavityRadius" value="6.35*mm"/&gt;
75 &lt;parameter name="AcrylicSideCavityHeight" value="3.8*mm"/&gt;
76 &lt;parameter name="Co60AlRadius" value="2.5*mm"/&gt;
77 &lt;parameter name="Co60AlHeight" value="5.0*mm"/&gt;
78 &lt;parameter name="Co60SourceRadius" value="1.0*mm"/&gt;
79 &lt;parameter name="Co60SourceHeight" value="2.0*mm"/&gt;
80 &lt;parameter name="Co60OffSet" value="1.5*mm"/&gt;
81 &lt;parameter name="AmCContainerOuterRadius" value="3.25*mm"/&gt;
82 &lt;parameter name="AmCContainerHeight" value="2.0*mm"/&gt;
83 &lt;parameter name="AmCOffSet" value="2.3*mm"/&gt;
84 &lt;parameter name="AmCSourceRadius" value="2.5*mm"/&gt;
85 &lt;parameter name="AmCSourceHeight" value="1.0*mm"/&gt;
86 &lt;parameter name="AmCSourceCupHeight" value="1.3*mm"/&gt;
..
88 &lt;parameter name="SSSpringPinRadius" value=".815*mm"/&gt;
89 &lt;parameter name="SSSpringPinOffSet" value="3.05*mm"/&gt;</pre>
</div>
<div class="section" id="correlate-extents-of-exported-shapes-with-expectations">
<h3><a class="toc-backref" href="#id7">correlate extents of exported shapes with expectations</a><a class="headerlink" href="#correlate-extents-of-exported-shapes-with-expectations" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>sqlite&gt; select sid,npo,ax,ay,az,dx,dy,dz,name from xshape where name like '/dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000' or name like '/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000' ;
sid         npo         ax          ay          az                 dx                dy          dz                name
----------  ----------  ----------  ----------  -----------------  ----------------  ----------  ----------------  ----------------------------------------------------------------
4570        50          -18063.584  -799502.16  -4157.12000000001  13.0999999999985  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
4571        50          -18063.584  -799502.16  -4157.12000000001  13.0999999999985  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAc
4658        50          -17296.992  -798390.84  -4157.12000000001  13.0              13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
4659        50          -17296.992  -798390.84  -4157.12000000001  13.0              13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAc
4740        50          -19070.092  -800961.16  -4157.12000000001  13.0              13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
4741        50          -19070.092  -800961.16  -4157.12000000001  13.0              13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAc
6230        50          -14944.676  -804323.16  -4157.12000000001  13.1000000000004  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6231        50          -14944.676  -804323.16  -4157.12000000001  13.1000000000004  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAc
6318        50          -14178.092  -803212.0   -4157.12000000001  13.0              14.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6319        50          -14178.092  -803212.0   -4157.12000000001  13.0              14.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAc
6400        50          -15951.18   -805782.2   -4157.12000000001  13.1000000000004  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6401        50          -15951.18   -805782.2   -4157.12000000001  13.1000000000004  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAc
sqlite&gt;</pre>
</div>
<div class="highlight-python"><pre>[blyth@belle7 export]$ shapedb.py -ce 100 4570 &gt; $(nginx-htdocs)/wrl/4570.wrl
2013-09-18 16:54:27,945 env.geant4.geometry.export.shapecnf INFO     /home/blyth/env/bin/shapedb.py -ce 100 4570
2013-09-18 16:54:27,945 env.geant4.geometry.export.shapedb INFO     opening /usr/lib/python2.4/site-packages/env/geant4/geometry/export/g4_01.db
2013-09-18 16:54:27,946 env.geant4.geometry.export.shapedb INFO     Operate on 1 shapes, selected by args : [4570]
2013-09-18 16:54:27,966 env.geant4.geometry.export.shapedb INFO     opts.center selected, will translate all 1 shapes such that centroid of all is at origin, original coordinate centroid at (-18063.583999999995, -799502.16000000003, -4157.1200000000053)
2013-09-18 16:54:27,966 env.geant4.geometry.export.shapedb INFO     #        sid        npo          ax          ay          az          dx          dy          dz
2013-09-18 16:54:27,986 env.geant4.geometry.export.shapedb INFO     #       4570         50   -18063.58  -799502.16    -4157.12       13.10       13.00       23.60  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-18 16:54:27,987 env.geant4.geometry.export.shapedb INFO     select src_head||x'0A'||group_concat(x'09'||x'09'||x'09'||x'09'||x'09'||(1*(x-(-18063.584)))||' '||(1*(y-(-799502.16)))||' '||(1*(z-(-4157.12)))||',',x'0A')||x'0A'||src_tail from point join shape on shape.id = point.sid where sid in (4570) group by sid ;</pre>
</div>
<ul class="simple">
<li><a class="reference external" href="http://belle7.nuu.edu.tw/wrl/4570.wrl">http://belle7.nuu.edu.tw/wrl/4570.wrl</a></li>
</ul>
<img alt="../../../../_images/4570.png" src="../../../../_images/4570.png" />
<p>Grotty 50 point (24+24+1+1) representation of a Tubs.
Numerical imprecision of the export is the cause of the grottiness.</p>
<div class="highlight-python"><pre>[blyth@cms01 DDDB]$ find . -name '*.xml' -exec grep -H AmCCo60AcrylicRadius {} \;
./CalibrationSources/sources.xml:          outerRadius="AmCCo60AcrylicRadius" /&gt;
./CalibrationSources/sources.xml:          outerRadius="AmCCo60AcrylicRadius"
./CalibrationSources/sources.xml:          sizeZ="2*AmCCo60AcrylicRadius"/&gt;
./CalibrationSources/sources.xml:          outerRadius="AmCCo60AcrylicRadius"
./CalibrationSources/sources.xml:          outerRadius="AmCCo60AcrylicRadius" /&gt;
./CalibrationSources/parameters.xml:&lt;parameter name="AmCCo60AcrylicRadius" value="6.55*mm"/&gt;
[blyth@cms01 DDDB]$
[blyth@cms01 DDDB]$ find . -name '*.xml' -exec grep -H SSTubeOuterRadius {} \;
./CalibrationSources/sources.xml:            outerRadius="SSTubeOuterRadius"
./CalibrationSources/sources.xml:          outerRadius="SSTubeOuterRadius"
./CalibrationSources/sources.xml:          outerRadius="SSTubeOuterRadius"
./CalibrationSources/sources.xml:          outerRadius="SSTubeOuterRadius"
./CalibrationSources/parameters.xml:&lt;parameter name="SSTubeOuterRadius" value="7.94*mm"/&gt;
[blyth@cms01 DDDB]$</pre>
</div>
</div>
<div class="section" id="initial-hypothesis">
<h3><a class="toc-backref" href="#id8">initial hypothesis</a><a class="headerlink" href="#initial-hypothesis" title="Permalink to this headline">¶</a></h3>
<p>The closeness of the two tubs with difference of radii <cite>7.94-6.55=1.39 mm</cite>
(representing the thin stainless steel source shell) triggered
some overlap (vertex moving) code in the export that results
in the merging of the volumes.</p>
<p>This merging got done twice resulting in exactly the same shape on both occasions.</p>
<ul class="simple">
<li>NOPE: tis simple imprecise export formatting</li>
</ul>
</div>
<div class="section" id="look-for-others-with-those-names">
<h3><a class="toc-backref" href="#id9">Look for others with those names</a><a class="headerlink" href="#look-for-others-with-those-names" title="Permalink to this headline">¶</a></h3>
<p>All six of those names are overlapped:</p>
<div class="highlight-python"><pre>sqlite&gt; select * from xshape where name like '/dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000' ;
sid     npo     sumx    ax      minx    maxx    dx      sumy    ay      miny    maxy    dy      sumz    az      minz    maxz    dz      name
------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ---------------------------------------------------------------------------------------------
4571    50      -90317  -18063  -18070  -18057  13.099  -39975  -79950  -79950  -79949  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000
4659    50      -86484  -17296  -17303  -17290  13.0    -39919  -79839  -79839  -79838  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000
4741    50      -95350  -19070  -19076  -19063  13.0    -40048  -80096  -80096  -80095  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000
6231    50      -74723  -14944  -14951  -14938  13.100  -40216  -80432  -80433  -80431  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000
6319    50      -70890  -14178  -14184  -14171  13.0    -40160  -80321  -80321  -80320  14.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000
6401    50      -79755  -15951  -15957  -15944  13.100  -40289  -80578  -80578  -80577  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000
sqlite&gt;
sqlite&gt; select * from xshape where name like '/dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000' ;
sid     npo     sumx    ax      minx    maxx    dx      sumy    ay      miny    maxy    dy      sumz    az      minz    maxz    dz      name
------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ------  ---------------------------------------------------------------------------------------------
4570    50      -90317  -18063  -18070  -18057  13.099  -39975  -79950  -79950  -79949  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
4658    50      -86484  -17296  -17303  -17290  13.0    -39919  -79839  -79839  -79838  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
4740    50      -95350  -19070  -19076  -19063  13.0    -40048  -80096  -80096  -80095  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6230    50      -74723  -14944  -14951  -14938  13.100  -40216  -80432  -80433  -80431  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6318    50      -70890  -14178  -14184  -14171  13.0    -40160  -80321  -80321  -80320  14.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6400    50      -79755  -15951  -15957  -15944  13.100  -40289  -80578  -80578  -80577  13.0    -20785  -4157.  -4168.  -4145.  23.600  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
sqlite&gt;</pre>
</div>
<p>Visualize, they are distorted small cylinders, widely spaces at same z : making them difficult to see all together : look like dots:</p>
<div class="highlight-python"><pre>[blyth@belle7 export]$ shapedb.py -k '/dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000'  &gt; dupe.wrl
2013-09-13 12:15:19,433 env.geant4.geometry.export.shapecnf INFO     /home/blyth/env/bin/shapedb.py -k /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-13 12:15:19,433 env.geant4.geometry.export.shapedb INFO     opening /usr/lib/python2.4/site-packages/env/geant4/geometry/export/g4_01.db
2013-09-13 12:15:19,458 env.geant4.geometry.export.shapedb INFO     Operate on 6 shapes, selected by opts.around "None" opts.like "/dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000" query
2013-09-13 12:15:19,458 env.geant4.geometry.export.shapedb INFO     #        sid        npo          ax          ay          az          dx          dy          dz
2013-09-13 12:15:19,464 env.geant4.geometry.export.shapedb INFO     #       4570         50   -18063.58  -799502.16    -4157.12       13.10       13.00       23.60  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-13 12:15:19,465 env.geant4.geometry.export.shapedb INFO     #       4658         50   -17296.99  -798390.84    -4157.12       13.00       13.00       23.60  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-13 12:15:19,467 env.geant4.geometry.export.shapedb INFO     #       4740         50   -19070.09  -800961.16    -4157.12       13.00       13.00       23.60  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-13 12:15:19,467 env.geant4.geometry.export.shapedb INFO     #       6230         50   -14944.68  -804323.16    -4157.12       13.10       13.00       23.60  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-13 12:15:19,467 env.geant4.geometry.export.shapedb INFO     #       6318         50   -14178.09  -803212.00    -4157.12       13.00       14.00       23.60  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-13 12:15:19,476 env.geant4.geometry.export.shapedb INFO     #       6400         50   -15951.18  -805782.20    -4157.12       13.10       13.00       23.60  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
2013-09-13 12:15:19,476 env.geant4.geometry.export.shapedb INFO     select src_head||x'0A'||group_concat(x'09'||x'09'||x'09'||x'09'||x'09'||x||' '||y||' '||z||',',x'0A')||x'0A'||src_tail from point join shape on shape.id = point.sid where sid in (4570,4658,4740,6230,6318,6400) group by sid ;

[blyth@belle7 export]$ nginx- ; cp dupe.wrl $(nginx-htdocs)/wrl/</pre>
</div>
<p>Check the viscinity of 4570:</p>
<div class="highlight-python"><pre>[blyth@belle7 wrl]$ shapedb.py -ca  -18063.58,-799502.16,-4157.12,1000 &gt; $(nginx-htdocs)/wrl/around_dupe.wrl
2013-09-13 12:52:23,362 env.geant4.geometry.export.shapecnf INFO     /home/blyth/env/bin/shapedb.py -ca -18063.58,-799502.16,-4157.12,1000
2013-09-13 12:52:23,362 env.geant4.geometry.export.shapedb INFO     opening /usr/lib/python2.4/site-packages/env/geant4/geometry/export/g4_01.db
2013-09-13 12:52:23,389 env.geant4.geometry.export.shapedb INFO     Operate on 151 shapes, selected by opts.around "-18063.58,-799502.16,-4157.12,1000" opts.like "None" query
2013-09-13 12:52:23,411 env.geant4.geometry.export.shapedb INFO     opts.center selected, will translate all 151 shapes such that centroid of all is at origin, original coordinate centroid at (-17853.515780398648, -799347.31567694328, -4392.8840961445603)
2013-09-13 12:52:23,412 env.geant4.geometry.export.shapedb INFO     #        sid        npo          ax          ay          az          dx          dy          dz
2013-09-13 12:52:23,418 env.geant4.geometry.export.shapedb INFO     #       4351        100   -18289.83  -800004.46    -4867.75       60.80       61.00      165.00  /dd/Geometry/AD/lvOIL#pvAdPmtArray#pvAd2inPmt:1#pvHeadonPmtAssy.1
2013-09-13 12:52:23,419 env.geant4.geometry.export.shapedb INFO     #       4352         50   -18289.83  -800004.48    -4909.00       51.90       51.00      112.00  /dd/Geometry/PMT/lvHeadonPmtAssy#pvHeadonPmtGlass.1000
2013-09-13 12:52:23,419 env.geant4.geometry.export.shapedb INFO     #       4353         50   -18289.84  -800004.36    -4909.00       45.90       46.00      106.00  /dd/Geometry/PMT/lvHeadonPmtGlass#pvHeadonPmtVacuum.1000
2013-09-13 12:52:23,419 env.geant4.geometry.export.shapedb INFO     #       4354         50   -18289.84  -800004.36    -4961.50       45.90       46.00        1.00  /dd/Geometry/PMT/lvHeadonPmtVacuum#pvHeadonPmtCathode.1000
2013-09-13 12:52:23,419 env.geant4.geometry.export.shapedb INFO     #       4355         50   -18289.84  -800004.36    -4908.50       45.90       46.00      105.00  /dd/Geometry/PMT/lvHeadonPmtVacuum#pvHeadonPmtBehindCathode.1001
2013-09-13 12:52:23,419 env.geant4.geometry.export.shapedb INFO     #       4356         50   -18289.83  -800004.44    -4826.50       60.80       61.00       53.00  /dd/Geometry/PMT/lvHeadonPmtAssy#pvHeadonPmtBase.1001
2013-09-13 12:52:23,419 env.geant4.geometry.export.shapedb INFO     #       4357         96   -18289.84  -800004.42    -4735.00       73.50       73.00      200.00  /dd/Geometry/AD/lvOIL#pvAdPmtArray#pvAd2inPmt:1#pvHeadonPmtMount.1
2013-09-13 12:52:23,420 env.geant4.geometry.export.shapedb INFO     #       4425        296   -18118.36  -799755.84    -4988.00     4494.30     4495.00       20.00  /dd/Geometry/AD/lvOIL#pvTopReflector.1429
2013-09-13 12:52:23,420 env.geant4.geometry.export.shapedb INFO     #       4426        296   -18118.36  -799755.85    -4988.00     4444.30     4445.00        0.20  /dd/Geometry/AdDetails/lvTopReflector#pvTopRefGap.1000
2013-09-13 12:52:23,420 env.geant4.geometry.export.shapedb INFO     #       4427        578   -18379.17  -799831.91    -4987.95     4440.30     4441.00        0.10  /dd/Geometry/AdDetails/lvTopRefGap#pvTopESR.1000</pre>
</div>
<p>In Instant Reality Player use <cite>File &gt; Open Location</cite> and enter the URL</p>
<ul class="simple">
<li><a class="reference external" href="http://belle7.nuu.edu.tw/wrl/around_dupe.wrl">http://belle7.nuu.edu.tw/wrl/around_dupe.wrl</a></li>
</ul>
</div>
</div>
<div class="section" id="scene-attribute-edits-via-web-interface">
<h2><a class="toc-backref" href="#id10">Scene Attribute edits via web interface</a><a class="headerlink" href="#scene-attribute-edits-via-web-interface" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>S4425 pick large extent volumes to be easy to spot</li>
<li><a class="reference external" href="http://localhost:35668/Node.html?node=S4425">http://localhost:35668/Node.html?node=S4425</a></li>
<li><a class="reference external" href="http://localhost:35668/setFieldValue?node=S4425&amp;field=diffuseColor&amp;value=0+1+0">http://localhost:35668/setFieldValue?node=S4425&amp;field=diffuseColor&amp;value=0+1+0</a></li>
<li><a class="reference external" href="http://localhost:35668/setFieldValue?node=265938224&amp;field=diffuseColor&amp;value=0+1+0">http://localhost:35668/setFieldValue?node=265938224&amp;field=diffuseColor&amp;value=0+1+0</a></li>
<li><a class="reference external" href="http://localhost:35668/setFieldValue?node=265938224&amp;field=5&amp;value=TRUE&amp;link=referer">http://localhost:35668/setFieldValue?node=265938224&amp;field=5&amp;value=TRUE&amp;link=referer</a></li>
</ul>
<p>Toggle the bbox for a volume from commandline, unfortunately need to use internal node id, not my name:</p>
<div class="highlight-python"><pre>simon:export blyth$ curl "http://localhost:35668/setFieldValue?node=265938224&amp;field=5&amp;value=TRUE&amp;link=referer"
simon:export blyth$ curl "http://localhost:35668/setFieldValue?node=265938224&amp;field=5&amp;value=FALSE&amp;link=referer"
simon:export blyth$ curl "http://localhost:35668/setFieldValue?node=265938224&amp;field=5&amp;value=TRUE&amp;link=referer"
simon:export blyth$</pre>
</div>
<p>Works with external names too:</p>
<div class="highlight-python"><pre>simon:export blyth$ curl "http://localhost:35668/setFieldValue?node=S4425&amp;field=5&amp;value=FALSE&amp;link=referer"
simon:export blyth$ curl "http://localhost:35668/setFieldValue?node=S4425&amp;field=5&amp;value=TRUE&amp;link=referer"</pre>
</div>
</div>
<div class="section" id="volume-selection-with-the-dupes-and-context-volumes">
<h2><a class="toc-backref" href="#id11">Volume selection with the dupes and context volumes</a><a class="headerlink" href="#volume-selection-with-the-dupes-and-context-volumes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://belle7.nuu.edu.tw/wrl/adcalib2.wrl">http://belle7.nuu.edu.tw/wrl/adcalib2.wrl</a></li>
</ul>
<div class="highlight-python"><pre>[blyth@belle7 wrl]$ shapedb.py -cq "select sid from xshape where (name like '/dd/Geometry/AD/%' and dx &gt; 1000 and dy &gt; 1000 ) or (name like '/dd/Geometry/CalibrationSources/%' ) ; " &gt; adcalib2.wrl
2013-09-17 12:20:53,485 env.geant4.geometry.export.shapecnf INFO     /home/blyth/env/bin/shapedb.py -cq select sid from xshape where (name like '/dd/Geometry/AD/%' and dx &gt; 1000 and dy &gt; 1000 ) or (name like '/dd/Geometry/CalibrationSources/%' ) ;
2013-09-17 12:20:53,485 env.geant4.geometry.export.shapedb INFO     opening /usr/lib/python2.4/site-packages/env/geant4/geometry/export/g4_01.db
2013-09-17 12:20:53,524 env.geant4.geometry.export.shapedb INFO     Operate on 418 shapes, selected by opts.query "select sid from xshape where (name like '/dd/Geometry/AD/%' and dx &gt; 1000 and dy &gt; 1000 ) or (name like '/dd/Geometry/CalibrationSources/%' ) ; "
2013-09-17 12:20:53,548 env.geant4.geometry.export.shapedb INFO     opts.center selected, will translate all 418 shapes such that centroid of all is at origin, original coordinate centroid at (-16704.83929964064, -802106.49254530168, -4649.1902775441531)

[blyth@belle7 wrl]$ du -hs adcalib2.wrl
2.3M    adcalib2.wrl</pre>
</div>
<div class="section" id="highlight-the-dupes">
<h3><a class="toc-backref" href="#id12">highlight the dupes</a><a class="headerlink" href="#highlight-the-dupes" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>sqlite&gt; select sid,npo,ax,ay,az,dx,dy,dz,name from xshape where name like '/dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000' ;
sid         npo         ax          ay          az                 dx                dy          dz                name
----------  ----------  ----------  ----------  -----------------  ----------------  ----------  ----------------  ----------------------------------------------------------------
4570        50          -18063.584  -799502.16  -4157.12000000001  13.0999999999985  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
4658        50          -17296.992  -798390.84  -4157.12000000001  13.0              13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
4740        50          -19070.092  -800961.16  -4157.12000000001  13.0              13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6230        50          -14944.676  -804323.16  -4157.12000000001  13.1000000000004  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6318        50          -14178.092  -803212.0   -4157.12000000001  13.0              14.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
6400        50          -15951.18   -805782.2   -4157.12000000001  13.1000000000004  13.0        23.6000000000004  /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000</pre>
</div>
<div class="highlight-python"><pre>simon:instant_reality_player blyth$ eai-edit -emissiveColor 1,0,0 -transparency 0 4570 4658 4740 6230 6318 6400
eai-edit is a function
eai-edit ()
{
    type $FUNCNAME;
    jcli-;
    eai-cd;
    javac -cp $(jcli-jar):$(eai-jar) SceneEdit.java &amp;&amp; java -cp $(jcli-jar):$(eai-jar):. SceneEdit $*
}
Browser.Name = "Avalon"
Browser.Version = "V2.3.0 build: R-25322 Jul 18 2013 Mac OS X ppc"
Browser.CurrentSpeed = 1.0
Browser.CurrentFrameRate = 23.016539
Browser.WorldURL = "http://belle7.nuu.edu.tw/wrl/adcalib.wrl"
applyEdit to node : M4570 type : [Material] : org.instantreality.vrml.eai.net.Node@2f8b5a
changeFloat transparency from 0.7 to 0.0
applyEdit to node : M4658 type : [Material] : org.instantreality.vrml.eai.net.Node@7a1767
changeFloat transparency from 0.7 to 0.0
applyEdit to node : M4740 type : [Material] : org.instantreality.vrml.eai.net.Node@968fda
changeFloat transparency from 0.7 to 0.0
applyEdit to node : M6230 type : [Material] : org.instantreality.vrml.eai.net.Node@be41ec
changeFloat transparency from 0.7 to 0.0
applyEdit to node : M6318 type : [Material] : org.instantreality.vrml.eai.net.Node@7ec9f7
changeFloat transparency from 0.7 to 0.0
applyEdit to node : M6400 type : [Material] : org.instantreality.vrml.eai.net.Node@fd918a
changeFloat transparency from 0.7 to 0.0</pre>
</div>
<img alt="../../../../_images/six-dupes.png" src="../../../../_images/six-dupes.png" />
</div>
<div class="section" id="first-degenerate-pair">
<h3><a class="toc-backref" href="#id13">first degenerate pair</a><a class="headerlink" href="#first-degenerate-pair" title="Permalink to this headline">¶</a></h3>
<p>The large y dimension values: <cite>-805788</cite> are resulting in a loss of precision
due to use of default streaming.</p>
<div class="highlight-python"><pre>sqlite&gt; select substr(src,0,600) from shape where id = 6401 ;
#---------- SOLID: /dd/Geometry/CalibrationSources/lvMainSSCavity#pvAmCCo60SourceAcrylic.1000
        Shape {
                appearance Appearance {
                        material Material {
                                diffuseColor 1 1 1
                                transparency 0.7
                        }
                }
                geometry IndexedFaceSet {
                        coord Coordinate {
                                point [
                                        -15954.9 -805788 -4145.32,
                                        -15953.4 -805788 -4145.32,
                                        -15951.7 -805789 -4145.32,
                                        -15950 -805789 -4145.32,
                                        -15948.4 -805788 -4145.32,
                                        -15946.9 -805787 -4145.32,
                                        -15945.8 -805786 -4145.32,
                                        -15945 -805784 -4145.32,
                                        -15944.6 -805783 -4145.32,
                                        -15944.7 -805781 -4145.32,
                                        -15945.3 -8
sqlite&gt;
sqlite&gt;
sqlite&gt;
sqlite&gt; select substr(src,0,600) from shape where id = 6400 ;
#---------- SOLID: /dd/Geometry/CalibrationSources/lvMainSSTube#pvMainSSCavity.1000
        Shape {
                appearance Appearance {
                        material Material {
                                diffuseColor 1 1 1
                                transparency 0.7
                        }
                }
                geometry IndexedFaceSet {
                        coord Coordinate {
                                point [
                                        -15954.9 -805788 -4145.32,
                                        -15953.4 -805788 -4145.32,
                                        -15951.7 -805789 -4145.32,
                                        -15950 -805789 -4145.32,
                                        -15948.4 -805788 -4145.32,
                                        -15946.9 -805787 -4145.32,
                                        -15945.8 -805786 -4145.32,
                                        -15945 -805784 -4145.32,
                                        -15944.6 -805783 -4145.32,
                                        -15944.7 -805781 -4145.32,
                                        -15945.3 -805779 -414</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../booleanprocessor_warnings/" title="VRML2FILE export debugging"
             >next</a> |</li>
        <li class="right" >
          <a href="../instant_reality_player/" title="instant reality player"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >geant4</a> &raquo;</li>
          <li><a href="../../" >Geant4 Geometry Export</a> &raquo;</li>
          <li><a href="../" >VRML2</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>