<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GDML Examination &mdash; Env  documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/highstock/highstock.js"></script>
    <script type="text/javascript" src="../../../../_static/highstock/modules/exporting.js"></script>
    <link rel="top" title="Env  documentation" href="../../../../" />
    <link rel="up" title="GDML" href="../" />
    <link rel="next" title="GDML from ROOT" href="../gdml_root/" />
    <link rel="prev" title="Export GDML" href="../gdml_export/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../gdml_root/" title="GDML from ROOT"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../gdml_export/" title="Export GDML"
             accesskey="P">previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >geant4</a> &raquo;</li>
          <li><a href="../../" >Geant4 Geometry Export</a> &raquo;</li>
          <li><a href="../" accesskey="U">GDML</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Links</h3>
<ul class="this-page-menu">
	<li><a href="/tracs/env"> env </a>  <a href="/tracs/env/timeline"> tl </a> <a href="/repos/env/trunk"> repo </a> <a href="/e"> edocs </a> </li>
	<li><a href="/tracs/heprez"> heprez </a>  <a href="/tracs/heprez/timeline"> tl </a> <a href="/repos/heprez/trunk"> repo</a> <a href="/h">hdocs</a>   </li>
        <li><a href="/e/scm/monitor/" > backup status </a> </li>
</ul>

<h3>Content Skeleton</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../install/">Installing <strong>env</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../base/">Base Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../log/May2012/">LOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../TODO/">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sysadmin/">Sys Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../plot/">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scm/">SCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../trac/">Trac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../root/">ROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sphinxext/">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../matplotlib/">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nose/">nose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../svn/">SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../npy/">Numerical Python, numpy et al</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pypy/">PyPy : faster python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysqlhotcopy/">MySQL hotcopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysql/">MySQL Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sqlite/">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../db/">DB scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../qxml/">QXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fossil/">Fossil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../java/">Java Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pycuda/">pycuda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../">geant4</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../geant4_gpu/">Geant4 GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../geant4_profiling/">Geant4 Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../release_notes/">Geant4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../verbosity/">Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/">Geant4 Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../giga/">GiGa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/">Geant4 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../opticalphoton/">Geant4 Optical Photon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../processes/">Geant4 Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../medical/">Medical Communities Using Geant4 (esp. optical photon)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../">Geant4 Geometry Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../g4py/">g4py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nuwa/">nuwa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../event/">Geant4 Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../geant4_future_doe/">Geant4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../muon_simulation/">muon_simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../chroma/">chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../llvm/">llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../graphics/">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cuda/">cuda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../opencl/">opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../linux/">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cloud/">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../package_management/">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ui/">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debugging/">debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mercurial/">mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../javascript/">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nuwa/">nuwa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ccgpu/">ccgpu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pygame/">pygame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../zeromq/">zeromq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc/">doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../osx/">osx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hg/">hg</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../_sources/geant4/geometry/gdml/gdml_examine.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../gdml_export/"
                        title="previous chapter">Export GDML</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../gdml_root/"
                        title="next chapter">GDML from ROOT</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="gdml-examination">
<h1>GDML Examination<a class="headerlink" href="#gdml-examination" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#todo" id="id1">TODO</a></li>
<li><a class="reference internal" href="#physvol" id="id2">physvol</a></li>
<li><a class="reference internal" href="#vrml2-gdml-mismatch" id="id3">VRML2 GDML mismatch ?</a></li>
<li><a class="reference internal" href="#maybe-the-ad-split-happedns-here" id="id4">Maybe the AD split happedns here</a><ul>
<li><a class="reference internal" href="#pick-a-volume-to-see-whats-going-down-in-the-gdml" id="id5">Pick a volume to see whats going down in the GDML</a></li>
<li><a class="reference internal" href="#compare-vrml2-shape-names-with-physvol-names" id="id6">Compare VRML2 shape names with physvol names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#volume-names" id="id7">volume names</a></li>
</ul>
</div>
<div class="section" id="todo">
<h2><a class="toc-backref" href="#id1">TODO</a><a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>try to create the geometry Russian doll hierarchy (starting from World) from the GDML parse, to grok the format</li>
</ol>
</div>
<div class="section" id="physvol">
<h2><a class="toc-backref" href="#id2">physvol</a><a class="headerlink" href="#physvol" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>2172   &lt;structure&gt;
2173     &lt;volume name="/dd/Geometry/PoolDetails/lvNearTopCover0xbad46a0"&gt;
2174       &lt;materialref ref="/dd/Materials/PPE0xb8310e0"/&gt;
2175       &lt;solidref ref="near_top_cover_box0xbad4490"/&gt;
2176     &lt;/volume&gt;
2177     &lt;volume name="/dd/Geometry/RPC/lvRPCStrip0xb839910"&gt;
2178       &lt;materialref ref="/dd/Materials/MixGas0xbad5d28"/&gt;
2179       &lt;solidref ref="RPCStrip0xb751cc0"/&gt;
2180     &lt;/volume&gt;
2181     &lt;volume name="/dd/Geometry/RPC/lvRPCGasgap140xb7491f8"&gt;
2182       &lt;materialref ref="/dd/Materials/Air0xb830740"/&gt;
2183       &lt;solidref ref="RPCGasgap140xbad5938"/&gt;
2184       &lt;physvol name="/dd/Geometry/RPC/lvRPCGasgap14#pvStrip14Array#pvStrip14ArrayOne:1#pvStrip14Unit0xbc1e930"&gt;
2185         &lt;volumeref ref="/dd/Geometry/RPC/lvRPCStrip0xb839910"/&gt;
2186         &lt;position name="/dd/Geometry/RPC/lvRPCGasgap14#pvStrip14Array#pvStrip14ArrayOne:1#pvStrip14Unit0xbc1e930_pos" unit="mm" x="-910" y="0" z="0"/&gt;
2187         &lt;rotation name="/dd/Geometry/RPC/lvRPCGasgap14#pvStrip14Array#pvStrip14ArrayOne:1#pvStrip14Unit0xbc1e930_rot" unit="deg" x="0" y="0" z="-90"/&gt;
2188       &lt;/physvol&gt;
2189       &lt;physvol name="/dd/Geometry/RPC/lvRPCGasgap14#pvStrip14Array#pvStrip14ArrayOne:2#pvStrip14Unit0xbc1f8b8"&gt;
2190         &lt;volumeref ref="/dd/Geometry/RPC/lvRPCStrip0xb839910"/&gt;
2191         &lt;position name="/dd/Geometry/RPC/lvRPCGasgap14#pvStrip14Array#pvStrip14ArrayOne:2#pvStrip14Unit0xbc1f8b8_pos" unit="mm" x="-650" y="0" z="0"/&gt;
2192         &lt;rotation name="/dd/Geometry/RPC/lvRPCGasgap14#pvStrip14Array#pvStrip14ArrayOne:2#pvStrip14Unit0xbc1f8b8_rot" unit="deg" x="0" y="0" z="-90"/&gt;
2193       &lt;/physvol&gt;</pre>
</div>
<p>Divide by 2 for open/close XML tags:</p>
<div class="highlight-python"><pre>[blyth@belle7 gdml]$ grep physvol $LOCAL_BASE/env/geant4/geometry/gdml/g4_01.gdml | echo $(( $(wc -l)/2 ))
5642</pre>
</div>
<div class="highlight-python"><pre>simon:gdml blyth$ echo "select count(*) from physvol ;" | sqlite3 $LOCAL_BASE/env/geant4/geometry/gdml/g4_01.gdml.db
5642</pre>
</div>
<p>Matches the distinct name count in shapedb from vrml2 file:</p>
<div class="highlight-python"><pre>sqlite&gt; select count(*) from shape ;
12229
sqlite&gt; select count(distinct(name)) from shape ;
5642
sqlite&gt; select count(distinct(hash)) from shape ;
12223
sqlite&gt; select count(distinct(substr(name,0,instr(name,'.')))) from shape  ;
5642</pre>
</div>
<p>ROOT Load of GDML, counts 12230 nodes matching the VRML2 shape count (assume extra 1 is world that was culled in VRML2):</p>
<div class="highlight-python"><pre>root [0]  TGeoManager::Import("/data1/env/local/env/geant4/geometry/gdml/g4_01.gdml")
Info in &lt;TGeoManager::Import&gt;: Reading geometry from file: /data1/env/local/env/geant4/geometry/gdml/g4_01.gdml
Info in &lt;TGeoManager::TGeoManager&gt;: Geometry Geometry, default geometry created
Error: Unsupported GDML Tag Used :isotope. Please Check Geometry/Schema.
Error: Unsupported GDML Tag Used :atom. Please Check Geometry/Schema.
Error: Unsupported GDML Tag Used :fraction. Please Check Geometry/Schema.
...
Info in &lt;TGeoManager::SetTopVolume&gt;: Top volume is World. Master volume is World
Info in &lt;TGeoManager::CheckGeometry&gt;: Fixing runtime shapes...
Info in &lt;TGeoManager::CheckGeometry&gt;: ...Nothing to fix
Info in &lt;TGeoManager::CloseGeometry&gt;: Counting nodes...
Info in &lt;TGeoManager::Voxelize&gt;: Voxelizing...
Info in &lt;TGeoManager::CloseGeometry&gt;: Building cache...
Info in &lt;TGeoNavigator::BuildCache&gt;: --- Maximum geometry depth set to 100
Info in &lt;TGeoManager::CloseGeometry&gt;: 12230 nodes/ 249 volume UID's in default geometry
Info in &lt;TGeoManager::CloseGeometry&gt;: ----------------modeler ready----------------
(class TGeoManager*)0x89be148
root [1]</pre>
</div>
</div>
<div class="section" id="vrml2-gdml-mismatch">
<h2><a class="toc-backref" href="#id3">VRML2 GDML mismatch ?</a><a class="headerlink" href="#vrml2-gdml-mismatch" title="Permalink to this headline">¶</a></h2>
<p>Hmm, was expecting the phyvol to correspond to the 12k ?</p>
<blockquote>
<div><ul class="simple">
<li>so what are all the other VRML2 shapes <cite>12229-5642=6587</cite></li>
<li>clearly the algorithmically transformed/duplicated volumes, eg 2 AD, 672 PMT</li>
<li>the structure of the GDML heirarchy of volume/physvol/solid is doing the duplicatation that VRML2 spelt out in shapes</li>
</ul>
</div></blockquote>
<div class="highlight-python"><pre>sqlite&gt; select count(*) as N, name, max(dx)||":"||max(dy)||":"||max(dz) as dxyz from xshape group by name having N&gt;1;
N           name                                                                                                                                                                                                      dxyz
----------  ---------------------------------------------------------------------------------------------                                                                                                             ----------------------------
2           /dd/Geometry/AD/lvADE#pvAdVertiCableTray.1005                                                                                                                                                             66.2000000000007:72.0:5000.0
2           /dd/Geometry/AD/lvADE#pvCenterCalibE.1001                                                                                                                                                                 798.1:798.0:688.98
2           /dd/Geometry/AD/lvADE#pvElectricalDistributionBoxE.1007                                                                                                                                                   608.200000000001:609.0:260.3
2           /dd/Geometry/AD/lvADE#pvGCatCalibE.1004
...
2           /dd/Geometry/AD/lvLSO#pvIAV.1000                                                                                                                                                                          3126.0:3126.0:3174.49
2           /dd/Geometry/AD/lvOAV#pvLSO.1000                                                                                                                                                                          3958.9:3959.0:4076.53
...
672         /dd/Geometry/PMT/lvPmtHemi#pvPmtHemiVacuum.1000                                                                                                                                                           297.0:297.0:292.5
672         /dd/Geometry/PMT/lvPmtHemiVacuum#pvPmtHemiBottom.1001                                                                                                                                                     196.100000000002:196.0:196.2
672         /dd/Geometry/PMT/lvPmtHemiVacuum#pvPmtHemiCathode.1000                                                                                                                                                    196.100000000002:196.0:196.2
672         /dd/Geometry/PMT/lvPmtHemiVacuum#pvPmtHemiDynode.1002                                                                                                                                                     174.900000000001:175.0:166.0</pre>
</div>
</div>
<div class="section" id="maybe-the-ad-split-happedns-here">
<h2><a class="toc-backref" href="#id4">Maybe the AD split happedns here</a><a class="headerlink" href="#maybe-the-ad-split-happedns-here" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>26985       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:1#pvLegInOWSUnit0xb905030"&gt;
26986         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
26987         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:1#pvLegInOWSUnit0xb905030_pos" unit="mm" x="4713" y="1842" z="-4456"/&gt;
26988       &lt;/physvol&gt;
26989       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:2#pvLegInOWSUnit0xc12ecb0"&gt;
26990         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
26991         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:2#pvLegInOWSUnit0xc12ecb0_pos" unit="mm" x="1029" y="1842" z="-4456"/&gt;
26992         &lt;rotation name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:2#pvLegInOWSUnit0xc12ecb0_rot" unit="deg" x="0" y="0" z="-90"/&gt;
26993       &lt;/physvol&gt;
26994       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:3#pvLegInOWSUnit0xb76f880"&gt;
26995         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
26996         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:3#pvLegInOWSUnit0xb76f880_pos" unit="mm" x="1029" y="-1842" z="-4456"/&gt;
26997         &lt;rotation name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:3#pvLegInOWSUnit0xb76f880_rot" unit="deg" x="0" y="0" z="-180"/&gt;
26998       &lt;/physvol&gt;
26999       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:4#pvLegInOWSUnit0xc4c26e0"&gt;
27000         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
27001         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:4#pvLegInOWSUnit0xc4c26e0_pos" unit="mm" x="4713" y="-1842" z="-4456"/&gt;
27002         &lt;rotation name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE1OWSLegs#pvLegInOWS:4#pvLegInOWSUnit0xc4c26e0_rot" unit="deg" x="0" y="0" z="90"/&gt;
27003       &lt;/physvol&gt;
27004       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:1#pvLegInOWSUnit0xc4c27e0"&gt;
27005         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
27006         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:1#pvLegInOWSUnit0xc4c27e0_pos" unit="mm" x="-1029" y="1842" z="-4456"/&gt;
27007       &lt;/physvol&gt;
27008       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:2#pvLegInOWSUnit0xc4c2890"&gt;
27009         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
27010         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:2#pvLegInOWSUnit0xc4c2890_pos" unit="mm" x="-4713" y="1842" z="-4456"/&gt;
27011         &lt;rotation name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:2#pvLegInOWSUnit0xc4c2890_rot" unit="deg" x="0" y="0" z="-90"/&gt;
27012       &lt;/physvol&gt;
27013       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:3#pvLegInOWSUnit0xc4c2990"&gt;
27014         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
27015         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:3#pvLegInOWSUnit0xc4c2990_pos" unit="mm" x="-4713" y="-1842" z="-4456"/&gt;
27016         &lt;rotation name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:3#pvLegInOWSUnit0xc4c2990_rot" unit="deg" x="0" y="0" z="-180"/&gt;
27017       &lt;/physvol&gt;
27018       &lt;physvol name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:4#pvLegInOWSUnit0xc4c2a90"&gt;
27019         &lt;volumeref ref="/dd/Geometry/PoolDetails/lvLegInOWSTub0xc4c2208"/&gt;
27020         &lt;position name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:4#pvLegInOWSUnit0xc4c2a90_pos" unit="mm" x="-1029" y="-1842" z="-4456"/&gt;
27021         &lt;rotation name="/dd/Geometry/Pool/lvNearPoolOWS#pvNearADE2OWSLegs#pvLegInOWS:4#pvLegInOWSUnit0xc4c2a90_rot" unit="deg" x="0" y="0" z="90"/&gt;
27022       &lt;/physvol&gt;</pre>
</div>
<div class="section" id="pick-a-volume-to-see-whats-going-down-in-the-gdml">
<h3><a class="toc-backref" href="#id5">Pick a volume to see whats going down in the GDML</a><a class="headerlink" href="#pick-a-volume-to-see-whats-going-down-in-the-gdml" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>simon:~ blyth$ echo "select id,uname,name from physvol where name like '/dd/Geometry/AD/lvOAV#pvLSO%' ;" |  sqlite3 $LOCAL_BASE/env/geant4/geometry/gdml/g4_01.gdml.db
377 /dd/Geometry/AD/lvOAV#pvLSO0xba431e8  /dd/Geometry/AD/lvOAV#pvLSO</pre>
</div>
<div class="highlight-python"><pre>4064     &lt;volume name="/dd/Geometry/AD/lvOAV0xb78abc0"&gt;
4065       &lt;materialref ref="/dd/Materials/Acrylic0xb85a2d8"/&gt;
4066       &lt;solidref ref="oav0xb78bb68"/&gt;
4067       &lt;physvol name="/dd/Geometry/AD/lvOAV#pvLSO0xba431e8"&gt;
4068         &lt;volumeref ref="/dd/Geometry/AD/lvLSO0xbac5950"/&gt;
4069         &lt;position name="/dd/Geometry/AD/lvOAV#pvLSO0xba431e8_pos" unit="mm" x="0" y="0" z="31.5"/&gt;
4070       &lt;/physvol&gt;
4071       &lt;physvol name="/dd/Geometry/AD/lvOAV#pvOcrGdsLsoInOav0xbc16ab8"&gt;
4072         &lt;volumeref ref="/dd/Geometry/AdDetails/lvOcrGdsLsoInOav0xbc15650"/&gt;
4073         &lt;position name="/dd/Geometry/AD/lvOAV#pvOcrGdsLsoInOav0xbc16ab8_pos" unit="mm" x="0" y="0" z="2024.81037191693"/&gt;
4074       &lt;/physvol&gt;
4075       &lt;physvol name="/dd/Geometry/AD/lvOAV#pvOcrCalLsoInOav0xbc16860"&gt;
4076         &lt;volumeref ref="/dd/Geometry/AdDetails/lvOcrCalLsoInOav0xbc172a0"/&gt;
4077         &lt;position name="/dd/Geometry/AD/lvOAV#pvOcrCalLsoInOav0xbc16860_pos" unit="mm" x="0" y="0" z="2024.81037191693"/&gt;
4078       &lt;/physvol&gt;
4079     &lt;/volume&gt;</pre>
</div>
</div>
<div class="section" id="compare-vrml2-shape-names-with-physvol-names">
<h3><a class="toc-backref" href="#id6">Compare VRML2 shape names with physvol names</a><a class="headerlink" href="#compare-vrml2-shape-names-with-physvol-names" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>simon:gdml blyth$ vi ~/.sqliterc  # avoid truncation with ".width 256"
simon:gdml blyth$ echo "select distinct(name) from physvol order by name ;" | sqlite3 $LOCAL_BASE/env/geant4/geometry/gdml/g4_01.gdml.db &gt; physvol_names

simon:gdml blyth$ scp N:/data1/env/local/env/geant4/geometry/vrml2/g4_01.db /usr/local/env/geant4/geometry/vrml2/
simon:gdml blyth$ echo "select distinct(name) from shape order by name ;" | sqlite3 $LOCAL_BASE/env/geant4/geometry/vrml2/g4_01.db &gt; shape_names</pre>
</div>
<p>Apparently the VRML2 names have been de-duped via the <cite>.1005</cite> etc:</p>
<div class="highlight-python"><pre>simon:gdml blyth$ diff -y physvol_names shape_names | head -10
name                                                            name
-------------------------------------------------------------   -------------------------------------------------------------
/dd/Geometry/AD/lvADE#pvAdVertiCableTray                      | /dd/Geometry/AD/lvADE#pvAdVertiCableTray.1005
/dd/Geometry/AD/lvADE#pvCenterCalibE                          | /dd/Geometry/AD/lvADE#pvCenterCalibE.1001
/dd/Geometry/AD/lvADE#pvElectricalDistributionBoxE            | /dd/Geometry/AD/lvADE#pvElectricalDistributionBoxE.1007
/dd/Geometry/AD/lvADE#pvGCatCalibE                            | /dd/Geometry/AD/lvADE#pvGCatCalibE.1004
/dd/Geometry/AD/lvADE#pvGasDistributionBoxE                   | /dd/Geometry/AD/lvADE#pvGasDistributionBoxE.1006
/dd/Geometry/AD/lvADE#pvMOClarityBoxE                         | /dd/Geometry/AD/lvADE#pvMOClarityBoxE.1008
/dd/Geometry/AD/lvADE#pvOffCenterCalibE                       | /dd/Geometry/AD/lvADE#pvOffCenterCalibE.1003
/dd/Geometry/AD/lvADE#pvOflTnkContainer                       | /dd/Geometry/AD/lvADE#pvOflTnkContainer.1002

simon:gdml blyth$ diff -y physvol_names shape_names | tail -10
/dd/Geometry/Sites/lvNearHallBot#pvNearHallRadSlabs#pvNearHal | /dd/Geometry/Sites/lvNearHallBot#pvNearHallRadSlabs#pvNearHal
/dd/Geometry/Sites/lvNearHallBot#pvNearPoolDead               | /dd/Geometry/Sites/lvNearHallBot#pvNearPoolDead.1000
/dd/Geometry/Sites/lvNearHallTop#pvNearRPCRoof                | /dd/Geometry/Sites/lvNearHallTop#pvNearRPCRoof.1003
/dd/Geometry/Sites/lvNearHallTop#pvNearRPCSptRoof             | /dd/Geometry/Sites/lvNearHallTop#pvNearRPCSptRoof.1004
/dd/Geometry/Sites/lvNearHallTop#pvNearTeleRpc#pvNearTeleRpc: | /dd/Geometry/Sites/lvNearHallTop#pvNearTeleRpc#pvNearTeleRpc:
/dd/Geometry/Sites/lvNearHallTop#pvNearTeleRpc#pvNearTeleRpc: | /dd/Geometry/Sites/lvNearHallTop#pvNearTeleRpc#pvNearTeleRpc:
/dd/Geometry/Sites/lvNearHallTop#pvNearTopCover               | /dd/Geometry/Sites/lvNearHallTop#pvNearTopCover.1000
/dd/Geometry/Sites/lvNearSiteRock#pvNearHallBot               | /dd/Geometry/Sites/lvNearSiteRock#pvNearHallBot.1001
/dd/Geometry/Sites/lvNearSiteRock#pvNearHallTop               | /dd/Geometry/Sites/lvNearSiteRock#pvNearHallTop.1000
/dd/Structure/Sites/db-rock                                   | /dd/Structure/Sites/db-rock.1000
simon:gdml blyth$</pre>
</div>
<p>Using a very recent sqlite3 (for the <em>instr</em> function) chop off the VRML2 de-dupe:</p>
<div class="highlight-python"><pre>[blyth@belle7 gdml]$ sqlite3-path
[blyth@belle7 gdml]$ sqlite3 -version
-- Loading resources from /home/blyth/.sqliterc

3.8.0.2 2013-09-03 17:11:13 7dd4968f235d6e1ca9547cda9cf3bd570e1609ef

[blyth@belle7 gdml]$ vi ~/.sqliterc
[blyth@belle7 gdml]$ echo "select distinct(substr(name,0,instr(name,'.'))) as name from shape order by name ;" | sqlite3 $LOCAL_BASE/env/geant4/geometry/vrml2/g4_01.db  &gt; shape_names_2
simon:gdml blyth$ scp N:env/geant4/geometry/gdml/shape_names_2 .
simon:gdml blyth$ diff physvol_names shape_names_2
simon:gdml blyth$</pre>
</div>
<p>Thus there are exactly the same VRML2 de-duped distinct shape names as GDML physvol names.</p>
</div>
</div>
<div class="section" id="volume-names">
<h2><a class="toc-backref" href="#id7">volume names</a><a class="headerlink" href="#volume-names" title="Permalink to this headline">¶</a></h2>
<p>Only 249 <cite>volume/&#64;name</cite> in the GDML:</p>
<div class="highlight-python"><pre>simon:gdml blyth$ grep volume\  $LOCAL_BASE/env/geant4/geometry/gdml/g4_01.gdml
    &lt;volume name="/dd/Geometry/PoolDetails/lvNearTopCover0xbad46a0"&gt;
    &lt;volume name="/dd/Geometry/RPC/lvRPCStrip0xb839910"&gt;
    &lt;volume name="/dd/Geometry/RPC/lvRPCGasgap140xb7491f8"&gt;
    &lt;volume name="/dd/Geometry/RPC/lvRPCBarCham140xbad5978"&gt;
    &lt;volume name="/dd/Geometry/RPC/lvRPCGasgap230xb83ee78"&gt;
    ...
    &lt;volume name="/dd/Geometry/RadSlabs/lvNearRadSlab80xc505ff8"&gt;
    &lt;volume name="/dd/Geometry/RadSlabs/lvNearRadSlab90xc632930"&gt;
    &lt;volume name="/dd/Geometry/Sites/lvNearHallBot0xb7dd4a8"&gt;
    &lt;volume name="/dd/Geometry/Sites/lvNearSiteRock0xb82e578"&gt;
    &lt;volume name="World0xc6337a8"&gt;
simon:gdml blyth$ grep volume\  $LOCAL_BASE/env/geant4/geometry/gdml/g4_01.gdml | wc -l
     249

simon:gdml blyth$ echo "select count(*) from volume ;" | sqlite3 /usr/local/env/geant4/geometry/gdml/g4_01.gdml.db
249</pre>
</div>
<div class="sidebar">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../gdml_root/" title="GDML from ROOT"
             >next</a> |</li>
        <li class="right" >
          <a href="../gdml_export/" title="Export GDML"
             >previous</a> |</li>
    <li><a href="/tracs/env/timeline">env</a> &raquo;</li>
    
        <li><a href="../../../../">Env  documentation</a> &raquo;</li>

          <li><a href="../../../" >geant4</a> &raquo;</li>
          <li><a href="../../" >Geant4 Geometry Export</a> &raquo;</li>
          <li><a href="../" >GDML</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Simon C Blyth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>